System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///index-44e09375.js",["cc"],(function(t,e){var n,i,r,o,a,s,u,c,l,h,f,p,d,y,g,_,m,b,v,w,E,A,S,R,O,T,C,F,P,N,L,x,I,D,k,z,U,B,j,M,V,G,q,H,W,K,Y;return{setters:[function(t){n=t.cclegacy,i=t.director,r=t.Node,o=t.find,a=t.Camera,s=t.Vec3,u=t.CCObject,c=t._decorator,l=t.Button,h=t.Toggle,f=t.Rect,p=t.Component,d=t.Prefab,y=t.instantiate,g=t.Enum,_=t.UITransform,m=t.view,b=t.Vec2,v=t.UI,w=t.StencilManager,E=t.gfx,A=t.math,S=t.CCInteger,R=t.NodeEventType,O=t.Widget,T=t.UIOpacity,C=t.Tween,F=t.tween,P=t.v3,N=t.Quat,L=t.resources,x=t.JsonAsset,I=t.SpriteFrame,D=t.assetManager,k=t.Texture2D,z=t.AudioClip,U=t.game,B=t.Game,j=t.System,M=t.ProgressBar,V=t.Label,G=t.Canvas,q=t.CCString,H=t.screen,W=t.AudioSource,K=t.profiler,Y=t.js}],execute:function(){function e(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e=t("f",(function(){return i}));var n,i={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(n){h=function(t,e,n){return t[e]=n}}function f(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),s=new N(i||[]);return a(o,"_invoke",{value:T(t,n,s)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}i.wrap=f;var d="suspendedStart",y="executing",g="completed",_={};function m(){}function b(){}function v(){}var w={};h(w,u,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(L([])));A&&A!==r&&o.call(A,u)&&(w=A);var S=v.prototype=m.prototype=Object.create(w);function R(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,r,a,s){var u=p(t[i],t,r);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function T(t,e,i){var r=d;return function(o,a){if(r===y)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw a;return{value:n,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var u=C(s,i);if(u){if(u===_)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=y;var c=p(t,e,i);if("normal"===c.type){if(r=i.done?g:"suspendedYield",c.arg===_)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=g,i.method="throw",i.arg=c.arg)}}}function C(t,e){var i=e.method,r=t.iterator[i];if(r===n)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=n,C(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),_;var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,_;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,_):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,_)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function L(t){if(t||""===t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return r.next=r}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=v,a(S,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:b,configurable:!0}),b.displayName=h(v,l,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,h(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},i.awrap=function(t){return{__await:t}},R(O.prototype),h(O.prototype,c,(function(){return this})),i.AsyncIterator=O,i.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var a=new O(f(t,e,n,r),o);return i.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},R(S),h(S,l,"Generator"),h(S,u,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},i.values=L,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:L(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),_}},i}function Z(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}function J(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){Z(o,i,r,a,s,"next",t)}function s(t){Z(o,i,r,a,s,"throw",t)}a(void 0)}))}}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"))?o:String(o)),i)}var r,o}function X(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $(){return($=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function tt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,et(t,e)}function et(t,e){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function rt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function at(t,e,n,i,r){var o={};return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}t({_:at,a:tt,b:ot,c:nt,e:J,f:e,g:wt,h:function(t,e){for(var n=i.getScene(),a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];if(isNullish(e)||"/"===e)return n.getChildByName(t);if(isStr(e))return n.getChildByPath([e].concat(s,[t]).join("/"));var c=e instanceof r?e:e.node;if(!c)return null;var l,h,f=s.head;if("/"===f)return n.getChildByName(t);if("."===f)return null!=(l=null==(h=c.parent)?void 0:h.getChildByName(t))?l:null;if("/."===f||void 0===f)return c.getChildByName(t);if("/.."===f)return Et(t,[c]);if(".."===f){for(;c.parent;)if((c=c.parent).name===t)return c;return null}return o([].concat(s,[t]).join("/"),c)},i:X,j:Pt,k:rt,l:vt,m:function(t){if(!t.parent)return;t.setSiblingIndex(0)},t:Ft}),n._RF.push({},"8d7f1aSUZ1AKYeSBIdfQDaU","notifications",void 0);var st=t("N",{Time:{TICK:"__cfw__.Time:TICK",POST_TICK:"__cfw__.Time:POST_TICK",SECOND:"__cfw__.Time:SECOND",MINUTE:"__cfw__.Time:MINUTE",SPAN:"__cfw__.Time:SPAN"},UI:{ENABLE_UI_SORTING:"__cfw__.UI:ENABLE_UI_SORTING",DISABLE_UI_SORTING:"__cfw__.UI:DISABLE_UI_SORTING"}}),ut={OPEN:"__cfw__.UI:OPEN",CLOSE:"__cfw__.UI:CLOSE",INFO:"__cfw__.UI:INFO",REGISTER:"__cfw__.UI:REGISTER",UNREGISTER:"__cfw__.UI:UNREGISTER"},ct={DEFAULT_BUTTON:"__cfw__.Audio:DEFAULT_BUTTON",DEFAULT_TOGGLE:"__cfw__.Audio:DEFAULT_TOGGLE"};n._RF.pop(),n._RF.push({},"92c0bbxljpKSJ9ZME5Ldee1","constants",void 0);var lt=function(t){return t[t.NONE=0]="NONE",t[t.UP=1]="UP",t[t.UP_RIGHT=2]="UP_RIGHT",t[t.RIGHT=3]="RIGHT",t[t.DOWN_RIGHT=4]="DOWN_RIGHT",t[t.DOWN=5]="DOWN",t[t.DOWN_LEFT=6]="DOWN_LEFT",t[t.LEFT=7]="LEFT",t[t.UP_LEFT=8]="UP_LEFT",t}({});n._RF.pop(),n._RF.push({},"9f828FU/NZM5JLQwsUDCjh9","index",void 0),n._RF.pop(),n._RF.push({},"3a9f7+qDBpKD6JACL0z4Cse","notifier",void 0);var ht=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e=new Map),this.name=t,this._map=e}var e=t.prototype;return e.attach=function(t,e,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=0),isEmpty(t)&&console.warn("attach empty type"),r=isNum(r)?r:0,Array.isArray(this._map.get(t))||this._map.set(t,[]);for(var o,a=this._map.get(t),s=rt(a);!(o=s()).done;){var u=o.value,c=u.handler,l=u.observer;if(e===c&&n&&n===l)return console.warn("duplicate attached"),!1}var h=a.findIndex((function(t){return t.priority<r})),f={handler:e,observer:n,priority:r,once:i};return h<0?a.push(f):a.splice(h,0,f),!0},e.detach=function(t,e,n){var i=this._map.get(t),r=0;if(notEmptyArr(i))for(var o=0;o<i.length;o++){var a=i[o],s=a.handler,u=a.observer;(!!n&&n===u&&e===s||!n&&e===s)&&(i.splice(o,1),o--,r++)}return r},e.unload=function(t){var e=0;if(t)for(var n=0,i=Array.from(this._map.values());n<i.length;n++)for(var r=i[n],o=0;o<r.length;o++){t===r[o].observer&&(r.splice(o,1),o--,e++)}return e},e.dispatch=function(t){var e=this._map.get(t);if(notEmptyArr(e)){for(var n=e.length,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<n;a++){var s=e[a],u=s.observer,c=s.handler,l=s.once;try{Function.invoke.apply(Function,[c,u].concat(r))}catch(t){console.error(t)}l&&(e.splice(a,1),a--)}return n}return 0},e.hasType=function(t){return notEmptyArr(this._map.get(t))},e.hasHandler=function(t,e){for(var n,i=rt(this._map.values());!(n=i()).done;)for(var r,o=rt(n.value);!(r=o()).done;){var a=r.value,s=a.handler,u=a.observer;if(!u&&t===s)return!0;if(u&&e===u&&t===s)return!0}return!1},e.clear=function(t){var e=this._map.has(t);return e&&this._map.delete(t),e},e.clearAll=function(){this._map.clear()},t}();n._RF.pop(),n._RF.push({},"55ca5J324ZI1agsZ7ME7IeR","boot",void 0);var ft=new ht("cfw-global"),pt=new ht("cfw-bridge"),dt=new ht("cfw-inner"),yt=[],gt=[],_t=[],mt=[],bt={};function vt(t,e){for(var n,a=i.getScene(),s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];if(isNullish(e)||"/"===e)return a.getComponentInChildren(t);if(isStr(e))return null==(n=a.getChildByPath([e].concat(u).join("/")))?void 0:n.getComponent(t);var l=e instanceof r?e:e.node;if(!l)return null;var h,f=u.head;if("/"===f)return a.getComponentInChildren(t);if("."===f)return null==(h=l.parent)?void 0:h.getComponentInChildren(t);if("/."===f||void 0===f)return l.getComponentInChildren(t);if("/.."===f)return At(t,[l]);if(".."===f){for(;l.parent;){var p=(l=l.parent).getComponent(t);if(p)return p}return null}return(l=o(u.join("/"),l))?l.getComponent(t):null}function wt(){for(var t,e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return notEmptyArr(r)?vt.apply(void 0,[a].concat(r)):null!=(t=null!=(e=vt(a,"Main Camera"))?e:i.getScene().getComponentInChildren(a))?t:null}function Et(t,e){for(var n,i=[],r=rt(e);!(n=r()).done;){var o=n.value,a=o.getChildByName(t);if(!a)return a;i.push.apply(i,o.children)}return Et(t,i)}function At(t,e){for(var n,i=[],r=rt(e);!(n=r()).done;){var o=n.value,a=o.getComponentInChildren(t);if(!a)return a;i.push.apply(i,o.children)}return At(t,i)}n._RF.pop(),n._RF.push({},"3ee87YGAddHU4MhWAG8W9GP","finder",void 0),n._RF.pop();var St=new(function(){function t(){this._registry={},this._moduleCache={}}var e=t.prototype;return e.define=function(t,e,n){this._registry[t]={factory:e,resolveMap:n}},e.require=function(t){return this._require(t)},e.throwInvalidWrapper=function(t,e){throw new Error("Module '"+t+"' imported from '"+e+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},e._require=function(t,e){var n=this._moduleCache[t];if(n)return n.exports;var i={id:t,exports:{}};return this._moduleCache[t]=i,this._tryModuleLoad(i,t),i.exports},e._resolve=function(t,e){return this._resolveFromInfos(t,e)||this._throwUnresolved(t,e)},e._resolveFromInfos=function(t,e){var n,i;return t in cjsInfos?t:e&&null!=(n=null==(i=cjsInfos[e])?void 0:i.resolveCache[t])?n:void 0},e._tryModuleLoad=function(t,e){var n=!0;try{this._load(t,e),n=!1}finally{n&&delete this._moduleCache[e]}},e._load=function(t,e){var n=this._loadWrapper(e),i=n.factory,r=n.resolveMap,o=this._createRequire(t),a=r?this._createRequireWithResolveMap("function"==typeof r?r():r,o):o;i(t.exports,a,t)},e._loadWrapper=function(t){return t in this._registry?this._registry[t]:this._loadHostProvidedModules(t)},e._loadHostProvidedModules=function(t){return{factory:function(e,n,i){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+t+"'.");try{i.exports=require(t)}catch(e){throw new Error("Exception thrown when calling host defined require('"+t+"').",{cause:e})}}}},e._createRequire=function(t){var e=this;return function(n){return e._require(n,t)}},e._createRequireWithResolveMap=function(t,e){return function(n){var i=t[n];if(i)return e(i);throw new Error("Unresolved specifier "+n)}},e._throwUnresolved=function(t,e){throw new Error("Unable to resolve "+t+" from "+parent+".")},t}()),Rt="file:///E:/selfspace/newbase/demo-collection/cocosmos/node_modules/@dusky/ts-common/dist/index.js";function Ot(t){return"function"==typeof t&&/^class\s/.test(Function.prototype.toString.call(t))}St.define(Rt,(function(t,e,n,i,r){!function(){var t={605:function(){var t=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Array.fill=function(t,e){return void 0===e&&(e=1),new Array(e).fill(t)},Array.nature=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1);var i=Array.from({length:t-e+1},(function(t,n){return n+e}));return 1===n?i:i.filter((function(t){return(t-e)%n==0}))},Array.flatten=function(t){if(!notEmptyArr(t))return[];var e=[];return t.forEach((function(t){notEmptyArr(t)?e.push.apply(e,Array.flatten(t)):e.push(t)})),e},Object.defineProperties(Array.prototype,{head:{enumerable:!1,configurable:!0,get:function(){return this[0]}},tail:{enumerable:!1,configurable:!0,get:function(){return this[this.length-1]}}}),Array.prototype.heads=function(t){return this.slice(0,t)},Array.prototype.tails=function(e){return e>=this.length?t([],this,!0):this.slice(this.length-e)},Array.prototype.copy=function(){return t([],this,!0)},Array.prototype.loopAt=function(t){return notEmptyArr(this)?this[t%this.length]:void 0},Array.prototype.random=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=notEmptyArr(e)?(t=this.copy()).remove.apply(t,e):this;return notEmptyArr(i)?i[Math.randomInt(0,i.length-1)]:void 0},Array.prototype.contains=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.every((function(e){return t.includes(e)}))},Array.prototype.excludes=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.every((function(e){return!t.includes(e)}))},Array.prototype.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.every((function(e){return t.some((function(t){return Object.is(e,t)}))}))},Array.prototype.notAll=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.some((function(e){return t.every((function(t){return!Object.is(e,t)}))}))},Array.prototype.containsInstance=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.some((function(e){return t.some((function(t){return t instanceof e}))}))},Array.prototype.allInstance=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.every((function(e){return t.every((function(t){return t instanceof e}))}))},Array.prototype.unique=function(){var t=new Set(this);return this.length=0,this.push.apply(this,Array.from(t)),this},Array.prototype.clean=function(){for(var t=0;t<this.length;t++)null!==this[t]&&void 0!==this[t]&&""!==this[t]||(this.splice(t,1),t--);return this},Array.prototype.insert=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.splice.apply(this,t([e,0],n,!1)),this},Array.prototype.delete=function(t,e){return void 0===e&&(e=this.length-t),this.splice(t,e),this},Array.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!notEmptyArr(t))return this;for(var n=0;n<this.length;n++)t.includes(this[n])&&(this.splice(n,1),n--);return this},Array.prototype.exchange=function(t,e){var n,i=[t>=0?t:this.length+t,e>=0?e:this.length+e],r=i[0],o=i[1];return r!==o&&(n=[this[o],this[r]],this[r]=n[0],this[o]=n[1]),this},Array.prototype.pushUnique=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.push.apply(this,e.copy().unique().filter((function(e){return t.excludes(e)}))),this},Array.prototype.unshiftUnique=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.unshift.apply(this,e.copy().unique().filter((function(e){return t.excludes(e)}))),this},Array.prototype.descBy=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.sort((function(n,i){return Object.deepGet.apply(Object,t([i],e,!1))-Object.deepGet.apply(Object,t([n],e,!1))}))},Array.prototype.shuffle=function(){var t=this;return notEmptyArr(this)&&this.forEach((function(e,n){var i,r=Math.randomInt(0,t.length-1);n!=r&&(i=[t[r],t[n]],t[n]=i[0],t[r]=i[1])})),this},Array.prototype.swingCut=function(t){if(notEmptyArr(this)){var e=this.length,n=isNum(t)?t%e:Math.randomInt(0,e-1);this.push.apply(this,this.heads(n)),this.delete(0,n)}return this},Object.defineProperties(Array.prototype,{max:{enumerable:!1,configurable:!0,get:function(){return Math.max.apply(Math,this)}},min:{enumerable:!1,configurable:!0,get:function(){return Math.min.apply(Math,this)}}}),Array.prototype.asc=function(){return this.sort((function(t,e){return t-e}))},Array.prototype.desc=function(){return this.sort((function(t,e){return e-t}))}},441:function(){var t=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Function.sleep=function(t,e){return new Promise((function(n){return setTimeout((function(){return n(e)}),t)}))},Function.invoke=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(isFunc(t))return e?Reflect.apply(t,e,n):t.apply(void 0,n)},Function.wait=function(e,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return new Promise((function(o){return setTimeout((function(){return o(Function.invoke.apply(Function,t([n,i],r,!1)))}),e)}))}},490:function(){Math.randomRange=function(t,e){return isNum(t)&&isNum(e)?Math.min(t,e)+Math.random()*Math.abs(e-t):NaN},Math.randomInt=function(t,e){if(!isNum(t)||!isNum(e))return NaN;var n=[Math.ceil(Math.min(t,e)),Math.floor(Math.max(t,e))],i=n[0],r=n[1];return Math.floor(Math.random()*(r-i+1))+i},Math.randomBool=function(t){return void 0===t&&(t=.5),!!(Math.random()<t)},Math.parseDegree=function(t,e){void 0===e&&(e=!1);var n=180*t/Math.PI;return e?(n%=360)+(n<0?360:0):n},Math.parseRadian=function(t,e){void 0===e&&(e=!1);var n=t*Math.PI/180;return e?(n%=2*Math.PI)+(n<0?2*Math.PI:0):n},Math.sum=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t+e}),0)},Math.sumSqr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t+e*e}),0)},Math.avg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length<=0?0:Math.sum.apply(Math,t)/t.length},Math.percentage=function(t,e,n){if(void 0===e&&(e=1),void 0===n&&(n=0),!isNum(t)||!isNum(e)||0===e)return 0;var i=Math.pow(10,n);return Math.round(t/e*100*i)/i},Math.lerp=function(t,e,n){return t+(e-t)*n},Math.clamp=function(t,e,n){var i=Math.min(e,n),r=Math.max(e,n);return t<i?i:t>r?r:t},Math.clamp01=function(t){return t<0?0:t>1?1:t}},599:function(){Number.fix=function(t,e){return void 0===e&&(e=2),Number(t.toFixed(e))},Number.precise=function(t,e){return isNum(e)?Number(t.toPrecision(e)):t}},146:function(){Object.enumKeys=function(t){return Object.keys(t).filter((function(t){return isNaN(parseInt(t))}))},Object.enumValues=function(t){return Object.enumKeys(t).map((function(e){return t[e]}))},Object.deepGet=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!isEmpty(t)){for(var i=t,r=0,o=e;r<o.length;r++){var a=o[r];if(isNullish(a)||""===a)return;if(isEmpty(i[a]))return i[a];i=i[a]}return i}},Object.clean=function(t){return isEmpty(t)||Object.keys(t).forEach((function(e){var n=t[e];null!=n&&""!==n||delete t[e]})),t},Object.clone=function(t){return isNullish(t)?t:Object.assign(Object.create(Object.getPrototypeOf(t)),t)},Object.deepClone=function(t){try{return isArr(t)?t.map((function(t){return Object.deepClone(t)})):isPrimitive(t)||isFunc(t)?t:Object.keys(t).reduce((function(e,n){return Reflect.set(e,n,Object.deepClone(Reflect.get(t,n))),e}),{})}catch(t){console.error(t)}},Object.set=function(t,e,n){return Reflect.set(t,e,n),t},Object.defineProperties(Object.prototype,{hasOwn:{value:function(t,e){return Object.prototype.hasOwnProperty.call(this,t)&&(!e||typeof this[t]===e)},enumerable:!1,configurable:!0}}),globalThis.assign=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];return(notEmptyArr(i)?i:Object.keys(n?e:t)).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t},globalThis.assignExcept=function(t,e,n){for(var i,r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return(i=Object.keys(n?e:t)).remove.apply(i,r).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}},241:function(){Array.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t.concat(e)}),[])},Array.union=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Array.from(new Set(Array.merge.apply(Array,t)))},Array.intersection=function(t,e){return t.reduce((function(t,n){var i=e.indexOf(n);return i>=0&&(e.splice(i,1),t.push(n)),t}),[])},Array.subtraction=function(t,e){return t.reduce((function(t,n){var i=e.indexOf(n);return i>=0?e.splice(i,1):t.push(n),t}),[])},Array.symComplement=function(t,e){return Array.merge(Array.subtraction(t,e),Array.subtraction(e,t))}},552:function(){var t={CHN:new RegExp("^[一-龥]{1,}$"),ENG:new RegExp("^[A-Za-z]+$"),NUM:new RegExp("^[0-9]+$")};String.Length=function(t){return t.split("").reduce((function(t,e){return t+(e.charCodeAt(0)>=0&&e.charCodeAt(0)<=128?1:2)}),0)},String.ellipsis=function(t,e,n){void 0===n&&(n="…");for(var i,r=e-String.Length(n),o="",a=0,s=t.split("");a<s.length;a++){var u=s[a];if((r-=(i=u.charCodeAt(0))>=0&&i<=128?1:2)<0)return o+n;o+=u}return t},String.uuid=function(t,e){void 0===e&&(e=!1);for(var n="";n.length<t;)n+=Math.random().toString(e?10:36).slice(2);return n.substring(0,t)},String.random=function(t,e){void 0===e&&(e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");var n="",i=e.length;if(t<=0||i<=0||!e)return n;for(var r=t;r>0;--r)n+=e[Math.floor(Math.random()*i)];return n},String.reverse=function(t){return t.split("").reverse().join("")},String.isChinese=function(e){return isStr(e)&&t.CHN.test(e)},String.isLetters=function(e){return isStr(e)&&t.ENG.test(e)},String.isNumeric=function(e){return isNum(e)||isStr(e)&&t.NUM.test(e)}},788:function(){globalThis.isArr=function(t){return Array.isArray(t)},globalThis.isNum=function(t){return Number.isFinite(t)},globalThis.isStr=function(t){return"string"==typeof t},globalThis.isBool=function(t){return"boolean"==typeof t},globalThis.isFunc=function(t){return"function"==typeof t},globalThis.isPrimitive=function(t){if(null==t)return!0;switch(typeof t){case"string":case"number":case"bigint":case"boolean":case"symbol":return!0}return!1},globalThis.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},globalThis.isNullish=function(t){return null==t},globalThis.isEmpty=function(t){return!!(Object.is(t,null)||Object.is(t,void 0)||Object.is(t,NaN))||!(!Object.is(t,0)&&!Object.is(t,""))||!(!Array.isArray(t)||0!==t.length)||"object"==typeof t&&Object.keys(t).length<=0},globalThis.notEmpty=function(t){return!isEmpty(t)},globalThis.notEmptyArr=function(t){return Array.isArray(t)&&t.length>0},globalThis.isEqual=function(t,e){return t instanceof Object&&e instanceof Object?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((function(n){return n in e&&isEqual(t[n],e[n])})):isNaN(t)&&isNaN(e)||t===e},globalThis.isRGB=function(t){return Number.isFinite(t)&&t>=0&&t<=16777215},globalThis.isRGBA=function(t){return Number.isFinite(t)&&t>=0&&t<=4294967295}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n(788),n(146),n(490),n(605),n(241),n(441),n(552),n(599)}(),n.exports}),{}),St.require(Rt),n._RF.push({},"320d89pRVxAtrqEt852wJVQ","object",void 0);var Tt=new s;n._RF.pop(),n._RF.push({},"ec0b2SQURJInqaZfe00475m","descriptor",void 0);var Ct=c.property;function Ft(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ct(It.apply(void 0,[t].concat(n)))}function Pt(t,e){if(isStr(t)&&t.indexOf(".")>0){var n=t.split("."),i=n[0],r=n[1];t={name:i,id:r}}for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return Ct($({group:t},It.apply(void 0,[e].concat(a))))}var Nt=t("s",Ct({serializable:!0})),Lt=(Ct({visible:!0}),Ct({visible:!1})),xt=Ct({override:!0});function It(t){for(var e={tooltip:t},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=i;o<a.length;o++){var s=a[o];Array.isArray(s)&&(s.length>=3?(e.slide=!0,e.range=s):s.length>=2?e[s[0]]=s[1]:1===s.length&&(e.type=s[0]))}var u=i[0],c=i[1],l=i[2];i.slice(3);return u&&!Array.isArray(u)&&(Ot(u)?e.type=u:isStr(u)?e.displayName=u:isFunc(u)&&(e.visible=u)),c&&!Array.isArray(c)&&(isStr(c)?e.displayName=c:isFunc(c)&&(e.visible=c)),isStr(l)&&(e.displayName=l),e}n._RF.pop(),n._RF.push({},"b0bb85QyWxK17nUl5CouScs","audio",void 0);var Dt=l.prototype._onTouchEnded,kt=ct,zt=kt.DEFAULT_BUTTON,Ut=kt.DEFAULT_TOGGLE;Object.defineProperty(l.prototype,"_onTouchEnded",{configurable:!0,enumerable:!1,value:function(){for(var t=this instanceof h?Ut:zt,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];Function.invoke.apply(Function,[Dt,this].concat(n));var r=this.node.name.split(":");r.length>1?dt.dispatch(t,""===r.tail?"none":r.tail):dt.dispatch(t)}}),n._RF.pop(),n._RF.push({},"1b6b7vBHMFB7I0g4lUVKi7u","render",void 0),n._RF.pop(),n._RF.push({},"e2001ZlZLhL6KljqEfsnY2m","ui",void 0);new f(0,0,1,1);n._RF.pop(),n._RF.push({},"6b901TzOfhBFalg451LkI3G","macro",void 0),n._RF.pop(),n._RF.push({},"e5a7aXB+ytNBbreYlosocDT","index",void 0),n._RF.pop(),n._RF.push({},"de77dOeJ/RPyKWZoxBDOofj","item-pool",void 0);var Bt=function(){function t(t,e,n){this.template=null,this.container=null,this._ItemClass=null,this.__pool=[],this._ItemClass=t,this.template=null!=e?e:this.template,this.container=null!=n?n:this.container}var e=t.prototype;return e.claim=function(){var t,e=null!=(t=this.__pool.pop())?t:this._create;e instanceof p&&this.container instanceof r&&(e.node.parent=this.container);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Function.invoke.apply(Function,[e.claimed,e].concat(i)),e},e.free=function(t){var e;t&&(t instanceof p&&null!=(e=t.node)&&e.parent&&t.node.removeFromParent(),Function.invoke(t.freed,t),this.__pool.push(t))},e.clear=function(){this.__pool.forEach((function(t){var e;t instanceof p&&(null!=(e=t.node)?e:t).destroy()})),this.__pool.length=0},e.dump=function(){console.info("EntityPool<"+this._ItemClass.name+">, size="+this.size)},X(t,[{key:"size",get:function(){return this.__pool.length}},{key:"_create",get:function(){var t=this._ItemClass,e=this.template;if(t.prototype instanceof p){var n,i=e instanceof d?y(e):new r,o=t;return null!=(n=i.getComponent(o))?n:i.addComponent(o)}return new t}}]),t}();function jt(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e instanceof Object?t([e].concat(i)):function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,[r].concat([e].concat(i)))}}}n._RF.pop(),n._RF.push({},"24326of0FlEDr1GTZPFLprt","maths",void 0),n._RF.pop(),n._RF.push({},"2b984Th++1KBKKhmqw3o2Ra","clipboard",void 0),n._RF.pop(),n._RF.push({},"e9e1eqShRtEdrBxMbUg5dD0","url",void 0),n._RF.pop(),n._RF.push({},"4f440ypKNNA05jqNKTYmRlL","index",void 0),n._RF.pop(),n._RF.push({},"27fecwSfStARqf4crhrz4Nh","swapper",void 0),n._RF.pop(),n._RF.push({},"a2a71lrfOdILrKX67mH2ZtF","notify",void 0),n._RF.pop(),n._RF.push({},"14e55Udj6VMIp7Y+mT0BfmM","singleton",void 0);var Mt=t("n",jt((function(t){var e,n,i=t[0];if(e=i,n=p,Object.getPrototypeOf(e)===n||e.prototype instanceof n){var r=i.prototype,o=r.onLoad;Object.defineProperty(r,"onLoad",{configurable:!0,enumerable:!1,value:function(){i._instance=this,Function.invoke(o,this)}})}return Object.defineProperty(i,"instance",{configurable:!0,enumerable:!0,get:function(){return this._instance&&this._instance instanceof this||(this._instance=new this),this._instance}})})));n._RF.pop(),n._RF.push({},"3d95dr+OQRPs4cw4cNrVJlI","toucher",void 0);r.EventType;n._RF.pop(),n._RF.push({},"ccfd2CeQztFxoBZieHFwjo9","poolify",void 0);var Vt,Gt,qt,Ht,Wt,Kt,Yt,Zt,Jt,Qt,Xt,$t,te;t("p",jt((function(t,e){var n=t[0];function i(t){if(t.prototype instanceof p){var e,n=t.template instanceof d?y(t.template):new r;return null!=(e=n.getComponent(t))?e:n.addComponent(t)}return new t}if(Object.defineProperties(n,{__pool:{configurable:!0,enumerable:!1,writable:!1,value:[]},prefab:{configurable:!0,enumerable:!1,writable:!0,value:null},size:{configurable:!0,enumerable:!1,get:function(){var t,e;return null!=(t=null==(e=this.__pool)?void 0:e.length)?t:0}},claim:{configurable:!0,enumerable:!1,writable:!1,value:function(){var t,e=null!=(t=this.__pool.pop())?t:i(n);e instanceof p&&this.container instanceof r&&(e.node.parent=this.container);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return Function.invoke.apply(Function,[e.claimed,e].concat(a)),e}},free:{configurable:!0,enumerable:!1,writable:!1,value:function(t){var e;t instanceof p&&null!=(e=t.node)&&e.parent&&t.node.removeFromParent(),Function.invoke(t.freed,t),this.__pool.push(t)}},clear:{configurable:!0,enumerable:!1,writable:!1,value:function(){this.__pool.forEach((function(t){var e;t instanceof p&&(null!=(e=t.node)?e:t).destroy()})),this.__pool.length=0}},dump:{configurable:!0,enumerable:!1,writable:!1,value:function(){console.info(this.name,this.__pool.length,this.__pool)}}}),Object.defineProperty(n.prototype,"free",{configurable:!0,enumerable:!1,writable:!1,value:function(){n.free(this)}}),isNum(e)){if(n instanceof p&&console.warn("Init size with Component-class may created empty-node"),e>1e3)return console.warn("Init size too larger");for(var o=0;o<e;o++)n.__pool.push(i(n))}})));n._RF.pop(),n._RF.push({},"f1eaa9l5y1NvoIFi5j0/igk","index",void 0),n._RF.pop(),n._RF.push({},"fd6c2QfbytKzL9Tdsr4f0Fo","index",void 0),n._RF.pop(),n._RF.push({},"059ccbtLKZOpI3/kXZvoT+t","limitation",void 0);var ee=c.ccclass;function ne(){return this.isLimited}var ie,re,oe,ae,se,ue,ce,le,he,fe,pe,de,ye,ge,_e,me,be,ve,we,Ee,Ae,Se,Re,Oe,Te,Ce,Fe,Pe,Ne,Le=function(t){return t[t.None=0]="None",t[t.Stop=1]="Stop",t[t.PingPong=2]="PingPong",t[t.Repeat=3]="Repeat",t}(Le||{}),xe=(Vt=ee("cfw.Limitation"),Gt=Ft("约束方式：\nNone = 无约束\nStop = 抵边界终止\nPingPong = 抵边界来回\nRepeat = 抵边界重复",["type",g(Le)]),qt=Ft("最小边界值（≤最大边界值）",ne),Ht=Ft("最大边界值（≥最小边界值）",ne),Vt(((Qt=function(){function t(t,e,n){void 0===t&&(t=Le.None),void 0===e&&(e=0),void 0===n&&(n=0),ot(this,"type",Yt,this),ot(this,"_min",Zt,this),ot(this,"_max",Jt,this),this.type=t,this._min=e,this._max=n}var e=t.prototype;return e.set=function(t,e,n){this._min=t+(null!=n?n:0),this._max=e+(null!=n?n:0)},e.limit=function(e,n){var i=e+n,r=this.min,o=this.max,a=n>0&&i>o,s=n<0&&i<r,u=[i,n];switch(this.type){case t.Type.None:return u;case t.Type.Stop:return a?[o,0]:s?[r,0]:u;case t.Type.PingPong:return a?[2*o-i,-n]:s?[2*r-i,-n]:u;case t.Type.Repeat:return a?[r+i-o,n]:s?[o+i-r,n]:u;default:this.type}},e.deviate=function(t){this._max+=t,this._min+=t},X(t,[{key:"isLimited",get:function(){return this.type!=Le.None}},{key:"min",get:function(){return this._min},set:function(t){this._min=t>this._max?this._max:t}},{key:"max",get:function(){return this._max},set:function(t){this._max=t<this._min?this._min:t}}]),t}()).Type=Le,Yt=at((Kt=Qt).prototype,"type",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Le.None}}),Zt=at(Kt.prototype,"_min",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),at(Kt.prototype,"min",[qt],Object.getOwnPropertyDescriptor(Kt.prototype,"min"),Kt.prototype),Jt=at(Kt.prototype,"_max",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),at(Kt.prototype,"max",[Ht],Object.getOwnPropertyDescriptor(Kt.prototype,"max"),Kt.prototype),Wt=Kt))||Wt),Ie=ee("cfw.Range")((te=at(($t=function(t){function e(e,n){var i;return void 0===e&&(e=0),void 0===n&&(n=0),ot(i=t.call(this,Le.Stop,e,n)||this,"type",te,nt(i)),i}return tt(e,t),e}(xe)).prototype,"type",[Lt,xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Le.Stop}}),Xt=$t))||Xt;n._RF.pop(),n._RF.push({},"ad58b8NmDNFup4Y6jVL042V","head-up-display",void 0);var De=c.ccclass;function ke(){return this.perspective}t("H",(ie=De("cfw.HeadUpDisplay"),re=Pt("Follow","跟随目标（3D）",r),oe=Pt("Follow","主相机（3D）",a),ae=Pt("Offset","跟随偏移（3D）"),se=Pt("Offset","依据绝对缩放"),ue=Pt("Offset","UI偏移（2D）"),ce=Pt("Scale","启用透视缩放"),le=Pt("Scale","标准距离（透视缩放=1）",ke),he=Pt("Scale","标准大小",ke),fe=Pt("Scale","缩放范围",ke),pe=Pt("Scale","初始距离作为标准距离",ke),de=Pt("Visible","约束在画布内"),ye=Pt("Visible","启用范围可见"),ge=Pt("Visible","可见范围",(function(){return this.useVisibleRange})),ie((be=at((me=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"target",be,nt(e)),ot(e,"mainCamera",ve,nt(e)),ot(e,"offset",we,nt(e)),ot(e,"scalable",Ee,nt(e)),ot(e,"offsetUI",Ae,nt(e)),ot(e,"perspective",Se,nt(e)),ot(e,"distance",Re,nt(e)),ot(e,"scaleRatio",Oe,nt(e)),ot(e,"scaleRange",Te,nt(e)),ot(e,"_useInitDistance",Ce,nt(e)),ot(e,"alwaysInCanvas",Fe,nt(e)),ot(e,"useVisibleRange",Pe,nt(e)),ot(e,"visibleRange",Ne,nt(e)),e}tt(e,t);var n=e.prototype;return n._setInitDistance=function(){this.invalid||this.perspective&&this.useInitDistance&&(this.distance=s.distance(this.mainCamera.node.getWorldPosition(Ue),this.target.getWorldPosition(Be)))},n.onLoad=function(){var t;this.mainCamera=null!=(t=this.mainCamera)?t:wt(),ft.attach(st.Time.POST_TICK,this.tick,this)},n.onDestroy=function(){ft.unload(this)},n.start=function(){if(this.invalid)return this.node.active=!1;this._setInitDistance()},n.tick=function(t,e){if(this.invalid)return this.node.active=!1;var n=this.offset,i=this.offsetUI,r=i.x,o=i.y,a=this.useVisibleRange,u=this.perspective,c=this.scalable;if((a||u)&&(ze=s.distance(this.mainCamera.node.getWorldPosition(Ue),this.target.getWorldPosition(Be))),this.useVisibleRange){var l=this.visibleRange,h=l.min,f=l.max;if(this.node.active=h<=ze&&ze<=f,!this.node.active)return}if(c?s.multiply(Be,n,this.target.getWorldScale(Be)):s.copy(Be,n),this.mainCamera.convertToUINode(s.add(Ue,this.target.getWorldPosition(Ue),Be),this.node.parent,Ue),Ue.z>1)this.node.active=!1;else{if(this.node.setPosition(Ue.x+r,Ue.y+o,Ue.z),this.perspective){var p=(0===ze?Number.MAX_VALUE:this.distance/ze)*this.target.worldScale.y,d=this.scaleRange,y=d.min,g=d.max;p*=this.scaleRatio,p+=1-this.scaleRatio,p=Math.clamp(p,y,g),this.node.setScale(p,p)}if(this.alwaysInCanvas){this.node.getWorldPosition(Ue),this.node.getScale(Be);var b=this.node.getComponent(_),v=b.contentSize,w=v.width,E=v.height,A=b.getBoundingBoxToWorld(),S=A.x,R=A.y,O=A.width,T=A.height,C=m.getVisibleSize(),F=C.width,P=C.height,N=w*Be.x/2,L=E*Be.y/2;this.node.setWorldPosition(S<0?N:S+O>F?F-N:Ue.x,R<0?L:R+T>P?P-L:Ue.y,Ue.z)}this.node.active=!0}},X(e,[{key:"useInitDistance",get:function(){return this._useInitDistance},set:function(t){this._useInitDistance=t,this._setInitDistance()}},{key:"invalid",get:function(){return!this.node.parent||!this.mainCamera||!this.target}}]),e}(p)).prototype,"target",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=at(me.prototype,"mainCamera",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=at(me.prototype,"offset",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),Ee=at(me.prototype,"scalable",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ae=at(me.prototype,"offsetUI",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),Se=at(me.prototype,"perspective",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Re=at(me.prototype,"distance",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Oe=at(me.prototype,"scaleRatio",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Te=at(me.prototype,"scaleRange",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ie(0,100)}}),Ce=at(me.prototype,"_useInitDistance",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(me.prototype,"useInitDistance",[pe],Object.getOwnPropertyDescriptor(me.prototype,"useInitDistance"),me.prototype),Fe=at(me.prototype,"alwaysInCanvas",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=at(me.prototype,"useVisibleRange",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ne=at(me.prototype,"visibleRange",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ie(0,100)}}),_e=me))||_e));var ze=0,Ue=new s,Be=new s;n._RF.pop(),n._RF.push({},"9028aVVKitK3rj1rDo7d/ml","batch",void 0);var je,Me,Ve,Ge,qe,He,We,Ke,Ye,Ze,Je,Qe,Xe=!0;function $e(t,e){for(var n,i,r,o=t.vertexFormat,a=t.chunk.vb,s=0,u=0;u<o.length;++u){if(n=o[u],(i=E.FormatInfos[n.format]).hasAlpha)if(r=t.floatStride,i.size/i.count==1)for(var c=~~A.clamp(Math.round(255*e),0,255),l=s;l<a.length;l+=r)a[l]=(4294967040&a[l]|c)>>>0;else if(i.size/i.count==4)for(var h=s+3;h<a.length;h+=r)a[h]=e;s+=i.size>>2}}ft.attach(st.UI.ENABLE_UI_SORTING,(function(){return Xe=!0})),ft.attach(st.UI.DISABLE_UI_SORTING,(function(){return Xe=!1})),"sortingPriority"in _.prototype||(Object.defineProperties(_.prototype,{_sortingPriority:{configurable:!0,enumerable:!0,writable:!0,value:0},_sortingEnabled:{configurable:!0,enumerable:!0,writable:!0,value:!1}}),Object.defineProperties(_.prototype,{sortingPriority:{configurable:!0,enumerable:!0,get:function(){var t;return null!=(t=this._sortingPriority)?t:0},set:function(t){this._sortingPriority=t}},sortingEnabled:{configurable:!0,enumerable:!0,get:function(){return!!this._sortingEnabled},set:function(t){this._sortingEnabled=t}}})),Object.defineProperties(v.prototype,{_rendererCache:{configurable:!0,enumerable:!1,writable:!1,value:[]},flushRendererCache:{configurable:!0,enumerable:!1,value:function(){if(Xe){var t=this._rendererCache;if(t.length>0){this.rendererOrder&&t.sort((function(t,e){return t.renderPriority-e.renderPriority}));for(var e,n=rt(t);!(e=n()).done;){var i=e.value;if(i.fillBuffers(this),i.renderOpacity>=0){$e(i.renderData,i.renderOpacity);var r=i.renderData.getMeshBuffer();r&&r.setDirty()}}t.length=0}this.rendererOrder=!1}}},update:{configurable:!0,enumerable:!1,value:function(){this.rendererOrder=!1;for(var t=this._screens,e=0,n=0;n<t.length;++n){var i=t[n],r=i._getRenderScene();if(i.enabledInHierarchy&&r){this._opacityDirty=0,this._pOpacity=1,this.walk(i.node),Xe&&this.flushRendererCache(),this.autoMergeBatches(this._currComponent),this.resetRenderStates();var o=0;if(this._batches.length>e)for(;e<this._batches.length;++e){var a=this._batches.array[e];if(a.model)for(var s=a.model.subModels,u=0;u<s.length;u++)s[u].priority=o++;else a.descriptorSet=this._descriptorSetCache.getDescriptorSet(a);r.addBatch(a)}}}}},walk:{configurable:!0,enumerable:!1,value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),t.activeInHierarchy){var i=t.children,r=t._uiProps,o=r.uiComp,a=o&&(2===o.stencilStage||6===o.stencilStage),s=r.uiTransformComp;Xe&&(n=s&&s.sortingEnabled&&s.enabled?s.sortingPriority:n);var u=this._pOpacity,c=u,l=o&&o.color?o.color.a/255:1;if(this._pOpacity=c*=l*r.localOpacity,r._opacity=c,r.colorDirty&&this._opacityDirty++,o&&o.enabledInHierarchy)if(Xe)if(a){if(this.flushRendererCache(),o.fillBuffers(this),this._opacityDirty&&o&&!o.useVertexOpacity&&o.renderData&&o.renderData.vertexCount>0){$e(o.renderData,c);var h=o.renderData.getMeshBuffer();h&&h.setDirty()}}else this._rendererCache.push(o),o.renderPriority=n,0!=n&&(this.rendererOrder=!0),this._opacityDirty&&o&&!o.useVertexOpacity&&o.renderData&&o.renderData.vertexCount>0?o.renderOpacity=c:o.renderOpacity=-1;else o.fillBuffers(this);if(i.length>0&&!t._static)for(var f=0;f<i.length;++f){var p=i[f];this.walk(p,e,n)}r.colorDirty&&(this._opacityDirty--,r.colorDirty=!1),this._pOpacity=u,o&&o.enabledInHierarchy&&(o.postUpdateAssembler(this),a&&w.sharedManager.getMaskStackSize()>0&&(this.flushRendererCache(),this.autoMergeBatches(this._currComponent),this.resetRenderStates(),w.sharedManager.exitMask())),e+=1}}}}),n._RF.pop(),n._RF.push({},"d4143WGCchPX6ZbgpgAGZyz","sorting-group",void 0);var tn=c.ccclass,en=c.property,nn=c.disallowMultiple,rn=c.requireComponent,on=c.executeInEditMode,an=function(t){return t[t.LAYER_BACK_MOST=-99]="LAYER_BACK_MOST",t[t.UI_3D_BACK=-6]="UI_3D_BACK",t[t.UI_3D_MID=-5]="UI_3D_MID",t[t.UI_3D_FRONT=-4]="UI_3D_FRONT",t[t.EFFECT_3D_BACK=-3]="EFFECT_3D_BACK",t[t.EFFECT_3D_MID=-2]="EFFECT_3D_MID",t[t.EFFECT_3D_FRONT=-1]="EFFECT_3D_FRONT",t[t.LAYER_DEFAULT=0]="LAYER_DEFAULT",t[t.LAYER_BASE_BACK=1]="LAYER_BASE_BACK",t[t.LAYER_BASE_MID=2]="LAYER_BASE_MID",t[t.LAYER_BASE_FRONT=3]="LAYER_BASE_FRONT",t[t.LAYER_POPS_BACK=4]="LAYER_POPS_BACK",t[t.LAYER_POPS_MID=5]="LAYER_POPS_MID",t[t.LAYER_POPS_FRONT=6]="LAYER_POPS_FRONT",t[t.LAYER_INFO_BACK=7]="LAYER_INFO_BACK",t[t.LAYER_INFO_MID=8]="LAYER_INFO_MID",t[t.LAYER_INFO_FRONT=9]="LAYER_INFO_FRONT",t[t.LAYER_FRONT_MOST=99]="LAYER_FRONT_MOST",t}(an||{}),sn=1e3;function un(){return this.sortingEnabled}var cn,ln,hn,fn,pn,dn,yn,gn,_n,mn,bn,vn,wn,En,An,Sn,Rn,On,Tn,Cn,Fn,Pn,Nn,Ln,xn,In,Dn,kn,zn,Un,Bn,jn,Mn,Vn,Gn,qn,Hn,Wn,Kn,Yn,Zn,Jn,Qn,Xn,$n,ti,ei,ni;je=tn("cfw.SortingGroup"),Me=rn(_),Ve=nn(!0),Ge=on(!0),qe=Ft("排序层",un,["type",g(an)]),He=Ft("层内序",un,["type",S],[0,sn,1]),je(We=Me(We=Ve(We=Ge(((Qe=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._uit=null,ot(e,"_orderInLayer",Ye,nt(e)),ot(e,"_sortingEnabled",Ze,nt(e)),ot(e,"_sortingLayer",Je,nt(e)),e}tt(e,t);var n=e.prototype;return n.onLoad=function(){this._uit=this.getComponent(_)},n.onEnable=function(){this._upload()},n.onDisable=function(){this._clear()},n._upload=function(){var t=this._sortingLayer<0?-1:1;this._uit.sortingPriority=t*(Math.abs(this._sortingLayer)*sn+this._orderInLayer),this._uit.sortingEnabled=this._sortingEnabled},n._clear=function(){this._uit.sortingPriority=0},X(e,[{key:"sortingLayer",get:function(){return this._sortingLayer},set:function(t){this._sortingLayer=t,this._upload()}},{key:"orderInLayer",get:function(){return this._orderInLayer},set:function(t){this._orderInLayer=t,this._upload()}},{key:"sortingEnabled",get:function(){return this._sortingEnabled},set:function(t){this._sortingEnabled=t,this._uit.sortingEnabled=t}}]),e}(p)).SortingLayer=an,Qe.ORDER_IN_LAYER_MAX=sn,at((Ke=Qe).prototype,"sortingLayer",[qe],Object.getOwnPropertyDescriptor(Ke.prototype,"sortingLayer"),Ke.prototype),at(Ke.prototype,"orderInLayer",[He],Object.getOwnPropertyDescriptor(Ke.prototype,"orderInLayer"),Ke.prototype),at(Ke.prototype,"sortingEnabled",[en],Object.getOwnPropertyDescriptor(Ke.prototype,"sortingEnabled"),Ke.prototype),Ye=at(Ke.prototype,"_orderInLayer",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ze=at(Ke.prototype,"_sortingEnabled",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Je=at(Ke.prototype,"_sortingLayer",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return an.LAYER_DEFAULT}}),We=Ke))||We)||We)||We);n._RF.pop(),n._RF.push({},"14caaOij9dHkqgrgomlLtsJ","tween-switcher",void 0);var ii=c.ccclass,ri=c.requireComponent,oi=c.executionOrder,ai=function(t){return t[t.NONE=0]="NONE",t[t.FADE=1]="FADE",t[t.SLIDE=2]="SLIDE",t[t.FADE_SLIDE=3]="FADE_SLIDE",t[t.SCALE=4]="SCALE",t[t.FADE_SCALE=5]="FADE_SCALE",t[t.ROTATE_SCALE=6]="ROTATE_SCALE",t[t.FADE_ROTATE=7]="FADE_ROTATE",t[t.FADE_ROTATE_SCALE=8]="FADE_ROTATE_SCALE",t}({}),si=function(t){return t[t.LINEAR=0]="LINEAR",t[t.SMOOTH=1]="SMOOTH",t[t.FADE=2]="FADE",t[t.CONSTANT=3]="CONSTANT",t[t.QUAD=4]="QUAD",t[t.CUBIC=5]="CUBIC",t[t.QUART=6]="QUART",t[t.QUINT=7]="QUINT",t[t.SINE=8]="SINE",t[t.CIRC=9]="CIRC",t[t.EXPO=10]="EXPO",t[t.ELASTIC=11]="ELASTIC",t[t.BACK=12]="BACK",t[t.BOUNCE=13]="BOUNCE",t}({}),ui=function(t){return t[t.OUT=0]="OUT",t[t.IN=1]="IN",t[t.IN_OUT=2]="IN_OUT",t[t.OUT_IN=3]="OUT_IN",t}({}),ci=[si.LINEAR,si.SMOOTH,si.FADE,si.CONSTANT];function li(){return this.showType!=ai.NONE}function hi(){return this.showType===ai.FADE_SLIDE||this.showType===ai.SLIDE}function fi(){return this.hideType!=ai.NONE}function pi(){return this.hideType===ai.FADE_SLIDE||this.hideType===ai.SLIDE}var di=function(){function t(t,e,n,i){void 0===t&&(t=new s),void 0===e&&(e=new s),void 0===n&&(n=0),void 0===i&&(i=0),this.position=t,this.scale=e,this.opacity=n,this.angle=i,this.scale.z=1}return t.prototype.reset=function(e,n,i,r){return void 0===i&&(i=0),void 0===r&&(r=0),e instanceof t?(this.position.set(e.position),this.scale.set(e.scale),this.opacity=e.opacity,this.angle=e.angle):(this.position.set(e),this.scale.set(n),this.opacity=i,this.angle=r),this},t}(),yi=(t("T",(cn=ii("cfw.TweenSwitcher"),ln=ri(_),hn=oi(100),fn=Ft("缓动中不交互"),pn=Pt("Show","动效类型","Type",["type",g(ai)]),dn=Pt("Show","缓动方式",li,"Easing",["type",g(si)]),yn=Pt("Show","动画时长",li,"Duration",[0,10,.1],["unit","sec"]),gn=Pt("Show","渐入方式",(function(){return this.showType!=ai.NONE&&ci.excludes(this.showEasing)}),"Tendency",["type",g(ui)]),_n=Pt("Show","渐入方向",hi,"Direction",["type",g(lt)]),mn=Pt("Show","渐入距离",hi,"Distance",[0,1e3,1],["unit","px"]),bn=Pt("Show","渐入延迟",li,"Delay",[0,10,.1],["unit","sec"]),vn=Pt("Show","起始比例",(function(){return this.showType===ai.FADE_SCALE||this.showType===ai.SCALE}),"FromScale",[0,10,.1]),wn=Pt("Show","旋转角度",(function(){return this.showType===ai.ROTATE_SCALE||this.showType===ai.FADE_ROTATE||this.showType===ai.FADE_ROTATE_SCALE}),"Angle",[0,720,15],["unit","deg"]),En=Pt("Show","播前就位",li,"PreReady"),An=Pt("Hide","动效类型","Type",["type",g(ai)]),Sn=Pt("Hide","缓动方式",fi,"Easing",["type",g(si)]),Rn=Pt("Hide","动画时长",fi,"Duration",[0,10,.1],["unit","sec"]),On=Pt("Hide","渐出方式",(function(){return this.hideType!=ai.NONE&&ci.excludes(this.hideEasing)}),"Tendency",["type",g(ui)]),Tn=Pt("Hide","渐出方向",pi,"Direction",["type",g(lt)]),Cn=Pt("Hide","渐出距离",pi,"Distance",[0,1e3,1],["unit","px"]),Fn=Pt("Hide","渐出延迟",fi,"Delay",[0,10,.1],["unit","sec"]),Pn=Pt("Hide","结束比例",(function(){return this.hideType===ai.FADE_SCALE||this.hideType===ai.SCALE}),"ToScale",[0,10,.1]),Nn=Pt("Hide","旋转角度",(function(){return this.hideType===ai.ROTATE_SCALE||this.hideType===ai.FADE_ROTATE||this.hideType===ai.FADE_ROTATE_SCALE}),"Angle",[0,720,15],["unit","deg"]),Ln=Pt("Hide","播完隐藏",fi,"PostRemove"),cn(xn=ln(xn=hn(((ni=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"interactableInTween",Dn,nt(e)),ot(e,"showType",kn,nt(e)),ot(e,"showEasing",zn,nt(e)),ot(e,"showDuration",Un,nt(e)),ot(e,"showTendency",Bn,nt(e)),ot(e,"showDirection",jn,nt(e)),ot(e,"showDistance",Mn,nt(e)),ot(e,"showDelay",Vn,nt(e)),ot(e,"showFromScale",Gn,nt(e)),ot(e,"showRotateAngle",qn,nt(e)),ot(e,"showPreReady",Hn,nt(e)),ot(e,"hideType",Wn,nt(e)),ot(e,"hideEasing",Kn,nt(e)),ot(e,"hideDuration",Yn,nt(e)),ot(e,"hideTendency",Zn,nt(e)),ot(e,"hideDirection",Jn,nt(e)),ot(e,"hideDistance",Qn,nt(e)),ot(e,"hideDelay",Xn,nt(e)),ot(e,"hideToScale",$n,nt(e)),ot(e,"hideRotateAngle",ti,nt(e)),ot(e,"hidePostInactive",ei,nt(e)),e._origin=new di,e._from=new di,e._to=new di,e._showing=!0,e}tt(e,t);var n=e.prototype;return n.play=function(t,e){return t?this.show(e):this.hide(e),this},n.toggle=function(){return this._showing?this.hide():this.show(),this},n.show=function(t){return t&&(this.node.active=!0),this._showing=!0,this._startTween(),this},n.hide=function(t){return t&&(this.hidePostInactive=!0),this._showing=!1,this._startTween(),this},n.onLoad=function(){var t=this.getComponent(O);t&&t.enabled&&t.updateAlignment(),this.resetOrigin(),this.showPreReady&&this.showType!=ai.NONE&&this.setReady()},n.resetOrigin=function(){var t,e;return this._origin.reset(this.node.position,this.node.scale,null!=(t=null==(e=this.getComponent(T))?void 0:e.opacity)?t:255,this.node.angle),this},n.resetOriginPosition=function(){return this._origin.position.set(this.node.position),this},n.setReady=function(){return this._reCalculate(),this._setStatesAs(this._from),this},n._reCalculate=function(){var t=this._showing?this.showType:this.hideType;switch(this._from.reset(this._origin),this._to.reset(this._origin),t){case ai.FADE:this._fade();break;case ai.SLIDE:this._slide();break;case ai.SCALE:this._scale();break;case ai.FADE_SLIDE:this._fade()._slide();break;case ai.FADE_SCALE:this._fade()._scale();break;case ai.FADE_ROTATE:this._fade()._rotate();break;case ai.ROTATE_SCALE:this._rotate()._scale();break;case ai.FADE_ROTATE_SCALE:this._fade()._rotate()._scale()}},n._startTween=function(){var t=this;if(this._reCalculate(),this._showing&&this.showType===ai.NONE)this._setStatesAs(this._origin);else if(this._showing||this.hideType!==ai.NONE){C.stopAllByTarget(this);var e=this._showing?this.showEasing:this.hideEasing,n=this._showing?this.showTendency:this.hideTendency,i=this._showing?this.showDelay:this.hideDelay,r=this._showing?this.showDuration:this.hideDuration;this._setStatesAs(this._from),F(this.node).delay(i).to(r,null,{easing:this._parseEasing(e,n),onStart:function(){return t.interactableInTween&&t._setInteractable(!1)},onUpdate:function(e,n){e.setPosition(s.lerp(dr,t._from.position,t._to.position,n)),e.setScale(s.lerp(dr,t._from.scale,t._to.scale,n));var i=t.getComponent(T);i&&(i.opacity=Math.lerp(t._from.opacity,t._to.opacity,n)),e.angle=Math.lerp(t._from.angle,t._to.angle,n)},onComplete:function(e){t.interactableInTween&&t._setInteractable(!0),!t._showing&&t.hidePostInactive&&(e.active=!1)}}).start()}else this._setStatesAs(this._origin)},n._fade=function(){var t=this._origin.opacity;return this._to.opacity=this._showing?t:0,this._from.opacity=this._showing?0:t,this},n._slide=function(){var t=this.getComponent(O);t&&t.enabled&&t.alignMode===O.AlignMode.ALWAYS&&(console.log(this.node.name),console.warn("[TweenShift]: 'SLIDE' may not useful course of widget (MODE=ALWAYS)"));var e=this._showing?this.showDirection:this.hideDirection,n=this._showing?this.showDistance:this.hideDistance,i=lt,r=[i.RIGHT,i.UP_RIGHT,i.DOWN_RIGHT].contains(e),o=[i.LEFT,i.UP_LEFT,i.DOWN_LEFT].contains(e),a=[i.UP,i.UP_LEFT,i.UP_RIGHT].contains(e),s=[i.DOWN,i.DOWN_LEFT,i.DOWN_RIGHT].contains(e),u=this._origin.position,c=u.x,l=u.y;return this._from.position.set(c,l),this._to.position.set(c,l),this._showing?(this._from.position.x+=r?-n:o?n:0,this._from.position.y+=a?-n:s?n:0):(this._to.position.x+=r?n:o?-n:0,this._to.position.y+=a?n:s?-n:0),this},n._rotate=function(){var t=this._showing?this.showRotateAngle:this.hideRotateAngle,e=this._origin.angle;return this._to.angle=this._showing?e:e+t,this._from.angle=this._showing?e+t:e,this},n._scale=function(){var t=this._origin.scale,e=t.x,n=t.y;return this._from.scale.set(this._showing?e*this.showFromScale:e,this._showing?n*this.showFromScale:n,1),this._to.scale.set(this._showing?e:e*this.hideToScale,this._showing?n:n*this.hideToScale,1),this},n._setStatesAs=function(t){var e=t.position,n=t.scale,i=t.angle,r=t.opacity;this.node.setPosition(e),this.node.setScale(n),this.node.angle=i,isNum(r)&&(this._opacity.opacity=r)},n._parseEasing=function(t,e){if(t===si.LINEAR)return"linear";if(t===si.SMOOTH)return"smooth";if(t===si.FADE)return"fade";if(t===si.CONSTANT)return"constant";var n,i;switch(t){case si.QUAD:n="quad";break;case si.CUBIC:n="cubic";break;case si.QUART:n="quart";break;case si.QUINT:n="quint";break;case si.SINE:n="sine";break;case si.CIRC:n="circ";break;case si.EXPO:n="expo";break;case si.ELASTIC:n="elastic";break;case si.BACK:n="back";break;case si.BOUNCE:n="bounce"}switch(e){case ui.IN:i="In";break;case ui.OUT:i="Out";break;case ui.IN_OUT:i="InOut";break;case ui.OUT_IN:i="OutIn"}return n+i},n._setInteractable=function(t){for(var e=0;e<yi.length;e++)t?this.node.on(yi[e],gi,this):this.node.off(yi[e],gi,this)},X(e,[{key:"showing",get:function(){return this._showing}},{key:"_opacity",get:function(){var t;return null!=(t=this.getComponent(T))?t:this.addComponent(T)}}]),e}(p)).EffectType=ai,ni.EasingType=si,ni.Direction=lt,Dn=at((In=ni).prototype,"interactableInTween",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kn=at(In.prototype,"showType",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ai.NONE}}),zn=at(In.prototype,"showEasing",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return si.SINE}}),Un=at(In.prototype,"showDuration",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Bn=at(In.prototype,"showTendency",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ui.OUT}}),jn=at(In.prototype,"showDirection",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lt.UP}}),Mn=at(In.prototype,"showDistance",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),Vn=at(In.prototype,"showDelay",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gn=at(In.prototype,"showFromScale",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qn=at(In.prototype,"showRotateAngle",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),Hn=at(In.prototype,"showPreReady",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wn=at(In.prototype,"hideType",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ai.NONE}}),Kn=at(In.prototype,"hideEasing",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return si.SINE}}),Yn=at(In.prototype,"hideDuration",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Zn=at(In.prototype,"hideTendency",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ui.OUT}}),Jn=at(In.prototype,"hideDirection",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lt.DOWN}}),Qn=at(In.prototype,"hideDistance",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),Xn=at(In.prototype,"hideDelay",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$n=at(In.prototype,"hideToScale",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ti=at(In.prototype,"hideRotateAngle",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),ei=at(In.prototype,"hidePostInactive",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xn=In))||xn)||xn)||xn)),[R.TOUCH_START,R.TOUCH_END,R.TOUCH_MOVE,R.MOUSE_DOWN,R.MOUSE_MOVE,R.MOUSE_UP,R.MOUSE_ENTER,R.MOUSE_LEAVE,R.MOUSE_WHEEL]);function gi(t){t.propagationStopped=!0}var _i,mi,bi,vi,wi,Ei,Ai,Si,Ri,Oi,Ti,Ci,Fi,Pi,Ni,Li,xi,Ii,Di,ki,zi,Ui,Bi,ji,Mi,Vi,Gi,qi,Hi,Wi,Ki,Yi,Zi,Ji,Qi,Xi,$i,tr,er,nr,ir,rr,or,ar,sr,ur,cr,lr,hr,fr,pr,dr=new s;n._RF.pop(),n._RF.push({},"012f9uzQ+xBZr1RGKgV+FXp","transformer",void 0);var yr=c.ccclass,gr=xe.Type.None;function _r(){return this.useTranslate}function mr(){return this.useTranslate&&this.positionLimited}function br(){return this.useRotate}function vr(){return this.useRotate&&this.eulerLimited}function wr(){return this.useScale}function Er(){return this.useScale&&this.scaleLimited}var Ar;_i=yr("cfw.Transformer"),mi=Pt("Translate","启用平移变换"),bi=Pt("Translate","相对世界变换",_r,"Use World"),vi=Pt("Translate","初始线速度",_r),wi=Pt("Translate","线加速度",_r),Ei=Pt("Translate","启用位置约束",_r),Ai=Pt("Translate","X轴范围限制",mr),Si=Pt("Translate","Y轴范围限制",mr),Ri=Pt("Translate","Z轴范围限制",mr),Oi=Pt("Rotate","启用旋转变换"),Ti=Pt("Rotate","相对世界变换",br,"Use World"),Ci=Pt("Rotate","欧拉角速度",br,["unit","deg/s"]),Fi=Pt("Rotate","欧拉角加速度",br,["unit","deg/s^2"]),Pi=Pt("Rotate","启用欧拉角约束",br),Ni=Pt("Rotate","X欧拉角范围限制",vr),Li=Pt("Rotate","Y欧拉角范围限制",vr),xi=Pt("Rotate","Z欧拉角范围限制",vr),Ii=Pt("Scale","使用缩放"),Di=Pt("Scale","相对世界变换",wr,"Use World"),ki=Pt("Scale","缩放速率",wr),zi=Pt("Scale","缩放加速率",wr),Ui=Pt("Scale","启用缩放约束",wr),Bi=Pt("Scale","X轴缩放比限制",Er),ji=Pt("Scale","Y轴缩放比限制",Er),Mi=Pt("Scale","Z轴缩放比限制",Er),_i((qi=at((Gi=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"useTranslate",qi,nt(e)),ot(e,"worldTranslate",Hi,nt(e)),ot(e,"initLinearVelocity",Wi,nt(e)),ot(e,"linearAcceleration",Ki,nt(e)),ot(e,"positionLimited",Yi,nt(e)),ot(e,"xPosLimitation",Zi,nt(e)),ot(e,"yPosLimitation",Ji,nt(e)),ot(e,"zPosLimitation",Qi,nt(e)),ot(e,"useRotate",Xi,nt(e)),ot(e,"worldRotate",$i,nt(e)),ot(e,"initEulerVelocity",tr,nt(e)),ot(e,"eulerAcceleration",er,nt(e)),ot(e,"eulerLimited",nr,nt(e)),ot(e,"xEulerLimitation",ir,nt(e)),ot(e,"yEulerLimitation",rr,nt(e)),ot(e,"zEulerLimitation",or,nt(e)),ot(e,"useScale",ar,nt(e)),ot(e,"worldScale",sr,nt(e)),ot(e,"initScaleVelocity",ur,nt(e)),ot(e,"scaleAcceleration",cr,nt(e)),ot(e,"scaleLimited",lr,nt(e)),ot(e,"xScaleLimitation",hr,nt(e)),ot(e,"yScaleLimitation",fr,nt(e)),ot(e,"zScaleLimitation",pr,nt(e)),e.linearVelocity=P(),e.eulerVelocity=P(),e.scaleVelocity=P(),e._euler=P(),e._quat=new N,e._last={position:P(),euler:P(),scale:P()},e}tt(e,t);var n=e.prototype;return n.onEnable=function(){this.linearVelocity.set(this.initLinearVelocity),this.eulerVelocity.set(this.initEulerVelocity),this.scaleVelocity.set(this.initScaleVelocity)},n.start=function(){var t=this.worldTranslate,e=this.worldRotate,n=this.worldScale;this._last.position.set(t?this.node.worldPosition:this.node.position),this._last.euler.set(e?this.node.getWorldRotation(this._quat).getEulerAngles(this._euler):this.node.eulerAngles),this._last.scale.set(n?this.node.worldScale:this.node.scale)},n.lateUpdate=function(t){var e=this.useTranslate,n=this.useRotate,i=this.useScale;e&&this._translate(t),n&&this._rotate(t),i&&this._scale(t)},n._translate=function(t){var e=this._last.position,n=this.worldTranslate,i=this.linearVelocity,r=this.linearAcceleration,o=this.positionLimited,a=s.scaleAndAdd(i,i,r,t),u=a.x*t,c=a.y*t,l=a.z*t,h=e.x,f=e.y,p=e.z;if(o){var d=this.xPosLimitation.limit(h,u),y=d[0],g=d[1],_=this.yPosLimitation.limit(f,c),m=_[0],b=_[1],v=this.zPosLimitation.limit(p,l),w=v[0],E=v[1];i.set(g/t,b/t,E/t),h=y,f=m,p=w}else h+=u,f+=c,p+=c;e.set(h,f,p),n?this.node.setWorldPosition(e):this.node.setPosition(e)},n._rotate=function(t){var e=this._last.euler,n=this.worldRotate,i=this.eulerVelocity,r=this.eulerAcceleration,o=this.eulerLimited,a=s.scaleAndAdd(i,i,r,t),u=a.x*t,c=a.y*t,l=a.z*t,h=e.x,f=e.y,p=e.z;if(o){var d=this.xEulerLimitation.limit(h,u),y=d[0],g=d[1],_=this.yEulerLimitation.limit(f,c),m=_[0],b=_[1],v=this.zEulerLimitation.limit(p,l),w=v[0],E=v[1];i.set(g/t,b/t,E/t),h=y,f=m,p=w}else h+=u,f+=c,p+=l;e.set(h,f,p),n?this.node.setWorldRotationFromEuler(h,f,p):this.node.setRotationFromEuler(e)},n._scale=function(t){var e=this._last.scale,n=this.worldScale,i=this.scaleVelocity,r=this.scaleAcceleration,o=this.scaleLimited,a=s.scaleAndAdd(i,i,r,t),u=a.x*t,c=a.y*t,l=a.z*t,h=e.x,f=e.y,p=e.z;if(o){var d=this.xScaleLimitation.limit(h,u),y=d[0],g=d[1],_=this.yScaleLimitation.limit(f,c),m=_[0],b=_[1],v=this.zScaleLimitation.limit(p,l),w=v[0],E=v[1];this.scaleVelocity.set(g/t,b/t,E/t),h=y,f=m,p=w}else h+=u,f+=c,p+=l;e.set(h,f,p),n?this.node.setWorldScale(e):this.node.setScale(e)},e}(p)).prototype,"useTranslate",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hi=at(Gi.prototype,"worldTranslate",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wi=at(Gi.prototype,"initLinearVelocity",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),Ki=at(Gi.prototype,"linearAcceleration",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),Yi=at(Gi.prototype,"positionLimited",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zi=at(Gi.prototype,"xPosLimitation",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,100)}}),Ji=at(Gi.prototype,"yPosLimitation",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,100)}}),Qi=at(Gi.prototype,"zPosLimitation",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,100)}}),Xi=at(Gi.prototype,"useRotate",[Oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$i=at(Gi.prototype,"worldRotate",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tr=at(Gi.prototype,"initEulerVelocity",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),er=at(Gi.prototype,"eulerAcceleration",[Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),nr=at(Gi.prototype,"eulerLimited",[Pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ir=at(Gi.prototype,"xEulerLimitation",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,360)}}),rr=at(Gi.prototype,"yEulerLimitation",[Li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,360)}}),or=at(Gi.prototype,"zEulerLimitation",[xi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,360)}}),ar=at(Gi.prototype,"useScale",[Ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sr=at(Gi.prototype,"worldScale",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ur=at(Gi.prototype,"initScaleVelocity",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),cr=at(Gi.prototype,"scaleAcceleration",[zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P()}}),lr=at(Gi.prototype,"scaleLimited",[Ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hr=at(Gi.prototype,"xScaleLimitation",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,1)}}),fr=at(Gi.prototype,"yScaleLimitation",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,1)}}),pr=at(Gi.prototype,"zScaleLimitation",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new xe(gr,0,1)}}),Vi=Gi));n._RF.pop(),n._RF.push({},"427284BxYJO444yvR6nU8eL","audio-manager",void 0);var Sr,Rr=Mt(Ar=function(){function t(){this.sfx=[],this.sfxButton=null,this.sfxToggle=null,this._muted=!1,this._wasBgmPlaying=!1,this._bgmClip=null,this._bgmAutoPlay=!1,this._bgmAds=null,this._sfxAds=null}var e=t.prototype;return e.playBgm=function(){this._checkAds((function(t){return!t.playing&&t.play()}))},e.pauseBgm=function(){this._checkAds((function(t){return t.playing&&t.pause()}))},e.toggleBgm=function(){this._checkAds((function(t){t.playing?t.pause():t.play()}))},e.addSfx=function(){var t;return(t=this.sfx).unshiftUnique.apply(t,arguments),this},e.playSfx=function(t){var e=this;this._muted||this._checkSfx((function(){var n=t.toLowerCase();e.sfx.forEach((function(t){var i=t.name.toLowerCase();i!==n&&i!=="sfx_"+n||(e._sfxAds.clip=t,e._sfxAds.play())}))}))},e.init=function(t,e){this._bgmAds=t,this._sfxAds=e,this._bgmAds.playOnAwake=this._sfxAds.playOnAwake=!1,dt.attach(ct.DEFAULT_BUTTON,this.onSfxButton,this),dt.attach(ct.DEFAULT_TOGGLE,this.onSfxToggle,this)},e.onSfxButton=function(t){this._muted||"none"!==t&&(t?this.playSfx(t):this.sfxButton&&(this._sfxAds.clip=this.sfxButton,this._sfxAds.play()))},e.onSfxToggle=function(t){this._muted||"none"!==t&&(t?this.playSfx(t):this.sfxToggle?(this._sfxAds.clip=this.sfxToggle,this._sfxAds.play()):this.onSfxButton(t))},e._checkAds=function(t){var e=this._bgmAds,n=this.bgm;return e?n?void(isFunc(t)&&t(e)):console.warn("[audio]","no bgm audio-clip"):console.warn("[audio]","no bgm audio-source")},e._checkSfx=function(t){var e=this._sfxAds,n=this.sfx;return e?notEmptyArr(n)?void(isFunc(t)&&t(e)):console.warn("[audio]","no sfx audio-clips"):console.warn("[audio]","no sfx audio-source")},e._tryAutoPlay=function(){var t;this._bgmAutoPlay&&null!=(t=this._bgmAds)&&t.clip&&this._bgmAds.play()},X(t,[{key:"bgm",get:function(){var t,e;return null!=(t=null==(e=this._bgmAds)?void 0:e.clip)?t:this._bgmClip},set:function(t){this._bgmClip=t,this._bgmAds&&(this._bgmAds.clip=t,this._tryAutoPlay())}},{key:"bgmVolume",get:function(){var t;return null==(t=this._bgmAds)?void 0:t.volume},set:function(t){this._bgmAds&&(this._bgmAds.volume=t)}},{key:"bgmLoop",get:function(){var t;return null==(t=this._bgmAds)?void 0:t.loop},set:function(t){this._bgmAds&&(this._bgmAds.loop=t)}},{key:"bgmPlayOnAwake",get:function(){return this._bgmAutoPlay},set:function(t){this._bgmAutoPlay=t,this._tryAutoPlay()}},{key:"sfxVolume",get:function(){var t;return null==(t=this._sfxAds)?void 0:t.volume},set:function(t){this._sfxAds&&(this._sfxAds.volume=t)}},{key:"mute",get:function(){return this._muted},set:function(t){this._muted=t,t?this._bgmAds&&(this._wasBgmPlaying=this._bgmAds.playing,this._bgmAds.pause()):this._bgmAds&&this._wasBgmPlaying&&this._bgmAds.play()}}]),t}())||Ar;n._RF.pop(),n._RF.push({},"70f13nJUq9MKr+XemmfQP42","res-manager",void 0);var Or,Tr,Cr,Fr,Pr,Nr,Lr,xr,Ir,Dr,kr,zr,Ur,Br,jr,Mr,Vr,Gr,qr,Hr,Wr,Kr,Yr,Zr,Jr,Qr,Xr,$r,to,eo,no,io,ro,oo,ao,so=Mt(Sr=function(){function t(){this._configs=new Map,this._sheets=new Map,this._config_dirs=[],this._remoteBundleName=void 0,this._remoteBaseUrl=void 0,this._prefabs=new Map}var n=t.prototype;return n.getSheet=function(t){return this._sheets.get(t)},n.hasSheet=function(t){return this._sheets.has(t)},n.addSheet=function(t,e,n){return void 0===n&&(n=!0),this.hasSheet(t)&&!n||this._sheets.set(t,e),this},n.removeSheet=function(t){return!!this._sheets.has(t)&&(this._sheets.delete(t),!0)},n.clearSheets=function(){return this._sheets.clear(),this},n.addSheetFrames=function(t){var e=this._sheets.has(t);e||this._sheets.set(t,[]);for(var n=this._sheets.get(t),i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return n.pushUnique.apply(n,r),this},n.getSheetFrame=function(t,e){var n=this._sheets.get(t);if(n)for(var i,r=rt(n);!(i=r()).done;){var o=i.value;if(o.name===e)return o}return null},n.getConfig=function(t){return this._configs.get(t)},n.hasConfig=function(t){return this._configs.has(t)},n.addConfig=function(t,e,n){return void 0===n&&(n=!0),this._configs.has(t)&&!n||this._configs.set(t,e),this},n.removeConfig=function(t){return!!this._configs.has(t)&&(this._configs.delete(t),!0)},n.clearConfigs=function(){return this._configs.clear(),this},n.getPrefab=function(t){return this._prefabs.get(t)},n.hasPrefab=function(t){return this._prefabs.has(t)},n.addPrefab=function(t,e,n){return void 0===n&&(n=!0),this._prefabs.has(t)&&!n||this._prefabs.set(t,e),this},n.removePrefab=function(t,e){if(void 0===e&&(e=!0),this._prefabs.has(t)){var n=this._prefabs.get(t);return this._prefabs.delete(t),e&&n.destroy(),!0}return!1},n.clearPrefabs=function(){return this._prefabs.forEach((function(t){return t.destroy()})),this._prefabs.clear(),this},n.addConfigItem=function(t,e,n,i){void 0===i&&(i=!0);var r=this._configs.get(t);if(r){if(!!r[e]&&!i)return this;r[e]=n}return this},n.getConfigItem=function(t,e){var n=this._configs.get(t);return n?n[e]:null},n.loadResSheetByDir=function(){var t=J(e().mark((function t(n,i,r){var o=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r=!0),!this.hasSheet(i)||r){t.next=3;break}return t.abrupt("return",null);case 3:return t.abrupt("return",new Promise((function(t){L.loadDir(n,I,(function(e,n){return e?(console.warn(e),t(null)):(o._sheets.set(i,n),t(n))}))})));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.loadResConfigsByDir=function(){var t=J(e().mark((function t(n,i){var r=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=!0),!this._config_dirs.contains(n)||i){t.next=3;break}return t.abrupt("return",null);case 3:return this._config_dirs.pushUnique(n),t.abrupt("return",new Promise((function(t){L.loadDir(n,x,(function(e,n){return e?(console.warn(e),t(null)):(n.forEach((function(t){return r._configs.set(t.name,t.json)})),t(n))}))})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.loadResImage=function(){var t=J(e().mark((function t(n,i){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){L.load(n+"/spriteFrame",I,(function(e,n){return e?(console.warn(e),t(null)):(i&&(i.spriteFrame=n),t(n))}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n.setRemoteBaseUrl=function(t){return this._remoteBaseUrl=t,this},n.setRemoteBundleName=function(t){return this._remoteBundleName=t,this},n.loadRemoteTexture=function(){var t=J(e().mark((function t(n,i){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._remoteBundleName,this._remoteBaseUrl,t.abrupt("return",new Promise((function(t,e){if(r){var i=D.getBundle(r);i?i.load(n+"/texture",k,(function(i,r){i?(console.warn('[loadRemoteTexture]: bundle.url="'+n+'" failed',i),e(null)):t(r)})):(console.warn('[loadRemoteTexture]: bundle "'+n+'" not found'),e(null))}else L.load(n+"/texture",k,(function(i,r){i?(console.warn('[loadRemoteTexture]: res.url="'+n+'" failed',i),e(null)):t(r)}))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),t}())||Sr;n._RF.pop(),n._RF.push({},"8ac0eXBFftPNbpoEt/RKq61","res-collector",void 0);var uo=c.ccclass,co=so.instance,lo=Rr.instance,ho=function(t){return t[t.NONE=0]="NONE",t[t.SHEET=1]="SHEET",t[t.CONFIG=2]="CONFIG",t[t.BGM=3]="BGM",t[t.SFX=4]="SFX",t[t.PREFAB=5]="PREFAB",t}(ho||{});function fo(){return this.type===ho.SHEET}var po,yo,go=(Or=uo("cfw.ResItem"),Tr=Ft("资源类型",["type",g(ho)]),Cr=Ft("图集名称",fo),Fr=Ft("本地碎图",fo,["type",[I]]),Pr=Ft("本地配置",(function(){return this.type===ho.CONFIG}),["type",[x]]),Nr=Ft("背景音乐",z,(function(){return this.type===ho.BGM})),Lr=Ft("本地音效",(function(){return this.type===ho.SFX}),["type",[z]]),xr=Ft("本地预制",(function(){return this.type===ho.PREFAB}),["type",[d]]),Ir=Ft("场景共享（加入资源管理）",(function(){return this.type!=ho.NONE&&this.type!=ho.BGM})),Dr=Ft("覆盖已有",(function(){return this.type==ho.BGM||this.type!=ho.NONE&&this.persist})),kr=Ft("动态加载",(function(){return this.type!=ho.NONE&&this.type!=ho.PREFAB})),zr=Ft("自动加载",(function(){return this.type!=ho.NONE&&this.dynamic})),Ur=Ft("目录路径",(function(){return this.type!=ho.NONE&&this.type!=ho.BGM&&this.dynamic})),Br=Ft("资源路径",(function(){return this.type===ho.BGM&&this.dynamic})),Or(((eo=function(){ot(this,"type",Vr,this),ot(this,"sheetName",Gr,this),ot(this,"frames",qr,this),ot(this,"jsons",Hr,this),ot(this,"bgm",Wr,this),ot(this,"sfx",Kr,this),ot(this,"prefabs",Yr,this),ot(this,"persist",Zr,this),ot(this,"override",Jr,this),ot(this,"dynamic",Qr,this),ot(this,"autoLoad",Xr,this),ot(this,"resDir",$r,this),ot(this,"resPath",to,this)}).Type=ho,Vr=at((Mr=eo).prototype,"type",[Tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ho.NONE}}),Gr=at(Mr.prototype,"sheetName",[Cr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qr=at(Mr.prototype,"frames",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Hr=at(Mr.prototype,"jsons",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wr=at(Mr.prototype,"bgm",[Nr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kr=at(Mr.prototype,"sfx",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yr=at(Mr.prototype,"prefabs",[xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Zr=at(Mr.prototype,"persist",[Ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jr=at(Mr.prototype,"override",[Dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qr=at(Mr.prototype,"dynamic",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xr=at(Mr.prototype,"autoLoad",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$r=at(Mr.prototype,"resDir",[Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),to=at(Mr.prototype,"resPath",[Br],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),jr=Mr))||jr);no=uo("cfw.ResCollector"),io=Ft("资源项",["type",[go]]),no((ao=at((oo=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"items",ao,nt(e)),e._configs=new Map,e._prefabs=new Map,e._sheets=new Map,e}tt(e,t);var n=e.prototype;return n.hasSheet=function(t){return this._sheets.has(t)},n.setSheet=function(t,e){this._sheets.set(t,e)},n.getSheet=function(t){return this._sheets.get(t)},n.getSheetFrame=function(t,e){var n=this._sheets.get(t);if(n)for(var i,r=rt(n);!(i=r()).done;){var o=i.value;if(o.name===e)return o}return null},n.hasConfig=function(t){return this._configs.has(t)},n.getConfig=function(t){return this._configs.get(t)},n.setConfig=function(t,e){this._configs.set(t,e)},n.getConfigItem=function(t,e){var n=this._configs.get(t);return n?n[e]:null},n.hasPrefab=function(t){return this._prefabs.has(t)},n.getPrefab=function(t){return this._prefabs.get(t)},n.setPrefab=function(t,e){this._prefabs.set(t,e)},n.onLoad=function(){var t=this;this.enabled&&this.items.forEach((function(e){var n=e.type,i=e.persist,r=e.dynamic;if(n!==ho.NONE){var o=e.autoLoad,a=e.override;switch(n){case ho.SHEET:var s=e.frames,u=e.resDir,c=e.sheetName,l=r&&o&&!!u;if(s.clean(),t.setSheet(c,[].concat(s)),i&&co.addSheetFrames.apply(co,[c].concat(s)),!l)return;L.loadDir(u,I,(function(e,n){var i;e?console.warn(e):(i=t.getSheet(c)).push.apply(i,n)})),i&&co.loadResSheetByDir(u,c,a);break;case ho.CONFIG:var h=e.jsons,f=e.resDir,p=r&&o&&!!f;if(h.clean(),h.forEach((function(e){return t.setConfig(e.name,e.json)})),i&&h.forEach((function(t){return co.addConfig(t.name,t.json,a)})),!p)return;L.loadDir(f,x,(function(e,n){e?console.warn(e):n.forEach((function(e){return t.setConfig(e.name,e.json)}))})),i&&p&&co.loadResConfigsByDir(f,a);break;case ho.BGM:var d=e.bgm,y=e.resPath,g=r&&o&&!!y;d?lo.bgm&&!a||(lo.bgm=d):g&&L.load(y,z,(function(t,e){t?console.warn(t):lo.bgm&&!a||(lo.bgm=e)}));break;case ho.SFX:var _=e.sfx,m=e.resDir,b=r&&o&&!!m;_.clean(),i?(notEmptyArr(_)&&lo.addSfx.apply(lo,_),b&&L.loadDir(m,z,(function(t,e){t?console.warn(t):lo.addSfx.apply(lo,_)}))):b&&L.loadDir(m,z);break;case ho.PREFAB:var v=e.prefabs,w=e.persist,E=e.override;v.clean(),v.forEach((function(e){return t.setPrefab(e.name,e)})),w&&v.forEach((function(t){return co.addPrefab(t.name,t,E)}))}}}))},e}(p)).prototype,"items",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ro=oo));n._RF.pop(),n._RF.push({},"5d15cbevXxJZ4bfxBNLwnUq","index",void 0),n._RF.pop(),n._RF.push({},"68387fcZLFKYLu6UERkwEYd","TimerSystem",void 0);var _o,mo=st.Time,bo=mo.TICK,vo=mo.SECOND,wo=mo.MINUTE,Eo=mo.SPAN,Ao=mo.POST_TICK,So=Mt(((yo=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).span=0,e._tick=0,e._elapse=0,e._seconds=0,e._minutes=0,e._past=0,e._num=0,e}tt(e,t);var n=e.prototype;return n.update=function(t){ft.dispatch(bo,t,++this._tick),this._elapse+=t,this._elapse>=1&&(this._elapse-=1,ft.dispatch(vo,t,++this._seconds),this._seconds>=60&&ft.dispatch(wo,this._minutes+=1)),this.span>0&&(this._past+=t,this._past>=this.span&&(this._past-=this.span,ft.dispatch(Eo,t,++this._num)))},n.postUpdate=function(t){ft.dispatch(Ao,t,this._tick)},e}(j)).ID="Timer",po=yo))||po;U.on(B.EVENT_GAME_INITED,(function(){return i.registerSystem(So.ID,So.instance,0)})),n._RF.pop(),n._RF.push({},"60a9eUtfjZKkqpcm8SePIIF","base",void 0);var Ro,Oo,To,Co,Fo,Po,No,Lo,xo,Io,Do,ko,zo,Uo,Bo,jo,Mo,Vo=c.ccclass,Go=c.disallowMultiple,qo=Vo("cfw.BaseUI")(_o=Go(_o=function(t){function e(){return t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.show=function(){var t=this;this.node.active=!0,this.scheduleOnce((function(){return t.onShow()}))},n.hide=function(){var t=this;this.node.active=!1,this.scheduleOnce((function(){return t.onHide()}))},n.onShow=function(){},n.onHide=function(){},X(e,[{key:"visible",get:function(){var t,e;return(null==(t=this.node)?void 0:t.parent)&&(null==(e=this.node)?void 0:e.active)}},{key:"alpha",get:function(){var t;return(null!=(t=this.getComponent(T))?t:this.addComponent(T)).opacity/255},set:function(t){var e;(null!=(e=this.getComponent(T))?e:this.addComponent(T)).opacity=255*t}}]),e}(p))||_o)||_o;function Ho(){return this.autoRotateSign}n._RF.pop(),n._RF.push({},"a0699821epE2LvH7VDENpNG","net-cover",void 0);var Wo,Ko,Yo,Zo,Jo,Qo,Xo,$o,ta,ea,na,ia,ra,oa,aa,sa,ua,ca=(Ro=(0,c.ccclass)("cfw.NetCover"),Oo=Ft("出现延迟",[0,5,.1],["unit","sec"]),To=Ft("超时移除"),Co=Ft("超时时长",(function(){return this.timeoutClear}),[1,30,1],["unit","sec"]),Fo=Ft("自动旋转"),Po=Ft("旋转图标",r,Ho),No=Ft("旋转图标",Ho),Lo=Ft("旋转周期",Ho,[1,30,.1],["unit","sec"]),Ro((Do=at((Io=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"delay",Do,nt(e)),ot(e,"timeoutClear",ko,nt(e)),ot(e,"timeout",zo,nt(e)),ot(e,"autoRotateSign",Uo,nt(e)),ot(e,"sign",Bo,nt(e)),ot(e,"antiClockwise",jo,nt(e)),ot(e,"period",Mo,nt(e)),e}tt(e,t);var n=e.prototype;return n.onLoad=function(){dt.dispatch(ut.REGISTER,this)},n.onDestroy=function(){dt.dispatch(ut.UNREGISTER,this)},n.lateUpdate=function(t){this.autoRotateSign&&this.sign&&this.period>0&&(this.sign.angle+=(this.antiClockwise?360:-360)*(t/this.period))},n.start=function(){this.node.active=!1},n.show=function(){var e=this;this.unscheduleAllCallbacks(),t.prototype.show.call(this),this.delay>=0?(this.activateChildren=!1,this.scheduleOnce((function(){return e.activateChildren=!0}),this.delay)):this.activateChildren=!0,this.timeoutClear&&this.scheduleOnce((function(){return e.hide()}),this.timeout)},n.hide=function(){this.unscheduleAllCallbacks(),t.prototype.hide.call(this)},X(e,[{key:"activateChildren",set:function(t){this.node.children.forEach((function(e){return e.active=t}))}}]),e}(qo)).prototype,"delay",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),ko=at(Io.prototype,"timeoutClear",[To],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zo=at(Io.prototype,"timeout",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Uo=at(Io.prototype,"autoRotateSign",[Fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo=at(Io.prototype,"sign",[Po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=at(Io.prototype,"antiClockwise",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mo=at(Io.prototype,"period",[Lo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xo=Io))||xo);n._RF.pop(),n._RF.push({},"656c5BJ6plBXbomFVJ1iJv2","loading-page",void 0);var la,ha=(Wo=(0,c.ccclass)("cfw.LoadingPage"),Ko=Pt("UI","进度条",M),Yo=Pt("UI","进度文本",V),Zo=Pt("UI","文本模板（%为百分比）"),Jo=Pt("UI","进度游标",r),Qo=Pt("Logic","加载完毕通知"),Xo=Pt("Logic","加载过程通知"),$o=Pt("Logic","完毕自动隐藏"),Wo((na=at((ea=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"bar",na,nt(e)),ot(e,"label",ia,nt(e)),ot(e,"chars",ra,nt(e)),ot(e,"cruiser",oa,nt(e)),ot(e,"completeNotification",aa,nt(e)),ot(e,"progressNotification",sa,nt(e)),ot(e,"autoHide",ua,nt(e)),e._group=0,e._groupsNum=1,e}tt(n,t);var r=n.prototype;return r.onLoad=function(){dt.dispatch(ut.REGISTER,this)},r.onDestroy=function(){dt.dispatch(ut.UNREGISTER,this)},r.loadEnter=function(){var t=J(e().mark((function t(){var n,i,r,o=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=o.length,i=new Array(n),r=0;r<n;r++)i[r]=o[r];if(notEmptyArr(i)){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this._loadOneByOne(i,!0);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.loadReady=function(){var t=J(e().mark((function t(){var n,i,r,o=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=o.length,i=new Array(n),r=0;r<n;r++)i[r]=o[r];if(notEmptyArr(i)){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this._loadOneByOne(i,!1);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r._loadOneByOne=function(){var t=J(e().mark((function t(n,i){var r,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._group=0,this._groupsNum=n.length,r=rt(n);case 3:if((o=r()).done){t.next=23;break}if(a=o.value){t.next=8;break}return console.warn("[LoadingPage.load]","try to load scene empty name"),t.abrupt("return",!1);case 8:if(!bt.scene.hasLoaded(a)){t.next=14;break}if(this._isLast){t.next=11;break}return t.abrupt("continue",21);case 11:return t.abrupt("return",this._lastFinished(i?n.head:null));case 14:return this.show(),t.next=17,this._preloadOneScene(a);case 17:if(bt.scene.addLoaded(a),!this._isLast){t.next=20;break}return t.abrupt("return",this._lastFinished(i?n.head:null));case 20:this._group++;case 21:t.next=3;break;case 23:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),r._preloadOneScene=function(){var t=J(e().mark((function t(n){var r=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var e=r._group/r._groupsNum;i.preloadScene(n,(function(t,n){var i=t/n/r._groupsNum;(i+=e)>r.bar.progress&&r.setProgress(i)}),(function(){return t(n)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.setProgress=function(t){var e,n,i=this.bar,r=this.label,o=this.chars,a=this.cruiser,s=null!=(e=null==(n=this.bar)||null==(n=n.getComponent(_))?void 0:n.width)?e:0;return i&&(i.progress=t),r&&(r.string=o.replace("%",Math.round(100*t)+"%")),a&&a.setPosition((t-.5)*s,a.position.y),this.progressNotification&&ft.dispatch(this.progressNotification,t),this},r._lastFinished=function(t){var e=this;return t?i.loadScene(t,(function(){bt.scene.pushRecord(t),e.completeNotification&&ft.dispatch(e.completeNotification),e.autoHide&&e.node&&e.hide()})):(this.completeNotification&&ft.dispatch(this.completeNotification),this.autoHide&&this.node&&this.hide()),!0},X(n,[{key:"_isLast",get:function(){return this._group>=this._groupsNum-1}}]),n}(qo)).prototype,"bar",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ia=at(ea.prototype,"label",[Yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ra=at(ea.prototype,"chars",[Zo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"%"}}),oa=at(ea.prototype,"cruiser",[Jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aa=at(ea.prototype,"completeNotification",[Qo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"scene loaded"}}),sa=at(ea.prototype,"progressNotification",[Xo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"scene progress"}}),ua=at(ea.prototype,"autoHide",[$o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ta=ea))||ta);n._RF.pop(),n._RF.push({},"5a84b/VnR5Fq45KtwLTeB5Y","ui-manager",void 0);var fa,pa,da=Mt(la=function(){function t(){this._netCover=null,this._loadingPage=null}var e=t.prototype;return e.register=function(t,e){return void 0===e&&(e=!0),e&&t.hide(),t instanceof ca?this._netCover=t:t instanceof ha?this._loadingPage=t:void 0},e.unregister=function(t){return t instanceof ca&&this._netCover===t?!(this._netCover=null):t instanceof ha&&this._loadingPage===t?!(this._loadingPage=null):t===ca?!(this._netCover=null):t===ha&&!(this._loadingPage=null)},X(t,[{key:"netCover",get:function(){return this._netCover}},{key:"loadingPage",get:function(){return this._loadingPage}}]),t}())||la,ya=da.instance;dt.attach(ut.REGISTER,ya.register,ya),dt.attach(ut.UNREGISTER,ya.unregister,ya),n._RF.pop(),n._RF.push({},"44616vI+a1JFpNFrPX5eVQ2","net-manager",void 0);var ga,_a=function(t){return t[t.PROD=0]="PROD",t[t.DEV=1]="DEV",t[t.TEST=2]="TEST",t[t.LOCAL=3]="LOCAL",t}({}),ma=Mt(((pa=function(){function t(){this.useReport=!1,this.useCover=!0,this.simulateLatency=!1,this.latency=.2,this.logReq=!1,this.logResp=!0,this.domain=_a.PROD,this.uncovers=[],this._apis={prod:{},test:{},local:{},dev:{}}}var e=t.prototype;return e.setApis=function(t){return this._apis.prod=null!=t?t:this._apis.prod,this},e.setDevApis=function(t){return this._apis.dev=null!=t?t:this._apis.dev,this},e.setTestApis=function(t){return this._apis.test=null!=t?t:this._apis.test,this},e.setLocalApis=function(t){return this._apis.local=null!=t?t:this._apis.local,this},e.showCover=function(t){if(!t||!this.uncovers.contains(t)){var e=da.instance.netCover;e&&e.show()}},e.hideCover=function(t){if(!t||!this.uncovers.contains(t)){var e=da.instance.netCover;e&&e.hide()}},X(t,[{key:"apis",get:function(){switch(this.domain){case _a.PROD:return this._apis.prod;case _a.DEV:return this._apis.dev;case _a.TEST:return this._apis.test;case _a.LOCAL:return this._apis.local}}},{key:"isProduce",get:function(){return this.domain===_a.PROD}}]),t}()).Domain=_a,fa=pa))||fa;n._RF.pop(),n._RF.push({},"0f5c9IhWC9N87CR43gnyzLa","scene-manager",void 0);var ba,va=Mt(ga=function(){function t(){this.useLoadingPage=!0,this.homeName=null,this._chain=[],this._loaded=[],this._record=[]}var n=t.prototype;return n.hasLoaded=function(t){return this._loaded.contains(t)},n.addLoaded=function(t){return this._loaded.pushUnique(t),this},n.pushRecord=function(t){return this._record.push(t),this},n.clearChain=function(){return this._chain.length=0,this},n.addChain=function(){var t;return(t=this._chain).pushUnique.apply(t,arguments),this},n._loadScene=function(t){var e=this,n=this.useLoadingPage,r=this._loadingPage;n&&r?r.loadEnter(t):i.loadScene(t,(function(){return e._record.push(t)}))},n.loadEnter=function(){var t=J(e().mark((function t(){var n,r,o,a,s,u,c=this,l=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=l.length,r=new Array(n),o=0;o<n;o++)r[o]=l[o];if(notEmptyArr(r)){t.next=3;break}return t.abrupt("return",!0);case 3:if(a=this.useLoadingPage,s=this._loadingPage,!a||!s){t.next=10;break}return t.next=7,s.loadEnter.apply(s,r);case 7:return t.abrupt("return",t.sent);case 10:return u=0,t.abrupt("return",new Promise((function(t){for(var e,n=function(){var n=e.value;i.preloadScene(n,(function(){c._record.push(n),++u>=r.length&&(i.loadScene(r.head),t(!0))}))},o=rt(r);!(e=o()).done;)n()})));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.loadReady=function(){var t=J(e().mark((function t(){var n,r,o,a,s,u,c=this,l=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=l.length,r=new Array(n),o=0;o<n;o++)r[o]=l[o];if(notEmptyArr(r)){t.next=3;break}return t.abrupt("return",!0);case 3:if(a=this.useLoadingPage,s=this._loadingPage,!a||!s){t.next=10;break}return t.next=7,s.loadReady.apply(s,r);case 7:return t.abrupt("return",t.sent);case 10:return u=0,t.abrupt("return",new Promise((function(t){for(var e,n=function(){var n=e.value;i.preloadScene(n,(function(){c._record.push(n),++u>=r.length&&t(!0)}))},o=rt(r);!(e=o()).done;)n()})));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.preload=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=function(){var e=s[a];i.preloadScene(e,(function(){t._loaded.pushUnique(e)}))},a=0,s=n;a<s.length;a++)o()},n.goto=function(t){this._loadScene(t)},n.back=function(){var t=this._record.pop();t&&this._loadScene(t)},n.head=function(){var t=this._chain.head;t&&this._loadScene(t)},n.next=function(){var t=this.nextInChain;t&&this._loadScene(t)},n.last=function(){var t=this.lastInChain;t&&this._loadScene(t)},n.home=function(){var t=this.homeName;t&&this._loadScene(t)},X(t,[{key:"thisName",get:function(){return i.getScene().name}},{key:"nextInChain",get:function(){var t;return null!=(t=this._chain[this._chain.indexOf(this.thisName)+1])?t:null}},{key:"lastInChain",get:function(){var t;return null!=(t=this._chain[this._chain.indexOf(this.thisName)-1])?t:null}},{key:"_loadingPage",get:function(){return da.instance.loadingPage}}]),t}())||ga;bt.scene=va.instance,n._RF.pop(),n._RF.push({},"3f195yBmwlFxZ3csqel4v7e","Mediator",void 0);var wa,Ea,Aa,Sa,Ra,Oa,Ta,Ca,Fa,Pa,Na,La,xa,Ia,Da,ka,za,Ua,Ba,ja,Ma,Va,Ga,qa,Ha,Wa,Ka,Ya,Za,Ja,Qa,Xa,$a,ts,es,ns,is,rs,os,as,ss,us,cs,ls=c.ccclass,hs=t("M",ls("cfw.Mediator")(ba=function(t){function e(){return t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.__preload=function(){isFunc(t.prototype.__preload)&&t.prototype.__preload.call(this),gt.unshiftUnique(this)},n.on=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!1,n)},n.once=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!0,n)},n.off=function(t,e){ft.detach(t,e,this)},n.notify=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];ft.dispatch.apply(ft,[t].concat(n))},n.onDestroy=function(){ft.unload(this),pt.unload(this),gt.remove(this)},X(e,[{key:"scene",get:function(){return i.getScene()}}]),e}(p))||ba);n._RF.pop(),n._RF.push({},"ab8c6NqmPNH/oR0ZH/yfmrV","root",void 0);var fs=c.ccclass,ps=c.disallowMultiple,ds=c.requireComponent,ys=ma.instance,gs=Rr.instance,_s=so.instance,ms=["useCover","simulateLatency","latency","logReq","logResp","domain","useReport"],bs=["bgmVolume","bgmLoop","bgmPlayOnAwake","sfxVolume","sfxButton","sfxToggle"];function vs(){return this.useDefaultSfxs}var ws=(wa=fs("cfw.Root"),Ea=ps(!0),Aa=ds(G),Sa=Pt("UI","启用全屏显示"),Ra=Pt("UI","显示性能面板"),Oa=Pt("Net","使用网络遮罩"),Ta=Pt("Net","启用模拟延迟"),Ca=Pt("Net","模拟延迟时长",(function(){return this.simulateLatency}),[0,5,.1]),Fa=Pt("Net","输出请求日志"),Pa=Pt("Net","输出返回日志"),Na=Pt("Net","数据上报开关"),La=Pt("Net","请求域设置",["type",g(_a)]),xa=Pt("Net","无遮罩API",["type",[q]]),Ia=Pt("Aud","背景音乐音量",[0,1,.01]),Da=Pt("Aud","是否循环播放"),ka=Pt("Aud","是否自动播放"),za=Pt("Aud","音效音量",[0,1,.01]),Ua=Pt("Aud","启用默认音效"),Ba=Pt("Aud","默认按钮音效",z,vs),ja=Pt("Aud","默认切换音效",z,vs),Ma=Pt("Res","远程基址"),Va=Pt("Res","远程包名"),wa(Ga=Ea(Ga=Aa(Ga=Mt((Ha=at((qa=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).bgm=void 0,ot(e,"_fullScreen",Ha,nt(e)),ot(e,"_showStats",Wa,nt(e)),ot(e,"_useCover",Ka,nt(e)),ot(e,"_simulateLatency",Ya,nt(e)),ot(e,"_latency",Za,nt(e)),ot(e,"_logReq",Ja,nt(e)),ot(e,"_logResp",Qa,nt(e)),ot(e,"_useReport",Xa,nt(e)),ot(e,"_domain",$a,nt(e)),ot(e,"uncovers",ts,nt(e)),ot(e,"_bgmVolume",es,nt(e)),ot(e,"_bgmLoop",ns,nt(e)),ot(e,"_bgmPlayOnAwake",is,nt(e)),ot(e,"_sfxVolume",rs,nt(e)),ot(e,"useDefaultSfxs",os,nt(e)),ot(e,"_sfxButton",as,nt(e)),ot(e,"_sfxToggle",ss,nt(e)),ot(e,"_baseUrl",us,nt(e)),ot(e,"_bundle",cs,nt(e)),e}tt(e,t);var n=e.prototype;return n.onLoad=function(){var t;i.addPersistRootNode(this.node),this._fullScreen&&!H.fullScreen()&&(this.fullScreen=!0),this.showStats=this._showStats,gs.init(this.addComponent(W),this.addComponent(W)),assign.apply(void 0,[ys,this,!1].concat(ms)),(t=ys.uncovers).push.apply(t,this.uncovers),assign.apply(void 0,[gs,this,!1].concat(bs)),this._baseUrl&&_s.setRemoteBaseUrl(this._baseUrl),this._bundle&&_s.setRemoteBundleName(this._bundle)},n.onEnable=function(){},n.readjustCamera=function(){var t=this.getComponent(G).cameraComponent,e=this.getComponentsInChildren(a).remove(t);if(notEmptyArr(e)){var n=H.windowSize.height/m.getScaleY()/2,i=this.node.getWorldPosition(),r=i.x,o=i.y;e.forEach((function(t){t.orthoHeight=n,t.node.setWorldPosition(r,o,1e3)}))}},n.toggleFullScreen=function(){this.fullScreen=!this.fullScreen},n.toggleShowStats=function(){this.showStats=!this.showStats},X(e,[{key:"fullScreen",get:function(){return this._fullScreen},set:function(t){t?H.requestFullScreen():H.exitFullScreen(),this._fullScreen=t}},{key:"showStats",get:function(){return this._showStats},set:function(t){K&&(t?K.showStats():K.hideStats()),this._showStats=t}},{key:"useCover",get:function(){return this._useCover},set:function(t){this._useCover=t,ys.useCover=t}},{key:"simulateLatency",get:function(){return this._simulateLatency},set:function(t){this._simulateLatency=t,ys.simulateLatency=t}},{key:"latency",get:function(){return this._latency},set:function(t){this._latency=t,ys.latency=t}},{key:"logReq",get:function(){return this._logReq},set:function(t){this._logReq=t,ys.logReq=t}},{key:"logResp",get:function(){return this._logResp},set:function(t){this._logResp=t,ys.logResp=t}},{key:"useReport",get:function(){return this._useReport},set:function(t){this._useReport=t,ys.useReport=t}},{key:"domain",get:function(){return this._domain},set:function(t){this._domain=t,ys.domain=t}},{key:"bgmVolume",get:function(){return this._bgmVolume},set:function(t){this._bgmVolume=t,gs.bgmVolume=t}},{key:"bgmLoop",get:function(){return this._bgmLoop},set:function(t){this._bgmLoop=t,gs.bgmLoop=t}},{key:"bgmPlayOnAwake",get:function(){return this._bgmPlayOnAwake},set:function(t){this._bgmPlayOnAwake=t,gs.bgmPlayOnAwake=t}},{key:"sfxVolume",get:function(){return this._sfxVolume},set:function(t){this._sfxVolume=t,gs.sfxVolume=t}},{key:"sfxButton",get:function(){return this._sfxButton},set:function(t){this._sfxButton=t,gs.sfxButton=t}},{key:"sfxToggle",get:function(){return this._sfxToggle},set:function(t){this._sfxToggle=t,gs.sfxToggle=t}},{key:"remoteBaseUrl",get:function(){return this._baseUrl},set:function(t){this._baseUrl=t,_s.setRemoteBaseUrl(t)}},{key:"remoteBundleName",get:function(){return this._bundle},set:function(t){this._bundle=t,_s.setRemoteBundleName(t)}}]),e}(hs)).prototype,"_fullScreen",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"fullScreen",[Sa],Object.getOwnPropertyDescriptor(qa.prototype,"fullScreen"),qa.prototype),Wa=at(qa.prototype,"_showStats",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"showStats",[Ra],Object.getOwnPropertyDescriptor(qa.prototype,"showStats"),qa.prototype),Ka=at(qa.prototype,"_useCover",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"useCover",[Oa],Object.getOwnPropertyDescriptor(qa.prototype,"useCover"),qa.prototype),Ya=at(qa.prototype,"_simulateLatency",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"simulateLatency",[Ta],Object.getOwnPropertyDescriptor(qa.prototype,"simulateLatency"),qa.prototype),Za=at(qa.prototype,"_latency",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),at(qa.prototype,"latency",[Ca],Object.getOwnPropertyDescriptor(qa.prototype,"latency"),qa.prototype),Ja=at(qa.prototype,"_logReq",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"logReq",[Fa],Object.getOwnPropertyDescriptor(qa.prototype,"logReq"),qa.prototype),Qa=at(qa.prototype,"_logResp",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"logResp",[Pa],Object.getOwnPropertyDescriptor(qa.prototype,"logResp"),qa.prototype),Xa=at(qa.prototype,"_useReport",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at(qa.prototype,"useReport",[Na],Object.getOwnPropertyDescriptor(qa.prototype,"useReport"),qa.prototype),$a=at(qa.prototype,"_domain",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _a.PROD}}),at(qa.prototype,"domain",[La],Object.getOwnPropertyDescriptor(qa.prototype,"domain"),qa.prototype),ts=at(qa.prototype,"uncovers",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),es=at(qa.prototype,"_bgmVolume",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),at(qa.prototype,"bgmVolume",[Ia],Object.getOwnPropertyDescriptor(qa.prototype,"bgmVolume"),qa.prototype),ns=at(qa.prototype,"_bgmLoop",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at(qa.prototype,"bgmLoop",[Da],Object.getOwnPropertyDescriptor(qa.prototype,"bgmLoop"),qa.prototype),is=at(qa.prototype,"_bgmPlayOnAwake",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at(qa.prototype,"bgmPlayOnAwake",[ka],Object.getOwnPropertyDescriptor(qa.prototype,"bgmPlayOnAwake"),qa.prototype),rs=at(qa.prototype,"_sfxVolume",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),at(qa.prototype,"sfxVolume",[za],Object.getOwnPropertyDescriptor(qa.prototype,"sfxVolume"),qa.prototype),os=at(qa.prototype,"useDefaultSfxs",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),as=at(qa.prototype,"_sfxButton",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at(qa.prototype,"sfxButton",[Ba],Object.getOwnPropertyDescriptor(qa.prototype,"sfxButton"),qa.prototype),ss=at(qa.prototype,"_sfxToggle",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at(qa.prototype,"sfxToggle",[ja],Object.getOwnPropertyDescriptor(qa.prototype,"sfxToggle"),qa.prototype),us=at(qa.prototype,"_baseUrl",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),at(qa.prototype,"remoteBaseUrl",[Ma],Object.getOwnPropertyDescriptor(qa.prototype,"remoteBaseUrl"),qa.prototype),cs=at(qa.prototype,"_bundle",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),at(qa.prototype,"remoteBundleName",[Va],Object.getOwnPropertyDescriptor(qa.prototype,"remoteBundleName"),qa.prototype),Ga=qa))||Ga)||Ga)||Ga)||Ga);n._RF.pop(),n._RF.push({},"d603bdOvjpEdKBAgjKDaU5d","core",void 0);var Es,As=t("d",function(){function t(){}return t.on=function(t,e,n,i){return void 0===i&&(i=0),this.notifier.attach(t,e,n,!1,i)},t.once=function(t,e,n,i){return void 0===i&&(i=0),this.notifier.attach(t,e,n,!0,i)},t.off=function(t,e,n){return this.notifier.detach(t,e,n)},t.notify=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this.notifier).dispatch.apply(e,[t].concat(i))},t.unload=function(t){return this.notifier.unload(t)},t.clear=function(t){return this.notifier.clear(t)},t.getProxy=function(t){for(var e,n=rt(this.proxies);!(e=n()).done;){var i=e.value;if(i instanceof t)return i}return null},t.getProxies=function(t){return this.proxies.filter((function(e){return e instanceof t}))},t.getMediator=function(t){for(var e,n=rt(this.mediators);!(e=n()).done;){var i=e.value;if(i instanceof t)return i}return null},t.getMediators=function(t){return this.mediators.filter((function(e){return e instanceof t}))},t.getController=function(t){for(var e,n=rt(this.controllers);!(e=n()).done;){var i=e.value;if(i instanceof t)return i}return null},t.getControllers=function(t){return this.controllers.filter((function(e){return e instanceof t}))},X(t,null,[{key:"audio",get:function(){return Rr.instance}},{key:"net",get:function(){return ma.instance}},{key:"root",get:function(){return function(t,e){return!!(t._objFlags&e)}(ws.instance,u.Flags.IsOnLoadCalled)?ws.instance:i.getScene().getComponentInChildren(ws)}}]),t}());As.timer=So.instance,As.res=so.instance,As.ui=da.instance,As.scene=va.instance,As.notifier=ft,As.bridge=pt,As.proxies=_t,As.mediators=gt,As.controllers=yt,n._RF.pop(),n._RF.push({},"aa235BPcpxFQo1Sb4+9nmeB","Entity",void 0);(0,c.ccclass)("cfw.Entity")(Es=function(t){function e(){return t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.__preload=function(){isFunc(t.prototype.__preload)&&t.prototype.__preload.call(this),mt.unshiftUnique(this)},n.on=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!1,n)},n.once=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!0,n)},n.off=function(t,e){ft.detach(t,e,this)},n.notify=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];ft.dispatch.apply(ft,[t].concat(n))},n.onDestroy=function(){ft.unload(this),mt.remove(this)},n.traverse=function(t,e){if(t instanceof r&&this.node.parent!==t){var n=s.copy(Rs,e||s.ZERO);this.node.setWorldPosition(this.node.getWorldPosition(n)),this.node.parent=t}},n.face=function(t,n,i){e.face(this,t,n,i)},n.distance=function(t,n,i){return e.distance(this,t,n,i)},e.face=function(t,n,i,o){s.copy(Rs,n instanceof e?n.node.worldPosition:n instanceof r?n.worldPosition:isObject(n)&&"x"in n?n:Rs.set(n,i,o)),s.subtract(Rs,Rs,t.node.worldPosition),t.node.forward=Rs},e.distance=function(t,n,i,o){return s.copy(Rs,n instanceof e?n.node.worldPosition:n instanceof r?n.worldPosition:isObject(n)&&"x"in n?n:Rs.set(n,i,o)),s.distance(t.node.worldPosition,Rs)},X(e,[{key:"x",get:function(){return this.node.position.x},set:function(t){var e=this.node.position,n=e.y,i=e.z;this.node.setPosition(t,n,i)}},{key:"y",get:function(){return this.node.position.y},set:function(t){var e=this.node.position,n=e.x,i=e.z;this.node.setPosition(n,t,i)}},{key:"z",get:function(){return this.node.position.z},set:function(t){var e=this.node.position,n=e.x,i=e.y;this.node.setPosition(n,i,t)}},{key:"wx",get:function(){return this.node.worldPosition.x},set:function(t){var e=this.node.worldPosition,n=e.y,i=e.z;this.node.setWorldPosition(t,n,i)}},{key:"wy",get:function(){return this.node.worldPosition.y},set:function(t){var e=this.node.worldPosition,n=e.x,i=e.z;this.node.setWorldPosition(n,t,i)}},{key:"wz",get:function(){return this.node.worldPosition.z},set:function(t){var e=this.node.worldPosition,n=e.x,i=e.y;this.node.setWorldPosition(n,i,t)}},{key:"activated",get:function(){var t;return null==(t=this.node)?void 0:t.active},set:function(t){this.node.active=t}}]),e}(p));var Ss,Rs=new s;n._RF.pop(),n._RF.push({},"a8ad7cMg+ZAvbJ2C88jquAG","Entity2D",void 0);(0,c.ccclass)("cfw.Entity2D")(Ss=function(t){function e(){return t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.traverse=function(t,e){t instanceof r&&this.node.parent!==t&&function(t,e,n){if(t.getWorldPosition(Tt),t.parent=e,t.setWorldPosition(Tt),n){var i=t.position,r=i.x,o=i.y;t.setPosition(r+n.x,o+n.y)}}(this.node,t,e)},n.distance=function(t,n){return e.distance(this,t,n)},e.distance=function(t,n,i){return b.copy(Ts,n instanceof e?n.node.worldPosition:n instanceof r?n.worldPosition:isObject(n)&&"x"in n?n:Ts.set(n,i)),b.distance(Ts,b.set(Cs,t.node.worldPosition.x,t.node.worldPosition.y))},X(e,[{key:"x",get:function(){return this.node.position.x},set:function(t){var e=this.node.position,n=e.y,i=e.z;this.node.setPosition(t,n,i)}},{key:"y",get:function(){return this.node.position.y},set:function(t){var e=this.node.position,n=e.x,i=e.z;this.node.setPosition(n,t,i)}},{key:"w",get:function(){var t;return null==(t=this.getComponent(_))?void 0:t.width},set:function(t){this.getComponent(_).width=t}},{key:"h",get:function(){var t;return null==(t=this.getComponent(_))?void 0:t.height},set:function(t){this.getComponent(_).height=t}},{key:"size",get:function(){var t;return null==(t=this.getComponent(_))?void 0:t.contentSize},set:function(t){this.getComponent(_).setContentSize(t.width,t.height)}},{key:"alpha",get:function(){var t,e;return null!=(t=null==(e=this.getComponent(T))?void 0:e.opacity)?t:1},set:function(t){var e;(null!=(e=this.getComponent(T))?e:this.addComponent(T)).opacity=255*t}}]),e}(p));var Os,Ts=new b,Cs=new b;new s;n._RF.pop(),n._RF.push({},"309d57B9ZRMrpAOGk9T5how","Controller",void 0);var Fs=st.Time,Ps=Fs.SECOND,Ns=Fs.SPAN,Ls=c.ccclass;t("C",Ls("cfw.Controller")(Os=function(t){function e(){return t.apply(this,arguments)||this}tt(e,t);var n=e.prototype;return n.__preload=function(){isFunc(t.prototype.__preload)&&t.prototype.__preload.call(this),yt.unshiftUnique(this)},n.on=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!1,n)},n.once=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!0,n)},n.off=function(t,e){ft.detach(t,e,this)},n.notify=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];ft.dispatch.apply(ft,[t].concat(n))},n.onDestroy=function(){ft.unload(this),pt.unload(this),yt.remove(this)},n.onSecond=function(t,e){},n.onSpan=function(t,e){},X(e,[{key:"listenSecond",get:function(){return dt.hasHandler(this.onSecond,this)},set:function(t){t&&!this.listenSecond?dt.attach(Ps,this.onSecond,this):!t&&this.listenSecond&&dt.detach(Ps,this.onSecond,this)}},{key:"listenSpan",get:function(){return dt.hasHandler(this.onSecond,this)},set:function(t){t&&!this.listenSpan?dt.attach(Ns,this.onSpan,this):!t&&this.listenSpan&&dt.detach(Ns,this.onSpan,this)}},{key:"scene",get:function(){return i.getScene()}}]),e}(p))||Os);n._RF.pop(),n._RF.push({},"5f990Fha2dPN7FWfdhOV626","Proxy",void 0);var xs,Is,Ds,ks,zs,Us,Bs,js,Ms,Vs,Gs,qs;t("P",function(){function t(){this._inited=void 0,this._inited=!0,_t.unshiftUnique(this),this.init()}var e=t.prototype;return e.init=function(){},e.update=function(){},e.on=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!1,n)},e.once=function(t,e,n){void 0===n&&(n=0),ft.attach(t,e,this,!0,n)},e.off=function(t,e){ft.detach(t,e,this)},e.notify=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];ft.dispatch.apply(ft,[t].concat(n))},e.destroy=function(){ft.unload(this),pt.unload(this),_t.remove(this)},X(t,[{key:"inited",get:function(){return this._inited}}]),t}());n._RF.pop(),n._RF.push({},"22874mQ8YVBfJ8zm638JCNV","item-list",void 0);var Hs=c.ccclass,Ws=function(t){return t[t.Free=0]="Free",t[t.Inactive=1]="Inactive",t}(Ws||{});t("I",(xs=Hs("cfw.ItemList"),Is=Ft("缩减方式",["type",g(Ws)]),Ds=Ft("容器节点（默认自身）",r),ks=Ft("预制模板（Item类）",d),zs=Ft("预制类名（Item类）"),xs(((qs=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return ot(e=t.call.apply(t,[this].concat(i))||this,"reduceType",js,nt(e)),ot(e,"_container",Ms,nt(e)),ot(e,"_prefab",Vs,nt(e)),ot(e,"itemClassName",Gs,nt(e)),e._pool=void 0,e._ItemClass=void 0,e}tt(e,t);var n=e.prototype;return n.__preload=function(){return this.itemPrefab?(this._ItemClass=Y.getClassByName(this.itemClassName),this._ItemClass?void(this._pool=new Bt(this._ItemClass,this.itemPrefab,this.container)):console.error("[ItemList.onLoad]:",'Item class "'+this.itemClassName+'" not found')):console.error("[ItemList.onLoad]","item prefab not defined")},n.onDestroy=function(){this._pool.clear()},n.updateList=function(t){if(this._pool){var e=this.node.children;if(isEmpty(t))this.reduceType===Ws.Free?this.freeAll():e.forEach((function(t){return t.active=!1}));else{for(var n=e.length,i=t.length,r=Math.max(n,i),o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];for(var u=0;u<r;u++){var c,l=e[u],h=t[u];if(l&&h)(c=this._getItemOn(l)).onDataUpdated.apply(c,[h].concat(a)),l.active=!0;else if(l)this.reduceType===Ws.Free?this._pool.free(this._getItemOn(l)):l.active=!1;else{var f;(f=this._pool.claim(this._ItemClass)).onDataUpdated.apply(f,[h].concat(a))}}}}},n.freeAll=function(){var t=this;this.container.children.length<=0||[].concat(this.container.children).forEach((function(e){return t._pool.free(t._getItemOn(e))}))},n._getItemOn=function(t){return t.getComponent(this._ItemClass)},X(e,[{key:"container",get:function(){var t;return null!=(t=this._container)?t:this.node},set:function(t){this._container=t}},{key:"itemPrefab",get:function(){return this._prefab},set:function(t){this._prefab=t,this.itemClassName||(this.itemClassName=t.data._name)}},{key:"items",get:function(){var t=this;return this.container.children.map((function(e){return t._getItemOn(e)}))}}]),e}(p)).ReduceType=Ws,js=at((Bs=qs).prototype,"reduceType",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ws.Free}}),Ms=at(Bs.prototype,"_container",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at(Bs.prototype,"container",[Ds],Object.getOwnPropertyDescriptor(Bs.prototype,"container"),Bs.prototype),Vs=at(Bs.prototype,"_prefab",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at(Bs.prototype,"itemPrefab",[ks],Object.getOwnPropertyDescriptor(Bs.prototype,"itemPrefab"),Bs.prototype),Gs=at(Bs.prototype,"itemClassName",[zs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Us=Bs))||Us));n._RF.pop(),n._RF.push({},"12849E8wJFJureZuPkGnuZ/","index",void 0),n._RF.pop(),n._RF.push({},"af0c0nFW+BBCr5VCUpu5y+V","index",void 0),n._RF.pop()}}}));

System.register("chunks:///relative-camera-925721c5.js",["cc","./index-44e09375.js"],(function(t){var e,n,i,s,a,r,o,l,c,h,u,_,f,d,p,g,m,y,v,b,S,w,A,L,E,C,T,I,R,N,k,M,P,O,D,U,x,F,z,G,H,B,V,W,q,K,Y,X,Z,j,J,Q,$,tt,et,nt,it,st,at,rt,ot;return{setters:[function(t){e=t.cclegacy,n=t.DynamicAtlasManager,i=t.Vec3,s=t.Layers,a=t.view,r=t.Color,o=t.Mat4,l=t.instantiate,c=t.Node,h=t.ParticleSystem,u=t.CurveRange,_=t.GradientRange,f=t.Layout,d=t.Widget,p=t._decorator,g=t.Label,m=t.Component,y=t.UITransform,v=t.Material,b=t.MeshRenderer,S=t.gfx,w=t.Prefab,A=t.Vec4,L=t.Mesh,E=t.resources,C=t.Texture2D,T=t.easing,I=t.Camera,R=t.Quat,N=t.Mat3,k=t.Sprite,M=t.Button,P=t.Animation,O=t.Vec2,D=t.KeyCode,U=t.EventMouse,x=t.input,F=t.sys,z=t.Input,G=t.Rect},function(t){H=t.a,B=t.i,V=t.n,W=t.P,q=t.d,K=t.e,Y=t.f,X=t.T,Z=t.N,j=t.p,J=t.H,Q=t._,$=t.b,tt=t.c,et=t.k,nt=t.g,it=t.j,st=t.s,at=t.C,rt=t.h,ot=t.t}],execute:function(){t({B:he,D:function(t){var e=t.transEnum,n=t.target,s=t.mediator,a=t.from,r=null!=s?s:n;if(e===zt.SUN_2_STR||e===zt.STR_2_SUN);else{i.subtract(_n,a.node.worldPosition,r.node.worldPosition);var o=_n.normalize(),l=o.x,c=o.y,h=o.z,u=Math.parseDegree(Math.atan2(l,h)),_=c>=-.1?1:-1;switch(e){case zt.SUN_2_PLN:return[r.panorama,u,_];case zt.SUN_2_SAT:return[r.belong.panorama,u,_];case zt.PLN_2_SUN:return[a.panorama+je,u,_];case zt.SAT_2_SUN:return[a.belong.panorama+je,u,_];case zt.PLN_2_SAT:return[r.panorama,u,_];case zt.SAT_2_PLN:return[a.panorama+je,u,_];case zt.SAT_2_SAT:case zt.PLN_2_PLN:return[Math.max(a.panorama,r.panorama),u,_]}}},W:De,a:le,a1:function(t,e,n,i){return t.key="units@b"+e,t.color=e>=0?Vt:n?Jt:i?$t:Qt,t},m:function(t){var e,n,i;null==(e=t.getComponent(f))||e.updateLayout(),null==(n=t.getComponent(d))||n.updateAlignment(),null==(i=t.getComponent(X))||i.resetOriginPosition()},s:Ue,t:function(t){var e="";for(;t.length>3;)e=","+t.slice(-3)+e,t=t.slice(0,t.length-3);t&&(e=t+e);return e},w:function(t,e,n,i,s){void 0===s&&(s="-");var a=s+n,r=t.spriteFrame.name.replace(a,"")+(i?a:"");return r===t.spriteFrame.name||(t.spriteFrame=q.res.getSheetFrame(e,r)),t},z:Fe}),e._RF.push({},"5ca31EqJWBNi7D43HSeNZtC","const",void 0),n.instance.enabled=!1;t("K",94607e8);var lt=-.0241,ct=t("Z",{HORIZONTAL:new i(0,0,0),EQUATORIAL:new i(0,0,-23.5),ECLIPTIC:new i(0,0,0),GALACTIC:new i(82.6,120.8,12.5),SOLAR_DIR:new i(.407,-.86,-.305)}),ht=function(t){return t[t.NONE=0]="NONE",t[t.ZODIAC=1]="ZODIAC",t[t.URSA=2]="URSA",t[t.PERSEUS=4]="PERSEUS",t[t.HERCULES=8]="HERCULES",t[t.ORION=16]="ORION",t[t.OCEANIC=32]="OCEANIC",t[t.BAYER=64]="BAYER",t[t.LACAILLE=128]="LACAILLE",t[t.ALL=255]="ALL",t}({}),ut=function(t){return t[t.O=0]="O",t[t.B=1]="B",t[t.A=2]="A",t[t.F=3]="F",t[t.G=4]="G",t[t.K=5]="K",t[t.M=6]="M",t[t.C=7]="C",t[t.W=8]="W",t[t.L=9]="L",t[t.T=10]="T",t[t.Y=11]="Y",t[t.R=12]="R",t[t.N=13]="N",t[t.S=14]="S",t[t.D=15]="D",t[t.Q=16]="Q",t[t.X=17]="X",t}({}),_t=function(t){return t[t.GlobularCluster=1]="GlobularCluster",t[t.OpenCluster=2]="OpenCluster",t[t.DoubleStars=3]="DoubleStars",t[t.GroupedStars=4]="GroupedStars",t[t.EmissiveNebula=11]="EmissiveNebula",t[t.ReflectiveNebula=12]="ReflectiveNebula",t[t.PlanetaryNebula=13]="PlanetaryNebula",t[t.MilkyWayStarCloud=14]="MilkyWayStarCloud",t[t.SupernovaRemnant=15]="SupernovaRemnant",t[t.EllipticalGalaxy=20]="EllipticalGalaxy",t[t.SpiralsGalaxy=21]="SpiralsGalaxy",t[t.BarredSpiralGalaxy=22]="BarredSpiralGalaxy",t[t.IrregularGalaxy=23]="IrregularGalaxy",t[t.StarBurstGalaxy=24]="StarBurstGalaxy",t[t.LenticularGalaxy=25]="LenticularGalaxy",t[t.DwarfGalaxy=29]="DwarfGalaxy",t}({}),ft=(new i(-.235,0,2.265),t("a6",new i(.119,-2.244,-.37))),dt=t("a5",new i(.496,.697,.937)),pt=t("a7",new i(.991,1.394,1.874)),gt=(t("a8",new i(1.409,.902,2.149)),t("a9",new i(-.019,.133,-.534))),mt=118.184,yt=748,vt=10,bt=10,St=1.1,wt=5.2,At=930,Lt=t("N",360),Et=3600,Ct=Lt/24,Tt=function(t){return t[t.STOP=0]="STOP",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.DAY=4]="DAY",t[t.WEEK=5]="WEEK",t[t.MONTH=6]="MONTH",t[t.YEAR=7]="YEAR",t}({}),It=function(t){return t[t.ALPHABET=1]="ALPHABET",t[t.NAMED=2]="NAMED",t[t.HD=3]="HD",t[t.HIP=4]="HIP",t}({}),Rt=t("i",function(t){return t[t.NONE=0]="NONE",t[t.LEVEL_1=2]="LEVEL_1",t[t.LEVEL_2=3]="LEVEL_2",t[t.LEVEL_3=4]="LEVEL_3",t[t.LEVEL_4=5]="LEVEL_4",t[t.LEVEL_5=6]="LEVEL_5",t}({})),Nt=function(t){return t[t.NONE=0]="NONE",t[t.NAMED=1]="NAMED",t[t.MESSIER=2]="MESSIER",t[t.NGC_IC=3]="NGC_IC",t}({}),kt=t("Y",s.nameToLayer("UI_BG")),Mt=t("X",s.nameToLayer("UI_2D")),Pt=t("Q",s.nameToLayer("CONS_3D")),Ot=t("M",s.nameToLayer("MAIN_3D")),Dt=(t("A",s.nameToLayer("GIZMOS")),t("R",{Sheets:{CULTURE:"星座文化",MESSIER_CELL_NUM:16,MESSIER_DEFAULT:[156,2],MESSIER_DEFAULT_BIG:[176,2],CULTURE_CELL_NUM:8,PLANETS_LOD_GIRDS:{ROW:8,COL:4},DSM01_LOD_GIRDS:{ROW:4,COL:2},DSM2_LOD_GIRDS:{ROW:8,COL:4},PRESET:"preset",UI_BORDER:"ui-border",UI_ICON:"ui-icon",UI_POPS:"ui-pops",UI_ICON_DEFAULT:"icon_default"},Textures:{MILKY_WAY:"textures/milky-way",CELESTIAL:"textures/celestial",AST_PLANES:"textures/planetary/astronomical-planes/texture",CELESTIAL_4K:"textures/celestial-4k",CONST_COMBINE:"textures/stellar/constellations-key/texture"},Prefabs:{STAR_PRECISE:"star-precise",CULTURE_QUAD:"culture-quad",SUBSTRUCTURE:"sphere-substructure",ACANTHO:"sphere-acantho",STARS_GPU:"stars-gpu",GALAXIES_GPU:"galaxies-gpu",COMPANIONS_GPU:"companions-gpu",MILKY_CLOUD:"milky-cloud",SUN:"sun",PLANET:"planet",DSM:"dsm",COMET:"comet",ASTEROID:"asteroid",SATELLITE:"satellite",SCOPE:"cylinder-scope",SUPER_CLUSTERS:"super-clusters",LENS_PANEL:"lens-panel",INTRO_PANEL:"intro-panel",VISIT_PANEL:"visit-panel",GUIDE_PANEL:"guide-panel"},Configs:{SOLAR_PLANETS:"solar-planets",SOLAR_DWARFS:"solar-dwarfs",SOLAR_MINORS:"solar-minors",SOLAR_COMETS:"solar-comets",ASTEROID_BELTS:"asteroid-belts",PLANETARY_SATELLITES:"planetary-satellites",SUBSTRUCTURES:"substructures",DEEP_SKY_OBJECTS:"deep-sky-objects",CONSTELLATION_STARS:"constellation-stars",I18N:"i18n"},Materials:{PlanetPresets:{EARTH:"earth",WINDY:"windy",TERRESTRIAL:"terrestrial",GIANT:"giant"}}})),Ut=t("S",{COSMOS:"Cosmos",Cameras:{MAIN:"Main Camera",DEEP:"Deep Sky Camera"},MAIN_LIGHT:"Main Light",MILKY:"MilkyWay",STELLAR:"Stellar",LOCAL:"LocalGG",VIRGO:"VirgoSC",SOLAR:"Solar",PLANETARY:"Planetary"}),xt=["cn","en"],Ft=a.getVisibleSize().height/a.getVisibleSize().width,zt=(t("$",255),t("q",function(t){return t[t.NONE=0]="NONE",t[t.SUN_2_PLN=1]="SUN_2_PLN",t[t.SUN_2_SAT=2]="SUN_2_SAT",t[t.PLN_2_SAT=3]="PLN_2_SAT",t[t.PLN_2_PLN=4]="PLN_2_PLN",t[t.SAT_2_SAT=5]="SAT_2_SAT",t[t.PLN_2_SUN=6]="PLN_2_SUN",t[t.SAT_2_PLN=7]="SAT_2_PLN",t[t.SAT_2_SUN=8]="SAT_2_SUN",t[t.SUN_2_STR=9]="SUN_2_STR",t[t.STR_2_SUN=10]="STR_2_SUN",t}({}))),Gt=(t("H",[zt.SUN_2_PLN,zt.SAT_2_PLN,zt.PLN_2_PLN]),t("J",[zt.SUN_2_SAT,zt.PLN_2_SAT,zt.SAT_2_SAT]),t("I",[zt.PLN_2_SUN,zt.SAT_2_SUN,zt.STR_2_SUN]),t("F",{SUN:{into:"sun",name:"Sun"},PLANETS:[{into:"planet",name:"Mercury"},{into:"planet",name:"Venus"},{into:"planet",name:"Earth"},{into:"planet",name:"Mars"},{into:"planet",name:"Jupiter"},{into:"planet",name:"Saturn"},{into:"planet",name:"Uranus"},{into:"planet",name:"Neptune"}],DWARFS:[{into:"dwarf",name:"Ceres"},{into:"dwarf",name:"Pluto"},{into:"dwarf",name:"Haumea"},{into:"dwarf",name:"Makemake"},{into:"dwarf",name:"Eris"},{into:"belts",name:"Main Belt"},{into:"belts",name:"Kuiper Belt"},{into:"comet",name:"Halley"}]}),16),Ht=new r(158,158,255,255),Bt=new r(255,127,255,255),Vt=new r(255,255,31,255),Wt=new r(31,255,127,255),qt=new r(191,127,63,255),Kt=t("f",new r(143,143,143,255)),Yt=new r(255,255,255,255),Xt=new r(255,191,31,255),Zt=new r(255,191,127,255),jt=new r(127,255,255,255),Jt=new r(255,63,31,255),Qt=new r(63,153,255,255),$t=new r(63,153,153,255),te=(t("e",new r(63,153,153,255)),"cocosmos.guided"),ee="cocosmos.language";function ne(t,e,n,i){void 0===n&&(n=1);var s=Math.parseRadian(t),a=Math.parseRadian(e),r=null!=i?i:{};r.y=Math.sin(a)*n;var o=Math.cos(a)*n;return r.x=Math.sin(s)*o,r.z=Math.cos(s)*o,r}function ie(t,e,n){var s=null!=e?e:new i,a=Math.parseRadian(null!=n?n:-23.5);return i.rotateZ(s,t,i.ZERO,a)}e._RF.pop(),e._RF.push({},"5171fYmXmVIAJkHJrG9ry6z","algorithms",void 0);var se=.3,ae=.01;function re(t,e,n){void 0===n&&(n=0);var s=t.node,a=s.right,r=s.up,o=s.forward,l=s.worldPosition;if(i.subtract(oe,e.worldPosition,l),i.dot(oe,o)<-n)return!0;var c=t.fov/2*(1+n),h=c/Ft*(1+n),u=oe.length(),_=90-Math.parseDegree(Math.acos(i.dot(oe,a)/u)),f=90-Math.parseDegree(Math.acos(i.dot(oe,r)/u));return Math.abs(f)>c||Math.abs(_)>h}var oe=new i;function le(t,e,n){void 0===n&&(n=!1);var i=n?e.map((function(t){return t*t})):e,s=i[0],a=i[1],r=i[2],o=i[3];return 2===i.length?t<=s?0:t>=a?1:(t-s)/(a-s):4===i.length?t<=s||t>=o?0:t<a?(t-s)/(a-s):t>r?(o-t)/(o-r):1:void 0}function ce(t,e,n){if(isNum(e)){var i=256/n,s=e*i;return[s,s,t%n*i,Math.floor(t/n)*i]}var a=e.COL,r=256/a,o=256/e.ROW;return[r,o,t%a*r,Math.floor(t/a)*o]}function he(t,e,n){var i=Math.clamp01((n-t)/(e-t));return i*i*(3-2*i)}function ue(t,e,n,i,s){return Math.lerp(s,i,Math.clamp01((t-e)/(n-e)))}e._RF.pop(),e._RF.push({},"c6b844VSoRDZ6jGdHhB5KJ8","notifications",void 0);var _e,fe=t("V",{Transform:{ZOOM_START:"View:变换.推拉开始",ZOOM_OVER:"View:变换.推拉完成",FACE_OVER:"View:变换.面向完成",VISIT_OVER:"View:变换.访问抵达"},Lens:{ANGLE_CHANGE:"View:镜头.改变角度",ANGLE_ADDED:"View:镜头.增加角度"},Scale:{RATIO_CHANGE:"View:尺寸.缩放比例"}}),de=t("U",{Zoom:"UI:Zoom",LANGUAGE:"UI:语言",Labels:{CELESTIAL:"UI:名称.天体名",CONSTELLATION:"UI:名称.星座名",NEBULAR:"UI:名称.星云名",GALAXY:"UI:名称.星系名",NOTE:"UI:名称.标注名",STAR_NAME_LEVEL:"UI:名称.星等",STAR_NAME_TYPE:"UI:名称.命名"},Gizmos:{GRIDS:"UI:标尺.网格",RULERS:"UI:标尺.尺度",TRACKS:"UI:标尺.星轨",SCOPES:"UI:标尺.范围",STRUCTS:"UI:标尺.结构",LINES:"UI:标尺.引线",TARGET:"UI:标尺.目标"},Solar:{SUN:"UI:太阳系.太阳",PLANETS:"UI:太阳系.行星",DWARFS:"UI:太阳系.矮行星",MINORS:"UI:太阳系.小行星",COMETS:"UI:太阳系.彗星",BELTS:"UI:太阳系.小行星带",RATIO:"UI:太阳系.比例"},Local:{SATELLITES:"UI:本地.卫星",MAGNETICS:"UI:本地.磁场",AXIS:"UI:本地.地轴",DIAMETER:"UI:本地.直径",LUNAR:"UI:本地.白道面",EQUATORIAL:"UI:本地.赤道面",ECLIPTIC:"UI:本地.黄道面",TIDE_LOCK:"UI:本地.潮汐锁定",CONSTITUTE:"UI:本地.构成",ARTIFICIAL:"UI:本地.人造物"},Stellar:{STARS:"UI:星际.恒星",NEBULAS:"UI:星际.星云",CLUSTERS:"UI:星际.星团",GALAXIES:"UI:星际.星系",LINES:"UI:星际.连线",CULTURES:"UI:星际.形象",CONSTS:"UI:星际.星座",BLACKHOLE:"UI:星际.黑洞"},DeepSky:{NAMED:"UI:DeepSky.命名"},Consts:{GROUP:"UI:Consts.星族",HEMISPHERE:"UI:Consts.南北"},VISIT:"UI:访问",VISIBLE:"UI:可见性",FULL_SCREEN:"UI:全屏幕",LENS_PARAMS:"UI:镜头参数",IGNORE_TARGET_ONCE:"UI:忽略目标一次",Coord:{EQUATORIAL:"UI:坐标.天球",HOUR_ANGLE:"UI:坐标.时角",ECLIPTIC:"UI:坐标.黄道",GALACTIC:"UI:坐标.银道",HORIZONTAL:"UI:坐标.地平",EQUATOR:"UI:坐标.道线",AXIS:"UI:坐标.轴线",POLAR:"UI:坐标.极点",STRENGTH:"UI:坐标.强度"},Panels:{OPEN:"UI.面板.开启",CLOSE:"UI.面板.关闭"},Popups:{INFO_LINE:"UI:弹出.信息行",TIP_LINE:"UI:弹出.提示行",VISIT_CD:"UI:弹出.访问倒计时"}}),pe=t("T",{Load:{DYNAMIC_TEX:"Task.加载.动态纹理",APPROACH_SCOPE:"Task.加载.范围逼近"}}),ge=t("h",{TEX_CONST_NORTH:"const-north",TEX_CONST_SOUTH:"const-south",TEX_MILKY_HOR:"milky-hor",TEX_MILKY_VER:"milky-ver",TEX_DSM_ALB:"dwarfs-idx-albedo",TEX_DSM_NRM:"dwarfs-idx-normal",TEX_MSR_INNERS:"msr-inners",TEX_MSR_GALAXIES:"msr-galaxies",TEX_SPR_CLUSTERS:"spr-clusters"});e._RF.pop(),e._RF.push({},"a1d85bO1BlJ0ocKA+vqE9TM","user-proxy",void 0);var me,ye,ve=V(_e=function(t){function e(){return t.call(this)||this}H(e,t);var n=e.prototype;return n.updateGuided=function(){localStorage.setItem(be,"guided")},n.updateLanguage=function(t){localStorage.setItem(Se,t)},B(e,[{key:"guided",get:function(){return"guided"===localStorage.getItem(be)}},{key:"language",get:function(){var t=localStorage.getItem(Se);return xt.contains(t)?t:null}}]),e}(W))||_e,be=te,Se=ee,we=t("r",ve.instance);e._RF.pop(),e._RF.push({},"5b467VzhNpE4J6FK9PfYwDY","ui-proxy",void 0);var Ae,Le,Ee=t("a2",V(((ye=function(t){function e(){var e;return(e=t.call(this)||this)._fullscreen=!1,e._show_cel_names=!0,e._show_const_names=!1,e._show_nebular_names=!0,e._show_galaxy_names=!0,e._show_notes=!0,e._star_name_level=Rt.NONE,e._star_name_type=It.NAMED,e._deep_name_type=Nt.NAMED,e._language="cn",e._lens_locked=!1,e._show_lens_vel=!0,e._show_esc_vel=!0,e._show_civ_lvl=!1,e}H(e,t);var n=e.prototype;return n.localizeLanguage=function(t){this._language=t},n.getStateByName=function(t){switch(t){case"锁定镜头":return this.lensLocked;case"镜头速度":return this.showLensVel;case"逃逸速度":return this.showEscVel;case"文明等级":return this.showCivLvl;case"天体名":return this.showCelNames;case"星座名":return this.showConstNames;case"星云名":return this.showNebularNames;case"星系名":return this.showGalaxyNames;case"标注名":return this.showNotes;default:return!1}},n.init=function(){var t=this;this.on(Te,(function(e){return t._fullscreen=e}),99),this.on(Ce.CELESTIAL,(function(e){return t._show_cel_names=e})),this.on(Ce.CONSTELLATION,(function(e){return t._show_const_names=e})),this.on(Ce.NEBULAR,(function(e){return t._show_nebular_names=e})),this.on(Ce.GALAXY,(function(e){return t._show_galaxy_names=e})),this.on(Ce.NOTE,(function(e){return t._show_notes=e})),this.on(Ce.STAR_NAME_LEVEL,(function(e){return t._star_name_level=e})),this.on(Ce.STAR_NAME_TYPE,(function(e){return t._star_name_type=e})),this.on(Re,(function(e){t._language=e,we.updateLanguage(e)})),this.on(Ie,(function(e){var n=e.lock,i=e.showLensVel,s=e.showEscVel,a=e.showCivLvl;t._lens_locked=!!n,t._show_lens_vel=!!i,t._show_esc_vel=!!s,t._show_civ_lvl=!!a}),99)},B(e,[{key:"fullscreen",get:function(){return this._fullscreen}},{key:"showCelNames",get:function(){return this._show_cel_names}},{key:"showConstNames",get:function(){return this._show_const_names}},{key:"showNebularNames",get:function(){return this._show_nebular_names}},{key:"showGalaxyNames",get:function(){return this._show_galaxy_names}},{key:"showNotes",get:function(){return this._show_notes}},{key:"starNameLevel",get:function(){return this._star_name_level}},{key:"starNameType",get:function(){return this._star_name_type}},{key:"deepNameType",get:function(){return this._deep_name_type}},{key:"language",get:function(){return this._language}},{key:"lensLocked",get:function(){return this._lens_locked}},{key:"showLensVel",get:function(){return this._show_lens_vel}},{key:"showEscVel",get:function(){return this._show_esc_vel}},{key:"showCivLvl",get:function(){return this._show_civ_lvl}},{key:"showScopeCylinders",get:function(){return!1}},{key:"showIndicativeLines",get:function(){return!1}},{key:"showSubStructures",get:function(){return!1}}],[{key:"use4KTex",get:function(){return!1}}]),e}(W)).DEEP_DIST=1e3,ye.WPS_CULLING_VALVE=.01,ye.FOV_CULLING_VALVE=.1,ye.NameLabelAtt=[.02,.2,5,10],ye.IndicativeLineAtt=[.1,.2,.8,1.5],ye.GroupLineStrength=63/255,ye.LabelColor={DEFAULT:Yt,SUN:Xt,PLANET:Wt,SATELLITE:Kt,DWARF:qt,MINOR:Kt,BELTS:qt,COMET:Ht,STARS:Yt,CONST:Qt,CLUSTER:Ht,NEBULA:Bt,GALAXY:Zt,COMPANION:Kt,LY:Vt,AU:Jt,MILKY:jt,AXIS:Vt,DIAMETER:Yt},ye.FontSize={MAIN:24,DEFAULT:20,SECONDARY:Gt,TITLE:24,STARS:Gt,CLUSTER:Gt,NEBULA:Gt,GALAXY:20,DWARF:Gt,COORD:Gt,EQUATOR:20,POLAR:24,RULER:Gt,CONST:24,CONST_SML:20,CONST_SML_AREA_VALUE:800,GROUP:20},me=ye))||me),Ce=de.Labels,Te=de.FULL_SCREEN,Ie=de.LENS_PARAMS,Re=de.LANGUAGE,Ne=t("u",Ee.instance);e._RF.pop(),e._RF.push({},"009b6JIHkJBZ5Agt31wjDBK","gizmos-proxy",void 0);var ke=t("G",V(((Le=function(t){function e(){var e;return(e=t.call(this)||this)._show_grids=!0,e._show_rulers=!0,e._show_tracks=!0,e._show_scopes=!0,e._show_structs=!0,e._show_lines=!0,e._show_target=!0,e._show_celestial=!1,e._use_equatorial=!1,e._show_ecliptic=!1,e._show_galactic=!1,e._show_horizontal=!1,e._coord_grids=!0,e._coord_equator=!1,e._coord_axis=!0,e._coord_polar=!0,e._line_strength=1,e}H(e,t);var n=e.prototype;return n.getStateByName=function(t){switch(t){case"网格":return this.showGrids;case"尺度":return this.showRulers;case"星轨":return this.showTracks;case"范围":return this.showScopes;case"结构":return this.showStructs;case"引线":return this.showLines;case"目标":return this.showTarget;case"天球":return this.showEquatorial;case"时角":return this.showHourAngle;case"黄道":return this.showEcliptic;case"银道":return this.showGalactic;case"地平":return this.showHorizontal;case"道线":return this.showCoordEquator;case"轴线":return this.showCoordAxis;case"极点":return this.showCoordPolar;default:return!1}},n.init=function(){var t=this;this.on(Me.GRIDS,(function(e){return t._show_grids=e})),this.on(Me.RULERS,(function(e){return t._show_rulers=e})),this.on(Me.TRACKS,(function(e){return t._show_tracks=e})),this.on(Me.SCOPES,(function(e){return t._show_scopes=e})),this.on(Me.STRUCTS,(function(e){return t._show_structs=e})),this.on(Me.LINES,(function(e){return t._show_lines=e})),this.on(Me.TARGET,(function(e){return t._show_target=e})),this.on(Pe.EQUATORIAL,(function(e){t._show_celestial=e,t._use_equatorial=!0})),this.on(Pe.HOUR_ANGLE,(function(e){t._show_celestial=e,t._use_equatorial=!1})),this.on(Pe.ECLIPTIC,(function(e){return t._show_ecliptic=e})),this.on(Pe.GALACTIC,(function(e){return t._show_galactic=e})),this.on(Pe.HORIZONTAL,(function(e){return t._show_horizontal=e})),this.on(Pe.EQUATOR,(function(e){t._coord_equator=e,t._coord_grids=!e})),this.on(Pe.AXIS,(function(e){return t._coord_axis=e})),this.on(Pe.POLAR,(function(e){return t._coord_polar=e})),this.on(Pe.STRENGTH,(function(e){return t._line_strength=2*e}))},B(e,[{key:"showGrids",get:function(){return this._show_grids}},{key:"showRulers",get:function(){return this._show_rulers}},{key:"showTracks",get:function(){return this._show_tracks}},{key:"showScopes",get:function(){return this._show_scopes}},{key:"showStructs",get:function(){return this._show_structs}},{key:"showLines",get:function(){return this._show_lines}},{key:"showTarget",get:function(){return this._show_target}},{key:"showEquatorial",get:function(){return this._show_celestial&&this._use_equatorial}},{key:"showHourAngle",get:function(){return this._show_celestial&&!this._use_equatorial}},{key:"showEcliptic",get:function(){return this._show_ecliptic}},{key:"showGalactic",get:function(){return this._show_galactic}},{key:"showHorizontal",get:function(){return this._show_horizontal}},{key:"showCoordGrids",get:function(){return this._coord_grids}},{key:"showCoordEquator",get:function(){return this._coord_equator}},{key:"showCoordAxis",get:function(){return this._coord_axis}},{key:"showCoordPolar",get:function(){return this._coord_polar}},{key:"lineStrength",get:function(){return this._line_strength}}]),e}(W)).GridsColor={SATELLITE:new r(127,127,127,191),PLANETARY:new r(0,255,127,191),SOLAR:new r(255,127,0,191),GALACTIC:new r(0,255,255,191)},Le.TrackColors={PLANET:new r(0,255,127,127),SATELLITE:new r(191,191,191,127),DWARF:new r(191,127,63,191),MINOR:new r(127,127,127,191),COMET:new r(191,127,255,191),SOLAR:new r(255,255,0,191)},Le.LineColor={KILO_MT_DK:new r(0,127,255,127),KILO_METER:new r(63,153,153,127),ASTRO_UNIT:new r(255,127,127,127),LIGHT_YEAR:new r(255,255,127,127),CONST_LINES:new r(0,191,255,255),EQUATORIAL:new r(63,63,255,191),ECLIPTIC:new r(255,63,0,191),GALACTIC:new r(0,255,255,191),HORIZONTAL:new r(0,255,127,191),STARS:new r(0,255,255,127),CLUSTER:new r(158,158,255,111),NEBULA:new r(255,127,255,111),COMPANION:new r(127,127,127,191),LocalGG:new r(159,255,159,127),VirgoSC:new r(255,159,255,127),Laniakea:new r(255,191,159,127),Observable:new r(159,159,255,127),LOCAL_AXIS:new r(255,255,0,255),LOCAL_DIAM:new r(255,255,255,255)},Le.TrackAtt=[.01,.05,20,30],Le.CoordColor={CELESTIAL:new r(127,127,255,127),ECLIPTIC:new r(255,127,0,127),GALACTIC:new r(0,255,255,127),HORIZONTAL:new r(0,255,127,127)},Le.RULER_IGNORES=[-7,11],Le.ScopeColor={Solar:new r(255,255,0,255),Helio:new r(255,127,0,255),MilkyWay:new r(63,255,255,255),LocalGG:new r(63,255,63,255),VirgoSC:new r(255,63,255,255),Laniakea:new r(255,127,63,255),Observable:new r(63,63,255,255)},Le.ScopeAtt=[.17,.3,.8,1],Le.Segments={CIRCLE:128,ELLIPSE:256,CYLINDER:32,LINE:8,ARC:64},Ae=Le))||Ae),Me=de.Gizmos,Pe=de.Coord,Oe=t("l",ke.instance);function De(t,e){return t.layer=1<<(isNum(e)?e:s.nameToLayer(e)),t}function Ue(t,e,n,s){switch(t.alwaysInCanvas=!1,t.locate="中心",t.scalable=!1,t.color=Qe.DEFAULT,t.fontSize=Je.DEFAULT,De(t.node,Mt),t.bold=t.italic=!1,t.char=!0,t.perspective=!1,t.setUIOffset(0,0),t.setOffset(0,0,0),t.node.setScale(i.ONE),e){case"stars":case"cluster":case"nebula":t.color=Qe[e.toUpperCase()],t.fontSize=Je[e.toUpperCase()],t.locate=n?"上标":"下标",t.setOffset(0,n?.6:-.6,0),t.scalable=!0,De(t.node,kt);break;case"planetary":case"solar":var a=n;t.color=Qe[a.toUpperCase()],t.fontSize=Je.DEFAULT,["sun","planet","satellite"].contains(a)&&(t.alwaysInCanvas=!0),"belts"!==a&&t.setOffset(0,.55,0),["sun","planet"].excludes(a)&&(t.fontSize=Je.SECONDARY),t.locate="comet"===n?"上右":"上标",t.scalable=!0;break;case"const":t.color=Qe.CONST,t.fontSize=n?Je.CONST:Je.CONST_SML,De(t.node,kt);break;case"milky":t.color=Qe.MILKY,t.fontSize=n?Je.MAIN:Je.DEFAULT,t.scalable=!0,t.perspective=!0;break;case"struct":switch(n){case"subgroups":t.color=$e.LocalGG;break;case"groups":t.color=$e.VirgoSC;break;case"clusters":t.color=$e.Laniakea,t.fontSize=Je.MAIN;break;case"great-walls":t.color=$e.Observable,t.fontSize=Je.MAIN}t.fontSize="helios"===n?Je.DEFAULT:Je.MAIN,t.scalable=t.perspective=!0;break;case"coord":t.fontSize=Je.COORD,De(t.node,kt);break;case"galaxy":t.color="companion"===n?Qe.COMPANION:Qe.GALAXY,t.fontSize="center"===n?Je.GALAXY:Je.DWARF,t.locate=s?"上标":"下标",t.setOffset(0,s?.7:-.7,0),t.scalable=!0;break;case"ruler":switch(n){case"equator":t.fontSize=Je.EQUATOR,t.bold=!0,De(t.node,kt);break;case"polar":t.fontSize=Je.POLAR,t.bold=!0,De(t.node,kt);break;case"unit":t.fontSize=Je.RULER,t.color=$e.LIGHT_YEAR;break;case"title":t.fontSize=Je.TITLE,t.scalable=t.perspective=!0;break;default:t.fontSize=Je.DEFAULT,t.scalable=t.perspective=!0}}return t}function xe(t,e,n){var i=null!=t?t:new r,s=isStr(e)?ut[e.charAt(0).toUpperCase()]:e;if(!isNum(s))return console.warn("undefined spectrum:",e,n),i.set(r.WHITE),nn;switch(s){case tn:i.set(63,127,255,255);break;case en:i.set(127,191,255,255);break;case nn:i.set(255,255,255,255);break;case sn:i.set(255,255,191,255);break;case an:i.set(255,255,127,255);break;case rn:i.set(255,191,127,255);break;case on:i.set(255,127,127,255);break;case hn:i.set(255,127,63,255);break;case ln:case cn:i.set(255,63,63,255)}return s}function Fe(t,e,n,i){var s=i?l(i):new c;return s.name=t,n&&(s.parent=n),De(s,e)}function ze(t,e,n){var s=e.num,a=e.sizes,o=e.colors,l=e.color,c=e.radius,f=e.thickness,d=e.random,p=e.position,g=e.scale,m=e.euler,y=t.getComponent(h);if(y.capacity=y.rateOverTime.constant=null!=s?s:1e3,notEmpty(a)){y.startSize3D=!1,y.startSizeX.mode=u.Mode.TwoConstants;var v=a[0],b=a[1];y.startSizeX.constantMin=v,y.startSizeX.constantMax=b}if(notEmpty(o)){y.startColor.mode=_.Mode.TwoColors;var S=o[0],w=o[1];y.startColor.colorMin=S,y.startColor.colorMax=w}else y.startColor.mode=_.Mode.Color,y.startColor.color=null!=l?l:r.WHITE;var A=y.shapeModule;return A.radius=null!=c?c:1,A.radiusThickness=null!=f?f:.5,A.randomPositionAmount=null!=d?d:0,A.position.set(i.copy(_n,null!=p?p:i.ZERO)),A.scale.set(i.copy(_n,null!=g?g:i.ONE)),A.rotation.set(i.copy(_n,null!=m?m:i.ZERO)),n&&(t.parent=n),y.isPlaying||y.play(),t}function Ge(t,e,n){var s=e,a=s.position,r=s.scale,o=s.euler,l=s.worldPosition;return t.setPosition(i.copy(_n,null!=a?a:i.ZERO)),t.setScale(i.copy(_n,null!=r?r:i.ONE)),t.setRotationFromEuler(i.copy(_n,null!=o?o:i.ZERO)),n&&(t.parent=n),l&&t.setWorldPosition(i.copy(_n,l)),t}function He(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i="jpg");var s=t.toLowerCase(),a=(Ee.use4KTex?Dt.Textures.CELESTIAL_4K:Dt.Textures.CELESTIAL)+"/"+s+"-"+e;n?(q.res.loadRemoteTexture(a+"-0",i),q.res.loadRemoteTexture(a+"-1",i)):q.res.loadRemoteTexture(a,i)}function Be(t,e,n,i,s,a){return Ve.apply(this,arguments)}function Ve(){return(Ve=K(Y().mark((function t(e,n,i,s,a,r){var o,l,c;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a&&(a=!1),void 0===r&&(r="jpg"),o=n.toLowerCase(),l=Ee.use4KTex?Dt.Textures.CELESTIAL_4K:Dt.Textures.CELESTIAL,c=l+"/"+o+"-"+s,!a){t.next=20;break}return t.t0=e,t.t1=i+"0",t.next=10,q.res.loadRemoteTexture(c+"-0",r);case 10:return t.t2=t.sent,t.t0.setProperty.call(t.t0,t.t1,t.t2),t.t3=e,t.t4=i+"1",t.next=16,q.res.loadRemoteTexture(c+"-1",r);case 16:t.t5=t.sent,t.t3.setProperty.call(t.t3,t.t4,t.t5),t.next=26;break;case 20:return t.t6=e,t.t7=i,t.next=24,q.res.loadRemoteTexture(c,r);case 24:t.t8=t.sent,t.t6.setProperty.call(t.t6,t.t7,t.t8);case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function We(t,e,n){t.setProperty(e,_n.set(n,n,n))}function qe(t,e,n,i){var s;void 0===i&&(i=1),r.fromHEX(un,null!=n?n:fn),un.a=255*(null!=(s=i)?s:1),t.setProperty(e,un)}function Ke(t){var e=t.toLowerCase();if(e.includes("@")){var n=e.split("@"),i=n[0],s=n[1],a=q.res.getConfigItem(Dt.Configs.I18N,i);return(null!=a?a:{})[s]}return q.res.getConfigItem(Dt.Configs.I18N,e)}e._RF.pop(),e._RF.push({},"d4077MhivBEiLFvOdHR7yTu","helpers",void 0);var Ye,Xe,Ze=Dt.Materials.PlanetPresets,je=-.477,Je=Ee.FontSize,Qe=Ee.LabelColor,$e=ke.LineColor,tn=ut.O,en=ut.B,nn=ut.A,sn=ut.F,an=ut.G,rn=ut.K,on=ut.M,ln=ut.C,cn=ut.S,hn=ut.R,un=new r,_n=new i,fn=(new o,"#FFFFFF");e._RF.pop(),e._RF.push({},"9ed9bE5EPRB7r/O7ydDeCBJ","log-proxy",void 0);var dn,pn,gn=t("x",V(((Xe=function(t){function e(){return t.call(this)||this}return H(e,t),e}(W)).PRINT_POW10=!1,Xe.PRINT_TRANS=!1,Xe.PRINT_LOAD_TASK=!1,Xe.PRINT_VISIT=!1,Ye=Xe))||Ye);gn.instance;e._RF.pop(),e._RF.push({},"c6c8bvbTb5HTazfxjPQi6v4","visit-proxy",void 0);var mn,yn,vn=V(((pn=function(t){function e(){var e;return(e=t.call(this)||this)._center=null,e._transInfo={},e._transforming=!1,e._point=null,e}H(e,t);var n=e.prototype;return n.visit=function(t){var e=this;this._center=t,this.notify(bn.FACE_OVER),this.on(bn.VISIT_OVER,(function(){return e._transforming=!1}),99)},n.onClickVisit=function(t,e,n){var i;void 0===n&&(n=null),t!==(null==(i=this._center)||null==(i=i.node)?void 0:i.name)&&(this._point=n,this._transforming=!0,this._transInfo.name=t,this._transInfo.into=e,this._transInfo.from=this._center,this._transInfo.target=this._transInfo.mediator=null,function(t){var e=t.into,n=t.from,i=n.node.name,s=n.cat;if("sun"===s)if("Sun"===i)switch(e){case"satellite":t.transEnum=zt.SUN_2_SAT;break;case"sun":t.transEnum=zt.SUN_2_STR;break;default:t.transEnum=zt.SUN_2_PLN}else t.transEnum=zt.STR_2_SUN;else"satellite"===s?"Sun"===t.name?t.transEnum=zt.SAT_2_SUN:t.transEnum="satellite"===e?zt.SAT_2_SAT:zt.SAT_2_PLN:"Sun"===t.name?t.transEnum=zt.PLN_2_SUN:t.transEnum="satellite"===e?zt.PLN_2_SAT:zt.PLN_2_PLN}(this._transInfo),gn.PRINT_TRANS&&console.info("[Trans]:",zt[this._transInfo.transEnum],e,t),this.notify(bn.ZOOM_START))},n.init=function(){this.on(de.VISIT,this.onClickVisit)},B(e,[{key:"center",get:function(){return this._center}},{key:"centerName",get:function(){var t,e;return null!=(t=null==(e=this._center)||null==(e=e.node)?void 0:e.name)?t:null}},{key:"inType",get:function(){var t,e;return null!=(t=null==(e=this._center)?void 0:e.cat)?t:null}},{key:"transInfo",get:function(){return this._transInfo}},{key:"transforming",get:function(){return this._transforming}},{key:"point",get:function(){return this._point}},{key:"inSolar",get:function(){return"Sun"===this.centerName}},{key:"inStar",get:function(){return"sun"===this.inType&&"Sun"!==this.centerName}},{key:"inPlanetary",get:function(){return["planet","dwarf","minor","comet","belts"].contains(this.inType)}},{key:"inPlanet",get:function(){return"planet"===this.inType}},{key:"inComet",get:function(){return"comet"===this.inType}},{key:"inSatellite",get:function(){return"satellite"===this.inType}}]),e}(W)).LensOffsets={BASE:.2,SUGGEST:.3,PLANET_SCOPE:.6},dn=pn))||dn,bn=fe.Transform,Sn=t("v",vn.instance);e._RF.pop(),e._RF.push({},"14ce9Ve3vtGD61QBqUfKczW","cosmos-proxy",void 0);var wn,An,Ln=mt,En=yt,Cn=vt,Tn=bt,In=St,Rn=wt,Nn=At,kn=t("b",V(((yn=function(t){function e(){var n;return(n=t.call(this)||this)._scale=1,n._fov=1,n._dest10=e.INIT_POW,n._pow10=e.INIT_POW,n._autoAA2nd=0,n._delta=0,n._step=0,n._ntfComp=null,n}H(e,t);var n=e.prototype;return n.init=function(){this.on(Z.Time.TICK,this.onTick),this.on(de.Zoom,this.onZoom),this.on(fe.Scale.RATIO_CHANGE,this.onRatioChanged)},n.addPow10=function(t){this._dest10+=t,this._pow10+=t,this._syncByDest()},n.zoomToDur=function(t,n,i,s){void 0===i&&(i=null),void 0===s&&(s=null),this._dest10=t,this._step=(t-this._pow10)/(Math.abs(n)+Number.EPSILON),this._ntfComp=s,this._syncByDest(),isBool(i)&&(this._autoAA2nd=(i?1:-1)*e.ROTATE_SPEED)},n.zoomToBy=function(t,n,i,s){void 0===i&&(i=null),void 0===s&&(s=null),this._dest10=t,this._step=t-this._pow10>0?n:-n,this._ntfComp=s,this._syncByDest(),isBool(i)&&(this._autoAA2nd=(i?1:-1)*e.ROTATE_SPEED)},n.onTick=function(t,e){this._delta=this._pow10,0==this._step?this._pow10=Math.lerp(this._pow10,this._dest10,t):(this._pow10+=this._step*t,(this._step>0&&this._pow10>=this._dest10||this._step<0&&this._pow10<=this._dest10)&&(this._pow10=this._dest10,this._step=0,this._ntfComp&&this.notify(this._ntfComp),this._autoAA2nd=0)),this._delta=(this._pow10-this._delta)/t,gn.PRINT_POW10&&console.info("[pow10]:",this._pow10)},n._syncByDest=function(){this._fov=Math.pow(10,this._dest10-e.INIT_POW),this._scale=1/this._fov},n.onZoom=function(t){var n,i,s=e.COSMOS_POWS,a=s[0],r=s[1],o=null!=(n=null==(i=Sn.center)?void 0:i.nearest)?n:a,l=this._scale*(1+t),c=1/l,h=Math.log10(c)+e.INIT_POW;h<=o||h>=r||(this._scale=l,this._fov=c,this._dest10=h)},n.onRatioChanged=function(){var t,n,i=null!=(t=null==(n=Sn.center)?void 0:n.nearest)?t:e.COSMOS_POWS[0];i>this._dest10&&(this._dest10=i,this._syncByDest())},n._between=function(t){var e=t[0],n=t[1];return e<=this._pow10&&this._pow10<=n},B(e,[{key:"planetary",get:function(){return this._between(e.Scopes.Planetary)}},{key:"solar",get:function(){return this._between(e.Scopes.Solar)}},{key:"helio",get:function(){return this._between(e.Scopes.Helio)}},{key:"stellar",get:function(){return this._between(e.Scopes.Stellar)}},{key:"milky",get:function(){return this._between(e.Scopes.MilkyWay)}},{key:"local",get:function(){return this._between(e.Scopes.LocalGG)}},{key:"virgo",get:function(){return this._between(e.Scopes.VirgoSC)}},{key:"super",get:function(){return this._between(e.Scopes.Observable)}},{key:"underSolar",get:function(){return this._pow10<=e.Scopes.Solar[1]-.5}},{key:"scale",get:function(){return this._scale}},{key:"fov",get:function(){return this._fov}},{key:"pow10",get:function(){return this._pow10}},{key:"autoAA2nd",get:function(){return this._autoAA2nd}},{key:"delta",get:function(){return this._delta}}]),e}(W)).INIT_POW=-4,yn.COSMOS_POWS=[-9,11.3],yn.Scopes={Planetary:[-99,-3,-7],Solar:[-99,-1.4,-5,[Ln/2,Ln/1.6,Ln/2]],Helio:[-3,.7,-3,[En/2,En/1.8,En/2]],Stellar:[-99,4.5,lt],MilkyWay:[1.5,7,3.9759,[Cn/2,Cn,Cn/2],ft],LocalGG:[4.5,8,5.9759,[Tn/2,.8*Tn,Tn/2],dt],VirgoSC:[6,9.2,7.9759,[In/2,In/1.8,In/1.2],gt],Laniakea:[6,11,7.9759,[Rn/2,Rn/2,Rn/2]],Observable:[7.5,11.9759,8,[Nn/2,Nn,Nn/2]]},yn.Bases={Planetary:-7,Solar:-3,Helio:-.3,Stellar:2.3,MilkyWay:4.9,LocalGG:6.8,VirgoSC:7.9,Laniakea:8.6,Observable:11.25},yn.TRANS_SPEED=.55,yn.TRANS_HIGHT=27,yn.ROTATE_SPEED=15,mn=yn))||mn),Mn=t("c",kn.instance);e._RF.pop(),e._RF.push({},"dce60P8kTNEFo1r9Z+sssJT","const-stars-proxy",void 0);var Pn,On,Dn=t("aa",V(((An=function(t){function e(){var e;return(e=t.call(this)||this)._show_stars=!0,e._star_show_level=Rt.LEVEL_5,e._show_const_lines=!1,e._show_const_cults=!1,e._show_const_groups=ht.ALL,e._show_const_hemisphere=null,e._const_line_strength=.5,e._const_cult_strength=.5,e._lineFadeIn=!1,e._cultFadeIn=!1,e}H(e,t);var n=e.prototype;return n.getStateByName=function(t){switch(t){case"恒星":return this.showStars;case"连线":return this.showConstLines;case"形象":return this.showConstCults;case"星区":return!1;case"星座":return this.showConsts;default:return null}},n.lineFadeIn=function(){this._const_line_strength=0,this._lineFadeIn=!0},n.cultFadeIn=function(){this._const_cult_strength=0,this._cultFadeIn=!0},n.init=function(){var t=this;this.on(xn,(function(e){return t._show_stars=e})),this.on(Fn,(function(e){return t._show_const_lines=e})),this.on(zn,(function(e){return t._show_const_cults=e})),this.on(Gn,(function(e){return t._show_const_lines=t._show_const_cults=e})),this.on(Bn,(function(e,n){n?t._show_const_groups|=e:t._show_const_groups&=~e,t._show_const_hemisphere=null})),this.on(Vn,(function(e){return t._show_const_hemisphere=e})),this.on(Z.Time.TICK,this.onTick)},n.onTick=function(t,e){this._lineFadeIn&&(this._const_line_strength+=.25*t,this._const_line_strength>=.85&&(this._lineFadeIn=!1)),this._cultFadeIn&&(this._const_cult_strength+=.25*t,this._const_cult_strength>=.5&&(this._cultFadeIn=!1))},B(e,[{key:"showStars",get:function(){return this._show_stars}},{key:"showStarLevel",get:function(){return this._star_show_level}},{key:"showConstLines",get:function(){return this._show_const_lines}},{key:"showConstCults",get:function(){return this._show_const_cults}},{key:"showConsts",get:function(){return this.showConstLines||this.showConstCults}},{key:"showConstGroups",get:function(){return this._show_const_groups}},{key:"showConstHemisphere",get:function(){return this._show_const_hemisphere}},{key:"cultureStrengthen",get:function(){return this._const_cult_strength}},{key:"consLineStrengthen",get:function(){return this._const_line_strength}}]),e}(W)).CultureAtt=[2,4.2],An.ConstLineAtt=[.1,1.5],An.StarParticles={TOTAL:1e3,Window:[-2,1],Distance:[.5,4.5],Scale:[1,2]},wn=An))||wn),Un=de.Stellar,xn=Un.STARS,Fn=Un.LINES,zn=Un.CULTURES,Gn=Un.CONSTS,Hn=de.Consts,Bn=Hn.GROUP,Vn=Hn.HEMISPHERE,Wn=t("k",Dn.instance);e._RF.pop(),e._RF.push({},"f0caeEmZjBJ5aPv6guhysuN","deep-galaxies-proxy",void 0);var qn,Kn=V,Yn=ut.O,Xn=ut.A,Zn=ut.G,jn=ut.R,Jn=ut.S,Qn=t("ab",Kn(((On=function(t){function e(){var e;return(e=t.call(this)||this)._show_clusters=!0,e._show_nebulas=!0,e._show_galaxies=!0,e._show_black_holes=!1,e}H(e,t);var n=e.prototype;return n.getStateByName=function(t){switch(t){case"星团":return this.showClusters;case"星云":return this.showNebulas;case"星系":return this.showGalaxies;case"黑洞":return this.showBlackHoles;default:return null}},n.init=function(){var t=this;this.on(ti,(function(e){return t._show_clusters=e})),this.on(ei,(function(e){return t._show_nebulas=e})),this.on(ni,(function(e){return t._show_galaxies=e})),this.on(ii,(function(e){return t._show_black_holes=e}))},B(e,[{key:"showClusters",get:function(){return this._show_clusters}},{key:"showNebulas",get:function(){return this._show_nebulas}},{key:"showGalaxies",get:function(){return this._show_galaxies}},{key:"showBlackHoles",get:function(){return this._show_black_holes}}]),e}(W)).MilkyWay={THICKNESS:.05,GPUStars:{PARTICLE_NUM:18e3,SizesRange:[.1,.15],ColorGradients:[[Yn,Xn],[Jn,Xn],[jn,Xn],[Xn,Xn],[Jn,Zn]]},CLouds:{LAYERS:7,HIGHT:.2},InstancingStars:{TOTAL_NUM:3e3,DistRange:[1,9.5],ScaleRange:[.02,.03],ClampRange:[.5,2.5]},Structures:[["银心黑洞","Galactic Center Black Hole",new i(.0942,-2.33,-.437),!0],["银核棒旋","Galactic Bar",new i(-.18,-2.94,-1.09),!1],["银核棒旋","Galactic Bar",new i(.444,-1.9,.3),!1],["猎户臂","Orion Arm",new i(-.25,.399,-.344),!1],["猎户臂","Orion Arm",new i(.25,-.253,.382),!1],["远三千秒差距臂","Far 3kpc Arm",new i(.452,-2.81,.078),!1],["近三千秒差距臂","Near 3kpc Arm",new i(-.273,-2.06,-1.02),!1],["人马臂","Sagittarius Arm",new i(.877,-2.8,.842),!0],["船底臂","Carina Arm",new i(-1.4,-1.38,-2.86),!0],["英仙臂","Perseus Arm",new i(1.25,-1.8,1.77),!0],["英仙臂","Perseus Arm",new i(-1.13,.971,-1.76),!0],["盾牌-南十字臂","Scutum Arm",new i(-.749,-1.13,-1.63),!0],["半人马臂","Centaurus Arm",new i(-.171,-5.49,-1.73),!0],["矩尺臂","Norma Arm",new i(-.498,-1.77,-1.35),!0],["天鹅臂","Cygnus Arm",new i(1.7,-1.9,2.55),!1],["新外臂","New Outer Arm",new i(-.626,1.92,-.623),!1]]},On.CommonDescriptions={S:"属于本星系群的矮球状星系",I:"属于本星系群的矮不规则星系",E:"属于本星系群的矮椭球星系",SatE:"属于本星系群的矮椭圆状星系，也是银河系的一个卫星星系，主要由老年恒星组成。",SatI:"属于本星系群的矮不规则星系，也是银河系的一个卫星星系。",SatS:"属于本星系群的矮球状星系，也是银河系的一个卫星星系。",MSatS:"属于本星系群的矮球状星系，也是仙女座星系的一个卫星星系。",MSatE:"属于本星系群的矮椭球星系，也是仙女座星系的一个卫星星系。"},Pn=On))||Pn),$n=de.Stellar,ti=$n.CLUSTERS,ei=$n.NEBULAS,ni=$n.GALAXIES,ii=$n.BLACKHOLE,si=t("y",Qn.instance);e._RF.pop(),e._RF.push({},"15c38vmS7tB05E3I/DbF85z","timer-proxy",void 0);var ai,ri,oi=V(qn=function(t){function e(){var e;return(e=t.call(this)||this)._timer=3,e._timescale=15,e}H(e,t);var n=e.prototype;return n.accelerate=function(t){switch(this._timer=t,this._timer){case Tt.STOP:this._timescale=0;break;case Tt.SECOND:this._timescale=.004167;break;case Tt.MINUTE:this._timescale=.25;break;case Tt.HOUR:this._timescale=15;break;case Tt.DAY:this._timescale=360;break;case Tt.WEEK:this._timescale=2520;break;case Tt.MONTH:this._timescale=10980;break;case Tt.YEAR:this._timescale=131400}},n.stop=function(){this._timescale=0},n.init=function(){this.accelerate(Tt.HOUR)},B(e,[{key:"timer",get:function(){return this._timer}},{key:"timescale",get:function(){return this._timescale}},{key:"desc",get:function(){switch(this._timer){case Tt.STOP:return"停止";case Tt.SECOND:return"1秒钟";case Tt.MINUTE:return"1分钟";case Tt.HOUR:return"1小时";case Tt.DAY:return"1天";case Tt.WEEK:return"1周";case Tt.MONTH:return"1月";case Tt.YEAR:return"1年"}}}]),e}(W))||qn,li=t("j",oi.instance);e._RF.pop(),e._RF.push({},"522c5db4OdA05eum30WvXsr","solar-proxy",void 0);var ci,hi,ui=V(((ri=function(t){function e(){var e;return(e=t.call(this)||this)._show_planets=!0,e._show_dwarfs=!0,e._show_minors=!1,e._show_comets=!1,e._show_belts=!1,e._show_sun=!0,e._magnify_ratio=.179,e._planets=[],e._systemScope=0,e._center=null,e}H(e,t);var n=e.prototype;return n.getStateByName=function(t){switch(t){case"太阳":return this.showSun;case"行星":return this.showPlanets;case"矮行星":return this.showDwarfs;case"小行星":return this.showMinors;case"彗星":return this.showComets;case"小行星带":return this.showBelts;default:return null}},n.getMagnified=function(t){return Math.lerp(1,e.MaxRatios[t],this._magnify_ratio)},n.reloadParams=function(t,e,n){var i;(this._center=t,this._planets.length=this._systemScope=0,e)&&((i=this._planets).push.apply(i,e),this._systemScope=n)},n.init=function(){var t=this;this.on(fi,(function(e){return t._show_planets=e})),this.on(di,(function(e){return t._show_dwarfs=e})),this.on(pi,(function(e){return t._show_minors=e})),this.on(gi,(function(e){return t._show_comets=e})),this.on(mi,(function(e){return t._show_belts=e})),this.on(yi,(function(e){return t._show_sun=e})),this.on(vi,(function(e){t._magnify_ratio=e,t.notify(fe.Scale.RATIO_CHANGE)}))},B(e,[{key:"showSun",get:function(){return this._show_sun}},{key:"showPlanets",get:function(){return this._show_planets}},{key:"showDwarfs",get:function(){return this._show_dwarfs}},{key:"showMinors",get:function(){return this._show_minors}},{key:"showComets",get:function(){return this._show_comets}},{key:"showBelts",get:function(){return this._show_belts}},{key:"magnifyRatio",get:function(){return this._magnify_ratio}},{key:"systemScope",get:function(){return this._systemScope}},{key:"center",get:function(){return this._center}},{key:"centerName",get:function(){var t;return null==(t=this._center)||null==(t=t.config)?void 0:t.name}}]),e}(W)).BeltColor=new r(153,127,63,127),ri.MaxRatios={sun:50,planet:2e3,dwarf:1e4,satellite:1,minor:2e4,comet:4e5,belts:2e6,asteroid:2e6},ai=ri))||ai,_i=de.Solar,fi=_i.PLANETS,di=_i.DWARFS,pi=_i.MINORS,gi=_i.COMETS,mi=_i.BELTS,yi=_i.SUN,vi=_i.RATIO,bi=t("d",ui.instance);e._RF.pop(),e._RF.push({},"bca22HJU4xIHoPPg56jcMuM","planetary-proxy",void 0);var Si,wi=V(((hi=function(t){function e(){var e;return(e=t.call(this)||this)._show_satellites=!0,e._show_axis=!1,e._show_diameter=!1,e._show_magnetics=!1,e._show_equatorial=!1,e._show_ecliptic=!1,e._show_lunar=!1,e._show_tide_lock=!1,e._show_constitute=!1,e._show_artificial=!1,e._satellites=[],e._systemScope=0,e._center=null,e}H(e,t);var n=e.prototype;return n.getStateByName=function(t){switch(t){case"卫星":return this.showSatellites;case"地轴":return this.showAxis;case"直径":return this.showDiameter;case"磁场":return this.showMagnetics;case"赤道面":return this.showEquatorialPlane;case"黄道面":return this.showEclipticPlane;case"白道面":return this.showLunarPlaneUI;case"潮汐锁定":return this.showTideLockUI;case"人造物":return this.showArtificial;default:return null}},n.reloadOrbiterParams=function(t,e,n){var i;(this._center=t,this._satellites.length=this._systemScope=0,notEmptyArr(e))&&(i=this._satellites).push.apply(i,e);this._systemScope=n},n.init=function(){var t=this;this.on(Li,(function(e){return t._show_satellites=e})),this.on(Ci,(function(e){return t._show_axis=e})),this.on(Ei,(function(e){return t._show_diameter=e})),this.on(Ti,(function(e){return t._show_magnetics=e})),this.on(Ni,(function(e){return t._show_ecliptic=e})),this.on(Ri,(function(e){return t._show_equatorial=e})),this.on(Ii,(function(e){return t._show_lunar=e})),this.on(ki,(function(e){return t._show_tide_lock=e})),this.on(Mi,(function(e){return t._show_constitute=e})),this.on(Pi,(function(e){return t._show_artificial=e}))},B(e,[{key:"showSatellites",get:function(){return this._show_satellites}},{key:"showAxis",get:function(){return this._show_axis}},{key:"showDiameter",get:function(){return this._show_diameter}},{key:"showMagnetics",get:function(){return this._show_magnetics}},{key:"showEquatorialPlane",get:function(){return this._show_equatorial}},{key:"showEclipticPlane",get:function(){return this._show_ecliptic}},{key:"showLunarPlane",get:function(){return this._show_lunar&&"Earth"===this.centerName}},{key:"showLunarPlaneUI",get:function(){return this._show_lunar}},{key:"showTideLock",get:function(){return this._show_tide_lock}},{key:"showTideLockUI",get:function(){return this._show_tide_lock&&"satellite"===this._center.cat}},{key:"showConstitute",get:function(){return this._show_constitute}},{key:"showArtificial",get:function(){return this._show_artificial}},{key:"satellites",get:function(){return this._satellites}},{key:"systemScope",get:function(){return this._systemScope}},{key:"center",get:function(){return this._center}},{key:"centerName",get:function(){var t;return this.unbelt?null==(t=this._center)||null==(t=t.config)?void 0:t.name:Sn.transInfo.name}},{key:"unbelt",get:function(){return this._center&&"belts"!==this.center.cat}}]),e}(W)).AsteroidRectangular={BASE_SIZE:2e-8,SIZE_RANGE:[.8,3],SCALE_RANGE:[1,2],POS_RANGE:[1e-5,1e-6,1e-5]},ci=hi))||ci,Ai=de.Local,Li=Ai.SATELLITES,Ei=Ai.DIAMETER,Ci=Ai.AXIS,Ti=Ai.MAGNETICS,Ii=Ai.LUNAR,Ri=Ai.EQUATORIAL,Ni=Ai.ECLIPTIC,ki=Ai.TIDE_LOCK,Mi=Ai.CONSTITUTE,Pi=Ai.ARTIFICIAL,Oi=t("p",wi.instance);e._RF.pop(),e._RF.push({},"f5383qTUElJfIiqxzDW7JBc","index",void 0),e._RF.pop(),e._RF.push({},"8fec3hShz1CDYrk3R7epFGd","label-i18n-adv",void 0);var Di,Ui,xi=p.ccclass,Fi=p.disallowMultiple,zi=p.requireComponent,Gi=p.executeInEditMode,Hi=function(t){return t[t.Pure=1]="Pure",t[t.ConfigKey=2]="ConfigKey",t[t.Config=3]="Config",t[t.Star=4]="Star",t[t.Deep=5]="Deep",t}({}),Bi=xi("cocosmos.label-18n-adv")(Si=Fi(Si=Gi(!0)(Si=zi(g)(Si=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._label=void 0,e._type=Hi.Pure,e._key=null,e._lang=null,e._config=void 0,e._enum=void 0,e._map={},e}H(e,t);var n=e.prototype;return n.setMapType=function(t,e){this._type=e,this._map=null!=t?t:{},this._lang=null},n.onLoad=function(){this._label=this.getComponent(g)},n.lateUpdate=function(){if(this._type!==Hi.Pure)return Ne.language!=this._lang?(this._lang=Ne.language,void this._updateString()):void(this._type!==Hi.Star?this._type!==Hi.Deep||this._enum!=Ne.deepNameType&&(this._enum=Ne.deepNameType,this._updateString()):this._enum!=Ne.starNameType&&(this._enum=Ne.starNameType,this._updateString()))},n._updateString=function(){if(this._type===Hi.ConfigKey||this._type===Hi.Config)this._config&&(this._label.string=this._config[this._lang]);else if(this._type===Hi.Star||this._type===Hi.Deep){var t=this._map[this._enum];t&&(this._label.string=isStr(t)?t:t[this._lang])}},B(e,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"string",get:function(){return this._label.string}},{key:"pure",set:function(t){this._type=Hi.Pure,this._label.string=t}},{key:"key",set:function(t){if(this._type=Hi.ConfigKey,this._key=t,this._config=Ke(t),!this._config)return console.warn("i18n-adv lost config for:",t),void(this._label.string=t);this._lang=null}},{key:"config",set:function(t){this._type=Hi.Config,this._config=t,this._lang=null}}]),e}(m))||Si)||Si)||Si)||Si;e._RF.pop(),e._RF.push({},"73b07WCfFZN8azetRIReABV","celestial-label",void 0);var Vi,Wi,qi,Ki,Yi,Xi,Zi=p.ccclass,ji=t("C",Zi("cocosmos.celestial-label")(Di=j(((Ui=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._hud=null,e._lbl=null,e._adv=null,e}H(e,t);var n=e.prototype;return n.claimed=function(t,n){return this.node.parent=e.Containers[t],this._adv.type=Hi.Pure,n&&(this.node.name=n),this},n.freed=function(){this._hud.target=null},n.onLoad=function(){this._hud=this.getComponent(J),this._lbl=this.getComponent(g),this._adv=this.getComponent(Bi)},n.setMap=function(t,e){this._adv.setMapType(t,e)},n.setOffset=function(t,e,n){return isObject(t)?this._hud.offset.set(t):this._hud.offset.set(t,e,n),this},n.setUIOffset=function(t,e){return this._hud.offsetUI.set(t,e),this},B(e,[{key:"key",set:function(t){this._adv.key=t}},{key:"config",set:function(t){this._adv.config=t}},{key:"pure",set:function(t){this._adv.pure=t}},{key:"string",get:function(){return this._lbl.string},set:function(t){this._lbl.string=t}},{key:"color",set:function(t){this._lbl.color=t}},{key:"camera",set:function(t){this._hud.mainCamera=t}},{key:"target",get:function(){return this._hud.target},set:function(t){this._hud.target=t}},{key:"fontSize",set:function(t){this._lbl.fontSize=this._lbl.lineHeight=t}},{key:"alpha",set:function(t){Qi.set(this._lbl.color),this._lbl.cacheMode===g.CacheMode.BITMAP?Qi.a=Math.floor(5*t)/5*255:Qi.a=255*t,this._lbl.color=Qi}},{key:"char",set:function(t){this._lbl.cacheMode=t?g.CacheMode.CHAR:g.CacheMode.NONE}},{key:"bitmap",set:function(t){this._lbl.cacheMode=t?g.CacheMode.BITMAP:g.CacheMode.NONE}},{key:"scalable",set:function(t){this._hud.scalable=t}},{key:"bold",set:function(t){this._lbl.isBold=t}},{key:"italic",set:function(t){this._lbl.isItalic=t}},{key:"alwaysInCanvas",set:function(t){this._hud.alwaysInCanvas=t}},{key:"locate",set:function(t){this.getComponent(y).setAnchorPoint(t.includes("右")?0:t.includes("左")?1:.5,t.includes("上")?0:t.includes("下")?1:.5)}},{key:"perspective",set:function(t){this._hud.perspective=t,this._hud.distance=2,this._hud.scaleRatio=t?$i:1,this._hud.scaleRange.set(.7,1.5)}},{key:"worldOffset",get:function(){return i.add(Ji,this._hud.target.worldPosition,i.multiply(Ji,this._hud.target.worldScale,this._hud.offset))}}]),e}(m)).Containers={},Di=Ui))||Di)||Di),Ji=new i,Qi=new r,$i=.5;e._RF.pop(),e._RF.push({},"f4c68ZS5CBHZY5XLmR4/B8y","cosmic-scope",void 0);var ts,es,ns=p.ccclass,is=p.property,ss=p.disallowMultiple,as=(Vi=ns("cocosmos.ComicScope"),Wi=ss(!0),qi=is(v),Vi(Ki=Wi((Xi=Q((Yi=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"matLine",Xi,tt(e)),e.PrefabKey=null,e.offsetY=null,e._subparts=void 0,e._substructures=void 0,e._labels=[],e._configs=void 0,e._handle=void 0,e}H(e,t);var n=e.prototype;return n.update=function(t){var e=this._attenuation,n=e.head,s=e.tail,a=Mn.pow10,r=Oe.showStructs,o=Ne.showNotes;if(a>n&&a<s){this._subparts.active=!0,this._substructures.active=r;var l=le(a,this._attenuation);if(this.matLine.passes[0].setUniform(this._handle,cs*l),r&&o){this._claimLabels();for(var c,h=et(this._labels);!(c=h()).done;){var u=c.value;if(u.target)if(u===this._labels.head)u.alpha=l;else{var _=i.squaredDistance(u.target.worldPosition,i.ZERO);u.alpha=le(_,ls,!0)}}}else this._freeLabels()}else this._substructures.active=this._subparts.active=!1,this._freeLabels()},n.onDisable=function(){this._freeLabels()},n.onLoad=function(){var t;this._configs=null!=(t=q.res.getConfigItem(Dt.Configs.SUBSTRUCTURES,this._substructure_key))?t:{},this.createSubstructures(),this.createSubParticles(),this.init(),q.on(pe.Load.APPROACH_SCOPE,this._onApproachScope,this)},n._onApproachScope=function(t){t===this.node.name&&this.approachScope1stTime()},n.init=function(){},n.createSubstructures=function(){var t,e,n=this._substructure_key.charAt(0).toUpperCase()+this._substructure_key.substring(1);this._substructures=Fe(n,Ot,this.node);var i=q.res.getPrefab(null!=(t=this.PrefabKey)?t:hs);for(var s in this._configs){var a=this._configs[s],r=a.pos,o=r[0],l=void 0===o?0:o,c=r[1],h=void 0===c?0:c,u=r[2],_=void 0===u?0:u,f=a.scale,d=f[0],p=void 0===d?1:d,g=f[1],m=void 0===g?1:g,y=f[2],v=void 0===y?1:y,w=a.rotate,A=w[0],L=void 0===A?0:A,E=w[1],C=void 0===E?0:E,T=w[2],I=void 0===T?0:T,R=Fe(s,Ot,this._substructures);R.setScale(p,m,v),R.setPosition(l,h,_),R.setRotationFromEuler(L,C,I),Fe("struct-box",Ot,R,i).getComponent(b).setSharedMaterial(this.matLine,0)}this._handle=null==(e=this.matLine.passes[0])?void 0:e.getHandle("mainColor",3,S.Type.FLOAT)},n._createByHms=function(t,e){var n=this._configs[t].rotate,i=n[0],s=n[1],a=n[2],r=this._configs[t],o=r.ra_hms,l=r.dec_hms,c=r.dist,h=o.split(":"),u=15*(+h[0]+ +h[1]/60+ +h[2]/60),_=l.split(":");ne(u,+_[0]+ +_[1]/60+ +_[2]/60,c/100,us),ie(us,us);var f=Fe(t,Ot,this._substructures);f.setScale(1,1,1),f.setPosition(us),f.setRotationFromEuler(i,s,a),Fe("struct-box",Ot,f,e).getComponent(b).setSharedMaterial(this.matLine,0)},n._freeLabels=function(){notEmptyArr(this._labels)&&this._labels.forEach((function(t){return t.free()})),this._labels.length=0},n._claimLabels=function(){var t=this;if(!notEmptyArr(this._labels)){var e=nt(rs,os);this._substructures.children.forEach((function(n){var i,s=ji.claim("struct",t._substructure_key);s.target=n,s.camera=e,Ue(s,"struct",t._substructure_key),s.setOffset(us.set(0,null!=(i=t.offsetY)?i:1.2,0));var a=t._configs[n.name],r=a.name,o=a.cname;s.config={en:r,cn:o},t._labels.push(s)}))}},B(e,[{key:"substructures",get:function(){return this._substructures.children}}]),e}(m)).prototype,"matLine",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ki=Yi))||Ki)||Ki),rs=Ut.COSMOS,os=Ut.Cameras.DEEP,ls=Ee.NameLabelAtt,cs=Ee.GroupLineStrength,hs=Dt.Prefabs.SUBSTRUCTURE,us=new i;e._RF.pop(),e._RF.push({},"f97ddIImaROIYfQ4coOKn0u","helio-local-bubble",void 0);(0,p.ccclass)("cocosmos.HelioLocalBubble")(ts=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._substructures=void 0,e._solarDirection=void 0,e._labels=[],e._configs=void 0,e}H(e,t);var n=e.prototype;return n.onLoad=function(){this._init()._configure()},n.onDisable=function(){this._freeLabels()},n.update=function(t){var e=Oe.showStructs,n=Oe.showTracks,i=Ne.showCelNames;if(this._substructures.active=e,this._solarDirection.active=n,i&&(e||n)){this._claimLabels();for(var s,a=et(this._labels);!(s=a()).done;){var r=s.value;if(r.target)if(r.target.activeInHierarchy){var o=r.target.name,l=ys[o],c=l[1],h=l[2],u=r.target.worldScale.y*h*c.y;r.alpha=le(u,ps,!1)}else r.alpha=0}}else this._freeLabels()},n._init=function(){var t;return this._configs=null!=(t=q.res.getConfigItem(Dt.Configs.SUBSTRUCTURES,"helios"))?t:{},this._substructures=this.node.getChildByName("Substructures"),this._solarDirection=this.node.getChildByName("Solar Direction"),this},n._configure=function(){var t=this;this._substructures.children.forEach((function(e){var n=t._configs[e.name];if(notEmpty(n)){var i=n.pos,s=i[0],a=void 0===s?0:s,r=i[1],o=void 0===r?0:r,l=i[2],c=void 0===l?0:l,h=n.scale,u=h[0],_=void 0===u?1:u,f=h[1],d=void 0===f?1:f,p=h[2],g=void 0===p?1:p,m=n.rotate,y=m[0],v=void 0===y?0:y,b=m[1],S=void 0===b?0:b,w=m[2],A=void 0===w?0:w;e.setScale(_,d,g),e.setPosition(a,o,c),e.setRotationFromEuler(v,S,A)}})),this._substructures.forward=gs,this._solarDirection.setPosition(ms.set(gs).multiplyScalar(-3.8)),this._solarDirection.forward=gs},n._freeLabels=function(){notEmptyArr(this._labels)&&this._labels.forEach((function(t){return t.free()})),this._labels.length=0},n._claimLabels=function(){var t=this;if(!(this._labels.length>0)){var e=nt(fs,ds);this._substructures.children.forEach((function(n){t._claimLabel(n.name,t._configs[n.name].cname,n,e)})),this._claimLabel("Solar Direction","太阳系绕银心方向",this._solarDirection,e)}},n._claimLabel=function(t,e,n,i){var s=ys[t],a=s[0],r=s[1],o=Ue(ji.claim("struct",t.toLowerCase()),"struct","helios");o.target=n,o.camera=i,o.color=a,o.setOffset(r),o.config={en:t,cn:e},this._labels.push(o)},e}(m));var _s,fs=Ut.COSMOS,ds=Ut.Cameras.MAIN,ps=Ee.NameLabelAtt,gs=ct.SOLAR_DIR,ms=new i,ys=((es={})["Terminal Shock"]=[new r(255,191,0,255),new i(0,.5,0),1],es["Helio Pause"]=[new r(255,127,0,255),new i(-.1,.6,.075),1],es["Bow Shock"]=[new r(63,63,255,255),new i(-.2,.5,.15),1],es["Hills Cloud"]=[new r(127,191,127,255),new i(0,.1,0),1],es["Oort Cloud"]=[new r(127,127,191,255),new i(0,.1,0),1],es["Solar Direction"]=[new r(255,255,0,255),new i(0,.08,0),10],es);e._RF.pop(),e._RF.push({},"c7e4dbI9A1AaadzJUtzXN6x","laniakea-complex",void 0);(0,p.ccclass)("cocosmos.LaniakeaComplex")(_s=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._substructure_key="clusters",e._attenuation=[8.5,8.8,9.5,10],e}H(e,t);var n=e.prototype;return n.createSubParticles=function(){var t=this;this._subparts=Fe("Perversive Galaxies-SCs",Ot,this.node);var e=q.res.getPrefab(bs);[Ss,ws].forEach((function(n){return ze(l(e),n,t._subparts)}))},n.approachScope1stTime=function(){console.log("DO TASK",this.node.name)},e}(as));var vs,bs=Dt.Prefabs.GALAXIES_GPU,Ss={num:3e3,sizes:[.036,.06],radius:10,thickness:.6,random:.3},ws={num:6e3,sizes:[.06,.12],radius:20,thickness:.5,random:.4};e._RF.pop(),e._RF.push({},"ff1358uJLNBtrILBLQAfOH4","local-group-galaxy",void 0);(0,p.ccclass)("cocosmos.LocalGroupGalaxy")(vs=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._substructure_key="subgroups",e._attenuation=[5.4,6.3,7.5,7.8],e}H(e,t);var n=e.prototype;return n.createSubParticles=function(){var t=this;this._subparts=Fe("Perversive Companions",Ot,this.node);var e=q.res.getPrefab(Rs);[Ns,ks,Ms].forEach((function(n){return ze(l(e),n,t._subparts)}))},n.approachScope1stTime=function(){},e}(as));var As,Ls,Es,Cs,Ts,Is,Rs=Dt.Prefabs.COMPANIONS_GPU,Ns={num:700,sizes:[.006,.012],radius:.8,thickness:.7,random:.2},ks={num:700,sizes:[.012,.024],position:pt,radius:1.5,thickness:.7,random:.3},Ms={num:3600,sizes:[.036,.06],radius:7,position:dt,thickness:.5,random:.6};e._RF.pop(),e._RF.push({},"d5d6fKgnlVKQpHc0ptNI5eD","milky-way",void 0);var Ps,Os=p.ccclass,Ds=p.property,Us=(t("a4",(As=Os("cocosmos.MilkyWay"),Ls=Ds(w),As(((Is=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"MilkyDisk",Ts,tt(e)),e._cMats=[],e._cHandles=[],e._disks=void 0,e._stars=void 0,e._clouds=void 0,e._core=void 0,e._labels=[],e}H(e,t);var n=e.prototype;return n.claimStructureLabelsIfNotExist=function(t){var e=this;notEmptyArr(this._labels)||js.forEach((function(n){var i=n,s=i[0],a=i[1],r=i[2],o=i[3],l=ji.claim("milky","milky-structure");l.target=e.node,l.camera=t,Ue(l,"milky",o),l.setOffset(r),l.config={en:a,cn:s},e._labels.push(l)}))},n.freeStructureLabels=function(){notEmptyArr(this._labels)&&this._labels.forEach((function(t){return t.free()})),this._labels.length=0},n.update=function(t){var e=Mn.pow10;this._updateClouds(e),this._updateStars(e),this._updateDisks(e)},n.lateUpdate=function(){!e.LoadTexTaskLaunched&&Mn.pow10-.5>=kn.Scopes.MilkyWay[0]&&(e.LoadTexTaskLaunched=!0,q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_MILKY_HOR),q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_MILKY_VER))},n.onLoad=function(){this._init()._listen()},n._init=function(){var t=this;return this._disks=this.node.getChildByName("Disks"),this._clouds=this.node.getChildByName("Clouds"),this._stars=this.node.getChildByName("Stars"),this._core=this.node.getChildByName("Core"),[this._disks,this._clouds,this._core].forEach((function(e){e.setPosition(ft),e!=t._core&&e.setRotationFromEuler(Fs)})),this},n._updateStars=function(t){var e=ea[0],n=ea[1];if(t>e&&t<n){var i=Math.clamp(Math.pow(3,t-4),0,1);this._stars.setScale(i,i,i),this._stars.children.length<=0&&this._claimStars(this.node.scale.x<1?2:.01),this._stars.active=this._core.active=!0}else this._stars.active=this._core.active=!1},n._claimStars=function(t){var e=this,n={num:qs,sizes:[Vs*t,Ws*t],radius:.6*xs,thickness:.85,position:ft,euler:Fs,scale:ia.set(i.ONE)};ze(l(q.res.getPrefab(Qs)),n,this._stars),ia.set(1,Gs,1),Ks.forEach((function(t){var i=t[0],s=t[1],a=new r,o=new r;xe(a,i),xe(o,s),n.colors=[a,o],ze(l(q.res.getPrefab(Qs)),n,e._stars)}))},n._createHighSolutionDisks=function(){var t=K(Y().mark((function t(){var e,n,i,s,a,r;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xs/4,n=et(Array.nature(3,0).reverse());case 2:if((i=n()).done){t.next=17;break}return s=i.value,(a=l(this.MilkyDisk)).setPosition(s%2==0?-e:e,0,s<2?e:-e),a.parent=this._disks,r=a.getComponent(b).material,this._cMats.push(r),this._cHandles.push(r.passes[0].getHandle("attenuation")),t.t0=r,t.next=13,q.res.loadRemoteTexture(Us+"/disk-"+s,"jpg");case 13:t.t1=t.sent,t.t0.setProperty.call(t.t0,"mainTexture",t.t1);case 15:t.next=2;break;case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n._createDisks=function(){var t=K(Y().mark((function t(){var e,n,i,s,a,r,o;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=l(this.MilkyDisk)).parent=this._disks,n=e.getComponent(b).material,this._cMats.push(n),this._cHandles.push(n.passes[0].getHandle("attenuation")),t.t0=n,t.next=9,q.res.loadRemoteTexture(Us+"/disk-horizontal","jpg");case 9:t.t1=t.sent,t.t0.setProperty.call(t.t0,"mainTexture",t.t1),t.next=14;break;case 13:this._createHighSolutionDisks();case 14:i=et(Array.nature(2).reverse());case 15:if((s=i()).done){t.next=32;break}return a=s.value,(r=l(this.MilkyDisk)).setPosition(0,.05,0),r.setScale(10,2,1),r.setRotationFromEuler(0,60*a,0),r.parent=this._disks,o=r.getComponent(b).material,this._cMats.push(o),this._cHandles.push(o.passes[0].getHandle("attenuation")),t.t2=o,t.next=28,q.res.loadRemoteTexture(Us+"/disk-vertical","jpg");case 28:t.t3=t.sent,t.t2.setProperty.call(t.t2,"mainTexture",t.t3);case 30:t.next=15;break;case 32:case 33:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n._updateDisks=function(t){var e=this;if(t>ta.head){this._disks.active=!0,this._disks.children.length<=0&&this._createDisks();var n=Math.pow(10,2.5-t);ra.set(n,5*n,10,20),this._cMats.forEach((function(t,n){t.passes[0].setUniform(e._cHandles[n],ra)}))}else this._disks.active=!1},n._updateClouds=function(t){var e=na[0],n=na[1];t>e&&t<n?(this._clouds.children.length<=0&&this._claimClouds(),this._clouds.active=!0):this._clouds.active=!1},n._claimClouds=function(){for(var t={euler:ia.set(i.ZERO),scale:sa.set(i.ONE)},e=xs/Zs,n=1;n<=Zs;n++){var s=e*n;t.scale.x=t.scale.z=s,t.scale.y=s*Xs,t.euler.y=Math.randomInt(0,360),Ge(l(q.res.getPrefab($s)),t,this._clouds)}for(var a={worldPosition:ia.set(i.ZERO),euler:sa.set(i.ZERO),scale:aa.set(i.ONE)},r=1;r<=Zs;r++){var o=e*r/5;a.scale.x=a.scale.z=o,a.scale.y=o*Xs*2,a.euler.y=Math.randomInt(0,360),Ge(l(q.res.getPrefab($s)),a,this._clouds)}},n._listen=function(){return this},B(e,[{key:"structureLabels",get:function(){return this._labels}}]),e}(m)).LoadTexTaskLaunched=!1,Ts=Q((Cs=Is).prototype,"MilkyDisk",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Es=Cs))||Es)),Dt.Textures.MILKY_WAY),xs=vt,Fs=ct.GALACTIC,zs=Qn.MilkyWay,Gs=zs.THICKNESS,Hs=zs.GPUStars,Bs=Hs.SizesRange,Vs=Bs[0],Ws=Bs[1],qs=Hs.PARTICLE_NUM,Ks=Hs.ColorGradients,Ys=zs.CLouds,Xs=Ys.HIGHT,Zs=Ys.LAYERS,js=zs.Structures,Js=Dt.Prefabs,Qs=Js.STARS_GPU,$s=Js.MILKY_CLOUD,ta=[2.5,Number.MAX_VALUE],ea=[2,5.3],na=[1.5,5.8],ia=new i,sa=new i,aa=new i,ra=new A;e._RF.pop(),e._RF.push({},"20346QAzoxDU5whoLpUi9ol","observable-cosmos",void 0);(0,p.ccclass)("cocosmos.ObservableCosmos")(Ps=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._substructure_key="great-walls",e._attenuation=[9,9.5,10.5,11.2],e.PrefabKey=Dt.Prefabs.ACANTHO,e.offsetY=.45,e._farWalls=void 0,e._pervWalls=void 0,e._c_mat=null,e._c_handle=void 0,e}H(e,t);var n=e.prototype;return n.update=function(e){t.prototype.update.call(this,e),this._updateGreatWalls()},n.approachScope1stTime=function(){q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_SPR_CLUSTERS)},n._updateGreatWalls=function(){var t=Mn.pow10;if(Mn.super){this._pervWalls.children.length<=0&&this._createPerversiveGreatWalls();var e=t-pa[0],n=pa[1]-t,i=e/(e+n);if(n<=0){var s=Math.pow(10,n);this._pervWalls.setWorldScale(s,s,s)}else this._gradient(this._pervWalls,t),this._pervWalls.setWorldScale(1,1,1);ma.x=ma.y=i+1,ma.z=.8*Math.clamp01(e),ma.w=Math.lerp(.5,.1,Math.clamp01(i)),this._c_mat.passes[0].setUniform(this._c_handle,ma),this._pervWalls.active=!0,t>=ga?(this._farWalls.children.length<=0&&this._createFarGreatWalls(),this._farWalls.active=!0):this._farWalls.active=!1}},n.createSubParticles=function(){var t=this;this._subparts=Fe("Perversive  Galaxy-Clusters",Ot,this.node);var e=q.res.getPrefab(_a);[ya,va].forEach((function(n){return ze(l(e),n,t._subparts)}))},n.init=function(){this._farWalls=Fe("Far Great-Walls",Ot,this.node),this._pervWalls=Fe("Perversive Great-Walls",Ot,this.node)},n._createFarGreatWalls=function(){for(var t=Lt/ha,e=la[0],n=la[1],i=q.res.getPrefab(fa),s=0;s<ha;s++){var a=Math.randomRange(e,n),r=a*ca,o=l(i),c=Math.parseRadian(s*t);o.setPosition(a*Math.sin(c),Math.randomRange(-a/2,a/2),a*Math.cos(c)),o.setScale(r,r+Math.randomRange(.2,.5),1.4*r),o.setRotationFromEuler(Math.randomRange(0,360),0,90),o.parent=this._farWalls}for(var h=0;h<2;h++){var u=l(i);u.setPosition(0,(0===h?1:-1)*n,0);var _=e*ca;u.setScale(_,_,1.5*_),u.setRotationFromEuler(0,Math.randomRange(0,360),0),u.parent=this._farWalls}},n._createPerversiveGreatWalls=function(){for(var t=Lt/da,e=q.res.getPrefab(fa),n=0;n<da;n++){var i,s=l(e);if(s.setRotationFromEuler(0,n*t,n*t/2),s.parent=this._pervWalls,0===n)this._c_mat=s.getComponent(b).sharedMaterial,this._c_handle=null==(i=this._c_mat.passes[0])?void 0:i.getHandle("clusters")}},n._gradient=function(t,e,n){void 0===n&&(n=0);var i=Math.log2(Math.pow(10,e));t.children.forEach((function(t,e){var s=e-i;s%=5;var a=Math.pow(2,s+n);t.setScale(a,a,a)}))},e}(as));var oa,la=[220,350],ca=.2,ha=8,ua=Dt.Prefabs,_a=ua.GALAXIES_GPU,fa=ua.SUPER_CLUSTERS,da=5,pa=[8.5,10],ga=9,ma=new A,ya={num:2e4,sizes:[.15,.3],radius:100,thickness:.7,random:.5},va={num:3e4,sizes:[.3,.6],radius:400,thickness:.8,random:.5};e._RF.pop(),e._RF.push({},"a8f7c6d/ddG+5Y/nIg/tWM3","customized-lod",void 0);var ba,Sa,wa,Aa,La,Ea,Ca,Ta,Ia,Ra,Na,ka,Ma,Pa,Oa,Da,Ua,xa,Fa,za,Ga,Ha,Ba,Va,Wa,qa=(0,p.ccclass)("cocosmos.CustomizedLOD")(oa=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))||this)._lod0=void 0,e._lod1=void 0,e._lod2=void 0,e._lod3=void 0,e._viewer=void 0,e._lods=void 0,e._lod0Inited=!1,e._real=new i(1,1,1),e}H(e,t);var n=e.prototype;return n.onLoad=function(){var t,e,n,i,s,a,r=this.node.getChildByName("Rotator");this._lod0=null!=(t=null!=(e=this.node.getChildByName("LOD0"))?e:null==r?void 0:r.getChildByName("LOD0"))?t:null,this._lod1=null!=(n=null!=(i=this.node.getChildByName("LOD1"))?i:null==r?void 0:r.getChildByName("LOD1"))?n:null,this._lod2=null!=(s=this.node.getChildByName("LOD2"))?s:null,this._lod3=null!=(a=this.node.getChildByName("LOD3"))?a:null,this._lods=[this._lod0,this._lod1,this._lod2,this._lod3],this._lods.clean(),this._lods.forEach((function(t){return t.active=!1})),q.on(Z.Time.TICK,this._tick,this),q.on(Z.Time.TICK,this.syncLODChoosing,this,-99),q.on(fe.Scale.RATIO_CHANGE,this.updateScale,this),this.init()},n.onDestroy=function(){q.unload(this)},n._tick=function(t,e){this.onTick(t,e)},n.syncLODChoosing=function(){if(this.node.activeInHierarchy){for(var t=function(t,e){if(t.activeInHierarchy){var n=i.distance(t.worldPosition,e.node.worldPosition);return t.worldScale.x*e.camera.matProj.m05/(2*n)*100}return 0}(this.node,this._viewer),e=null,n=0;n<this.LODValves.length;n++){if(t>=this.LODValves[n]){e=this._lods[n],0!==n||this._lod0Inited||(this._lod0Inited=!0,this.onLod0Initiated());break}}this._lods.forEach((function(t){return t.active=t===e}))}},n.updateScale=function(t){this.node.setScale(i.multiplyScalar(Ka,this._real,null!=t?t:bi.getMagnified(this.cat)))},e}(m))||oa,Ka=new i;e._RF.pop(),e._RF.push({},"f8d14mq2s1MMZh9yaqEG7m/","orbiter",void 0);var Ya,Xa,Za,ja,Ja,Qa,$a,tr,er,nr,ir,sr,ar,rr,or,lr,cr,hr,ur,_r,fr,dr,pr,gr,mr=it,yr=st,vr=p.ccclass,br=function(){return this.rotatable},Sr=t("_",(ba=vr("cocosmos.Orbiter"),Sa=mr("公转参数.A","轨道半径",["unit","au"]),wa=mr("公转参数.A","公转角速度",["unit","deg/s"]),Aa=mr("公转参数.A","升交点黄经",["unit","deg"]),La=mr("公转参数.A","初始春分角",["unit","deg"]),Ea=mr("公转参数.A","轨道离心率",[0,1,.01]),Ca=mr("公转参数.A","轨道倾斜角",["unit","deg"]),Ta=mr("自转参数.A","自转角速度",br,["unit","deg/s"]),Ia=mr("自转参数.A","北极赤经",br,["unit","deg"]),Ra=mr("自转参数.A","初始黎明角",br,["unit","deg"]),Na=mr("自转参数.A","转轴倾斜角",br,["unit","deg"]),ka=mr("体积参数.A","赤道半径",["unit","au"]),ba((Q((Pa=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).alpha=0,$(e,"orbitalVelocity",Oa,tt(e)),$(e,"rotateVelocity",Da,tt(e)),$(e,"equatorialRadius",Ua,tt(e)),e._rotator=void 0,e._orbitalAngle=0,e._rotateAngle=0,$(e,"_r",xa,tt(e)),$(e,"_lon",Fa,tt(e)),$(e,"_oia",za,tt(e)),$(e,"_e",Ga,tt(e)),$(e,"_obo",Ha,tt(e)),$(e,"_nra",Ba,tt(e)),$(e,"_rto",Va,tt(e)),$(e,"_ria",Wa,tt(e)),e._a=1,e._b=1,e._c=0,e._ba=1,e._orbitMat=new o,e._belong=void 0,e._sun=void 0,e._config=void 0,e._bias=0,e._label=null,e._nearest=0,e._panorama=0,e}H(e,t);var n=e.prototype;return n.loadConfig=function(t,e,n,i){return this.node.name=t.name,this._config=t,this._belong=i,this._sun="sun"===i.cat?i:i.belong,this._viewer=e,this.configure(),this.initPhysicsParams(n),this},n.init=function(){var t;this.rotatable&&(this._rotator=null!=(t=this.node.getChildByName("Rotator"))?t:null)},n.onDisable=function(){this._freeLabel()},n.start=function(){this._updateOrbitData(),this.rotatable&&this._updateRotateData()},n.onTick=function(t,e){var n=t*li.timescale;this.step(n),this.rotatable&&this.rotate(n),this.revolve(n),this.syncActivating(),this.syncInstancing(),this.syncNameLabel()},n.step=function(t){var e=this._r/i.distance(this.node.position,i.ZERO);this._orbitalAngle+=this.orbitalVelocity*e*t,this._rotateAngle+=this.rotateVelocity*t,this._orbitalAngle>Lt&&(this._orbitalAngle-=Lt),this._rotateAngle>Lt&&(this._rotateAngle-=Lt)},n.rotate=function(t){var e,n=this;(null==(e=this._rotator)?void 0:e.active)&&this._rotator.children.forEach((function(t){t.active&&t.setRotationFromEuler(0,n._rotateAngle,0)}))},n.revolve=function(t){var e=this._r,n=Math.parseRadian(this._orbitalAngle),s=[Math.cos(n),Math.sin(n)],a=s[0],r=s[1];Rr.set(e*r,0,e*a),this.node.setPosition(i.transformMat4(Rr,Rr,this._orbitMat))},n.syncActivating=function(){if(this.node.parent&&this.node.parent.activeInHierarchy&&"satellite"!==this.cat){var t=this.distSqr>(this.important?Tr:Ir);this.node.active=t}},n.syncInstancing=function(){},n.syncNameLabel=function(){var t=Ne.showCelNames;this.node.activeInHierarchy&&t?(this._label||(Sn.inSolar?this._label=Ue(ji.claim("solar",this.node.name),"solar",this.cat):this._label=Ue(ji.claim("planetary",this.node.name),"planetary",this.cat),this._label.camera=this._viewer,this._label.target=this.node,this._label.key="celestial@"+this._config.name),this._label.alpha=le(this.distSqr,Ar.heads(2),!0)):this._freeLabel()},n._freeLabel=function(){this._label&&(this._label.free(),this._label=null)},n.initPhysicsParams=function(t){var e=this._config.diam;this._real.set(e,e,e),this.updateScale();var n=this._config.orbiter,i=n.orbital,s=n.rotate,a=i,r=a.radius,o=void 0===r?1:r,l=a.lon,c=void 0===l?0:l,h=a.eccentricity,u=void 0===h?0:h,_=a.obliquity,f=void 0===_?0:_,d=a.period,p=void 0===d?365.25:d,g=a.angle,m=void 0===g?0:g;this.orbitalRadius=o,this.orbitalVelocity=1/p,this.longitudeOfNode=c,this.eccentricity=u,this.orbitalObliquity=f,this.orbitalInitAngle=m;var y=null!=s?s:{nra:0,obliquity:0,period:1,angle:0},v=y.nra,b=void 0===v?0:v,S=y.obliquity,w=void 0===S?0:S,A=y.period,L=void 0===A?1:A,E=y.angle,C=void 0===E?0:E;this.northPoleRightAscension=b,this.rotateInitAngle=C,this.rotateVelocity="sync"===L?this.orbitalVelocity:1/L,this.rotateObliquity=w,this._nearest=Math.log10(e/2)+t+Er,this._panorama=Math.log10(.8*o)+t},n._updateRotateData=function(){this._rotator&&this._rotator.setRotationFromEuler(Rr.set(0,this._nra,-this._rto)),this._rotateAngle=this._ria},n._updateOrbitData=function(){this._orbitalAngle=this._oia,this._ba=Math.sqrt(1-this._e*this._e)+Number.EPSILON,this._a=2*this._r/(1+this._ba),this._b=this._a*this._ba,this._c=this._a*this._e,o.fromYRotation(this._orbitMat,Math.parseRadian(this._lon)),o.rotateZ(this._orbitMat,this._orbitMat,Math.parseRadian(this._obo)).transform(Rr.set(this._c,0,0)).scale(Rr.set(this._a/this._r,1,this._b/this._r)),this.revolve()},n.faceToSun=function(t){t.forward=i.subtract(Rr,this.node.worldPosition,this._sun.node.worldPosition)},B(e,[{key:"nearest",get:function(){return this._nearest+this.bias}},{key:"suggest",get:function(){return this.nearest+Cr+this.bias}},{key:"panorama",get:function(){return this._panorama}},{key:"bias",get:function(){return this._bias}},{key:"rotator",get:function(){return this._rotator}},{key:"orbitalRadius",get:function(){return this._r},set:function(t){this._r=t,this._updateOrbitData()}},{key:"longitudeOfNode",get:function(){return this._lon},set:function(t){this._lon=t,this._updateOrbitData()}},{key:"orbitalInitAngle",get:function(){return this._oia},set:function(t){this._oia=t,this._updateOrbitData()}},{key:"eccentricity",get:function(){return this._e},set:function(t){this._e=t,this._updateOrbitData()}},{key:"orbitalObliquity",get:function(){return this._obo},set:function(t){this._obo=t,this._updateOrbitData()}},{key:"ba",get:function(){return this._ba}},{key:"a",get:function(){return 2*this.orbitalRadius/(1+this._ba)}},{key:"b",get:function(){return this.a*this._ba}},{key:"c",get:function(){return this.a*this._e}},{key:"orbitMat",get:function(){return this._orbitMat}},{key:"orbitAngle",get:function(){return this._orbitalAngle}},{key:"northPoleRightAscension",get:function(){return this._nra},set:function(t){this._nra=t,this._updateRotateData()}},{key:"rotateInitAngle",get:function(){return this._ria},set:function(t){this._ria=t,this._updateRotateData()}},{key:"rotateObliquity",get:function(){return this._rto},set:function(t){this._rto=t,this._updateRotateData()}},{key:"far",get:function(){return i.distance(this.node.worldPosition,this._viewer.node.worldPosition)}},{key:"dist",get:function(){return i.distance(this.node.worldPosition,this._belong.node.worldPosition)}},{key:"distSqr",get:function(){return i.squaredDistance(this.node.worldPosition,this._belong.node.worldPosition)}},{key:"belong",get:function(){return this._belong}}]),e}(qa)).prototype,"orbitalRadius",[Sa],Object.getOwnPropertyDescriptor(Pa.prototype,"orbitalRadius"),Pa.prototype),Oa=Q(Pa.prototype,"orbitalVelocity",[wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q(Pa.prototype,"longitudeOfNode",[Aa],Object.getOwnPropertyDescriptor(Pa.prototype,"longitudeOfNode"),Pa.prototype),Q(Pa.prototype,"orbitalInitAngle",[La],Object.getOwnPropertyDescriptor(Pa.prototype,"orbitalInitAngle"),Pa.prototype),Q(Pa.prototype,"eccentricity",[Ea],Object.getOwnPropertyDescriptor(Pa.prototype,"eccentricity"),Pa.prototype),Q(Pa.prototype,"orbitalObliquity",[Ca],Object.getOwnPropertyDescriptor(Pa.prototype,"orbitalObliquity"),Pa.prototype),Da=Q(Pa.prototype,"rotateVelocity",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q(Pa.prototype,"northPoleRightAscension",[Ia],Object.getOwnPropertyDescriptor(Pa.prototype,"northPoleRightAscension"),Pa.prototype),Q(Pa.prototype,"rotateInitAngle",[Ra],Object.getOwnPropertyDescriptor(Pa.prototype,"rotateInitAngle"),Pa.prototype),Q(Pa.prototype,"rotateObliquity",[Na],Object.getOwnPropertyDescriptor(Pa.prototype,"rotateObliquity"),Pa.prototype),Ua=Q(Pa.prototype,"equatorialRadius",[ka],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xa=Q(Pa.prototype,"_r",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Fa=Q(Pa.prototype,"_lon",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),za=Q(Pa.prototype,"_oia",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ga=Q(Pa.prototype,"_e",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ha=Q(Pa.prototype,"_obo",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ba=Q(Pa.prototype,"_nra",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Va=Q(Pa.prototype,"_rto",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wa=Q(Pa.prototype,"_ria",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ma=Pa))||Ma)),wr=Ee.WPS_CULLING_VALVE,Ar=Ee.NameLabelAtt,Lr=vn.LensOffsets,Er=Lr.BASE,Cr=Lr.SUGGEST,Tr=wr*wr,Ir=10*Tr,Rr=new i;e._RF.pop(),e._RF.push({},"b5214FX48pB47zjpEfMmbkt","dsm",void 0);var Nr,kr,Mr,Pr,Or,Dr,Ur,xr,Fr,zr,Gr,Hr=p.ccclass,Br=p.property,Vr=(Ya=Hr("cocosmos.DwarfSatelliteMinor"),Xa=Br([v]),Za=Br([v]),ja=Br([v]),Ja=Br(L),Qa=Br(L),$a=Br(L),tr=Br(L),er=Br(b),nr=Br(b),ir=Br(b),Ya(((gr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"LOD0SharedMats",rr,tt(e)),$(e,"LOD1SharedMats",or,tt(e)),$(e,"LOD2SharedMats",lr,tt(e)),$(e,"LOD0MeshIrr",cr,tt(e)),$(e,"LOD1MeshIrr",hr,tt(e)),$(e,"LOD0MeshSph",ur,tt(e)),$(e,"LOD1MeshSph",_r,tt(e)),$(e,"mesh0",fr,tt(e)),$(e,"mesh1",dr,tt(e)),$(e,"mesh2",pr,tt(e)),e.rotatable=!0,e.important=!1,e._tiling=void 0,e._type=void 0,e}H(e,t);var n=e.prototype;return n.setType=function(t){this._type=t},n.init=function(){t.prototype.init.call(this)},n.step=function(e){t.prototype.step.call(this,e),this._lod2&&this.faceToSun(this._lod2)},n.configure=function(){this._loadMeshParams(),this._loadLODParams(),this._bias=ue(this.config.diam,Xr,Zr,jr,Jr)},n.onEnable=function(){this.mesh0.mesh=this.mesh0.mesh,this.mesh1.mesh=this.mesh1.mesh},n._loadMeshParams=function(){var t=this._config.sphere;void 0===t||t?(this.mesh0.mesh=this.LOD0MeshSph,this.mesh1.mesh=this.LOD1MeshSph):(this.mesh0.mesh=this.LOD0MeshIrr,this.mesh1.mesh=this.LOD1MeshIrr)},n._loadLODParams=function(){var t=this._config,e=t.sheet,n=t.lod;-99==e?(this._tiling=null,this.mesh0.setSharedMaterial(this.LOD0SharedMats.tail,0),this.mesh1.setSharedMaterial(this.LOD1SharedMats.tail,0),this.mesh2.setSharedMaterial(this.LOD2SharedMats.tail,0)):(this._tiling=ce(n,e<=1?qr:Kr),this.mesh0.setSharedMaterial(this.LOD0SharedMats[e],0),this.mesh1.setSharedMaterial(this.LOD1SharedMats[e],0),this.mesh2.setSharedMaterial(this.LOD2SharedMats[e],0))},n.syncInstancing=function(){this._tiling&&(this.mesh0.setInstancedAttribute("instanced_uv",this._tiling),this.mesh1.setInstancedAttribute("instanced_uv",this._tiling),this.mesh2.setInstancedAttribute("instanced_uv",this._tiling))},n.initPhysicsParams=function(e){if(t.prototype.initPhysicsParams.call(this,e),"satellite"===this.cat){var n=this._belong,i=n.northPoleRightAscension,s=n.rotateObliquity;this.longitudeOfNode+=i,this.orbitalObliquity-=s}if(notEmptyArr(this._config.xyz)){var a=this._config.xyz,r=a[0],o=a[1],l=a[2];this._real.multiply3f(r,o,l)}},n.onLod0Initiated=function(){var t=this._config.sheet;if(-99!=t&&!e.LoadTexTaskLaunched[t]){e.LoadTexTaskLaunched[t]=!0;var n=this.mesh0.getSharedMaterial(0);Be(n,"dwarfs-"+t+"-high","mainTexture","albedo",!1),Be(n,"dwarfs-"+t+"-high","normalMap","normal",!1)}},n.preloadRes=function(){var t=this._config.sheet;-99!=t&&(e.LoadTexTaskLaunched[t]||(e.LoadTexTaskLaunched[t]=!0,q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_DSM_ALB.replace("idx",t+"")),q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_DSM_NRM.replace("idx",t+""))))},B(e,[{key:"config",get:function(){return this._config}},{key:"cat",get:function(){return this._type}},{key:"sphere",get:function(){var t;return null==(t=this._config.sphere)||t}},{key:"LODValves",get:function(){return Yr[this.cat]}}]),e}(Sr)).LoadTexTaskLaunched=[!1,!1,!1],rr=Q((ar=gr).prototype,"LOD0SharedMats",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),or=Q(ar.prototype,"LOD1SharedMats",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lr=Q(ar.prototype,"LOD2SharedMats",[ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cr=Q(ar.prototype,"LOD0MeshIrr",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hr=Q(ar.prototype,"LOD1MeshIrr",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ur=Q(ar.prototype,"LOD0MeshSph",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_r=Q(ar.prototype,"LOD1MeshSph",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fr=Q(ar.prototype,"mesh0",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=Q(ar.prototype,"mesh1",[nr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr=Q(ar.prototype,"mesh2",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=ar))||sr),Wr=Dt.Sheets,qr=Wr.DSM01_LOD_GIRDS,Kr=Wr.DSM2_LOD_GIRDS,Yr={dwarf:[3,1.5,.5,.2],satellite:[3,1.5,.5,.2],minor:[3,1.5,.5,.2]},Xr=124e-7,Zr=.0052682,jr=.2,Jr=.5;e._RF.pop(),e._RF.push({},"add0awF/bJJyat60x8F/HrP","asteroid",void 0);var Qr,$r=p.ccclass,to=p.property,eo=(Nr=$r("cocosmos.Asteroid"),kr=to([L]),Mr=to([L]),Pr=to(b),Or=to(b),Nr((xr=Q((Ur=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,$(e,"meshTypeA",xr,tt(e)),$(e,"meshTypeB",Fr,tt(e)),$(e,"mesh0",zr,tt(e)),$(e,"mesh1",Gr,tt(e)),e.cat="asteroid",e.activating=!0,e._dist=1,e._orbitalVelocity=0,e._rotateVelocity=0,e._orbitalAngle=0,e._rotateAngle=0,e._config=void 0,e._rotator=void 0,e._center=void 0,e._rectangular=!1,e._rectParams={size:new i,pos:new i},e}H(e,t);var n=e.prototype;return n.loadConfig=function(t,e,n,i){return this.node.name="Asteroid",this._config=t,this._center=i.node,this._viewer=e,this.initPhysicsParams(),this},n.init=function(){this._rotator=this.node.getChildByName("Rotator"),this._randomMesh()},n._randomMesh=function(){var t=Math.randomBool()?this.meshTypeA:this.meshTypeB;this.mesh0.mesh=t[0],this.mesh1.mesh=t[1]},n.onTick=function(t,e){var n=t*li.timescale;this.step(n),this.rotate(n),this.revolve(n),this.syncActivating()},n.step=function(t){this._orbitalAngle+=this._orbitalVelocity*t,this._rotateAngle+=this._rotateVelocity*t,this._orbitalAngle>Lt&&(this._orbitalAngle-=Lt),this._rotateAngle>Lt&&(this._rotateAngle-=Lt)},n.rotate=function(t){var e=this;this._rotator.activeInHierarchy&&this._rotator.children.forEach((function(t){t.active&&t.setRotationFromEuler(0,e._rotateAngle,0)})),this._lod2.forward=i.subtract(ro,this.node.worldPosition,this._center.worldPosition)},n.revolve=function(t){if(!this._rectangular){var e=this._dist,n=Math.parseRadian(this._orbitalAngle),i=[Math.cos(n),Math.sin(n)],s=i[0],a=i[1];this.node.setPosition(e*a,0,e*s)}},n.syncActivating=function(){this.node.parent&&this.node.parent.activeInHierarchy&&(this.activating?this.node.active=this.activating&&i.squaredDistance(this.node.worldPosition,this._center.worldPosition)>ao:this.node.active=!1)},n.initPhysicsParams=function(){var t=this._config.ranges,e=t.diam,n=t.dist,i=t.angular,s=t.scale,a=e[0],r=e[1],o=n[0],l=n[1],c=Math.avg(o,l),h=c/8,u=s[0],_=s[1],f=i[0],d=i[1];this._dist=c+Math.randomRange(-h,h),this._orbitalAngle=Math.randomRange(0,360),this._orbitalVelocity=oo/Math.sqrt(Math.pow(this._dist,3));var p=Math.randomRange(a,r);this._real.set(Math.randomRange(u,_)*p,Math.randomRange(u,_)*p,Math.randomRange(u,_)*p),this.updateScale(),this._rotateVelocity=Math.randomRange(f,d),this._rotateAngle=Math.randomRange(0,360),this._rotator.setRotationFromEuler(Math.randomRange(-90,90),0,Math.randomRange(-90,90)),this._initRectangularParams()},n._initRectangularParams=function(){var t=so.BASE_SIZE,e=so.SIZE_RANGE,n=e[0],i=e[1],s=so.SCALE_RANGE,a=s[0],r=s[1],o=so.POS_RANGE,l=o[0],c=o[1],h=o[2],u=t*Math.randomRange(n,i),_=[Math.randomRange(a,r),Math.randomRange(a,r),Math.randomRange(a,r)],f=_[0],d=_[1],p=_[2];this._rectParams.size.set(u*f,u*d,u*p),this._rectParams.pos.set(Math.randomRange(-l,l),Math.randomRange(-c,c),Math.randomRange(-h,h))},n.updateScale=function(e){this._rectangular||t.prototype.updateScale.call(this,e)},n.onLod0Initiated=function(){},B(e,[{key:"LODValves",get:function(){return no}},{key:"rectangular",set:function(t){this._rectangular!==t&&(this._rectangular=t,t?(this.node.setScale(this._rectParams.size),this.node.setPosition(this._rectParams.pos)):this.node.setScale(this._real))}}]),e}(qa)).prototype,"meshTypeA",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fr=Q(Ur.prototype,"meshTypeB",[Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zr=Q(Ur.prototype,"mesh0",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr=Q(Ur.prototype,"mesh1",[Or],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr=Ur))||Dr),no=[3,1,.3],io=Ee.WPS_CULLING_VALVE,so=wi.AsteroidRectangular,ao=10*(io*io),ro=new i,oo=Math.sqrt(Math.pow(1.4959,3))/365.25;e._RF.pop(),e._RF.push({},"837advL04lK0K/IRGKXv3Tx","belts",void 0);var lo,co,ho,uo,_o,fo,po,go,mo,yo,vo,bo,So,wo,Ao,Lo=(0,p.ccclass)("cocosmos.Belts")(Qr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).cat="belts",e.nearest=-12,e.suggest=-11.2,e._configs=void 0,e._belts=[],e._sun=void 0,e._placeInPlanetary=!1,e._labels=[],e._belong=null,e._batches=[],e}H(e,t);var n=e.prototype;return n.placeInSolar=function(){this.node.setPosition(i.ZERO),this._placeInPlanetary=!1},n.placeInPlanetary=function(t){var e=this._belts.find((function(e){return e[0].name===t}))[1];this.node.setPosition(e,0,0),this._placeInPlanetary=!0},n.update=function(){var t=this,e=Sn.inPlanetary,n=Sn.center,i=e&&n!==this;if(this._activeBelts=!i,!i)for(var s,a=et(this._batches);!(s=a()).done;){var r=s.value;if(!r.instances){var o=r.config,l=r.belt,c=q.res.getPrefab(Co.ASTEROID),h=nt(Io,Ro);r.activating=!0,r.instances=[];for(var u=0;u<ko;u++){var _=Fe("Asteroid",Ot,l,c).getComponent(eo);_.loadConfig(o,h,null,this._sun),r.instances.push(_)}break}if(!r.activating){r.activating=!0,r.instances.forEach((function(t){return t.activating=!0}));break}if(this._placeInPlanetary!==r.inPlanetary){r.inPlanetary=this._placeInPlanetary,this._batches.forEach((function(e){var n;return null==(n=e.instances)?void 0:n.forEach((function(e){return e.rectangular=t._placeInPlanetary}))}));break}}},n.lateUpdate=function(){if(Ne.showCelNames){this._claimLabels();for(var t,e=et(this._labels);!(t=e()).done;){var n=t.value,i=n.worldOffset,s=i.x,a=i.z;this._hackHide(n)?n.alpha=0:n.alpha=le(Math.sumSqr(s,a),Eo,!0)}}else this._freeLabels()},n._hackHide=function(t){return this._placeInPlanetary&&("Main Belt"===t.string||"主小行星带"===t.string)},n.onDisable=function(){this._freeLabels(),this._batches.forEach((function(t){t.activating=!1,t.instances&&t.instances.forEach((function(t){return t.activating=!1}))}))},n.loadAsteroids=function(t){for(var e in this._sun=t,this._configs=q.res.getConfig(To),this._configs){var n=this._configs[e],i=Fe(e,Ot,this.node);this._belts.push([i,Math.avg.apply(Math,n.ranges.dist)]);for(var s=n.num,a=Math.round(s/ko),r=0;r<a;r++)this._batches.push({instances:null,activating:!1,belt:i,config:n,inPlanetary:!1})}this.placeInSolar()},n._freeLabels=function(){notEmptyArr(this._labels)&&this._labels.forEach((function(t){return t.free()})),this._labels.length=0},n._claimLabels=function(){var t=this;if(!notEmptyArr(this._labels)){var e=nt(Io,Ro);this._belts.forEach((function(n){for(var i=n[0],s=n[1],a=t._configs[i.name],r=a.name,o=a.cname,l=0;l<3;l++){var c=Ue(ji.claim("solar",i.name),"solar","belts");c.target=i,c.camera=e;var h=l*Math.PI*2/3,u=Math.sin(h)*s,_=Math.cos(h)*s;c.setOffset(No.set(u,0,_)),c.config={cn:o,en:r},t._labels.push(c)}}))}},B(e,[{key:"configs",get:function(){return this._configs}},{key:"panorama",get:function(){return-3.5}},{key:"belong",get:function(){return this._belong}},{key:"_activeBelts",set:function(t){this._belts.forEach((function(e){return e[0].active=t}))}}]),e}(m))||Qr,Eo=Ee.NameLabelAtt,Co=Dt.Prefabs,To=Dt.Configs.ASTEROID_BELTS,Io=Ut.COSMOS,Ro=Ut.Cameras.MAIN,No=new i,ko=20;e._RF.pop(),e._RF.push({},"6913cJ7nCdA/qxRV5MDc6G9","magnetics",void 0);var Mo,Po,Oo,Do,Uo,xo=p.ccclass,Fo=p.property,zo=(lo=xo("cocosmos.magnetics"),co=Fo(b),ho=Fo(b),uo=Fo(b),_o=Fo(b),fo=Fo(b),po=Fo(b),lo((yo=Q((mo=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"spindle",yo,tt(e)),$(e,"closeInner",vo,tt(e)),$(e,"closeMiddle",bo,tt(e)),$(e,"closeOuter",So,tt(e)),$(e,"openInner",wo,tt(e)),$(e,"openOuter",Ao,tt(e)),e}H(e,t);var n=e.prototype;return n.onEnable=function(){this._syncToCenter()},n.update=function(){this._syncToCenter()},n.reloadConfig=function(t){if(this.node.children.forEach((function(t){return t.active=!1})),t&&t.magnetics){var e=t.magnetics,n=e.spindle,i=e.closes,s=e.opens;if(this._reloadOneMaterial(this.spindle,n),i){var a=i.inner,r=i.middle,o=i.outer;this._reloadOneMaterial(this.closeInner,a),this._reloadOneMaterial(this.closeMiddle,r),this._reloadOneMaterial(this.closeOuter,o)}if(s){var l=s.inner,c=s.outer;this._reloadOneMaterial(this.openInner,l),this._reloadOneMaterial(this.openOuter,c)}}},n._reloadOneMaterial=function(t,e){if(e){t.node.active=!0;var n=e[0],i=e[1],s=e[2],a=e[3],r=e[4],o=e[5],l=e[6],c=null!=n?n:1;t.node.setScale(c,c,c);var h=t.material;h.setProperty("mainColor",this._setColor(i)),h.setProperty("lineColor",this._setColor(s)),h.setProperty("args",Ho.set(null!=a?a:.5,null!=r?r:24,null!=o?o:0,null!=l?l:0))}},n._syncToCenter=function(){var t=Oi.center,e=Oi.unbelt;this.node.setWorldScale(t.node.worldScale),this.node.setWorldPosition(t.node.worldPosition),e&&t.faceToSun(this.node)},n._setColor=function(t){var e,n,i,s;return Go.set(null!=(e=t[0])?e:0,null!=(n=t[1])?n:0,null!=(i=t[2])?i:0,null!=(s=t[3])?s:0),Go},e}(m)).prototype,"spindle",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vo=Q(mo.prototype,"closeInner",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bo=Q(mo.prototype,"closeMiddle",[uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),So=Q(mo.prototype,"closeOuter",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wo=Q(mo.prototype,"openInner",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ao=Q(mo.prototype,"openOuter",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),go=mo))||go),Go=new r,Ho=new A;e._RF.pop(),e._RF.push({},"72596YjpSpI4o532xcmTrDK","comet-hd",void 0);var Bo,Vo,Wo,qo,Ko,Yo,Xo,Zo,jo,Jo,Qo=p.ccclass,$o=p.property,tl=(Mo=Qo("cocosmos.comet-hd"),Po=$o(v),Mo((Uo=Q((Do=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"sharedInstMaterial",Uo,tt(e)),e._strength=1,e._sharedPass0=void 0,e._sharedHandle=void 0,e}H(e,t);var n=e.prototype;return n.onLoad=function(){this._sharedPass0=this.sharedInstMaterial.passes[0],this._sharedHandle=this._sharedPass0.getHandle("nearStrength")},n.onEnable=function(){var t=Oi.centerName,e=q.res.getConfigItem(Dt.Configs.SOLAR_COMETS,t);null!=e&&e.tint?r.fromHEX(el,null==e?void 0:e.tint):r.copy(el,nl),this.sharedInstMaterial.setProperty("baseColor",el)},n.update=function(){this._syncToCenter(),this._sharedPass0.setUniform(this._sharedHandle,this._strength)},n._syncToCenter=function(){var t=Oi.center;this.node.setWorldScale(t.node.worldScale),this.node.setWorldPosition(t.node.worldPosition),this._strength=he(.5,.1,t.node.worldScale.x),t.faceToSun(this.node)},e}(m)).prototype,"sharedInstMaterial",[Po],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oo=Do))||Oo),el=new r(255,255,255,255),nl=new r(0,97,191,255);e._RF.pop(),e._RF.push({},"2ad409YqJ1M/qOtcWpxG1Fp","astronomical",void 0);var il,sl,al,rl,ol,ll,cl,hl,ul,_l=p.ccclass,fl=p.property,dl=(Bo=_l("cocosmos.astronomical"),Vo=fl(b),Wo=fl(b),qo=fl(b),Bo(((Jo=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"lunarPlane",Xo,tt(e)),$(e,"equatorialPlane",Zo,tt(e)),$(e,"eclipticPlane",jo,tt(e)),e._moon=null,e._lunarInited=!1,e._planes=new Map,e}H(e,t);var n=e.prototype;return n.reorientate=function(t){this._moon=null!=t?t:null,this.equatorialPlane.node.forward=Oi.center.rotator.right},n.onLoad=function(){var t=this;[this.lunarPlane,this.equatorialPlane,this.eclipticPlane].forEach((function(e){var n=e.material.passes[0],i=n.getHandle("rolling");t._planes.set(e.node,{pass0:n,handle:i,rolling:0})}))},n.checkLoadTex=function(){var t=this;e.LoadTexTaskLaunched||(e.LoadTexTaskLaunched=!0,E.load(Dt.Textures.AST_PLANES,C,(function(e,n){e?console.error("planes texture",e):[t.lunarPlane,t.equatorialPlane,t.eclipticPlane].forEach((function(t){return t.material.setProperty("mainTexture",n)}))})))},n.onEnable=function(){this._syncToCenter()},n.update=function(t){this._syncToCenter(),this._syncLunar(),this._record();for(var e,n=et(this._planes);!(e=n()).done;){var i=e.value[0];i.active=Oi["show"+i.name],i.active&&!pl.get(i)&&(this._planes.get(i).rolling=1)}},n._syncToCenter=function(){var t=Oi.center;this.node.setWorldScale(i.multiplyScalar(gl,t.node.worldScale,yl)),this.node.setWorldPosition(t.node.worldPosition)},n._syncLunar=function(){if(this._moon&&Oi.showLunarPlane){if(li.timescale<1&&this._lunarInited)return;var t=Oi.center,e=Oi.center.belong,n=this._moon,s=Math.parseRadian(n.longitudeOfNode);gl.set(Math.sin(s),0,Math.cos(s)),i.subtract(ml,n.node.worldPosition,t.node.worldPosition),i.cross(gl,gl,ml),gl.y<0&&gl.negative(),i.subtract(ml,e.node.worldPosition,t.node.worldPosition),i.cross(ml,gl,ml),this.lunarPlane.node.lookAt(ml,gl),this._lunarInited=!0}},n.lateUpdate=function(t){for(var e,n=et(this._planes);!(e=n()).done;){var i=e.value,s=i[0],a=i[1].rolling,r=this._planes.get(s);a>0?r.rolling-=t:r.rolling=0,s.active&&r.pass0.setUniform(r.handle,T.sineIn(r.rolling))}},n._record=function(){this.node.children.forEach((function(t){pl.set(t,t.active)}))},e}(m)).LoadTexTaskLaunched=!1,Xo=Q((Yo=Jo).prototype,"lunarPlane",[Vo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zo=Q(Yo.prototype,"equatorialPlane",[Wo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=Q(Yo.prototype,"eclipticPlane",[qo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ko=Yo))||Ko),pl=new Map,gl=new i,ml=new i,yl=2;e._RF.pop(),e._RF.push({},"6e19fywE0JHvo05eIe1TApG","planetary-system",void 0);var vl,bl=p.ccclass,Sl=p.property,wl=(t("P",(il=bl("cocosmos.PlanetarySystem"),sl=Sl(zo),al=Sl(dl),rl=Sl(tl),il((cl=Q((ll=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"gmt",cl,tt(e)),$(e,"ast",hl,tt(e)),$(e,"chd",ul,tt(e)),e._satellites=[],e._pool=[],e._container=void 0,e._hidingContents=!1,e._loaded=!1,e}H(e,t);var n=e.prototype;return n.getSatellite=function(t){return this._satellites.find((function(e){return e.node.name===t}))},n.onLoad=function(){this._init()._listen()},n.update=function(){var t=Oi.showSatellites,e=Oi.showMagnetics,n=Sn.inPlanet,i=Sn.inComet;this._container.active=t&&!this._hidingContents,this.gmt.node.active=n&&e&&!this._hidingContents,this.ast.node.active=n&&!this._hidingContents,this.chd.node.active=i},n._init=function(){return this._container=Fe("Satellites",Ot,this.node),this.gmt.node.active=this.ast.node.active=this.chd.node.active=!1,this},n._listen=function(){var t=this;this.on(Rl.FACE_OVER,(function(){return t._hidingContents=!1}))},n.loadSystem=function(){if(this._loaded)return console.warn("[planetary-system]","reload error!");var t=Sn.transInfo,e=t.target,n=t.name,i=t.mediator,s=null!=i?i:e,a=s.cat;Oi.reloadOrbiterParams(s,null,s.suggest+kl);var r="Pluto"===s.node.name;if("planet"===a||r){var o=s,l=o.node.name,c=q.res.getConfigItem(r?El:Ll,l),h=null==c?void 0:c.satellites,u=this._reloadSatellites(h,o);Oi.reloadOrbiterParams(o,h,u),this.gmt.reloadConfig(o.config),this.ast.reorientate(this.getSatellite("Moon")),this.ast.checkLoadTex()}else if("comet"===a);else if("belts"===a){s.placeInPlanetary(n)}this._loaded=!0},n._reloadSatellites=function(t,e){var n=this,i=0;if(notEmptyArr(t)){var s=nt(Tl,Il);t.forEach((function(t){var a=q.res.getConfigItem(Cl,t),r=n._claim(a,s,e);n.satellites.push(r);var o=r.orbitalRadius;o>i&&(i=o)}))}return this._hidingContents=!0,0===i?0:Math.log10(2*i)+Nl},n.freeSystem=function(){var t=this;this._satellites.forEach((function(e){return t._free(e)})),this._satellites.length=0,this._loaded=!1,Oi.reloadOrbiterParams(null),this.unscheduleAllCallbacks(),Sn.transInfo.from instanceof Lo&&this.scheduleOnce((function(){return Sn.transInfo.from.placeInSolar()}),.5)},n._claim=function(t,e,n){var i,s=null!=(i=this._pool.pop())?i:l(q.res.getPrefab(wl.DSM)).getComponent(Vr);return s.setType("satellite"),s.node.parent=this._container,s.loadConfig(t,e,Nl,n),s},n._free=function(t){this._pool.push(t),t.node.removeFromParent()},B(e,[{key:"satellites",get:function(){return this._satellites}}]),e}(at)).prototype,"gmt",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hl=Q(ll.prototype,"ast",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ul=Q(ll.prototype,"chd",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ol=ll))||ol)),Dt.Prefabs),Al=Dt.Configs,Ll=Al.SOLAR_PLANETS,El=Al.SOLAR_DWARFS,Cl=Al.PLANETARY_SATELLITES,Tl=Ut.COSMOS,Il=Ut.Cameras.MAIN,Rl=fe.Transform,Nl=kn.Scopes.Planetary[2],kl=vn.LensOffsets.PLANET_SCOPE;e._RF.pop(),e._RF.push({},"8d5e72RbKhAeqeC3DyULdRS","comet",void 0);var Ml,Pl,Ol,Dl,Ul,xl,Fl,zl=(0,p.ccclass)("cocosmos.Comet")(vl=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).rotatable=!1,e.important=!1,e.named=!0,e.cat="comet",e}H(e,t);var n=e.prototype;return n.step=function(e){t.prototype.step.call(this,e),this.faceToSun(this._lod0),this.faceToSun(this._lod1)},n.init=function(){t.prototype.init.call(this)},n.onLod0Initiated=function(){},n.configure=function(){this._bias=ue(this.config.diam,Hl,Bl,Vl,Wl)},n.syncLODChoosing=function(){t.prototype.syncLODChoosing.call(this),Oi.center===this&&(this._lod0.active=!1)},B(e,[{key:"config",get:function(){return this._config}},{key:"LODValves",get:function(){return Gl}}]),e}(Sr))||vl,Gl=[.5,.1],Hl=5e-8,Bl=2e-7,Vl=.2,Wl=.7;e._RF.pop(),e._RF.push({},"851382nxJZB14Mz460ig8Wi","planet",void 0);var ql,Kl=p.ccclass,Yl=p.type,Xl=it,Zl=(Ml=Kl("cocosmos.Planet"),Pl=Xl("自转参数.A","表面风速",["unit","deg/s"]),Ol=Yl([v]),Ml((xl=Q((Ul=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).rotatable=!0,e.important=!0,e.cat="planet",$(e,"windVelocity",xl,tt(e)),e.cloudAngle=0,$(e,"presetMaterials",Fl,tt(e)),e._sourcePreloaded=!1,e._atmosphere=void 0,e._clouds=void 0,e._ring=void 0,e._mat0=void 0,e._pass0=void 0,e._solarPos=void 0,e._pass0Cloud=void 0,e._solarPosCloud=void 0,e._meshAtm=void 0,e._mesh1=void 0,e._mesh2=void 0,e._mesh3=void 0,e._tiling=void 0,e._atmColor=void 0,e._tint=[255,255,255,255],e}H(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this),this._atmosphere=this._lod0.getChildByName("Atmosphere"),this._clouds=this._lod0.getChildByName("Clouds"),this._ring=this._lod0.getChildByName("Ring"),this._meshAtm=this._atmosphere.getComponent(b),this._mesh1=this._lod1.getComponent(b),this._mesh2=this._lod2.getComponent(b),this._mesh3=this._lod3.getComponent(b)},n.step=function(e){t.prototype.step.call(this,e),this.cloudAngle+=this.windVelocity*e,this.faceToSun(this._lod2)},n.rotate=function(e){t.prototype.rotate.call(this,e),this._clouds.active&&this._clouds.setRotationFromEuler(0,this.cloudAngle,0)},n.configure=function(){this._loadSurfaceParams(),this._loadLODParams(),this._bias=ue(this.config.diam,tc,ec,nc,ic)},n.preloadRes=function(){if(!this._sourcePreloaded){this._sourcePreloaded=!0;var t=this._config.name;He(t,"albedo",!0);var e=this._config.surface,n=e.land,i=e.atmosphere,s=e.reflect;null!=n&&n.mountains&&He(t,"normal",!0),null!=s&&s.night&&He(t,"emissive",!0),null!=i&&i.clouds&&He(t,"clouds",!0)}},n._loadSurfaceParams=function(){this._loadPresetMaterialInst(),this._mat0=this._lod0.getComponent(b).getMaterialInstance(0),this._pass0=this._mat0.passes[0],this._solarPos=this._pass0.getHandle("solarPos");var t=this._config.surface,e=t.land,n=t.ring;if(e.tint){var i,s=r.fromHEX(Jl,null!=(i=e.tint)?i:"#FFFFFF"),a=s.r,o=s.g,l=s.b,c=s.a;this._tint=[a,o,l,c]}n&&(this._lod1.getChildByName("Ring").active=!0)},n._loadLODParams=function(){var t=this._config.lod;this._tiling=ce(t,jl)},n.syncInstancing=function(){this._pass0.setUniform(this._solarPos,this._belong.node.worldPosition),this._atmosphere.active&&this._meshAtm.setInstancedAttribute("instanced_color",this._atmColor),this._clouds.active&&this._pass0Cloud&&this._pass0Cloud.setUniform(this._solarPosCloud,this._belong.node.worldPosition),this._mesh1.setInstancedAttribute("instanced_uv",this._tiling),this._mesh2.setInstancedAttribute("instanced_uv",this._tiling),this._mesh3.setInstancedAttribute("instanced_color",this._tint)},n.onLod0Initiated=function(){var t=this._config.name,e=t.toLocaleLowerCase();Be(this._mat0,t,"mainTexture","albedo",!0);var n,i=this._config.surface,s=i.land,a=i.atmosphere,o=i.reflect,l=i.ring,c=s.brightness,h=void 0===c?1:c,u=s.mountains,_=s.wind;(We(this._mat0,"albedoScale",1.5*h),u)&&(Be(this._mat0,t,"normalMap","normal",!0),this._mat0.setProperty("normalStrength",Math.clamp(null!=(n=u.strength)?n:1,0,5)));if(_){var f=q.res.getSheetFrame(Dt.Sheets.PRESET,e+"-wind");this._mat0.setProperty("windMap",f.texture)}if(notEmpty(a)){this._atmosphere.active=!0;var d=a.scale,p=a.color,g=a.thickness,m=a.clouds,y=null!=d?d:Ql;this._atmosphere.setScale(y,y,y);var v=r.fromHEX(Jl,null!=p?p:"#FFFFFF"),S=v.r,w=v.g,A=v.b,L=v.a;if(this._atmColor=[S,w,A,L],notEmpty(m)){var E,C=m.color,T=m.strength,I=void 0===T?1:T,R=m.speed,N=void 0===R?0:R,k=null==(E=this._clouds.getComponent(b))?void 0:E.material;this._pass0Cloud=k.passes[0],this._solarPosCloud=this._pass0Cloud.getHandle("solarPos"),Be(k,t,"mainTexture","clouds",!0),qe(k,"cloudColor",C,g),We(k,"albedoScale",I),this.windVelocity=N,this._clouds.active=!0}else this._clouds.active=!1}else this._atmosphere.active=!1;if(notEmpty(o)){var M=o.color,P=o.strength,O=o.night;qe(this._mat0,"fresnelColor",M,P),O&&(Be(this._mat0,t,"emissiveMap","emissive",!0),We(this._mat0,"emissiveScale",O.strength))}if(l){var D,U=null==(D=this._ring.getComponent(b))?void 0:D.material,x=q.res.getSheetFrame(Dt.Sheets.PRESET,e+"-ring");U&&x?U.setProperty("mainTexture",x.texture):console.warn("lost ring texture for:",t),this._ring.active=!0}else this._ring.active=!1},n._loadPresetMaterialInst=function(){var t=function(t){switch(t){case"Mercury":case"Venus":return Ze.TERRESTRIAL;case"Earth":return Ze.EARTH;case"Mars":return Ze.TERRESTRIAL;case"Jupiter":return Ze.WINDY;case"Saturn":return Ze.GIANT;case"Neptune":return Ze.WINDY;case"Uranus":return Ze.GIANT}}(this._config.name),e=this.presetMaterials.find((function(e){return e.name===t}));this._lod0.getComponent(b).setMaterialInstance(e,0)},B(e,[{key:"config",get:function(){return this._config}},{key:"LODValves",get:function(){return $l}}]),e}(Sr)).prototype,"windVelocity",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Fl=Q(Ul.prototype,"presetMaterials",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dl=Ul))||Dl),jl=Dt.Sheets.PLANETS_LOD_GIRDS,Jl=new r,Ql=1.2,$l=[3,1.5,.5,.2],tc=4878e-8,ec=.00139822,nc=0,ic=.2;e._RF.pop(),e._RF.push({},"ba8d3eGZtlDRICD7JxuKiMU","sun",void 0);var sc,ac,rc,oc,lc,cc,hc,uc=(0,p.ccclass)("cocosmos.Sun")(ql=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).cat="sun",e._config=void 0,e._visible=!1,e._nearest=0,e._magnified=0,e._label=null,e._coronas=void 0,e._prominences=void 0,e}H(e,t);var n=e.prototype;return n.update=function(t){this._coronas&&(this.faceToView(this._coronas),this._coronas.children.forEach((function(e,n){e.angle+=10*t*(.5-n)})))},n.faceToView=function(t){t.forward=i.subtract(pc,this.node.worldPosition,this._viewer.node.worldPosition)},n.loadConfig=function(t,e,n){this._config=t,this._viewer=e;var i=t.diam;this._real.set(i,i,i),this.updateScale(),this._nearest=Math.log10(i)+n},n.init=function(){this._coronas=this._lod0.getChildByName("Coronas"),this._prominences=this._lod0.getChildByName("Prominences")},n.onLod0Initiated=function(){},n.onTick=function(){Sn.inSolar&&"Sun"===this.node.name&&(this._magnified=Math.log10(bi.getMagnified("sun"))),this.syncNameLabel()},n.syncNameLabel=function(){this.node.activeInHierarchy&&Ne.showCelNames?(this._label||(this._label=Ue(ji.claim("solar",this.node.name),"solar","sun"),this._label.camera=this._viewer,this._label.target=this.node,this._label.key="celestial@"+this._config.name),this._label.alpha=le(Mn.pow10,_c,!1)):this._freeLabel()},n._freeLabel=function(){this._label&&(this._label.free(),this._label=null)},B(e,[{key:"LODValves",get:function(){return dc}},{key:"config",get:function(){return this._config}},{key:"nearest",get:function(){return this._nearest+this._magnified}},{key:"suggest",get:function(){return this.nearest+fc}},{key:"panorama",get:function(){return this.nearest+2}},{key:"visible",get:function(){return this._visible},set:function(t){t!==this._visible&&(this.getComponentsInChildren(b).forEach((function(e){return e.enabled=t})),this._visible=t)}}]),e}(qa))||ql,_c=[-6.5,-5.5,-2.5,-1.5],fc=vn.LensOffsets.SUGGEST,dc=[3,.9,.3],pc=new i;e._RF.pop(),e._RF.push({},"817540rhyJMU4WWW3K8boMP","solar-system",void 0);var gc,mc=rt,yc=p.ccclass,vc=p.property,bc=(t("o",(sc=yc("cocosmos.SolarSystem"),ac=vc([v]),rc=vc(b),sc((cc=Q((lc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"sharedInstMaterials",cc,tt(e)),$(e,"dust",hc,tt(e)),e._pass0=void 0,e._handleDust=void 0,e._sun=null,e._light=null,e._planets=[],e._dwarfs=[],e._minors=[],e._comets=[],e._belts=null,e._sharedPasses=[],e._sharedHandles=[],e._containers={},e}H(e,t);var n=e.prototype;return n.getCelestial=function(t,e){if("Sun"===t)return this._sun;switch(e){case"planet":return this._planets.find((function(e){return e.node.name===t}));case"dwarf":return this._dwarfs.find((function(e){return e.node.name===t}));case"minor":return this._minors.find((function(e){return e.node.name===t}));case"comet":return this._comets.find((function(e){return e.node.name===t}));case"belts":return this._belts}},n.onLoad=function(){this._init()._listen()},n.update=function(){this._sycSolarPos();var t=bi.showSun,e=bi.showPlanets,n=bi.showDwarfs,i=bi.showMinors,s=bi.showComets,a=bi.showBelts;this._sun.visible=t,this._containers.planet&&(this._containers.planet.active=e),this._containers.dwarf&&(this._containers.dwarf.active=n),this._checkBuilds(),this._containers.minor&&(this._containers.minor.active=i),this._containers.comet&&(this._containers.comet.active=s),this._containers.belts&&(this._containers.belts.active=a,this.dust.node.active=a)},n.lateUpdate=function(){Nc.set(ui.BeltColor),Nc.a=127*le(Mn.pow10,kc,!1),this._pass0.setUniform(this._handleDust,Nc)},n._checkBuilds=function(){var t=bi.showMinors,e=bi.showComets,n=bi.showBelts;t&&!this._containers.minor&&this._buildMinors(),e&&!this._containers.comet&&this._buildComets(),n&&!this._containers.belts&&this._buildBelts()},n._init=function(){return this._pass0=this.dust.sharedMaterial.passes[0],this._handleDust=this._pass0.getHandle("beltColor"),this.dust.node.active=!1,this._buildSun(),this._buildLight(),this._buildPlanets(),this._buildDwarfs(),this},n._buildSun=function(){var t=q.res.getPrefab(bc.SUN),e=q.res.getConfigItem(wc,"Sun"),n=nt(Cc,Tc);this._sun=Fe("Sun",Ot,this.node,t).getComponent(uc),this._sun.loadConfig(e,n,Rc),Sn.visit(this._sun),Mn.zoomToDur(this._sun.panorama,1,null,fe.Transform.VISIT_OVER)},n._buildLight=function(){var t=this;this._light=mc(Ic),this._light.parent=this._sun.node,this._light.setPosition(i.ZERO),this.sharedInstMaterials.forEach((function(e){var n=e.passes[0];t._sharedPasses.push(n),t._sharedHandles.push(n.getHandle("solarPos"))}))},n._buildPlanets=function(){this._containers.planet=Fe("Planets",Ot,this.node);var t=q.res.getPrefab(bc.PLANET),e=q.res.getConfig(wc),n=nt(Cc,Tc),i=0,s=[];for(var a in e)if("Sun"!==a){var r=e[a];s.push(a);var o=Fe(a,Ot,this._containers.planet,t).getComponent(Zl);o.loadConfig(r,n,Rc,this._sun),this._planets.push(o);var l=o.orbitalRadius;l>i&&(i=l)}bi.reloadParams(this._sun,s,Math.log10(2*i)+Rc)},n._buildDwarfs=function(){this._containers.dwarf=Fe("Dwarfs",Ot,this.node);var t=q.res.getPrefab(bc.DSM),e=q.res.getConfig(Ac),n=nt(Cc,Tc);for(var i in e){var s=e[i],a=Fe(i,Ot,this._containers.dwarf,t).getComponent(Vr);a.setType("dwarf"),a.loadConfig(s,n,Rc,this._sun),this._dwarfs.push(a)}},n._buildMinors=function(){this._containers.minor=Fe("Minors",Ot,this.node);var t=q.res.getPrefab(bc.DSM),e=q.res.getConfig(Lc),n=nt(Cc,Tc);for(var i in e){var s=e[i],a=Fe(i,Ot,this._containers.minor,t).getComponent(Vr);a.setType("minor"),a.loadConfig(s,n,Rc,this._sun),this._minors.push(a)}},n._buildComets=function(){this._containers.comet=Fe("Comets",Ot,this.node);var t=q.res.getPrefab(bc.COMET),e=q.res.getConfig(Ec),n=nt(Cc,Tc);for(var i in e){var s=e[i],a=Fe(i,Ot,this._containers.comet,t).getComponent(zl);a.loadConfig(s,n,Rc,this._sun),this._comets.push(a)}},n._buildBelts=function(){this._containers.belts=this.node.getChildByName("Belts"),this._belts=this._containers.belts.getComponent(Lo),this._belts.loadAsteroids(this._sun)},n._sycSolarPos=function(){var t=this;this._sharedPasses.forEach((function(e,n){return e.setUniform(t._sharedHandles[n],t._sun.node.worldPosition)}))},n._listen=function(){return this},B(e,[{key:"sun",get:function(){return this._sun}},{key:"planets",get:function(){return this._planets}},{key:"earth",get:function(){return this._planets.find((function(t){return"Earth"===t.node.name}))}},{key:"dwarfs",get:function(){return this._dwarfs}},{key:"minors",get:function(){return this._minors}},{key:"comets",get:function(){return this._comets}}]),e}(at)).prototype,"sharedInstMaterials",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hc=Q(lc.prototype,"dust",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oc=lc))||oc)),Dt.Prefabs),Sc=Dt.Configs,wc=Sc.SOLAR_PLANETS,Ac=Sc.SOLAR_DWARFS,Lc=Sc.SOLAR_MINORS,Ec=Sc.SOLAR_COMETS,Cc=Ut.COSMOS,Tc=Ut.Cameras.MAIN,Ic=Ut.MAIN_LIGHT,Rc=kn.Scopes.Solar[2],Nc=new r,kc=[-6.5,-5.5];e._RF.pop(),e._RF.push({},"8384fmxE+BDiYFz2Brwqd5M","star-precise",void 0);var Mc,Pc,Oc=(0,p.ccclass)("cocosmos.StarPrecise")(gc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._label=null,e._viewer=void 0,e._config=void 0,e._belongConfig=void 0,e._group=void 0,e._important=void 0,e._mesh=void 0,e._spectrum=void 0,e._culling=void 0,e._color=new r,e._cArr=void 0,e._ab=void 0,e}H(e,t);var n=e.prototype;return n.loadConfigLine=function(t,e){var n,i;this._belongConfig=e;var s=this._belongConfig,a=s.abbr,r=s.group,o=s.gd;this._group=r;var l=t.split(","),c=l[0],h=l[1],u=l[2],_=l[3],f=l[4],d=l[5],p=l[6],g=l[7],m=l[8],y=l[9],v=l[10],b=l[11];this._ab=c,this._config={ab:c,cname:h,fid:u,HD:null!=(n=+_)?n:null,HIP:null!=(i=+f)?i:null,mag:+g,abs:+m,dist:+y,spec:v,bias:b},this._config.ra_hms=d,this._config.dec_hms=p;var S=d.split(":"),w=S[0],A=S[1],L=S[2];this._config.RA=(+w+ +A/60+ +L/Et)*Ct;var E=p.split(":"),C=E[0],T=E[1],I=E[2];return this._config.Dec=+C+ +T/60+ +I/Et,this.node.name=a+"-"+c,o&&isNum(+c)&&(this.node.name+=" G."),this._initAccurate()},n.onLoad=function(){this._mesh=this.getComponent(b),this._viewer=rt(Fc,Dc),q.on(Z.Time.TICK,this.onTick,this)},n.onDestroy=function(){q.unload(this)},n.onTick=function(t,e){this._syncActivating(),this._syncInstancing(),this._syncNameLabel()},n._syncActivating=function(){(this._culling=!1,this.node.parent&&this.node.parent.activeInHierarchy)&&(i.squaredDistance(this.node.worldPosition,i.ZERO)>Bc&&(this.important||this._config.mag<=Wn.showStarLevel)?(this._culling=re(this._viewer.getComponent(I),this.node,Hc),this.node.active=!this._culling):this.node.active=!1)},n._syncInstancing=function(){this.node.activeInHierarchy&&this._mesh.setInstancedAttribute("instanced_color",this._cArr)},n._syncNameLabel=function(){var t=Ne.starNameLevel,e=t!==Rt.NONE&&this.node.activeInHierarchy&&(this._important||this._config.mag<=t)&&this.node.activeInHierarchy;if(!e&&this._label)this._label.free(),this._label=null;else if(e){if(!this._label){var n,i=this.node.worldPosition.y>0,s=ji.claim("stars",this.node.name);s.camera=nt(Dc,xc),s.target=this.node,this._label=Ue(s,"stars",i);var a=this._config,r=a.bias,o=a.cname,l=a.HD,c=a.HIP;this._label.setMap(((n={})[It.ALPHABET]={en:this.node.name,cn:this._belongConfig.cname+"-"+this._ab},n[It.NAMED]={en:r,cn:o},n[It.HD]=l?"HD-"+l:"",n[It.HIP]=c?"HIP-"+c:"",n),Hi.Star)}this._attenuateLabel()}},n._attenuateLabel=function(){if(this._label){var t=i.squaredDistance(this.node.worldPosition,i.ZERO);this._label.alpha=le(t,zc.heads(2),!0)}},n._initAccurate=function(){var t=this._config,e=t.ab,n=t.RA,s=t.Dec,a=t.dist,r=t.abs;if(isNaN(n))return console.warn("["+this.node.name+"]:ra",n);if(isNaN(s))return console.warn("["+this.node.name+"]:dec",s);if(isNaN(a))return console.warn("["+this.node.name+"]:dist",a);if(ne(n,s,a,Vc),isNaN(Vc.x)||isNaN(Vc.y)||isNaN(Vc.z))return console.warn("["+this.node.name+"]:pos",Vc);if(a<1)return console.warn("["+this.node.name+"]:too-near,dist=",a);ie(Vc,Vc),this.node.setPosition(Vc);var o=function(t){return 1*Math.pow(10,-t/5)}(r);this.node.setScale(i.copy(Vc,i.ONE).multiplyScalar(o)),this._important=e.startsWith("α")||this._group===ht.ZODIAC&&(e.startsWith("β")||e.startsWith("γ")||e.startsWith("δ")),this._spectrum=xe(this._color,this._config.spec,this.node.name);var l=this._color,c=l.r,h=l.g,u=l.b,_=l.a;return this._cArr=[c,h,u,_],!0},B(e,[{key:"spectrum",get:function(){return this._spectrum}},{key:"config",get:function(){return this._config}},{key:"important",get:function(){return this._important}},{key:"culling",get:function(){return this._culling}}]),e}(m))||gc,Dc=Ut.COSMOS,Uc=Ut.Cameras,xc=Uc.DEEP,Fc=Uc.MAIN,zc=Ee.NameLabelAtt,Gc=Ee.WPS_CULLING_VALVE,Hc=Ee.FOV_CULLING_VALVE,Bc=Gc*Gc,Vc=new i;e._RF.pop(),e._RF.push({},"2442e9c5uxNNIJNYfLJbCSO","culture-quad",void 0);var Wc,qc=p.ccclass,Kc=t("g",qc("cocosmos.CultureQuad")(((Pc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._config=void 0,e._label=null,e._mesh=void 0,e._uvArr=[255,255,0,0],e._chArr=[0,0,0,255],e._texId=[0],e._main=!1,e}H(e,t);var n=e.prototype;return n.loadConfig=function(t,e){this._config=t;var n=this._config,i=n.name,s=n.center,a=n.culture,r=a.scale,o=a.angle,l=a.offset,c=a.tex,h=n.group,u=n.area;this.node.name=i;var _=e,f=_*r,d=s[0],p=s[1];if(notEmptyArr(l)&&(d-=l[0]/Ct,p+=l[1]),ie(Yc,function(t,e,n,i){return void 0===n&&(n=1),ne(t*Ct,e,n,i)}(d,p,_,Yc)),this.node.setWorldScale(f,f,1),this.node.setWorldPosition(Yc),this.node.forward=Yc,this._main=h===ht.ZODIAC||u>Jc.CONST_SML_AREA_VALUE,isNum(o)&&this.node.rotate(R.fromAngleZ(Xc,o)),c){var g=c.split("-"),m=g[0],y=g[1],v=g[2],b=g[3];this._uvArr=ce(+b,+v,jc),this._texId[0]="N"===m?0:255,this._chArr[0]="R"===y?255:0,this._chArr[1]="G"===y?255:0,this._chArr[2]="B"===y?255:0}return this},n._syncInstancing=function(){this.node.activeInHierarchy&&(this._chArr[3]=255*Wn.cultureStrengthen,this._mesh.setInstancedAttribute("instanced_uv",this._uvArr),this._mesh.setInstancedAttribute("instanced_channels",this._chArr),this._mesh.setInstancedAttribute("instanced_texid",this._texId))},n._syncActivating=function(){if(this.node.parent&&this.node.parent.activeInHierarchy)if(Wn.showConstCults){var t=i.distance(this.node.worldPosition,i.ZERO);this.node.active&&t<=Zc?this.node.active=!1:!this.node.active&&t>Zc&&(this.node.active=!0)}else this.node.active=!1},n.onTick=function(t,e){this._syncActivating(),this._syncInstancing(),this._syncNameLabel()},n._syncNameLabel=function(){var t=i.squaredDistance(this.node.worldPosition,i.ZERO);if(Ne.showConstNames&&t>2){var e=this._config,n=e.name,s=e.cname;this._label||(this._label=Ue(ji.claim("const",n),"const",this._main),this._label.camera=nt(Qc,$c),this._label.target=this.node,this._label.config={en:n,cn:s}),this._attenuateLabel(t)}else this._label&&(this._label.free(),this._label=null)},n._attenuateLabel=function(t){this._label&&(this._label.alpha=le(t,[2,4.2],!0))},n.onLoad=function(){this._mesh=this.getComponent(b),q.on(Z.Time.TICK,this.onTick,this)},n.start=function(){e.LoadTexTaskLaunched||(e.LoadTexTaskLaunched=!0,q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_CONST_NORTH),q.notify(pe.Load.DYNAMIC_TEX,ge.TEX_CONST_SOUTH))},e}(m)).LoadTexTaskLaunched=!1,Mc=Pc))||Mc),Yc=new i,Xc=new R,Zc=Dn.CultureAtt[0],jc=Dt.Sheets.CULTURE_CELL_NUM,Jc=(Ee.NameLabelAtt,Ee.FontSize),Qc=Ut.COSMOS,$c=Ut.Cameras.DEEP;e._RF.pop(),e._RF.push({},"765d0BOoHZN0Li65l5arZsz","stellar-gould-belt",void 0);var th,eh=p.ccclass,nh=(t("a3",eh("cocosmos.StellarGouldBelt")(Wc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._configs=void 0,e._constStars=new Map,e._stars=void 0,e._cultures=void 0,e._preciseStars=void 0,e}H(e,t);var n=e.prototype;return n.onLoad=function(){this._init()._buildConstStars()},n.update=function(){this._stars.active=Wn.showStars,this._cultures.active=Wn.showConstCults},n._init=function(){return this._configs=q.res.getConfig(Dt.Configs.CONSTELLATION_STARS),this._stars=Fe("Stars",Pt,this.node),this._cultures=Fe("Cultures",Pt,this.node),this},n._buildConstStars=function(){var t=this,e=q.res.getPrefab(Dt.Prefabs.STAR_PRECISE),n=q.res.getPrefab(Dt.Prefabs.CULTURE_QUAD),i=function(){var i=s,a=t._configs[i];if(t._checkSkip(a))return 1;var r={};t._constStars.set(i,r);var o=a.stars,c=nh/10;if(o.forEach((function(n){var s=De(l(e),Pt),o=s.getComponent(Oc);try{o.loadConfigLine(n,a)?(s.parent=t._stars,r[o.config.ab]&&console.warn("dupli star",i+"-"+o.config.ab),r[o.config.ab]=o,c=Math.min(c,o.config.dist)):console.warn("star load failed for:",n)}catch(t){console.warn("star load error for:",n)}})),a.culture){var h=De(l(n),Pt);h.parent=t._cultures,h.getComponent(Kc).loadConfig(a,c).node.active=!1}};for(var s in this._configs)i();this._preciseStars=this._stars.getComponentsInChildren(Oc)},n._checkSkip=function(t){return ih>=0&&!(t.group&ih)||!(!notEmptyArr(sh)||sh.contains(t.abbr))},B(e,[{key:"configs",get:function(){return this._configs}},{key:"constStars",get:function(){return this._constStars}},{key:"stars",get:function(){return this._preciseStars}}]),e}(m))||Wc),Ee.DEEP_DIST),ih=ht.ALL,sh=[];e._RF.pop(),e._RF.push({},"7a8b0MD1WpLhL+/ofCUilv5","virgo-super-cluster",void 0);(0,p.ccclass)("cocosmos.VirgoSuperCluster")(th=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._substructure_key="groups",e._attenuation=[7,7.7,8.7,9.15],e}H(e,t);var n=e.prototype;return n.createSubParticles=function(){var t=this;this._subparts=Fe("Perversive Galaxy-Groups",Ot,this.node);var e=q.res.getPrefab(fh);[dh,ph,gh,mh].forEach((function(n){return ze(l(e),n,t._subparts)}))},n.approachScope1stTime=function(){},e}(as));var ah,rh,oh,lh,ch,hh,uh,_h,fh=Dt.Prefabs.GALAXIES_GPU,dh={num:1200,sizes:[.0024,.0036],radius:.15,position:{x:.05,y:.15,z:-.4},scale:{x:1,y:1,z:3},thickness:.5,random:.1},ph={num:1500,sizes:[.004,.006],radius:.4,position:{x:0,y:-.25,z:.5},scale:{x:2.5,y:1.5,z:1.2},thickness:.5,random:.2},gh={num:2200,sizes:[.006,.01],radius:.6,position:{x:0,y:-.8,z:-2},scale:{x:3,y:1.5,z:2.2},thickness:.5,random:.2},mh={num:2e3,sizes:[.005,.008],radius:.6,position:{x:.5,y:1,z:-.5},scale:{x:4,y:1,z:4},thickness:.5,random:.2};e._RF.pop(),e._RF.push({},"57a06S8hUpJKoGQt9HybZ6x","deep-sky-fixed",void 0);var yh,vh,bh,Sh,wh,Ah=p.ccclass,Lh=p.property,Eh=(t("O",(ah=Ah("cocosmos.DeepSkyFixed"),rh=Lh(v),oh=Lh(v),ah(((_h=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"messierInners",hh,tt(e)),$(e,"messierGalaxies",uh,tt(e)),e._label=null,e._viewer=void 0,e._config=void 0,e._fov=void 0,e._mesh=void 0,e._culling=void 0,e._milky=!1,e._local=!1,e._clustered=!1,e._nebular=!1,e._extragalactic=!1,e._uvArr=[1,1,0,0],e._nstr="",e}H(e,t);var n=e.prototype;return n.loadConfig=function(t,e){this._config=e;var n=this._config,i=n.ra_hms,s=n.dec_hms,a=n.dist,r=n.dso,o=i.split(":"),l=o[0],c=o[1],h=o[2];this._config.RA=(+l+ +c/60+ +h/Et)*Ct;var u=s.split(":"),_=u[0],f=u[1],d=u[2];return this._config.Dec=+_+ +f/60+ +d/Et,this.node.name=t,this._milky=a>Th&&a<Ih,this._clustered=r<Fh,this._nebular=!this.clustered&&r<zh,this._extragalactic=!this.clustered&&!this.nebular,this._local=this._extragalactic&&a<Rh,this._initAccurate()},n.onLoad=function(){this._mesh=this.getComponent(b),q.on(Z.Time.TICK,this.onTick,this)},n.onDestroy=function(){this.viewer=null,q.unload(this)},n.onTick=function(t,e){this._syncActivating(),this._syncInstancing(),this._syncNameLabel()},n._syncActivating=function(){if(this._culling=!1,this.node.parent&&this.node.parent.activeInHierarchy){var t=si.showNebulas,e=si.showClusters,n=si.showGalaxies;i.squaredDistance(this.node.worldPosition,i.ZERO)>Wh&&(this._nebular&&t||this._clustered&&e||this._extragalactic&&n)?(this._culling=re(this._viewer.getComponent(I),this.node,Vh),this.node.active=!this._culling):this.node.active=!1}},n._syncInstancing=function(){this.node.activeInHierarchy&&this._mesh.setInstancedAttribute("instanced_uv",this._uvArr)},n._syncNameLabel=function(){var t=this._clustered?"cluster":this._nebular?"nebula":"galaxy",e="galaxy"===t?Ne.showGalaxyNames:Ne.showNebularNames,n=this.node.activeInHierarchy&&e;if(!n&&this._label)this._label.free(),this._label=null;else if(n){if(!this._label){var i,s=ji.claim(t,this.node.name);s.camera=nt(Eh,Ch),s.target=this.node;var a=this.node.worldPosition.y>0;if("galaxy"===t){var r=this._config,o=r.dso,l=r.cent,c=o==Gh?l?"companion":"dwarf":"center";"companion"!=c&&(a=this.node.position.y>(this.local?dt.y:gt.y)),this._label=Ue(s,t,c,a)}else this._label=Ue(s,t,a);var h=this._config,u=h.bias,_=h.NGC,f=h.IC,d=h.nick;this._label.setMap(((i={})[Nt.NAMED]={en:u,cn:d},i[Nt.MESSIER]=this.node.name,i[Nt.NGC_IC]=_?"NGC-"+_:f?"IC-"+f:"",i),Hi.Deep)}this._attenuateLabel()}},n._attenuateLabel=function(){if(this._label){var t=i.squaredDistance(this.node.worldPosition,i.ZERO);this._label.alpha=le(t,Hh,!0)}},n._initAccurate=function(){var t=this._config,e=t.RA,n=t.Dec,i=t.dist,s=t.diam,a=t.appD,r=t.tex;if(isNaN(e))return console.warn("["+this.node.name+"]:ra",e);if(isNaN(n))return console.warn("["+this.node.name+"]:dec",n);if(isNaN(i))return console.warn("["+this.node.name+"]:dist",i);if(ne(e,n,i,Zh),isNaN(Zh.x)||isNaN(Zh.y)||isNaN(Zh.z))return console.warn("["+this.node.name+"]:pos",Zh);ie(Zh,Zh);var o=this.extragalactic?this.local?Uh:xh:Dh;Zh.multiplyScalar(Math.pow(10,o+Nh));var l=function(t,e,n,i){var s=e/t/1e3*(10800/Math.PI),a=notEmptyArr(n)?[Math.max.apply(Math,n),Math.min.apply(Math,n)]:[n,n],r=a[0],o=a[1],l=Math.avg(r,r,o),c=Math.avg(s,l)/s;return[e*Math.pow(10,i)*c*se+ae,s*c]}(i,s,a,o),c=l[0],h=l[1],u=this.extragalactic?this.local?1.3:2.5:1;jh.set(c,c,c).multiplyScalar(u),this._fov=+h.toFixed(1),this.node.setPosition(Zh),this.node.setScale(jh),this.getComponent(b).setSharedMaterial(this._extragalactic?this.messierGalaxies:this.messierInners,0);var _=null!=r?r:this._fov>10?Xh:Yh,f=_[0],d=_[1]*Jh,p=f%Kh*Jh,g=Math.floor(f/Kh)*Jh;return this._uvArr=[d,d,p,g],!0},B(e,[{key:"fov",get:function(){return this._fov}},{key:"config",get:function(){return this._config}},{key:"viewer",set:function(t){this._viewer=t}},{key:"milky",get:function(){return this._milky}},{key:"clustered",get:function(){return this._clustered}},{key:"nebular",get:function(){return this._nebular}},{key:"local",get:function(){return this._local}},{key:"extragalactic",get:function(){return this._extragalactic}},{key:"label",get:function(){return this._label},set:function(t){this._label=t}},{key:"culling",get:function(){return this._culling}}]),e}(m)).LoadTexTaskLaunched=!1,hh=Q((ch=_h).prototype,"messierInners",[rh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uh=Q(ch.prototype,"messierGalaxies",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lh=ch))||lh)),Ut.COSMOS),Ch=Ut.Cameras.DEEP,Th=4.2/1e3,Ih=100,Rh=1e4,Nh=3,kh=kn.Scopes,Mh=kh.MilkyWay,Ph=kh.LocalGG,Oh=kh.VirgoSC,Dh=-Mh[2],Uh=-Ph[2],xh=-Oh[2],Fh=_t.EmissiveNebula,zh=_t.EllipticalGalaxy,Gh=_t.DwarfGalaxy,Hh=Ee.NameLabelAtt,Bh=Ee.WPS_CULLING_VALVE,Vh=Ee.FOV_CULLING_VALVE,Wh=Bh*Bh,qh=Dt.Sheets,Kh=qh.MESSIER_CELL_NUM,Yh=qh.MESSIER_DEFAULT,Xh=qh.MESSIER_DEFAULT_BIG,Zh=new i,jh=new i,Jh=255/Kh;e._RF.pop(),e._RF.push({},"6a0118Zh0lHkqUEZtq1yv5D","coordinates",void 0);var Qh,$h,tu,eu=p.ccclass,nu=p.property,iu=(t("a0",(yh=eu("cocosmos.Coordinates"),vh=nu(b),yh((wh=Q((Sh=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"grids",wh,tt(e)),e._prefix="",e._pass=void 0,e._handleGC=void 0,e._handleGD=void 0,e._handleEC=void 0,e._grid_c=new A(1,1,1,1),e._grid_d=new A(36,18,2,2),e._equator_c=new A(1,1,1,1),e._gridsLabels=[],e._polarLabels=[],e._equatorLabels=[],e._transform=new N,e._center=void 0,e._camera=void 0,e._renderer=void 0,e}H(e,t);var n=e.prototype;return n.onLoad=function(){var t;this._pass=null==(t=this.grids)||null==(t=t.material)?void 0:t.passes[0],this._handleGC=this._pass.getHandle("gridColor"),this._handleGD=this._pass.getHandle("gridDivision"),this._handleEC=this._pass.getHandle("equatorColor");var e=iu/10;this.node.setWorldScale(e,e,e),De(this.node,Pt)},n.setKeyPrefix=function(t){return this._prefix=t,this},n.setView=function(t,e,n){return this._center=t,this._camera=e,this._renderer=n,this},n.setRotation=function(t){return this.node.setWorldRotationFromEuler(t.x,t.y,t.z),N.fromMat4(this._transform,this.node.worldMatrix),this},n.setColors=function(t,e){return this._pass.setUniform(this._handleGC,this._grid_c.set(t.r,t.g,t.b,t.a).multiplyScalar(1/255)),this._pass.setUniform(this._handleEC,this._equator_c.set(e.r,e.g,e.b,e.a).multiplyScalar(1/255)),this},n.setDivision=function(t){return this._pass.setUniform(this._handleGD,this._grid_d.set(t)),this},n.onDisable=function(){this.freeDegreesLabels(),this.freeEquatorLabels(),this.freePolarLabels()},n.lateUpdate=function(){var t=Oe.showCoordGrids,e=Oe.showCoordEquator,n=Oe.showCoordPolar,s=Oe.showCoordAxis,a=Oe.lineStrength;t?(this.createDegreesLabels(24===this._grid_d.x),this.gridAlpha=a):(this.freeDegreesLabels(),this.gridAlpha=0),e?(this.createEquatorLabels(),this.equatorAlpha=a):(this.freeEquatorLabels(),this.equatorAlpha=0),n?this.createPolarLabels():this.freePolarLabels(),s&&this._renderer.addLine(i.multiplyScalar(ru,this.node.up,iu),i.negate(ou,ru),r.WHITE,!1)},n.createDegreesLabels=function(t){if(!(this._gridsLabels.length>0)){this._v4_color();for(var e=Math.round(Lt/this._grid_d.x),n=0;n<Lt;n+=e){var s=t?"+"+n/Ct+"h":"+"+n+"°",a=Ue(ji.claim("coord",s),"coord");a.target=this._center,a.camera=this._camera,a.pure=s,a.color=su,this._gridsLabels.push(a);var r=Math.parseRadian(n);ru.set(Math.sin(r),0,Math.cos(r)),i.transformMat3(ru,ru,this._transform),a.setOffset(ru)}for(var o=Math.round(180/this._grid_d.y),l=0;l<=90;l+=o)for(var c=90===l?2:8,h=0;h<c;h++){var u=h%2==0,_=(u?"+":"-")+l+"°";if("-0°"!==_&&"+0°"!==_){var f=Ue(ji.claim("coord",_),"coord");f.target=this._center,f.camera=this._camera,f.pure=_,f.color=su;var d=Math.parseRadian(l),p=Math.cos(d),g=Math.sin(d),m=h<2?p:h<4?-p:0,y=u?g:-g,v=h>5?p:h>3?-p:0;ru.set(m,y,v),this._gridsLabels.push(f),i.transformMat3(ru,ru,this._transform),f.setOffset(ru)}}return this}},n.createEquatorLabels=function(){if(!(this._equatorLabels.length>0)){this._v4_color();for(var t=0;t<Lt;t+=45){var e=ji.claim("coord",this._prefix+"-equator");e.target=this._center,e.camera=this._camera,e.key="coords@"+this._prefix+"-eq",Ue(e,"ruler","equator"),e.color=su;var n=Math.parseRadian(t);ru.set(Math.sin(n),0,Math.cos(n)),i.transformMat3(ru,ru,this._transform),e.setOffset(ru),this._equatorLabels.push(e)}return this}},n.createPolarLabels=function(){var t=this;if(!(this._polarLabels.length>0))return this._v4_color(),["s","n"].forEach((function(e){var n=ji.claim("coord",t._prefix+"-"+e+"-pole");n.target=t._center,n.camera=t._camera,n.key="coords@"+t._prefix+"-"+e,Ue(n,"ruler","polar"),n.color=su,ru.set(0,"n"===e?1:-1,0),i.transformMat3(ru,ru,t._transform),n.setOffset(ru),t._polarLabels.push(n)})),this},n.freeEquatorLabels=function(){return this._free(this._equatorLabels)},n.freeDegreesLabels=function(){return this._free(this._gridsLabels)},n.freePolarLabels=function(){return this._free(this._polarLabels)},n._v4_color=function(){var t=au.set(this._grid_c).multiplyScalar(255),e=t.x,n=t.y,i=t.z;su.set(e,n,i,255)},n._free=function(t){return t.forEach((function(t){return null==t?void 0:t.free()})),t.length=0,this},B(e,[{key:"gridAlpha",set:function(t){this._grid_c.w!==t&&(this._grid_c.w=t,this._pass.setUniform(this._handleGC,this._grid_c))}},{key:"equatorAlpha",set:function(t){this._equator_c.w!==t&&(this._equator_c.w=t,this._pass.setUniform(this._handleEC,this._equator_c))}}]),e}(m)).prototype,"grids",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bh=Sh))||bh)),Ee.DEEP_DIST),su=new r,au=new A,ru=new i,ou=new i;e._RF.pop(),e._RF.push({},"f8e89jlKeROQJU+7ek2ZYDX","label-i18n",void 0);var lu,cu,hu,uu,_u,fu,du,pu,gu,mu,yu,vu,bu,Su,wu,Au,Lu,Eu=p.ccclass,Cu=p.disallowMultiple,Tu=p.requireComponent,Iu=p.property,Ru=p.executeInEditMode,Nu=t("L",Eu("cocosmos.label-i18n")(Qh=Cu(Qh=Ru(!0)(Qh=Tu(g)((tu=Q(($h=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"_key",tu,tt(e)),e._label=void 0,e._lang=void 0,e._config=void 0,e}H(e,t);var n=e.prototype;return n.onLoad=function(){this._label=this.getComponent(g)},n.start=function(){this._key&&(this.string=this._key)},n.lateUpdate=function(){this._key&&Ne.language!=this._lang&&this._updateString()},n._updateString=function(){this._lang=Ne.language,this._config&&(this._label.string=this._config[this._lang])},B(e,[{key:"string",get:function(){var t,e;return null!=(t=null==(e=this._label)?void 0:e.string)?t:""},set:function(t){var e=t.toLowerCase();if(this._config=Ke(t),!this._config)return console.warn("i18n lost config for:",t),void(this._label.string=t);this._key=e,this._lang=null}}]),e}(m)).prototype,"_key",[Iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q($h.prototype,"string",[Iu],Object.getOwnPropertyDescriptor($h.prototype,"string"),$h.prototype),Qh=$h))||Qh)||Qh)||Qh)||Qh);e._RF.pop(),e._RF.push({},"07c65DY4glNsqsOosQEI5OV","celestial-icon",void 0);var ku,Mu,Pu,Ou,Du,Uu,xu,Fu,zu=p.ccclass,Gu=p.property,Hu=(t("n",(lu=zu("cocosmos.celestial-icon"),cu=Gu(k),hu=Gu(k),uu=Gu(k),_u=Gu(k),fu=Gu(Nu),du=Gu(M),pu=Gu(c),lu((yu=Q((mu=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"border",yu,tt(e)),$(e,"icon",vu,tt(e)),$(e,"invisible",bu,tt(e)),$(e,"rank",Su,tt(e)),$(e,"label",wu,tt(e)),$(e,"button",Au,tt(e)),$(e,"arrived",Lu,tt(e)),e._data={},e}H(e,t);var n=e.prototype;return n.onLoad=function(){q.on(de.VISIBLE,this.resetVisible,this),q.on(fe.Transform.VISIT_OVER,this.onVisitOver,this)},n.onDestroy=function(){q.unload(this)},n.onDataUpdated=function(t){var e=t.into,n=t.name,i=t.label,s=void 0===i?n:i,a=t.tag;if(this._data.into!==e){var r="minor"==e?"satellite":"belts"==e?"dwarf":e;this.border.spriteFrame=q.res.getSheetFrame(Bu,"bdr_icon_"+r)}if(this._data.name!==n){var o=q.res.getSheetFrame(Vu,"icon_"+n);this.icon.spriteFrame=null!=o?o:q.res.getSheetFrame(Vu,Wu)}this.label.string="celestial@"+s,this._data=t,this.node.name=n,this.resetTag(a),this.resetVisible(),this.resetArrived()},n.onVisitOver=function(){this.resetArrived()},n.resetArrived=function(){var t=this._data.name===Sn.centerName&&"Sun"!=this._data.name;this.arrived.active=t},n.resetTag=function(t){t?(this.rank.spriteFrame=q.res.getSheetFrame(Dt.Sheets.UI_ICON,t),this.rank.node.active=!0):this.rank.node.active=!1},n.resetVisible=function(t,e){var n=!0;switch(this._data.into){case"sun":n=bi.showSun;break;case"planet":n=bi.showPlanets;break;case"dwarf":n=bi.showDwarfs;break;case"minor":n=bi.showMinors;break;case"belts":n=bi.showBelts;break;case"comet":n=bi.showComets;break;case"satellite":n=Oi.showSatellites;break;case"artificial":n=Oi.showArtificial;break;case"star":n=Wn.showStars;break;case"constellation":n=Wn.showConsts;break;case"nebula":n=si.showNebulas;break;case"cluster":n=si.showClusters;break;case"galaxy":n=si.showGalaxies;break;case"blackhole":n=si.showBlackHoles}this.button.interactable=n,this.invisible.enabled=!n},n.onClick=function(){var t=this._data,e=t.into,n=t.name;"visit-cd"===t.pop?q.notify(de.Popups.VISIT_CD,n,e):(gn.PRINT_VISIT&&console.info("=>",de.VISIT,n,e),q.notify(de.VISIT,n,e))},e}(m)).prototype,"border",[cu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vu=Q(mu.prototype,"icon",[hu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bu=Q(mu.prototype,"invisible",[uu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Su=Q(mu.prototype,"rank",[_u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wu=Q(mu.prototype,"label",[fu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Au=Q(mu.prototype,"button",[du],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lu=Q(mu.prototype,"arrived",[pu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gu=mu))||gu)),Dt.Sheets),Bu=Hu.UI_BORDER,Vu=Hu.UI_ICON,Wu=Hu.UI_ICON_DEFAULT;e._RF.pop(),e._RF.push({},"6b2e2S4dfVFOaiD/POveydM","tip-line",void 0);var qu,Ku,Yu,Xu,Zu,ju,Ju,Qu,$u,t_,e_,n_,i_,s_,a_,r_,o_,l_,c_,h_,u_,__,f_,d_,p_,g_,m_,y_,v_,b_,S_,w_,A_,L_,E_,C_,T_=p.ccclass,I_=p.requireComponent,R_=p.property;t("ac",(ku=T_("cocosmos.TipLine"),Mu=I_(P),Pu=R_(g),Ou=R_(g),ku(Du=Mu((xu=Q((Uu=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"show",xu,tt(e)),$(e,"hide",Fu,tt(e)),e._anim=void 0,e._cw=void 0,e}return H(e,t),e.prototype.onLoad=function(){this._anim=this.getComponent(P),this._cw=this.show.fontSize},B(e,[{key:"string",set:function(t){var e,n=this.getComponent(y);n.setContentSize(String.Length(t)*this._cw*.5,n.height),null==(e=this.getComponent(d))||e.updateAlignment(),this.hide.string=this.show.string,this.show.string=t,this._anim.play()}}]),e}(m)).prototype,"show",[Pu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fu=Q(Uu.prototype,"hide",[Ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Du=Uu))||Du)||Du));e._RF.pop(),e._RF.push({},"05579IMdbxFPq+VBuy2gYXs","index",void 0),e._RF.pop(),e._RF.push({},"3ed3a6TzXVDwJnFlr0o7AH+","relative-camera",void 0);var N_=st,k_=it,M_=ot,P_=p.ccclass,O_=(t("E",(qu=P_("cocosmos.relative-camera"),Ku=M_("使用节点对象",y),Yu=M_("使用热区",(function(){return!this.toucher})),Xu=M_("热区范围",(function(){return!this.toucher&&this.useHotArea})),Zu=k_("Geometry","球半径",[0,100,.01]),ju=k_("Geometry","高度角（°）",[-89,89,.01]),Ju=k_("Geometry","方向角（°/+Z）",[-180,180,.01]),Qu=k_("Interactive","是否可交互"),$u=k_("Interactive","PC端启用键盘"),t_=k_("Interactive","水平灵敏率",[0,1,.01]),e_=k_("Interactive","竖直灵敏率",[0,1,.01]),n_=k_("Interactive","滚动缓动率",[0,1,.01]),i_=k_("Interactive","缩放灵敏度",[0,1,.01]),s_=k_("Interactive","滚轮灵敏度",[0,1,.01]),a_=k_("Interactive","反向缩放操作"),r_=k_("Interactive","截停滚动粘滞"),o_=k_("Interactive","截停粘滞阈值（°/s）",(function(){return this.noScrollingStick}),[.1,10,.1]),l_=k_("Interactive","缩放通知",[0,1,.01]),qu((u_=Q((h_=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,$(e,"toucher",u_,tt(e)),$(e,"useHotArea",__,tt(e)),$(e,"hotArea",f_,tt(e)),$(e,"_faceAngles",d_,tt(e)),$(e,"_R",p_,tt(e)),$(e,"interactable",g_,tt(e)),$(e,"keyEnabled",m_,tt(e)),$(e,"horSensitivity",y_,tt(e)),$(e,"verSensitivity",v_,tt(e)),$(e,"_ss",b_,tt(e)),$(e,"zoomSensitivity",S_,tt(e)),$(e,"wheelSensitivity",w_,tt(e)),$(e,"zoomReversed",A_,tt(e)),$(e,"noScrollingStick",L_,tt(e)),$(e,"noScrollingValveAngle",E_,tt(e)),$(e,"_zoomNotify",C_,tt(e)),e._facing=!1,e._angular=0,e._duration=0,e._reset=0,e._from=new R,e._to=new R,e._autoAccAz=0,e._autoAA2nd=0,e._autoAccHa=0,e._autoAzRange=null,e._autoHaRange=null,e._pressingKeys=[],e}H(e,t);var n=e.prototype;return n.startAutoRotating=function(t,e,n,i){this._autoAccAz=t,this._autoAccHa=e,this._autoAzRange=null!=n?n:null,this._autoHaRange=null!=i?i:null},n.stopAutoRotating=function(){this._autoAccHa=this._autoAccAz=0,this._autoAzRange=this._autoHaRange=null},n.facingTo=function(){var t=K(Y().mark((function t(e,n,s){var a,r,o,l=this;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),R.copy(this._from,this.node.worldRotation),i.subtract(x_,this.node.worldPosition,e instanceof c?e.worldPosition:e),R.fromViewUp(this._to,i.normalize(x_,x_)),a=x_.x,r=x_.y,o=x_.z,this._faceAngles.ha=Math.parseDegree(Math.asin(r)),this._faceAngles.az=Math.parseDegree(Math.atan2(a,o)),this._duration=this._reset=Math.abs(n),this._facing=!0,this._angular=R.angle(this._from,this._to)/this._duration,t.abrupt("return",new Promise((function(t){return l.scheduleOnce((function(){l.setFaceAngles(l._faceAngles),Function.invoke(s),t(),l._facing=!1}),n)})));case 11:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.setFaceAngles=function(t){if(t instanceof c){i.subtract(x_,this.node.worldPosition,t.worldPosition).normalize();var e=i.normalize(x_,x_),n=e.x,s=e.y,a=e.z;this._faceAngles.ha=Math.parseDegree(Math.atan(s)),this._faceAngles.az=Math.parseDegree(Math.atan2(n,a))}else isNum(t.az)&&(this._faceAngles.az=t.az),isNum(t.ha)&&(this._faceAngles.ha=t.ha);this._adjustFaceAngles()},n.onLoad=function(){this._listen(!0)},n.onDestroy=function(){this._listen(!1),q.unload(this)},n.onEnable=function(){this._adjustFaceAngles()},n.update=function(t){if(this._facing){this._reset-=t;var e=Math.clamp01(1-this._reset/this._duration);R.slerp(F_,this._from,this._to,e),this.node.setWorldRotation(F_)}else{this._autoRotate(t);var n=Math.lerp(1,t,this._ss),i=this._faceAngles,s=i.az,a=i.ha;R.slerp(F_,this.node.worldRotation,R.fromEuler(F_,-a,s,0),n),R.toEuler(x_,F_),this._angular=R.angle(this.node.worldRotation,R.fromEuler(F_,-a,s,0))/t,this.noScrollingStick&&this._angular>this.noScrollingValveAngle?(R.slerp(F_,this.node.worldRotation,F_,n),R.toEuler(x_,F_),this._adjustFaceAngles({az:x_.y,ha:-x_.x})):this._adjustFaceAngles({az:x_.y,ha:-x_.x})}},n._autoRotate=function(t){if(this._faceAngles.az+=(this._autoAccAz+this._autoAA2nd)*t,this._faceAngles.ha+=this._autoAccHa*t,notEmpty(this._autoAzRange)){var e=this._autoAzRange,n=e[0],i=e[1];this._faceAngles.az<=n&&(this._autoAccAz=Math.abs(this._autoAccAz)),this._faceAngles.az>=i&&(this._autoAccAz=-Math.abs(this._autoAccAz))}if(notEmpty(this._autoHaRange)){var s=this._autoHaRange,a=s[0],r=s[1];this._faceAngles.ha<=a&&(this._autoAccHa=Math.abs(this._autoAccHa)),this._faceAngles.ha>=r&&(this._autoAccHa=-Math.abs(this._autoAccHa))}},n.onTouchStart=function(t){this._checkInteractive(t,(function(){var e=t.getAllTouches();if(2===e.length){var n=e[0],i=e[1];O_=O.distance(n.getLocation(D_),i.getLocation(U_))}}))},n.onTouchMove=function(t){var e=this;this._checkInteractive(t,(function(){var n=t.getAllTouches();if(1===n.length)e.scrolling(t.getDeltaX(),t.getDeltaY());else if(2===n.length){var i=n[0],s=n[1],a=e.zoomSensitivity,r=e.zoomReversed,o=e._zoomNotify,l=O.distance(i.getLocation(D_),s.getLocation(U_))+1e-4,c=(l-O_)*a*(r?-1:1)*.001;1e-4!=c&&o&&(O_=l,q.notify(o,c))}}))},n.onMouseWheel=function(t){var e=this;this._checkInteractive(t,(function(){var n=e.wheelSensitivity,i=e._zoomNotify,s=Math.sign(-t.getScrollY())*n*.1;0!=s&&i&&q.notify(i,s)}))},n.onMouseMove=function(t){var e=this;this._checkInteractive(t,(function(){t.getButton()===U.BUTTON_LEFT&&e.scrolling(t.getDeltaX(),t.getDeltaY())}))},n.scrolling=function(t,e){var n=this.verSensitivity,i=this.horSensitivity;this._faceAngles.az-=t*Math.lerp(0,.2,i),this._faceAngles.ha-=e*Math.lerp(0,.1,n),this._faceAngles.ha=Math.clamp(this._faceAngles.ha,-89,89)},n._listen=function(t){var e=this.toucher?this.toucher.node:x,n=t?e.on:e.off;F.isMobile?(Function.invoke(n,e,z.EventType.TOUCH_MOVE,this.onTouchMove,this),Function.invoke(n,e,z.EventType.TOUCH_START,this.onTouchStart,this)):(Function.invoke(n,e,z.EventType.MOUSE_MOVE,this.onMouseMove,this),Function.invoke(n,e,z.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.keyEnabled&&(n=t?x.on:x.off,Function.invoke(n,x,z.EventType.KEY_DOWN,this.onKeyDown,this),Function.invoke(n,x,z.EventType.KEY_UP,this.onKeyUp,this)))},n.onKeyDown=function(t){this._pressingKeys.pushUnique(t.keyCode)},n.onKeyUp=function(t){this._pressingKeys.remove(t.keyCode)},n.lateUpdate=function(){var t=this._pressingKeys,e=0,n=0,i=0;if(this.keyEnabled){(t.contains(z_)||t.contains(V_))&&n--,(t.contains(G_)||t.contains(W_))&&n++,(t.contains(B_)||t.contains(K_))&&e--,(t.contains(H_)||t.contains(q_))&&e++,(t.contains(X_)||t.contains(Z_))&&i--,(t.contains(Y_)||t.contains(j_))&&i++,(e+0||0!=n)&&this.scrolling(e*J_,n*J_);var s=this.wheelSensitivity,a=this._zoomNotify;0!=i&&a&&q.notify(a,i*s*.1*Q_)}},n._checkInteractive=function(t,e){if(this.interactable)if(!this.toucher&&this.useHotArea){var n=t.getUILocation(D_),i=n.x,s=n.y,r=a.getVisibleSize(),o=r.width,l=r.height,c=this.hotArea,h=c.x,u=c.y,_=c.width,f=c.height;i>=h*o&&i<=(h+_)*o&&s<=(1-u)*l&&s>=(1-u-f)*l&&e()}else e()},n._adjustFaceAngles=function(t){var e=null!=t?t:this._faceAngles,n=e.ha,s=e.az,a=[Math.parseRadian(n),Math.parseRadian(s)],r=a[0],o=a[1],l=[Math.cos(r),Math.sin(r)],c=l[0],h=l[1];x_.set(Math.sin(o)*c,h,Math.cos(o)*c),this.node.setWorldPosition(x_.multiplyScalar(this._R)),this.node.forward=i.negate(x_,x_)},B(e,[{key:"fixedSphereRadius",get:function(){return this._R},set:function(t){this._R=t,this._adjustFaceAngles()}},{key:"heightAngle",get:function(){return this._faceAngles.ha},set:function(t){this._faceAngles.ha=t}},{key:"azimuthAngle",get:function(){return this._faceAngles.az},set:function(t){this._faceAngles.az=t}},{key:"scrollSmoothing",get:function(){return Math.pow(this._ss,10)},set:function(t){this._ss=Math.pow(t,.1)}},{key:"zoomNotify",get:function(){return this._zoomNotify},set:function(t){t&&(this._zoomNotify=t)}},{key:"angularVelocity",get:function(){return this._angular}},{key:"autoAA2nd",get:function(){return this._autoAA2nd},set:function(t){this._autoAA2nd=t}}]),e}(m)).prototype,"toucher",[Ku],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),__=Q(h_.prototype,"useHotArea",[Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f_=Q(h_.prototype,"hotArea",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new G(0,0,1,1)}}),d_=Q(h_.prototype,"_faceAngles",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{az:0,ha:0}}}),p_=Q(h_.prototype,"_R",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q(h_.prototype,"fixedSphereRadius",[Zu],Object.getOwnPropertyDescriptor(h_.prototype,"fixedSphereRadius"),h_.prototype),Q(h_.prototype,"heightAngle",[ju],Object.getOwnPropertyDescriptor(h_.prototype,"heightAngle"),h_.prototype),Q(h_.prototype,"azimuthAngle",[Ju],Object.getOwnPropertyDescriptor(h_.prototype,"azimuthAngle"),h_.prototype),g_=Q(h_.prototype,"interactable",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m_=Q(h_.prototype,"keyEnabled",[$u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y_=Q(h_.prototype,"horSensitivity",[t_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),v_=Q(h_.prototype,"verSensitivity",[e_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),b_=Q(h_.prototype,"_ss",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.93303299}}),Q(h_.prototype,"scrollSmoothing",[n_],Object.getOwnPropertyDescriptor(h_.prototype,"scrollSmoothing"),h_.prototype),S_=Q(h_.prototype,"zoomSensitivity",[i_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),w_=Q(h_.prototype,"wheelSensitivity",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),A_=Q(h_.prototype,"zoomReversed",[a_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L_=Q(h_.prototype,"noScrollingStick",[r_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E_=Q(h_.prototype,"noScrollingValveAngle",[o_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C_=Q(h_.prototype,"_zoomNotify",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Relative.Zooming"}}),Q(h_.prototype,"zoomNotify",[l_],Object.getOwnPropertyDescriptor(h_.prototype,"zoomNotify"),h_.prototype),c_=h_))||c_)),0),D_=new O,U_=new O,x_=new i,F_=new R,z_=D.KEY_W,G_=D.KEY_S,H_=D.KEY_A,B_=D.KEY_D,V_=D.ARROW_UP,W_=D.ARROW_DOWN,q_=D.ARROW_LEFT,K_=D.ARROW_RIGHT,Y_=D.KEY_Q,X_=D.KEY_E,Z_=D.NUM_PLUS,j_=D.NUM_SUBTRACT,J_=5,Q_=.2;e._RF.pop()}}}));

} }; });