!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=34)}([function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i});var s=n(2),u=[],a=function(t){return"background: ".concat(t,"; color: #FFFFFF; padding: 3px 10px; font-weight: bold; border-radius: 20px;")},c="background: #cc00c5; color: #FFFFFF; padding: 3px 10px; font-weight: bold; border-radius: 20px;";function r(t,e){for(var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=0,o=u.length;r<o;r++){var i=u[r];if(i.key===t&&i.color===e)return i.log}return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Global",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l,t={enabled:!(2<arguments.length&&void 0!==arguments[2]&&!arguments[2]),key:e,color:n,log:function(){var t=[];s.a?(t.push("%cWorker%c %c".concat(e)),t.push(c," ")):t.push("%c".concat(e)),t.push(a(n)),t.push.apply(t,arguments)}};return u.push(t),t.log}(t,e,n)}var l="#000000",o="#007bff",i="#dc3545"},function(t,e,n){"use strict";e.a="function"==typeof importScripts},function(n,r,a){(function(u){var e;!function(t){"use strict";void 0===(e=function(t){var e,n="undefined"!=typeof setTimeout&&setTimeout,r=function(t,e){return setTimeout(t,e)},o=function(t){return clearTimeout(t)},i=function(t){return n(t,0)};if(void 0!==u&&"[object process]"===Object.prototype.toString.call(u))i=function(t){return u.nextTick(t)};else if(e="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)i=function(t){var e,n=document.createTextNode("");new t(function(){var t=e;e=void 0,t()}).observe(n,{characterData:!0});var r=0;return function(t){e=t,n.data=r^=1}}(e);else if(!n){var s=a(19);r=function(t,e){return s.setTimer(e,t)},o=s.cancelTimer,i=s.runOnLoop||s.runOnContext}return{setTimer:r,clearTimer:o,asap:i}}.call(r,a,r,n))||(n.exports=e)}(a(0))}).call(this,a(5))},function(t,e,n){"use strict";var r=n(32).default,o=n(12).default,i=n(11),s=n(33);r.Resource=o,r.async=i,r.base64=s,t.exports=r,t.exports.default=r},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],l=!1,h=-1;function f(){l&&a&&(l=!1,a.length?c=a.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=u(f);l=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return(e.prototype=Object.create(Error.prototype)).constructor=e}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return{pending:t,fulfilled:r,rejected:n,inspect:function(t){var e=t.state();return 0===e?{state:"pending"}:0<e?r(t.value):n(t.value)}};function t(){return{state:"pending"}}function n(t){return{state:"rejected",reason:t}}function r(t){return{state:"fulfilled",value:t}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return t.tryCatchResolve=e,t;function t(s,u){return arguments.length<2&&(u=e),function(t,e,n){var r=s._defer(),o=n.length,i=new Array(o);return a({f:t,thisArg:e,args:n,params:i,i:o-1,call:u},r._handler),r};function a(t,e){if(t.i<0)return u(t.f,t.thisArg,t.params,e);s._handler(t.args[t.i]).fold(n,t,void 0,e)}function n(t,e,n){t.params[t.i]=e,t.i-=1,a(t,n)}}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(t){r.reject(t)}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(t,e,n){void 0===e&&(e=!1),i(this,r),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return o(r,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),r}();function s(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}var u=function(){function t(){i(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof r))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new r(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new r(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof r))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();u.MiniSignalBinding=r,e.default=u,t.exports=e.default},function(t,e,n){"use strict";t.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),o={},i=14;i--;)o[r.key[i]]=n[i]||"";return o[r.q.name]={},o[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(o[r.q.name][e]=n)}),o}},function(t,e,n){"use strict";function s(){}function u(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(n,r,o,i){var s=0,u=n.length;!function t(e){e||s===u?o&&o(e):i?setTimeout(function(){r(n[s++],t)},1):r(n[s++],t)}()},e.queue=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,o={_tasks:[],concurrency:t,saturated:s,unsaturated:s,buffer:t/4,empty:s,drain:s,error:s,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){n=0,o.drain=s,o.started=!1,o._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!o.paused&&n<o.concurrency&&o._tasks.length;){var t=o._tasks.shift();0===o._tasks.length&&o.empty(),(n+=1)===o.concurrency&&o.saturated(),e(t.data,u(i(t)))}},length:function(){return o._tasks.length},running:function(){return n},idle:function(){return o._tasks.length+n===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var r={data:t,callback:"function"==typeof n?n:s};e?o._tasks.unshift(r):o._tasks.push(r),setTimeout(function(){return o.process()},1)}}function i(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),n<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=i(n(10)),s=i(n(9));function i(t){return t&&t.__esModule?t:{default:t}}var u="function"==typeof importScripts,a=!u&&!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null;function l(){}var h=function(){function i(t,e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=l,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return i.setExtensionLoadType=function(t,e){f(i._loadTypeMap,t,e)},i.setExtensionXhrType=function(t,e){f(i._xhrTypeMap,t,e)},i.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},i.prototype.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},i.prototype._hasFlag=function(t){return!!(this._flags&t)},i.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},i.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},i.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},i.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=i.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},i.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},i.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},i.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},i.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},i.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},i.prototype._xhrOnAbort=function(){this.abort(d(this.xhr)+" Request was aborted by the user.")},i.prototype._xdrOnTimeout=function(){this.abort(d(this.xhr)+" Request timed out.")},i.prototype._xhrOnLoad=function(){var t=this.xhr,e="",n=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===n&&(0<e.length||t.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=i.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(e,"text/xml")}else{var o=document.createElement("div");o.innerHTML=e,this.data=o}this.type=i.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},i.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||location,c||u||(c=document.createElement("a")),u||(c.href=t);var n=!(t=(0,o.default)(u?t:c.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),o=t.indexOf("#"),i=Math.min(-1<r?r:t.length,-1<o?o:t.length);e=(t=t.substring(0,i)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},i.prototype._getMimeFromXhrType=function(t){switch(t){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i}();function f(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function d(t){return t.toString().replace("object ","")}(e.default=h).STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},h.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},h.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},h.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},h._loadTypeMap={gif:h.LOAD_TYPE.IMAGE,png:h.LOAD_TYPE.IMAGE,bmp:h.LOAD_TYPE.IMAGE,jpg:h.LOAD_TYPE.IMAGE,jpeg:h.LOAD_TYPE.IMAGE,tif:h.LOAD_TYPE.IMAGE,tiff:h.LOAD_TYPE.IMAGE,webp:h.LOAD_TYPE.IMAGE,tga:h.LOAD_TYPE.IMAGE,svg:h.LOAD_TYPE.IMAGE,"svg+xml":h.LOAD_TYPE.IMAGE,mp3:h.LOAD_TYPE.AUDIO,ogg:h.LOAD_TYPE.AUDIO,wav:h.LOAD_TYPE.AUDIO,mp4:h.LOAD_TYPE.VIDEO,webm:h.LOAD_TYPE.VIDEO},h._xhrTypeMap={xhtml:h.XHR_RESPONSE_TYPE.DOCUMENT,html:h.XHR_RESPONSE_TYPE.DOCUMENT,htm:h.XHR_RESPONSE_TYPE.DOCUMENT,xml:h.XHR_RESPONSE_TYPE.DOCUMENT,tmx:h.XHR_RESPONSE_TYPE.DOCUMENT,svg:h.XHR_RESPONSE_TYPE.DOCUMENT,tsx:h.XHR_RESPONSE_TYPE.DOCUMENT,gif:h.XHR_RESPONSE_TYPE.BLOB,png:h.XHR_RESPONSE_TYPE.BLOB,bmp:h.XHR_RESPONSE_TYPE.BLOB,jpg:h.XHR_RESPONSE_TYPE.BLOB,jpeg:h.XHR_RESPONSE_TYPE.BLOB,tif:h.XHR_RESPONSE_TYPE.BLOB,tiff:h.XHR_RESPONSE_TYPE.BLOB,webp:h.XHR_RESPONSE_TYPE.BLOB,tga:h.XHR_RESPONSE_TYPE.BLOB,json:h.XHR_RESPONSE_TYPE.JSON,text:h.XHR_RESPONSE_TYPE.TEXT,txt:h.XHR_RESPONSE_TYPE.TEXT,ttf:h.XHR_RESPONSE_TYPE.BUFFER,otf:h.XHR_RESPONSE_TYPE.BUFFER},h.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,d,p){"use strict";(function(t){var e,o=p(14),n=p(1);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r,s,u,a,c,l,h=Object(n.c)("EventWorker",n.b,!1),f=(r=(e=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._ctx=t,this._binded=!1,this._listeners=[]}var t,n,r;return t=e,(n=[{key:"add",value:function(t,e){this._binded||this._bind(),this._listeners.push({eventName:t,cb:e}),h("'".concat(t,"' added"))}},{key:"addOnce",value:function(t){var e=Object(o.defer)();return this._binded||this._bind(),this._listeners.push({eventName:t,cb:e.resolve}),h("'".concat(t,"' added once")),e.promise}},{key:"remove",value:function(t){var e=this._getListener(t),n=this._listeners.indexOf(e);-1<n&&this._listeners.splice(n,1),h("'".concat(t,"' removed"))}},{key:"dispatch",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._ctx.postMessage({eventName:t,payload:e}),h("'".concat(t,"' dispatched with payload :"),e)}},{key:"_bind",value:function(){this._binded=!0,this._ctx.addEventListener("message",this._onWorkerMessage)}},{key:"_getListener",value:function(t){for(var e=0,n=this._listeners.length;e<n;e++){var r=this._listeners[e];if(r.eventName===t)return r}return null}},{key:"_onWorkerMessage",value:function(t){for(var e=t.data,n=e.eventName,r=e.payload||null,o=0,i=this._listeners.length;o<i;o++){var s=this._listeners[o];s.eventName===n&&s.cb(r)}}}])&&i(t.prototype,n),r&&i(t,r),e}()).prototype,s="_onWorkerMessage",u=[t],a=Object.getOwnPropertyDescriptor(e.prototype,"_onWorkerMessage"),c=e.prototype,l={},Object.keys(a).forEach(function(t){l[t]=a[t]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=u.slice().reverse().reduce(function(t,e){return e(r,s,t)||t},l),c&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(c):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(r,s,l),l=null),e);d.a=f}).call(this,p(15).bind)},function(e,n,y){var r;!function(t){"use strict";void 0===(r=function(t){var e=y(18),n=y(20),r=y(21),o=y(22),i=y(23),s=y(24),u=y(25),a=y(26),c=y(27),l=y(6),h=[n,r,o,s,u,i,a,e,c].reduce(function(t,e){return e(t)},y(29)),f=y(8)(h);function d(t,e,n,r){var o=h.resolve(t);return arguments.length<2?o:o.then(e,n,r)}function p(r){return function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;++t)n[t]=arguments[t];return f(r,this,n)}}function _(t){for(var e=0,n=arguments.length-1,r=new Array(n);e<n;++e)r[e]=arguments[e+1];return f(t,this,r)}function v(){var e=h._defer();function t(t){e._handler.resolve(t)}function n(t){e._handler.reject(t)}function r(t){e._handler.notify(t)}this.promise=e,this.resolve=t,this.reject=n,this.notify=r,this.resolver={resolve:t,reject:n,notify:r}}return d.promise=function(t){return new h(t)},d.resolve=h.resolve,d.reject=h.reject,d.lift=p,d.try=_,d.attempt=_,d.iterate=h.iterate,d.unfold=h.unfold,d.join=function(){return h.all(arguments)},d.all=function(t){return d(t,h.all)},d.settle=function(t){return d(t,h.settle)},d.any=p(h.any),d.some=p(h.some),d.race=p(h.race),d.map=function(t,e){return d(t,function(t){return h.map(t,e)})},d.filter=function(t,e){return d(t,function(t){return h.filter(t,e)})},d.reduce=p(h.reduce),d.reduceRight=p(h.reduceRight),d.isPromiseLike=function(t){return t&&"function"==typeof t.then},d.Promise=h,d.defer=function(){return new v},d.TimeoutError=l,d}.call(n,y,n,e))||(e.exports=r)}(y(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(16)),o=i(n(17));function i(t){return t&&t.__esModule?t:{default:t}}e.default={bind:r.default,mixin:o.default},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n,t){if(void 0===t||"function"!=typeof t.value)throw new SyntaxError("@bind decorator can only be applied to a method");var r=t.value,o=t.configurable,i=t.enumerable;return{configurable:o,enumerable:i,get:function(){if(this===e)return r;var t=r.bind(this);return Object.defineProperty(this,n,{configurable:!0,writable:!0,enumerable:!1,value:t}),t}}},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=arguments.length,l=Array(t),e=0;e<t;e++)l[e]=arguments[e];if("function"!=typeof l[0])return function(t){for(var e=t.prototype,n={},r=0,o=l.length;r<o;r++){var i=l[r];for(var s in i){var u=i[s];"function"==typeof u?(n[s]=n[s]||[],n[s].push(u)):e[s]=u}}var a=function(t){var s=n[t],u=e[t];e[t]=function(){for(var t=void 0,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0,i=s.length;o<i;o++)t=s[o].apply(this,n);return"function"==typeof u&&(t=u.apply(this,n)),t}};for(var c in n)a(c)};throw new SyntaxError("@mixin decorator '"+l[0].name+"' requires at least one mixin")},t.exports=e.default},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(t){var s=r(3),o=r(6);function u(t,e,n,r){return s.setTimer(function(){t(n,r,e)},e)}return function(t){function n(t,e,n){u(r,t,e,n)}function r(t,e){e.resolve(t)}function i(t,e,n){var r=void 0===t?new o("timed out after "+n+"ms"):t;e.reject(r)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(n,t,void 0,e._handler),e},t.prototype.timeout=function(t,e){var n=this._beget(),r=n._handler,o=u(i,t,e,n._handler);return this._handler.visit(r,function(t){s.clearTimer(o),this.resolve(t)},function(t){s.clearTimer(o),this.reject(t)},r.notify),n},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(t,e){},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(t){var c=r(7),l=r(8);return function(d){var o=l(d),n=d.resolve,r=d.all,i=Array.prototype.reduce,s=Array.prototype.reduceRight,u=Array.prototype.slice;return d.any=function(t){for(var e,n,r=d._defer(),o=r._handler,i=t.length>>>0,s=i,u=[],a=0;a<i;++a)if(void 0!==(n=t[a])||a in t){if(0<(e=d._handler(n)).state()){o.become(e),d._visitRemaining(t,a,e);break}e.visit(o,c,l)}else--s;0===s&&o.reject(new RangeError("any(): array must not be empty"));return r;function c(t){u=null,this.resolve(t)}function l(t){this.resolved||(u.push(t),0==--s&&this.reject(u))}},d.some=function(t,e){var n,r,o,i=d._defer(),s=i._handler,u=[],a=[],c=t.length>>>0,l=0;for(o=0;o<c;++o)(void 0!==(r=t[o])||o in t)&&++l;e=Math.max(e,0),n=l-e+1,(l=Math.min(e,l))<e?s.reject(new RangeError("some(): array must contain at least "+e+" item(s), but had "+l)):0===l&&s.resolve(u);for(o=0;o<c;++o)(void 0!==(r=t[o])||o in t)&&d._handler(r).visit(s,h,f,s.notify);return i;function h(t){this.resolved||(u.push(t),0==--l&&(a=null,this.resolve(u)))}function f(t){this.resolved||(a.push(t),0==--n&&(u=null,this.reject(a)))}},d.settle=function(t){return r(t.map(e))},d.map=function(t,e){return d._traverse(e,t)},d.filter=function(t,e){var n=u.call(t);return d._traverse(e,n).then(function(t){return function(t,e){for(var n=e.length,r=new Array(n),o=0,i=0;o<n;++o)e[o]&&(r[i++]=d._handler(t[o]).value);return r.length=i,r}(n,t)})},d.reduce=function(t,e){return 2<arguments.length?i.call(t,a(e),arguments[2]):i.call(t,a(e))},d.reduceRight=function(t,e){return 2<arguments.length?s.call(t,a(e),arguments[2]):s.call(t,a(e))},d.prototype.spread=function(e){return this.then(r).then(function(t){return e.apply(this,t)})},d;function e(t){var e;return t instanceof d&&(e=t._handler.join()),e&&0===e.state()||!e?n(t).then(c.fulfilled,c.rejected):(e._unreport(),c.inspect(e))}function a(r){return function(t,e,n){return o(r,void 0,[t,e,n])}}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return function(t){var a=t.resolve,s=t.reject,e=t.prototype.catch;function n(t,e,n,r){var o,i,s,u=t.call(e);return"object"!=typeof(s=u)&&"function"!=typeof s||null===s?n(r):(o=n,i=r,a(u).then(function(){return o(i)}))}return t.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},t.prototype.catch=t.prototype.otherwise=function(t){return arguments.length<2?e.call(this,t):"function"!=typeof t?this.ensure(r):e.call(this,(o=arguments[1],i=t,function(t){return e=t,((r=n=i)===Error||null!=r&&r.prototype instanceof Error?e instanceof n:n(e))?o.call(this,t):s(t);var e,n,r}));var o,i},t.prototype.finally=t.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return n(e,this,o,t)},function(t){return n(e,this,s,t)})},t.prototype.else=t.prototype.orElse=function(t){return this.then(void 0,function(){return t})},t.prototype.yield=function(t){return this.then(function(){return t})},t.prototype.tap=function(t){return this.then(t).yield(this)},t};function r(){throw new TypeError("catch predicate must be a function")}function o(t){return t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return function(o){return o.prototype.fold=function(r,t){var e=this._beget();return this._handler.fold(function(t,e,n){o._handler(t).fold(function(t,e,n){n.resolve(r.call(this,e,t))},e,this,n)},t,e._handler.receiver,e._handler),e},o}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(t){var e=r(7).inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return function(t){var s=t.resolve;return t.iterate=function(e,t,n,r){return u(function(t){return[t,e(t)]},t,n,r)},t.unfold=u,t;function u(n,r,o,t){return s(t).then(function(e){return s(r(e)).then(function(t){return t?e:s(n(e)).spread(i)})});function i(t,e){return s(o(t)).then(function(){return u(n,r,o,e)})}}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(t){var h=r(3).setTimer,f=r(28);return function(t){var e,n=p,r=p;"undefined"!=typeof console&&(e=console,n=void 0!==e.error?function(t){e.error(t)}:function(t){e.log(t)},r=void 0!==e.info?function(t){e.info(t)}:function(t){e.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(u,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(a,t)},t.onFatalRejection=function(t){c(d,t.value)};var o=[],i=[],s=null;function u(t){t.handled||(i.push(t),n("Potentially unhandled rejection ["+t.id+"] "+f.formatError(t.value)))}function a(t){var e=i.indexOf(t);0<=e&&(i.splice(e,1),r("Handled previous rejection ["+t.id+"] "+f.formatObject(t.value)))}function c(t,e){o.push(t,e),null===s&&(s=h(l,0))}function l(){for(s=null;0<o.length;)o.shift()(o.shift())}return t};function d(t){throw t}function p(){}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){return{formatError:function(t){var e="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:n(t);return t instanceof Error?e:e+" (WARNING: non-Error used)"},formatObject:n,tryStringify:r};function n(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=r(t,e)),e}function r(t,e){try{return JSON.stringify(t)}catch(t){return e}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(t){return r(30)({scheduler:new(r(31))(r(3).asap)})}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(n,r,o){(function(X){var e;!function(t){"use strict";void 0===(e=function(){return function(t){var n=t.scheduler,e=function(){{if(null!=X&&"function"==typeof X.emit)return function(t,e){return"unhandledRejection"===t?X.emit(t,e.value,e):X.emit(t,e)};if("undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{var t=new CustomEvent("unhandledRejection");return t instanceof CustomEvent}catch(t){}return!1}())return i=self,s=CustomEvent,function(t,e){var n=new s(t,{detail:{reason:e.value,key:e},bubbles:!1,cancelable:!0});return!i.dispatchEvent(n)};if("undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}())return r=self,o=document,function(t,e){var n=o.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,{reason:e.value,key:e}),!r.dispatchEvent(n)}}var r,o;var i,s;return D}(),r=Object.create||function(t){function e(){}return e.prototype=t,new e};function l(t,e){this._handler=t===p?e:function(t){var e=new y;try{t(function(t){e.resolve(t)},n,function(t){e.notify(t)})}catch(t){n(t)}return e;function n(t){e.reject(t)}}(t)}function o(t){return L(t)?t:new l(p,new g(f(t)))}function i(t){return new l(p,new g(new T(t)))}function s(){return x}function u(r,o,i){for(var t,e="function"==typeof o?function(t,e,n){n.resolved||h(i,c,t,r(o,e,t),n)}:c,n=new y,s=i.length>>>0,u=new Array(s),a=0;a<i.length&&!n.resolved;++a)void 0!==(t=i[a])||a in i?h(i,e,a,t,n):--s;return 0===s&&n.become(new m(u)),new l(p,n);function c(t,e,n){u[t]=e,0==--s&&n.become(new m(u))}}function h(t,e,n,r,o){if(k(r)){var i=L(u=r)?u._handler.join():d(u),s=i.state();0===s?i.fold(e,n,void 0,o):0<s?e(n,i.value,o):(o.become(i),a(t,n+1,i))}else e(n,r,o);var u}function a(t,e,n){for(var r=e;r<t.length;++r)c(f(t[r]),n)}function c(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()}}function f(t){return L(t)?t._handler.join():k(t)?d(t):new m(t)}function d(t){try{var e=t.then;return"function"==typeof e?new E(e,t):new m(t)}catch(t){return new T(t)}}function p(){}function _(){}l.resolve=o,l.reject=i,l.never=s,l._defer=function(){return new l(p,new y)},l._handler=f,l.prototype.then=function(t,e,n){var r=this._handler,o=r.join().state();if("function"!=typeof t&&0<o||"function"!=typeof e&&o<0)return new this.constructor(p,r);var i=this._beget(),s=i._handler;return r.chain(s,r.receiver,t,e,n),i},l.prototype.catch=function(t){return this.then(void 0,t)},l.prototype._beget=function(){return t=this._handler,e=this.constructor,n=new y(t.receiver,t.join().context),new e(p,n);var t,e,n},l.all=function(t){return u(U,null,t)},l.race=function(t){return"object"==typeof t&&null!==t?0===t.length?s():1===t.length?o(t[0]):function(t){var e,n,r,o=new y;for(e=0;e<t.length;++e)if(void 0!==(n=t[e])||e in t){if(0!==(r=f(n)).state()){o.become(r),a(t,e+1,r);break}r.visit(o,o.resolve,o.reject)}return new l(p,o)}(t):i(new TypeError("non-iterable passed to race()"))},l._traverse=function(t,e){return u(C,t,e)},l._visitRemaining=a,p.prototype.when=p.prototype.become=p.prototype.notify=p.prototype.fail=p.prototype._unreport=p.prototype._report=D,p.prototype._state=0,p.prototype.state=function(){return this._state},p.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},p.prototype.chain=function(t,e,n,r,o){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:o})},p.prototype.visit=function(t,e,n,r){this.chain(v,t,e,n,r)},p.prototype.fold=function(t,e,n,r){this.when(new P(t,e,n,r))},N(p,_),_.prototype.become=function(t){t.fail()};var v=new _;function y(t,e){l.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function g(t){this.handler=t}function E(t,e){y.call(this),n.enqueue(new R(t,e,this))}function m(t){l.createContext(this),this.value=t}N(p,y),y.prototype._state=0,y.prototype.resolve=function(t){this.become(f(t))},y.prototype.reject=function(t){this.resolved||this.become(new T(t))},y.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=new T(new TypeError("Promise cycle"));return t},y.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},y.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&n.enqueue(this),void 0!==this.context&&t._report(this.context))},y.prototype.when=function(t){this.resolved?n.enqueue(new S(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},y.prototype.notify=function(t){this.resolved||n.enqueue(new A(t,this))},y.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},y.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},y.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},N(p,g),g.prototype.when=function(t){n.enqueue(new S(t,this))},g.prototype._report=function(t){this.join()._report(t)},g.prototype._unreport=function(){this.join()._unreport()},N(y,E),N(p,m),m.prototype._state=1,m.prototype.fold=function(t,e,n,r){!function(t,e,n,r,o){if("function"!=typeof t)return o.become(n);l.enterContext(n),function(t,e,n,r,o){try{t.call(r,e,n,o)}catch(t){o.become(new T(t))}}(t,e,n.value,r,o),l.exitContext()}(t,e,this,n,r)},m.prototype.when=function(t){j(t.fulfilled,this,t.receiver,t.resolver)};var b=0;function T(t){l.createContext(this),this.id=++b,this.value=t,this.handled=!1,this.reported=!1,this._report()}function O(t,e){this.rejection=t,this.context=e}function w(t){this.rejection=t}N(p,T),T.prototype._state=-1,T.prototype.fold=function(t,e,n,r){r.become(this)},T.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),j(t.rejected,this,t.receiver,t.resolver)},T.prototype._report=function(t){n.afterQueue(new O(this,t))},T.prototype._unreport=function(){this.handled||(this.handled=!0,n.afterQueue(new w(this)))},T.prototype.fail=function(t){this.reported=!0,e("unhandledRejection",this),l.onFatalRejection(this,void 0===t?this.context:t)},O.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,e("unhandledRejection",this.rejection)||l.onPotentiallyUnhandledRejection(this.rejection,this.context))},w.prototype.run=function(){this.rejection.reported&&(e("rejectionHandled",this.rejection)||l.onPotentiallyUnhandledRejectionHandled(this.rejection))},l.createContext=l.enterContext=l.exitContext=l.onPotentiallyUnhandledRejection=l.onPotentiallyUnhandledRejectionHandled=l.onFatalRejection=D;var x=new l(p,new p);function S(t,e){this.continuation=t,this.handler=e}function A(t,e){this.handler=e,this.value=t}function R(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function P(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=v,this.receiver=this}function L(t){return t instanceof l}function k(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function j(t,e,n,r){if("function"!=typeof t)return r.become(e);l.enterContext(e),function(t,e,n,r){try{r.become(f(t.call(n,e)))}catch(t){r.become(new T(t))}}(t,e.value,n,r),l.exitContext()}function M(t,e,n,r,o){if("function"!=typeof t)return o.notify(e);l.enterContext(n),function(t,e,n,r){try{r.notify(t.call(n,e))}catch(t){r.notify(t)}}(t,e,r,o),l.exitContext()}function C(t,e,n){try{return t(e,n)}catch(t){return i(t)}}function N(t,e){e.prototype=r(t.prototype),e.prototype.constructor=e}function U(t,e){return e}function D(){}return S.prototype.run=function(){this.handler.join().when(this.continuation)},A.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)M((e=t[n]).progress,this.value,this.handler,e.receiver,e.resolver)},R.prototype.run=function(){var e=this.resolver;!function(t,e,n,r,o){try{t.call(e,n,r,o)}catch(t){r(t)}}(this._then,this.thenable,function(t){e.resolve(t)},function(t){e.reject(t)},function(t){e.notify(t)})},P.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},P.prototype.rejected=function(t){this.to.reject(t)},P.prototype.progress=function(t){this.to.notify(t)},l}}.call(r,o,r,n))||(n.exports=e)}(o(0))}).call(this,o(5))},function(e,n,r){var o;!function(t){"use strict";void 0===(o=function(){function t(t){this._async=t,this._running=!1,(this._queue=this)._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(t,e,n){"use strict";e.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),i=r(n(9)),s=r(n(10)),u=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(11)),h=r(n(12));function r(t){return t&&t.__esModule?t:{default:t}}var a=/(#[\w-]+)?$/,c=function(){function r(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=u.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new i.default,this.onError=new i.default,this.onLoad=new i.default,this.onStart=new i.default,this.onComplete=new i.default}return r.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":l(t))&&(r=e||t.callback||t.onComplete,e=(n=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new h.default(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,s=[],u=0;u<i.children.length;++u)i.children[u].isComplete||s.push(i.children[u]);var a=i.progressChunk*(s.length+1)/(s.length+2);i.children.push(this.resources[t]),i.progressChunk=a;for(var c=0;c<s.length;++c)s[c].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},r.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},r.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),n=void 0;if(n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=a.exec(n)[0];-1!==(n=n.substr(0,n.length-r.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=r}return n},r.prototype._loadResource=function(n,t){var r=this;n._dequeue=t,u.eachSeries(this._beforeMiddleware,function(t,e){t.call(r,n,function(){e(n.isComplete?{}:null)})},function(){n.isComplete?r._onLoad(n):(n._onLoadBinding=n.onComplete.once(r._onLoad,r),n.load())},!0)},r.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r.prototype._onLoad=function(n){var r=this;n._onLoadBinding=null,this._resourcesParsing.push(n),n._dequeue(),u.eachSeries(this._afterMiddleware,function(t,e){t.call(r,n,e)},function(){n.onAfterMiddleware.dispatch(n),r.progress=Math.min(100,r.progress+n.progressChunk),r.onProgress.dispatch(r,n),n.error?r.onError.dispatch(n.error,r,n):r.onLoad.dispatch(r,n),r._resourcesParsing.splice(r._resourcesParsing.indexOf(n),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},o(r,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),r}();e.default=c},function(t,e,n){"use strict";e.__esModule=!0,e.encodeBinary=function(t){var e="",n=0;for(;n<t.length;){for(var r=[0,0,0],o=[0,0,0,0],i=0;i<r.length;++i)n<t.length?r[i]=255&t.charCodeAt(n++):r[i]=0;o[0]=r[0]>>2,o[1]=(3&r[0])<<4|r[1]>>4,o[2]=(15&r[1])<<2|r[2]>>6,o[3]=63&r[2];var s=n-(t.length-1);switch(s){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)e+=a.charAt(o[u])}return e};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,n){"use strict";n.r(e);var r=n(13),i=n(4),s=n.n(i),o=n(1);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=Object(o.c)("PackLoader",o.a,!1),p=function(t){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=c(this,h(r).call(this)))._hash=e,n._packName=t,n._addMiddlewares(),n._addPack(t),n}var e,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(r,s.a),e=r,(n=[{key:"load",value:function(o){var i=this;l(h(r.prototype),"load",this).call(this,function(t,e){if(!i._checkForErrors(e)){var n=i._packName,r=i.get(n);o(n,r)}})}},{key:"get",value:function(t){return this.resources&&this.resources[t]?this.resources[t].data:null}},{key:"abort",value:function(){for(var t in this.resources){var e=this.resources[t];e.isComplete||e.abort()}}},{key:"_addPack",value:function(t){var e=[{name:t,url:"../".concat("assets","/packs/").concat(t,".pack")}];this._addManifest(e)}},{key:"_addManifest",value:function(t){for(var e in t){var n=t[e];this.add(n.name,n.url,n.options||null)}}},{key:"_addMiddlewares",value:function(){this.pre(this._extensionMiddleware)}},{key:"_checkForErrors",value:function(t){for(var e in t){var n=t[e];if(n.error)return d("Resource '".concat(e,"' error :"),n.error),!0}return!1}},{key:"_extensionMiddleware",value:function(t,e){"pack"===t.extension&&(t.xhrType=i.Resource.XHR_RESPONSE_TYPE.BUFFER),e()}}])&&a(e.prototype,n),o&&a(e,o),r}(),_=n(2);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=_.a?self.TextDecoder:window.TextDecoder,E=_.a?self.URL||self.webkitURL||self.mozURL||self.msURL:window.URL||window.webkitURL||window.mozURL||window.msURL,m=function(){function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this._packName=t,this._packData=e,this._header=null,this._json=null,this._chunks=[],this._resources=[],this._parse(),this._create()}var t,e,n;return t=u,(e=[{key:"_parse",value:function(){this._parseHeader(),this._parseChunks()}},{key:"_parseHeader",value:function(){var t=new DataView(this._packData,0,u.HEADER_LENGTH);if(this._header={magic:this._decodeText(new Uint8Array(this._packData.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this._header.magic!==u.HEADER_MAGIC)throw new Error("Unpacker: Unsupported pack header");if(1!==this._header.version)throw new Error("Unpacker: Pack version mismatch")}},{key:"_parseChunks",value:function(){for(var t=new DataView(this._packData,u.HEADER_LENGTH),e=0;e<t.byteLength;){var n=t.getUint32(e,!0);e+=4;var r=t.getUint32(e,!0);if(e+=4,r===u.CHUNK_TYPES.JSON){var o=new Uint8Array(this._packData,u.HEADER_LENGTH+e,n);this._json=JSON.parse(this._decodeText(o))}else if(r===u.CHUNK_TYPES.BIN){var i=u.HEADER_LENGTH+e,s=this._packData.slice(i,i+n);this._chunks.push(s)}e+=n}}},{key:"_parseData",value:function(t,e,n){switch(this._detectFormat(n)){case u.STRING_FORMAT:return this._getAsString(t);case u.BYTES_FORMAT:return this._getAsBytes(t);case u.URI_FORMAT:return this._getAsURI(t,e);case u.RAW_FORMAT:default:return t}}},{key:"_getAsString",value:function(t){if("string"==typeof t||t instanceof String)return t;t=new Uint8Array(t);for(var e="",n=0,r=Math.pow(2,10)-1,o=Math.ceil(t.byteLength/r),i=0;i<o;i++)e+=String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(n,n+r))),n+=r;return e=decodeURIComponent(escape(e))}},{key:"_getAsBytes",value:function(t){if("string"==typeof t||t instanceof String){if("function"!=typeof Uint8Array)throw new Error("TypedArray are not supported");return new Uint8Array(t.split("").map(function(t){return t.charCodeAt(0)}))}return t}},{key:"_getAsURI",value:function(t,e){return(_.a?self.Blob:Detect.supports.blob)?E.createObjectURL(new Blob([t],{type:e})):"data:"+e+";base64,"+btoa(t)}},{key:"_create",value:function(){for(var t=this._json,e=0,n=t.length;e<n;e++){var r=t[e],o=r[0],i=r[1],s="".concat(this._packName,".").concat(o.replace(/\.[^/.]+$/,"").replace(/\//g,".")),u=o.substr(o.lastIndexOf(".")+1),a=this._parseData(this._chunks[e],i,u);this._resources.push({id:s,path:o,type:i,extension:u,data:a})}}},{key:"_decodeText",value:function(t){if(void 0!==g)return(new g).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))}},{key:"_detectFormat",value:function(t){switch(t){case"glb":case"drc":case"bin":case"dds":return u.RAW_FORMAT;case"png":case"jpg":return u.URI_FORMAT;case"json":case"obj":return u.STRING_FORMAT;default:return u.URI_FORMAT}}},{key:"resources",get:function(){return this._resources}}])&&v(t.prototype,e),n&&v(t,n),u}();y(m,"RAW_FORMAT","raw"),y(m,"STRING_FORMAT","string"),y(m,"BYTES_FORMAT","bytes"),y(m,"URI_FORMAT","uri"),y(m,"HEADER_MAGIC","pack"),y(m,"HEADER_LENGTH",12),y(m,"CHUNK_TYPES",{JSON:1313821514,BIN:5130562});var b=m,T=new r.a(self),O={};T.add("load",function(n){var t=new p(n);t.load(function(t,e){var n=new b(t,e);T.dispatch("loaded:".concat(t),n.resources)}),t.onProgress.add(function(t){var e=t.progress;return T.dispatch("progress:".concat(n),e)}),O[n]=t}),T.add("abort",function(t){var e=O[t];e&&e.loading&&e.abort()})}]);