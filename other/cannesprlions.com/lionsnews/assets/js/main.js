!function(){function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n||t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}return t}()({1:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barba=i()}(this,function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&a(r,n.prototype),r}).apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){function n(){return o(t,arguments,r(this).constructor)}if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function u(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}function c(t,e){for(var n,i=[],r=0,a=0,o="",s=e&&e.delimiter||E,u=e&&e.whitelist||void 0,c=!1;null!==(n=O.exec(t));){var l=n[0],h=n[1],d=n.index;if(o+=t.slice(a,d),a=d+l.length,h)o+=h[1],c=!0;else{var m="",v=n[2],g=n[3],y=n[4],_=n[5];if(!c&&o.length){var x=o.length-1,b=o[x];(!u||u.indexOf(b)>-1)&&(m=b,o=o.slice(0,x))}o&&(i.push(o),o="",c=!1);var w=g||y,M=m||s;i.push({name:v||r++,prefix:m,delimiter:M,optional:"?"===_||"*"===_,repeat:"+"===_||"*"===_,pattern:w?p(w):"[^"+f(M===s?M:M+s)+"]+?"})}}return(o||a<t.length)&&i.push(o+t.substr(a)),i}function l(t,e){return function(n,i){var r=t.exec(n);if(!r)return!1;for(var a=r[0],o=r.index,s={},u=i&&i.decode||decodeURIComponent,c=1;c<r.length;c++)if(void 0!==r[c]){var l=e[c-1];s[l.name]=l.repeat?r[c].split(l.delimiter).map(function(t){return u(t,l)}):u(r[c],l)}return{path:a,index:o,params:s}}}function h(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",d(e)));return function(e,i){for(var r="",a=i&&i.encode||encodeURIComponent,o=!i||!1!==i.validate,s=0;s<t.length;s++){var u=t[s];if("string"!=typeof u){var c,l=e?e[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=a(l[h],u),o&&!n[s].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');r+=(0===h?u.prefix:u.delimiter)+c}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(c=a(String(l),u),o&&!n[s].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');r+=u.prefix+c}}else r+=u}return r}}function f(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function d(t){return t&&t.sensitive?"":"i"}function m(t,e,n){for(var i=(n=n||{}).strict,r=!1!==n.start,a=!1!==n.end,o=n.delimiter||E,s=[].concat(n.endsWith||[]).map(f).concat("$").join("|"),u=r?"^":"",c=0;c<t.length;c++){var l=t[c];if("string"==typeof l)u+=f(l);else{var h=l.repeat?"(?:"+l.pattern+")(?:"+f(l.delimiter)+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),u+=l.optional?l.prefix?"(?:"+f(l.prefix)+"("+h+"))?":"("+h+")?":f(l.prefix)+"("+h+")"}}if(a)i||(u+="(?:"+f(o)+")?"),u+="$"===s?"$":"(?="+s+")";else{var p=t[t.length-1],m="string"==typeof p?p[p.length-1]===o:void 0===p;i||(u+="(?:"+f(o)+"(?="+s+"))?"),m||(u+="(?="+f(o)+"|"+s+")")}return new RegExp(u,d(n))}function v(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(v(t[r],e,n).source);return new RegExp("(?:"+i.join("|")+")",d(n))}(t,e,n):function(t,e,n){return m(c(t,n),e,n)}(t,e,n)}function g(t,e,n){return void 0===e&&(e=2e3),new Promise(function(i,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status)i(a.responseText);else if(a.status){var e={status:a.status,statusText:a.statusText};n(t,e),r(e)}},a.ontimeout=function(){var i=new Error("Timeout error ["+e+"]");n(t,i),r(i)},a.onerror=function(){var e=new Error("Fetch error");n(t,e),r(e)},a.open("GET",t),a.timeout=e,a.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),a.setRequestHeader("x-barba","yes"),a.send()})}function y(t,e){return void 0===e&&(e={}),function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=!1,o=new Promise(function(n,r){e.async=function(){return a=!0,function(t,e){t?r(t):n(e)}};var o=t.apply(e,i);a||(V(o)?o.then(n,r):n(o))});return o}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var _,x="2.9.7",b=function(){};!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug"}(_||(_={}));var w=_.off,M=function(){function t(t){this.t=t}t.getLevel=function(){return w},t.setLevel=function(t){return w=_[t]};var e=t.prototype;return e.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.error,_.error,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.warn,_.warning,e)},e.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.info,_.info,e)},e.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.log,_.debug,e)},e.i=function(e,n,i){n<=t.getLevel()&&e.apply(console,["["+this.t+"] "].concat(i))},t}(),S=v,A=l,T=c,P=h,L=m,E="/",O=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");S.match=function(t,e){var n=[];return l(v(t,n,e),n)},S.regexpToFunction=A,S.parse=T,S.compile=function(t,e){return h(c(t,e),e)},S.tokensToFunction=P,S.tokensToRegExp=L;var C={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},F=new(function(){function t(){this.o=C,this.u=new DOMParser}var e=t.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u.parseFromString(t,"text/html")},e.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},e.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},e.addContainer=function(t,e){var n=this.getContainer();n?this.s(t,n):e.appendChild(t)},e.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},e.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length;if(0===i)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],1===i)return r.href;var a=document.getElementsByTagName("head")[0];a.insertBefore(r,a.firstChild);for(var o,s=document.createElement("a"),u=1;u<i;u++)s.href=arguments[u],r.href=o=s.href;return a.removeChild(r),o},e.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t}()),I=new(function(){function t(){this.h=[],this.v=-1}var i=t.prototype;return i.init=function(t,e){this.l="barba";var n={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(n),this.v=0;var i={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(i,"",t)},i.change=function(t,e,n){if(n&&n.state){var i=n.state,r=i.index;e=this.m(this.v-r),this.replace(i.states),this.v=r}else this.add(t,e);return e},i.add=function(t,e){var n=this.size,i=this.p(e),r={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(r),this.v=n;var a={from:this.l,index:n,states:[].concat(this.h)};switch(i){case"push":window.history&&window.history.pushState(a,"",t);break;case"replace":window.history&&window.history.replaceState(a,"",t)}},i.update=function(t,e){var i=e||this.v,r=n({},this.get(i),{},t);this.set(i,r)},i.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},i.clear=function(){this.h=[],this.v=-1},i.replace=function(t){this.h=t},i.get=function(t){return this.h[t]},i.set=function(t,e){return this.h[t]=e},i.p=function(t){var e="push",n=t,i=C.prefix+"-"+C.history;return n.hasAttribute&&n.hasAttribute(i)&&(e=n.getAttribute(i)),e},i.m=function(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"},e(t,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),t}()),N=function(t,e){try{var n=function(){if(!e.next.html)return Promise.resolve(t).then(function(t){var n=e.next;if(t){var i=F.toElement(t);n.namespace=F.getNamespace(i),n.container=F.getContainer(i),n.html=t,I.update({ns:n.namespace});var r=F.toDocument(t);document.title=r.title}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},D=S,R={__proto__:null,update:N,nextTick:function(){return new Promise(function(t){window.requestAnimationFrame(t)})},pathToRegexp:D},k=function(){return window.location.origin},z=function(t){return void 0===t&&(t=window.location.href),U(t).port},U=function(t){var e,n=t.match(/:\d+/);if(null===n)/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443);else{var i=n[0].substring(1);e=parseInt(i,10)}var r,a=t.replace(k(),""),o={},s=a.indexOf("#");s>=0&&(r=a.slice(s+1),a=a.slice(0,s));var u=a.indexOf("?");return u>=0&&(o=B(a.slice(u+1)),a=a.slice(0,u)),{hash:r,path:a,port:e,query:o}},B=function(t){return t.split("&").reduce(function(t,e){var n=e.split("=");return t[n[0]]=n[1],t},{})},j=function(t){return void 0===t&&(t=window.location.href),t.replace(/(\/#.*|\/|#.*)$/,"")},G={__proto__:null,getHref:function(){return window.location.href},getOrigin:k,getPort:z,getPath:function(t){return void 0===t&&(t=window.location.href),U(t).path},parse:U,parseQuery:B,clean:j},V=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then},W=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new M("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}i(e,t);var n=e.prototype;return n.init=function(){var t=this;this.registered.clear(),this.all.forEach(function(e){t[e]||(t[e]=function(n,i){t.registered.has(e)||t.registered.set(e,new Set),t.registered.get(e).add({ctx:i||{},fn:n})})})},n["do"]=function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.registered.has(t)){var a=Promise.resolve();return this.registered.get(t).forEach(function(t){a=a.then(function(){return y(t.fn,t.ctx).apply(void 0,i)})}),a["catch"](function(n){e.logger.debug("Hook error ["+t+"]"),e.logger.error(n)})}return Promise.resolve()},n.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},n.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach(function(e,n){return t.push(n)}),this.logger.info("Registered hooks: "+t.join(","))},e}(b)),H=function(){function t(t){if(this.P=[],"boolean"==typeof t)this.g=t;else{var e=Array.isArray(t)?t:[t];this.P=e.map(function(t){return D(t)})}}return t.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=U(t).path;return this.P.some(function(t){return null!==t.exec(e)})},t}(),X=function(t){function e(e){var n;return(n=t.call(this,e)||this).k=new Map,n}i(e,t);var r=e.prototype;return r.set=function(t,e,n){return this.k.set(t,{action:n,request:e}),{action:n,request:e}},r.get=function(t){return this.k.get(t)},r.getRequest=function(t){return this.k.get(t).request},r.getAction=function(t){return this.k.get(t).action},r.has=function(t){return!this.checkHref(t)&&this.k.has(t)},r["delete"]=function(t){return this.k["delete"](t)},r.update=function(t,e){var i=n({},this.k.get(t),{},e);return this.k.set(t,i),i},e}(H),Y=function(){return!window.history.pushState},q=function(t){return!t.el||!t.href},Q=function(t){var e=t.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},Z=function(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target},J=function(t){var e=t.el;return void 0!==e.protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname},$=function(t){var e=t.el;return void 0!==e.port&&z()!==z(e.href)},K=function(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")},tt=function(t){return t.el.hasAttribute(C.prefix+"-"+C.prevent)},et=function(t){return Boolean(t.el.closest("["+C.prefix+"-"+C.prevent+'="all"]'))},nt=function(t){var e=t.href;return j(e)===j()&&z(e)===z()},it=function(t){function e(e){var n;return(n=t.call(this,e)||this).suite=[],n.tests=new Map,n.init(),n}i(e,t);var n=e.prototype;return n.init=function(){this.add("pushState",Y),this.add("exists",q),this.add("newTab",Q),this.add("blank",Z),this.add("corsDomain",J),this.add("corsPort",$),this.add("download",K),this.add("preventSelf",tt),this.add("preventAll",et),this.add("sameUrl",nt,!1)},n.add=function(t,e,n){void 0===n&&(n=!0),this.tests.set(t,e),n&&this.suite.push(t)},n.run=function(t,e,n,i){return this.tests.get(t)({el:e,event:n,href:i})},n.checkLink=function(t,e,n){var i=this;return this.suite.some(function(r){return i.run(r,t,e,n)})},e}(H),rt=function(t){function e(n,i){var r;void 0===i&&(i="Barba error");for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return(r=t.call.apply(t,[this].concat(o))||this).error=n,r.label=i,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),e),r.name="BarbaError",r}return i(e,t),e}(s(Error)),at=function(){function t(t){void 0===t&&(t=[]),this.logger=new M("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=t.prototype;return e.add=function(t,e){switch(t){case"rule":this.A.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.update()},e.resolve=function(t,e){var n=this;void 0===e&&(e={});var i=e.once?this.once:this.page;i=i.filter(e.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var r=new Map,a=i.find(function(i){var a=!0,o={};return!(!e.self||"self"!==i.name)||(n.A.reverse().forEach(function(e){a&&(a=n.R(i,e,t,o),i.from&&i.to&&(a=n.R(i,e,t,o,"from")&&n.R(i,e,t,o,"to")),i.from&&!i.to&&(a=n.R(i,e,t,o,"from")),!i.from&&i.to&&(a=n.R(i,e,t,o,"to")))}),r.set(i,o),a)}),o=r.get(a),s=[];if(s.push(e.once?"once":"page"),e.self&&s.push("self"),o){var u,c=[a];Object.keys(o).length>0&&c.push(o),(u=this.logger).info.apply(u,["Transition found ["+s.join(",")+"]"].concat(c))}else this.logger.info("No transition found ["+s.join(",")+"]");return a},e.update=function(){var t=this;this.all=this.all.map(function(e){return t.T(e)}).sort(function(t,e){return t.priority-e.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return void 0!==t.leave||void 0!==t.enter}),this.once=this.all.filter(function(t){return void 0!==t.once})},e.R=function(t,e,n,i,r){var a=!0,o=!1,s=t,u=e.name,c=u,l=u,h=u,f=r?s[r]:s,p="to"===r?n.next:n.current;if(r?f&&f[u]:f[u]){switch(e.type){case"strings":default:var d=Array.isArray(f[c])?f[c]:[f[c]];p[c]&&-1!==d.indexOf(p[c])&&(o=!0),-1===d.indexOf(p[c])&&(a=!1);break;case"object":var m=Array.isArray(f[l])?f[l]:[f[l]];p[l]?(p[l].name&&-1!==m.indexOf(p[l].name)&&(o=!0),-1===m.indexOf(p[l].name)&&(a=!1)):a=!1;break;case"function":f[h](n)?o=!0:a=!1}o&&(r?(i[r]=i[r]||{},i[r][u]=s[r][u]):i[u]=s[u])}return a},e.O=function(t,e,n){var i=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(i+=Math.pow(10,n),t.from&&t.from[e]&&(i+=1),t.to&&t.to[e]&&(i+=2)),i},e.T=function(t){var e=this;t.priority=0;var n=0;return this.A.forEach(function(i,r){n+=e.O(t,i.name,r+1)}),t.priority=n,t},t}(),ot=function(){function t(t){void 0===t&&(t=[]),this.logger=new M("@barba/core"),this.S=!1,this.store=new at(t)}var n=t.prototype;return n.get=function(t,e){return this.store.resolve(t,e)},n.doOnce=function(t){var e=t.data,n=t.transition;try{var i=function(){r.S=!1},r=this,a=n||{};r.S=!0;var o=u(function(){return Promise.resolve(r.j("beforeOnce",e,a)).then(function(){return Promise.resolve(r.once(e,a)).then(function(){return Promise.resolve(r.j("afterOnce",e,a)).then(function(){})})})},function(t){r.S=!1,r.logger.debug("Transition error [before/after/once]"),r.logger.error(t)});return Promise.resolve(o&&o.then?o.then(i):i())}catch(t){return Promise.reject(t)}},n.doPage=function(t){var e=t.data,n=t.transition,i=t.page,r=t.wrapper;try{var a=function(t){return o?t:void(s.S=!1)},o=!1,s=this,c=n||{},l=!0===c.sync||!1;s.S=!0;var h=u(function(){function t(){return Promise.resolve(s.j("before",e,c)).then(function(){function t(t){return n?t:Promise.resolve(s.remove(e)).then(function(){return Promise.resolve(s.j("after",e,c)).then(function(){})})}var n=!1,a=function(){if(l)return u(function(){return Promise.resolve(s.add(e,r)).then(function(){return Promise.resolve(s.j("beforeLeave",e,c)).then(function(){return Promise.resolve(s.j("beforeEnter",e,c)).then(function(){return Promise.resolve(Promise.all([s.leave(e,c),s.enter(e,c)])).then(function(){return Promise.resolve(s.j("afterLeave",e,c)).then(function(){return Promise.resolve(s.j("afterEnter",e,c)).then(function(){})})})})})})},function(t){if(s.M(t))throw new rt(t,"Transition error [sync]")});var t=function(t){return n?t:u(function(){var t=function(){if(!1!==a)return Promise.resolve(s.add(e,r)).then(function(){return Promise.resolve(s.j("beforeEnter",e,c)).then(function(){return Promise.resolve(s.enter(e,c,a)).then(function(){return Promise.resolve(s.j("afterEnter",e,c)).then(function(){})})})})}();if(t&&t.then)return t.then(function(){})},function(t){if(s.M(t))throw new rt(t,"Transition error [before/after/enter]")})},a=!1,o=u(function(){return Promise.resolve(s.j("beforeLeave",e,c)).then(function(){return Promise.resolve(Promise.all([s.leave(e,c),N(i,e)]).then(function(t){return t[0]})).then(function(t){return a=t,Promise.resolve(s.j("afterLeave",e,c)).then(function(){})})})},function(t){if(s.M(t))throw new rt(t,"Transition error [before/after/leave]")});return o&&o.then?o.then(t):t(o)}();return a&&a.then?a.then(t):t(a)})}var n=function(){if(l)return Promise.resolve(N(i,e)).then(function(){})}();return n&&n.then?n.then(t):t()},function(t){if(s.S=!1,t.name&&"BarbaError"===t.name)throw s.logger.debug(t.label),s.logger.error(t.error),t;throw s.logger.debug("Transition error [page]"),s.logger.error(t),t});return Promise.resolve(h&&h.then?h.then(a):a(h))}catch(t){return Promise.reject(t)}},n.once=function(t,e){try{return Promise.resolve(W["do"]("once",t,e)).then(function(){return e.once?y(e.once,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.leave=function(t,e){try{return Promise.resolve(W["do"]("leave",t,e)).then(function(){return e.leave?y(e.leave,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.enter=function(t,e,n){try{return Promise.resolve(W["do"]("enter",t,e)).then(function(){return e.enter?y(e.enter,e)(t,n):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.add=function(t,e){try{return F.addContainer(t.next.container,e),W["do"]("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},n.remove=function(t){try{return F.removeContainer(t.current.container),W["do"]("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},n.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},n.j=function(t,e,n){try{return Promise.resolve(W["do"](t,e,n)).then(function(){return n[t]?y(n[t],n)(e):Promise.resolve()})}catch(t){return Promise.reject(t)}},e(t,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return"self"===t.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),t}(),st=function(){function t(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){W[t](e.L(t))}))}return t.prototype.L=function(t){var e=this;return function(n){var i=t.match(/enter/i)?n.next:n.current,r=e.byNamespace.get(i.namespace);return r&&r[t]?y(r[t],r)(n):Promise.resolve()}},t}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var ut={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return new(function(){function t(){this.version=x,this.schemaPage=ut,this.Logger=M,this.logger=new M("@barba/core"),this.plugins=[],this.hooks=W,this.dom=F,this.helpers=R,this.history=I,this.request=g,this.url=G}var i=t.prototype;return i.use=function(t,e){var n=this.plugins;n.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),n.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},i.init=function(t){var e=void 0===t?{}:t,i=e.transitions,r=void 0===i?[]:i,a=e.views,o=void 0===a?[]:a,s=e.schema,u=void 0===s?C:s,c=e.requestError,l=e.timeout,h=void 0===l?2e3:l,f=e.cacheIgnore,p=void 0!==f&&f,d=e.prefetchIgnore,m=void 0!==d&&d,v=e.preventRunning,g=void 0!==v&&v,y=e.prevent,_=void 0===y?null:y,x=e.debug,b=e.logLevel;if(M.setLevel(!0===(void 0!==x&&x)?"debug":void 0===b?"off":b),this.logger.info(this.version),Object.keys(u).forEach(function(t){C[t]&&(C[t]=u[t])}),this.$=c,this.timeout=h,this.cacheIgnore=p,this.prefetchIgnore=m,this.preventRunning=g,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var w=this.data.current;if(!w.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new X(p),this.prevent=new it(m),this.transitions=new ot(r),this.views=new st(o),null!==_){if("function"!=typeof _)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",_)}this.history.init(w.url.href,w.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(t){return t.init()});var S=this.data;S.trigger="barba",S.next=S.current,S.current=n({},this.schemaPage),this.hooks["do"]("ready",S),this.once(S),this.q()},i.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},i.force=function(t){window.location.assign(t)},i.go=function(t,e,n){var i;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(i="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,n),n&&(n.stopPropagation(),n.preventDefault()),this.page(t,e,i)},i.once=function(t){try{var e=this;return Promise.resolve(e.hooks["do"]("beforeEnter",t)).then(function(){function n(){return Promise.resolve(e.hooks["do"]("afterEnter",t)).then(function(){})}var i=function(){if(e.transitions.hasOnce){var n=e.transitions.get(t,{once:!0});return Promise.resolve(e.transitions.doOnce({transition:n,data:t})).then(function(){})}}();return i&&i.then?i.then(n):n()})}catch(t){return Promise.reject(t)}},i.page=function(t,e,i){try{var r=function(){var t=a.data;return Promise.resolve(a.hooks["do"]("page",t)).then(function(){var e=u(function(){var e=a.transitions.get(t,{once:!1,self:i});return Promise.resolve(a.transitions.doPage({data:t,page:o,transition:e,wrapper:a._})).then(function(){a.q()})},function(){0===M.getLevel()&&a.force(t.current.url.href)});if(e&&e.then)return e.then(function(){})})},a=this;a.data.next.url=n({href:t},a.url.parse(t)),a.data.trigger=e;var o=a.cache.has(t)?a.cache.update(t,{action:"click"}).request:a.cache.set(t,a.request(t,a.timeout,a.onRequestError.bind(a,e)),"click").request,s=function(){if(a.transitions.shouldWait)return Promise.resolve(N(o,a.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(r):r())}catch(t){return Promise.reject(t)}},i.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0],a=n[1],o=this.cache.getAction(r);return this.cache["delete"](r),!(this.$&&!1===this.$(t,o,r,a)||("click"===o&&this.force(r),1))},i.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba"))["catch"](function(t){e.logger.error(t)}),"prefetch")},i.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},i.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},i.B=function(t){var e=this,n=this.I(t);if(n){var i=this.dom.getHref(n);this.prevent.checkHref(i)||this.cache.has(i)||this.cache.set(i,this.request(i,this.timeout,this.onRequestError.bind(this,n))["catch"](function(t){e.logger.error(t)}),"enter")}},i.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},i.D=function(t){this.go(this.url.getHref(),"popstate",t)},i.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},i.q=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:n({href:t},this.url.parse(t))};this.C={current:e,next:n({},this.schemaPage),trigger:void 0},this.hooks["do"]("reset",this.data)},e(t,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),t}())})},{}],2:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barbaCss=i()}(this,function(){var t="2.1.15";return new(function(){function e(){this.name="@barba/css",this.version=t,this.prefix="barba",this.callbacks={},this.t=!1}var n=e.prototype;return n.install=function(t){this.logger=new t.Logger(this.name),this.logger.info(this.version),this.barba=t,this.i=this.i.bind(this),this.s=this.s.bind(this),this.h=this.h.bind(this)},n.init=function(){this.barba.hooks.before(this.o,this),this.barba.hooks.beforeOnce(this.o,this),this.barba.hooks.beforeOnce(this.u,this),this.barba.hooks.afterOnce(this.m,this),this.barba.hooks.beforeLeave(this.P,this),this.barba.hooks.afterLeave(this.v,this),this.barba.hooks.beforeEnter(this.l,this),this.barba.hooks.afterEnter(this.p,this),this.barba.transitions.once=this.i,this.barba.transitions.leave=this.s,this.barba.transitions.enter=this.h,this.barba.transitions.store.all.unshift({name:"barba",once:function(){},leave:function(){},enter:function(){}}),this.barba.transitions.store.update()},n.start=function(t,e){try{var n=this;return n.add(t,e),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.add(t,e+"-active"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})}catch(t){return Promise.reject(t)}},n.next=function(t,e){try{var n=this;return n.t=n.g(t),Promise.resolve(n.t?new Promise(function(t){try{return n.cb=t,n.callbacks[e]=t,i.addEventListener("transitionend",t,!1),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.remove(i,e),n.add(i,e+"-to"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})}catch(i){return Promise.reject(i)}}):(n.remove(t,e),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.add(t,e+"-to"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})))}catch(t){return Promise.reject(t)}},n.end=function(t,e){try{return this.remove(t,e+"-to"),this.remove(t,e+"-active"),t.removeEventListener("transitionend",this.callbacks[e]),this.t=!1,Promise.resolve()}catch(t){return Promise.reject(t)}},n.add=function(t,e){t.classList.add(this.prefix+"-"+e)},n.remove=function(t,e){t.classList.remove(this.prefix+"-"+e)},n.o=function(t,e){this.prefix=e.name||"barba"},n.g=function(t){return"0s"!==getComputedStyle(t).transitionDuration},n.u=function(t){return this.start(t.next.container,"once")},n.i=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks["do"]("once",t,e)).then(function(){return n.next(t.next.container,"once")})}catch(t){return Promise.reject(t)}},n.m=function(t){return this.end(t.next.container,"once")},n.P=function(t){
return this.start(t.current.container,"leave")},n.s=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks["do"]("leave",t,e)).then(function(){return n.next(t.current.container,"leave")})}catch(t){return Promise.reject(t)}},n.v=function(t){return this.end(t.current.container,"leave"),this.barba.transitions.remove(t),Promise.resolve()},n.l=function(t){return 1===this.barba.history.size?Promise.resolve():this.start(t.next.container,"enter")},n.h=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks["do"]("enter",t,e)).then(function(){return n.next(t.next.container,"enter")})}catch(t){return Promise.reject(t)}},n.p=function(t){return 1===this.barba.history.size?Promise.resolve():this.end(t.next.container,"enter")},e}())})},{}],3:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barbaPrefetch=i()}(this,function(){var t="2.1.10",e=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};return new(function(){function n(){this.name="@barba/prefetch",this.version=t,this.toPrefetch=new Set}var i=n.prototype;return i.install=function(t,e){var n=void 0===e?{}:e,i=n.root,r=void 0===i?document.body:i,a=n.timeout,o=void 0===a?2e3:a;this.logger=new t.Logger(this.name),this.logger.info(this.version),this.barba=t,this.root=r,this.timeout=o},i.init=function(){var t=this;this.barba.prefetchIgnore?this.logger.warn("barba.prefetchIgnore is enabled"):this.barba.cacheIgnore?this.logger.warn("barba.cacheIgnore is enabled"):(this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var n=e.target,i=t.barba.dom.getHref(n);t.toPrefetch.has(i)&&(t.observer.unobserve(n),t.barba.cache.has(i)?t.barba.cache.update(i,{action:"prefetch"}):t.barba.cache.set(i,t.barba.request(i,t.barba.timeout,t.barba.onRequestError.bind(t.barba,"barba"))["catch"](function(e){t.logger.error(e)}),"prefetch"))}})}),this.observe(),this.barba.hooks.after(this.observe,this))},i.observe=function(){var t=this;e(function(){t.root.querySelectorAll("a").forEach(function(e){var n=e,i=t.barba.dom.getHref(n);t.barba.cache.has(i)||t.barba.prevent.checkHref(i)||t.barba.prevent.checkLink(n,{},i)||(t.observer.observe(e),t.toPrefetch.add(i))})},{timeout:this.timeout})},n}())})},{}],4:[function(t,e,n){(function(t,i){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self,t.Vimeo=t.Vimeo||{},t.Vimeo.Player=i())}(this,function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e){return 0===t.indexOf(e.toLowerCase())?t:"".concat(e.toLowerCase()).concat(t.substr(0,1).toUpperCase()).concat(t.substr(1))}function o(t){return Boolean(t&&1===t.nodeType&&"nodeName"in t&&t.ownerDocument&&t.ownerDocument.defaultView)}function s(t){return!isNaN(parseFloat(t))&&isFinite(t)&&Math.floor(t)==t}function u(t){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(t)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.url,i=e||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(s(i))return"https://vimeo.com/".concat(i);if(u(i))return i.replace("http:","https:");if(e)throw new TypeError("“".concat(e,"” is not a valid video id."));throw new TypeError("“".concat(i,"” is not a vimeo.com url."))}function l(t,e){return e={exports:{}},t(e,e.exports),e.exports}function h(t,e,n){var i=O.get(t.element)||{};e in i||(i[e]=[]),i[e].push(n),O.set(t.element,i)}function f(t,e){var n=O.get(t.element)||{};return n[e]||[]}function p(t,e,n){var i=O.get(t.element)||{};if(!i[e])return!0;if(!n)return i[e]=[],O.set(t.element,i),!0;var r=i[e].indexOf(n);return r!==-1&&i[e].splice(r,1),O.set(t.element,i),i[e]&&0===i[e].length}function d(t,e){var n=f(t,e);if(n.length<1)return!1;var i=n.shift();return p(t,e,i),i}function m(t,e){var n=O.get(t);O.set(e,n),O["delete"](t)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C.reduce(function(e,n){var i=t.getAttribute("data-vimeo-".concat(n));return(i||""===i)&&(e[n]=""===i?1:i),e},e)}function g(t,e){var n=t.html;if(!e)throw new TypeError("An element must be provided");if(null!==e.getAttribute("data-vimeo-initialized"))return e.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=n,e.appendChild(i.firstChild),e.setAttribute("data-vimeo-initialized","true"),e.querySelector("iframe")}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,r){if(!u(t))throw new TypeError("“".concat(t,"” is not a vimeo.com url."));var a="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(t));for(var o in e)e.hasOwnProperty(o)&&(a+="&".concat(o,"=").concat(encodeURIComponent(e[o])));var s="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;s.open("GET",a,!0),s.onload=function(){if(404===s.status)return void r(new Error("“".concat(t,"” was not found.")));if(403===s.status)return void r(new Error("“".concat(t,"” is not embeddable.")));try{var e=JSON.parse(s.responseText);if(403===e.domain_status_code)return g(e,n),void r(new Error("“".concat(t,"” is not embeddable.")));i(e)}catch(a){r(a)}},s.onerror=function(){var t=s.status?" (".concat(s.status,")"):"";r(new Error("There was an error fetching the embed code from Vimeo".concat(t,".")))},s.send()})}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=[].slice.call(t.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(t){"console"in window&&console.error};e.forEach(function(t){try{if(null!==t.getAttribute("data-vimeo-defer"))return;var e=v(t),i=c(e);y(i,e,t).then(function(e){return g(e,t)})["catch"](n)}catch(r){n(r)}})}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var e=function(e){if(u(e.origin)&&e.data&&"spacechange"===e.data.event)for(var n=t.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===e.source){var r=n[i].parentElement;r.style.paddingBottom="".concat(e.data.data[0].bottom,"px");break}};window.addEventListener("message",e)}}function b(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){return{}}return t}function w(t,e,n){if(t.element.contentWindow&&t.element.contentWindow.postMessage){var i={method:e};void 0!==n&&(i.value=n);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(i=JSON.stringify(i)),t.element.contentWindow.postMessage(i,t.origin)}}function M(t,e){e=b(e);var n,i=[];if(e.event){if("error"===e.event){var r=f(t,e.data.method);r.forEach(function(n){var i=new Error(e.data.message);i.name=e.data.name,n.reject(i),p(t,e.data.method,n)})}i=f(t,"event:".concat(e.event)),n=e.data}else if(e.method){var a=d(t,e.method);a&&(i.push(a),n=e.value)}i.forEach(function(e){try{if("function"==typeof e)return void e.call(t,n);e.resolve(n)}catch(i){}})}function S(){var t=function(){for(var t,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=e.length,r={};n<i;n++)if(t=e[n],t&&t[1]in document){for(n=0;n<t.length;n++)r[e[0][n]]=t[n];return r}return!1}(),e={fullscreenchange:t.fullscreenchange,fullscreenerror:t.fullscreenerror},n={request:function(e){return new Promise(function(i,r){var a=function s(){n.off("fullscreenchange",s),i()};n.on("fullscreenchange",a),e=e||document.documentElement;var o=e[t.requestFullscreen]();o instanceof Promise&&o.then(a)["catch"](r)})},exit:function(){return new Promise(function(e,i){if(!n.isFullscreen)return void e();var r=function o(){n.off("fullscreenchange",o),e()};n.on("fullscreenchange",r);var a=document[t.exitFullscreen]();a instanceof Promise&&a.then(r)["catch"](i)})},on:function(t,n){var i=e[t];i&&document.addEventListener(i,n)},off:function(t,n){var i=e[t];i&&document.removeEventListener(i,n)}};return Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(document[t.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[t.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[t.fullscreenEnabled])}}}),n}var A="undefined"!=typeof t&&"[object global]"==={}.toString.call(t),T="undefined"!=typeof Array.prototype.indexOf,P="undefined"!=typeof window&&"undefined"!=typeof window.postMessage;if(!(A||T&&P))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};!function(t){function e(t){return Object(t)===t}if(!t.WeakMap){var n=Object.prototype.hasOwnProperty,i=function(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n}):t[e]=n};t.WeakMap=function(){function t(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",a("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function r(t,i){if(!e(t)||!n.call(t,"_id"))throw new TypeError(i+" method called on incompatible receiver "+typeof t)}function a(t){return t+"_"+o()+"."+o()}function o(){return Math.random().toString().substring(2)}return i(t.prototype,"delete",function(t){if(r(this,"delete"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)&&(delete t[this._id],!0)}),i(t.prototype,"get",function(t){if(r(this,"get"),e(t)){var n=t[this._id];return n&&n[0]===t?n[1]:void 0}}),i(t.prototype,"has",function(t){if(r(this,"has"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)}),i(t.prototype,"set",function(t,n){if(r(this,"set"),!e(t))throw new TypeError("Invalid value used as weak map key");var a=t[this._id];return a&&a[0]===t?(a[1]=n,this):(i(t,this._id,[t,n]),this)}),i(t,"_polyfill",!0),t}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof L?L:L);var E=l(function(t){!function(e,n,i){n[e]=n[e]||i(),t.exports&&(t.exports=n[e])}("Promise","undefined"!=typeof L?L:L,function(){function t(t,e){p.add(t,e),f||(f=m(p.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,i){var r,a;try{n===!1?i.reject(t.msg):(r=n===!0?t.msg:n.call(void 0,t.msg),r===i.promise?i.reject(TypeError("Promise-chain cycle")):(a=e(r))?a.call(r,i.resolve,i.reject):i.resolve(r))}catch(o){i.reject(o)}}function a(i){var r,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(r=e(i))?t(function(){var t=new u(s);try{r.call(i,function(){a.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(s.msg=i,s.state=1,s.chain.length>0&&t(n,s))}catch(c){o.call(new u(s),c)}}}function o(e){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=e,i.state=2,i.chain.length>0&&t(n,i))}function s(t,e,n,i){for(var r=0;r<e.length;r++)!function(r){t.resolve(e[r]).then(function(t){n(r,t)},i)}(r)}function u(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new c(this);this.then=function(e,r){var a={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return a.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");a.resolve=t,a.reject=e}),i.chain.push(a),0!==i.state&&t(n,i),a.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){a.call(i,t)},function(t){o.call(i,t)})}catch(r){o.call(i,r)}}var h,f,p,d=Object.prototype.toString,m="undefined"!=typeof i?function(t){return i(t)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(t,e,n,i){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:i!==!1})}}catch(v){h=function(t,e,n){return t[e]=n,t}}p=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,i;return{add:function(r,a){i=new t(r,a),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var t=e;for(e=n=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=h({},"constructor",l,!1);return l.prototype=g,h(g,"__NPO__",0,!1),h(l,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),h(l,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),h(l,"all",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=t.length,a=Array(r),o=0;s(e,t,function(t,e){a[t]=e,++o===r&&n(a)},i)})}),h(l,"race",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");s(e,t,function(t,e){n(e)},i)})}),l})}),O=new WeakMap,C=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"],F=new WeakMap,I=new WeakMap,N={},D=function(){function t(n){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),window.jQuery&&n instanceof jQuery&&(n.length>1&&window.console&&console.warn,n=n[0]),"undefined"!=typeof document&&"string"==typeof n&&(n=document.getElementById(n)),!o(n))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==n.nodeName){var a=n.querySelector("iframe");a&&(n=a)}if("IFRAME"===n.nodeName&&!u(n.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(F.has(n))return F.get(n);this._window=n.ownerDocument.defaultView,this.element=n,this.origin="*";var s=new E(function(t,e){if(i._onMessage=function(n){if(u(n.origin)&&i.element.contentWindow===n.source){"*"===i.origin&&(i.origin=n.origin);var r=b(n.data),a=r&&"error"===r.event,o=a&&r.data&&"ready"===r.data.method;if(o){var s=new Error(r.data.message);return s.name=r.data.name,void e(s)}var c=r&&"ready"===r.event,l=r&&"ping"===r.method;return c||l?(i.element.setAttribute("data-ready","true"),void t()):void M(i,r)}},i._window.addEventListener("message",i._onMessage),"IFRAME"!==i.element.nodeName){var a=v(n,r),o=c(a);y(o,a,n).then(function(t){var e=g(t,n);return i.element=e,i._originalElement=n,m(n,e),F.set(i.element,i),t})["catch"](e)}});if(I.set(this,s),F.set(this.element,this),"IFRAME"===this.element.nodeName&&w(this,"ping"),N.isEnabled){var l=function(){return N.exit()};N.on("fullscreenchange",function(){N.isFullscreen?h(i,"event:exitFullscreen",l):p(i,"event:exitFullscreen",l),i.ready().then(function(){w(i,"fullscreenchange",N.isFullscreen)})})}return this}return r(t,[{key:"callMethod",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new E(function(i,r){return e.ready().then(function(){h(e,t,{resolve:i,reject:r}),w(e,t,n)})["catch"](r)})}},{key:"get",value:function(t){var e=this;return new E(function(n,i){return t=a(t,"get"),e.ready().then(function(){h(e,t,{resolve:n,reject:i}),w(e,t)})["catch"](i)})}},{key:"set",value:function(t,e){var n=this;return new E(function(i,r){if(t=a(t,"set"),void 0===e||null===e)throw new TypeError("There must be a value to set.");return n.ready().then(function(){h(n,t,{resolve:i,reject:r}),w(n,t,e)})["catch"](r)})}},{key:"on",value:function(t,e){if(!t)throw new TypeError("You must pass an event name.");if(!e)throw new TypeError("You must pass a callback function.");if("function"!=typeof e)throw new TypeError("The callback must be a function.");var n=f(this,"event:".concat(t));0===n.length&&this.callMethod("addEventListener",t)["catch"](function(){}),h(this,"event:".concat(t),e)}},{key:"off",value:function(t,e){if(!t)throw new TypeError("You must pass an event name.");if(e&&"function"!=typeof e)throw new TypeError("The callback must be a function.");var n=p(this,"event:".concat(t),e);n&&this.callMethod("removeEventListener",t)["catch"](function(t){})}},{key:"loadVideo",value:function(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function(){var t=I.get(this)||new E(function(t,e){e(new Error("Unknown player. Probably unloaded."))});return E.resolve(t)}},{key:"addCuePoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:e})}},{key:"removeCuePoint",value:function(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function(t,e){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:e})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return N.isEnabled?N.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return N.isEnabled?N.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return N.isEnabled?E.resolve(N.isFullscreen):this.get("fullscreen")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var t=this;return new E(function(e){I["delete"](t),F["delete"](t.element),t._originalElement&&(F["delete"](t._originalElement),t._originalElement.removeAttribute("data-vimeo-initialized")),t.element&&"IFRAME"===t.element.nodeName&&t.element.parentNode&&t.element.parentNode.removeChild(t.element),t._window.removeEventListener("message",t._onMessage),e()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(t){return this.set("autopause",t)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(t){return this.set("color",t)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(t){return this.set("currentTime",t)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(t){return this.set("loop",t)}},{key:"setMuted",value:function(t){return this.set("muted",t)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(t){return this.set("volume",t)}}]),t}();return A||(N=S(),_(),x()),D})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{timers:90}],5:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):(t=t||self,i(t.THREE={}))}(this,function(t){"use strict";function e(){}function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function i(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0}function r(t,e,a,o,s,u,c,l,h,f){Object.defineProperty(this,"id",{value:Nl++}),this.uuid=Cl.generateUUID(),this.name="",this.image=void 0!==t?t:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:r.DEFAULT_MAPPING,this.wrapS=void 0!==a?a:su,this.wrapT=void 0!==o?o:su,this.magFilter=void 0!==s?s:du,this.minFilter=void 0!==u?u:gu,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:Iu,this.internalFormat=null,this.type=void 0!==l?l:_u,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new i,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:Hc,this.version=0,this.onUpdate=null}function a(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this.x=t,this.y=e,this.z=n,this.w=i}function o(t,e,n){this.width=t,this.height=e,this.scissor=new a(0,0,t,e),this.scissorTest=!1,this.viewport=new a(0,0,t,e),n=n||{},this.texture=new r((void 0),n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:du,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(t,e,n){o.call(this,t,e,n),this.samples=4}function u(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this._x=t,this._y=e,this._z=n,this._w=i}function c(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}function l(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0}function h(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=h.DefaultOrder),this._x=t,this._y=e,this._z=n,this._order=i}function f(){this.mask=1}function p(){function t(){a.setFromEuler(r,!1)}function e(){r.setFromQuaternion(a,void 0,!1)}Object.defineProperty(this,"id",{value:Xl++}),this.uuid=Cl.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DefaultUp.clone();var n=new c,r=new h,a=new u,o=new c(1,1,1);r._onChange(t),a._onChange(e),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new l},normalMatrix:{value:new i}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=p.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new f,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function d(){p.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(t,e){this.min=void 0!==t?t:new c((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new c((-(1/0)),(-(1/0)),(-(1/0)))}function v(t,e,n,i,r){for(var a=0,o=t.length-3;a<=o;a+=3){gh.fromArray(t,a);var s=r.x*Math.abs(gh.x)+r.y*Math.abs(gh.y)+r.z*Math.abs(gh.z),u=e.dot(gh),c=n.dot(gh),l=i.dot(gh);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}function g(t,e){this.center=void 0!==t?t:new c,this.radius=void 0!==e?e:-1}function y(t,e){this.origin=void 0!==t?t:new c,this.direction=void 0!==e?e:new c(0,0,(-1))}function _(t,e){this.normal=void 0!==t?t:new c(1,0,0),this.constant=void 0!==e?e:0}function x(t,e,n){this.a=void 0!==t?t:new c,this.b=void 0!==e?e:new c,this.c=void 0!==n?n:new c}function b(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function M(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function S(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function A(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new c,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new b,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function T(){Object.defineProperty(this,"id",{value:Gh++}),this.uuid=Cl.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ms,this.side=cs,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Es,this.blendDst=Os,this.blendEquation=xs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Us,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yl,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rl,this.stencilZFail=rl,this.stencilZPass=rl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function P(t){T.call(this),this.type="MeshBasicMaterial",this.color=new b(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function L(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n===!0,this.usage=_l,this.updateRange={offset:0,count:-1},this.version=0}function E(t,e,n){L.call(this,new Int8Array(t),e,n)}function O(t,e,n){L.call(this,new Uint8Array(t),e,n)}function C(t,e,n){L.call(this,new Uint8ClampedArray(t),e,n)}function F(t,e,n){L.call(this,new Int16Array(t),e,n)}function I(t,e,n){L.call(this,new Uint16Array(t),e,n)}function N(t,e,n){L.call(this,new Int32Array(t),e,n)}function D(t,e,n){L.call(this,new Uint32Array(t),e,n)}function R(t,e,n){L.call(this,new Float32Array(t),e,n)}function k(t,e,n){L.call(this,new Float64Array(t),e,n)}function z(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function U(t){if(0===t.length)return-(1/0);for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function B(){Object.defineProperty(this,"id",{value:Hh+=2}),this.uuid=Cl.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function j(t,e){p.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new P,this.updateMorphTargets()}function G(t,e,n,i,r,a,o,s){var u;if(u=e.side===ls?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,e.side!==hs,s),null===u)return null;mf.copy(s),mf.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(mf);return c<n.near||c>n.far?null:{distance:c,point:mf.clone(),object:t}}function V(t,e,i,r,a,o,s,u,c,l,h,f){ef.fromBufferAttribute(a,l),nf.fromBufferAttribute(a,h),rf.fromBufferAttribute(a,f);var p=t.morphTargetInfluences;if(e.morphTargets&&o&&p){uf.set(0,0,0),cf.set(0,0,0),lf.set(0,0,0);for(var d=0,m=o.length;d<m;d++){var v=p[d],g=o[d];0!==v&&(af.fromBufferAttribute(g,l),of.fromBufferAttribute(g,h),sf.fromBufferAttribute(g,f),s?(uf.addScaledVector(af,v),cf.addScaledVector(of,v),lf.addScaledVector(sf,v)):(uf.addScaledVector(af.sub(ef),v),cf.addScaledVector(of.sub(nf),v),lf.addScaledVector(sf.sub(rf),v)))}ef.add(uf),nf.add(cf),rf.add(lf)}t.isSkinnedMesh&&(t.boneTransform(l,ef),t.boneTransform(h,nf),t.boneTransform(f,rf));var y=G(t,e,i,r,ef,nf,rf,df);if(y){u&&(hf.fromBufferAttribute(u,l),ff.fromBufferAttribute(u,h),pf.fromBufferAttribute(u,f),y.uv=x.getUV(df,ef,nf,rf,hf,ff,pf,new n)),c&&(hf.fromBufferAttribute(c,l),ff.fromBufferAttribute(c,h),pf.fromBufferAttribute(c,f),y.uv2=x.getUV(df,ef,nf,rf,hf,ff,pf,new n));var _=new A(l,h,f);x.getNormal(ef,nf,rf,_.normal),y.face=_}return y}function W(){Object.defineProperty(this,"id",{value:vf+=2}),this.uuid=Cl.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function H(t,e,n,i,r,a){W.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new X(t,e,n,i,r,a)),this.mergeVertices()}function X(t,e,n,i,r,a){function o(t,e,n,i,r,a,o,m,v,g,y){for(var _=a/v,x=o/g,b=a/2,w=o/2,M=m/2,S=v+1,A=g+1,T=0,P=0,L=new c,E=0;E<A;E++)for(var O=E*x-w,C=0;C<S;C++){var F=C*_-b;L[t]=F*i,L[e]=O*r,L[n]=M,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=m>0?1:-1,h.push(L.x,L.y,L.z),f.push(C/v),f.push(1-E/g),T+=1}for(var I=0;I<g;I++)for(var N=0;N<v;N++){var D=p+N+S*I,R=p+N+S*(I+1),k=p+(N+1)+S*(I+1),z=p+(N+1)+S*I;u.push(D,R,z),u.push(R,k,z),P+=6}s.addGroup(d,P,y),d+=P,p+=T}void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=1),B.call(this),
this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);var u=[],l=[],h=[],f=[],p=0,d=0;o("z","y","x",-1,-1,n,e,t,a,r,0),o("z","y","x",1,-1,n,e,-t,a,r,1),o("x","z","y",1,1,t,n,e,i,a,2),o("x","z","y",1,-1,t,n,-e,i,a,3),o("x","y","z",1,-1,t,e,n,i,r,4),o("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(u),this.setAttribute("position",new R(l,3)),this.setAttribute("normal",new R(h,3)),this.setAttribute("uv",new R(f,2))}function Y(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function q(t){for(var e={},n=0;n<t.length;n++){var i=Y(t[n]);for(var r in i)e[r]=i[r]}return e}function Q(t){T.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=bf,this.fragmentShader=wf,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes,this.setValues(t))}function Z(){p.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l,this.projectionMatrixInverse=new l}function J(t,e,n,i){Z.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function $(t,e,n){if(p.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget===!0){this.renderTarget=n;var i=new J(Mf,Sf,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new c(1,0,0)),this.add(i);var r=new J(Mf,Sf,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new c((-1),0,0)),this.add(r);var a=new J(Mf,Sf,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new c(0,1,0)),this.add(a);var o=new J(Mf,Sf,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new c(0,(-1),0)),this.add(o);var s=new J(Mf,Sf,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new c(0,0,1)),this.add(s);var u=new J(Mf,Sf,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new c(0,0,(-1))),this.add(u),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var c=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(l),t.xr.enabled=c},this.clear=function(t,e,i,r){for(var a=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(n,o),t.clear(e,i,r);t.setRenderTarget(a)}}}function K(t,e,n){Number.isInteger(e)&&(e=n),o.call(this,t,t,e)}function tt(t,e,n,i,a,o,s,u,c,l,h,f){r.call(this,null,o,s,u,c,l,i,a,h,f),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:cu,this.minFilter=void 0!==l?l:cu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}function et(t,e,n,i,r,a){this.planes=[void 0!==t?t:new _,void 0!==e?e:new _,void 0!==n?n:new _,void 0!==i?i:new _,void 0!==r?r:new _,void 0!==a?a:new _]}function nt(){function t(n,a){i(n,a),r=e.requestAnimationFrame(t)}var e=null,n=!1,i=null,r=null;return{start:function(){n!==!0&&null!==i&&(r=e.requestAnimationFrame(t),n=!0)},stop:function(){e.cancelAnimationFrame(r),n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function it(t,e){function n(e,n){var i=e.array,r=e.usage,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array||(i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121)),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function i(e,n,i){var r=n.array,a=n.updateRange;t.bindBuffer(i,e),a.count===-1?t.bufferSubData(i,0,r):(s?t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r,a.offset,a.count):t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),u.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=u.get(e);n&&(t.deleteBuffer(n.buffer),u["delete"](e))}function o(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var r=u.get(t);void 0===r?u.set(t,n(t,e)):r.version<t.version&&(i(r.buffer,t,e),r.version=t.version)}var s=e.isWebGL2,u=new WeakMap;return{get:r,remove:a,update:o}}function rt(t,e,n,i){W.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new at(t,e,n,i)),this.mergeVertices()}function at(t,e,n,i){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},t=t||1,e=e||1;for(var r=t/2,a=e/2,o=Math.floor(n)||1,s=Math.floor(i)||1,u=o+1,c=s+1,l=t/o,h=e/s,f=[],p=[],d=[],m=[],v=0;v<c;v++)for(var g=v*h-a,y=0;y<u;y++){var _=y*l-r;p.push(_,-g,0),d.push(0,0,1),m.push(y/o),m.push(1-v/s)}for(var x=0;x<s;x++)for(var b=0;b<o;b++){var w=b+u*x,M=b+u*(x+1),S=b+1+u*(x+1),A=b+1+u*x;f.push(w,M,A),f.push(M,S,A)}this.setIndex(f),this.setAttribute("position",new R(p,3)),this.setAttribute("normal",new R(d,3)),this.setAttribute("uv",new R(m,2))}function ot(t,e,n,i){function r(e,i,r,p){var d=i.isScene===!0?i.background:null,m=t.xr,v=m.getSession&&m.getSession();if(v&&"additive"===v.environmentBlendMode&&(d=null),null===d?a(u,c):d&&d.isColor&&(a(d,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLCubeRenderTarget||d.mapping===ru)){void 0===s&&(s=new j(new X(1,1,1),new Q({name:"BackgroundCubeMaterial",uniforms:Y(Zd.cube.uniforms),vertexShader:Zd.cube.vertexShader,fragmentShader:Zd.cube.fragmentShader,side:ls,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(s));var g=d.isWebGLCubeRenderTarget?d.texture:d;s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,l===d&&h===g.version&&f===t.toneMapping||(s.material.needsUpdate=!0,l=d,h=g.version,f=t.toneMapping),e.unshift(s,s.geometry,s.material,0,0,null)}else d&&d.isTexture&&(void 0===o&&(o=new j(new at(2,2),new Q({name:"BackgroundMaterial",uniforms:Y(Zd.background.uniforms),vertexShader:Zd.background.vertexShader,fragmentShader:Zd.background.fragmentShader,side:cs,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=d,d.matrixAutoUpdate===!0&&d.updateMatrix(),o.material.uniforms.uvTransform.value.copy(d.matrix),l===d&&h===d.version&&f===t.toneMapping||(o.material.needsUpdate=!0,l=d,h=d.version,f=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null))}function a(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var o,s,u=new b(0),c=0,l=null,h=0,f=null;return{getClearColor:function(){return u},setClearColor:function(t,e){u.set(t),c=void 0!==e?e:1,a(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,a(u,c)},render:r}}function st(t,e,n,i){function r(e,i,r,a,s){var c=!1;if(A){var f=u(a,r,i);L!==f&&(L=f,o(L.object)),c=l(a),c&&h(a)}else{var p=i.wireframe===!0;L.geometry===a.id&&L.program===r.id&&L.wireframe===p||(L.geometry=a.id,L.program=r.id,L.wireframe=p,c=!0)}e.isInstancedMesh===!0&&(c=!0),null!==s&&n.update(s,34963),c&&(g(e,i,r,a),null!==s&&t.bindBuffer(34963,n.get(s).buffer))}function a(){return i.isWebGL2?t.createVertexArray():S.createVertexArrayOES()}function o(e){return i.isWebGL2?t.bindVertexArray(e):S.bindVertexArrayOES(e)}function s(e){return i.isWebGL2?t.deleteVertexArray(e):S.deleteVertexArrayOES(e)}function u(t,e,n){var i=n.wireframe===!0,r=T[t.id];void 0===r&&(r={},T[t.id]=r);var o=r[e.id];void 0===o&&(o={},r[e.id]=o);var s=o[i];return void 0===s&&(s=c(a()),o[i]=s),s}function c(t){for(var e=[],n=[],i=[],r=0;r<M;r++)e[r]=0,n[r]=0,i[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{}}}function l(t){var e=L.attributes,n=t.attributes;if(Object.keys(e).length!==Object.keys(n).length)return!0;for(var i in n){var r=e[i],a=n[i];if(r.attribute!==a)return!0;if(r.data!==a.data)return!0}return!1}function h(t){var e={},n=t.attributes;for(var i in n){var r=n[i],a={};a.attribute=r,r.data&&(a.data=r.data),e[i]=a}L.attributes=e}function f(){for(var t=L.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function p(t){d(t,0)}function d(n,r){var a=L.newAttributes,o=L.enabledAttributes,s=L.attributeDivisors;if(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r){var u=i.isWebGL2?t:e.get("ANGLE_instanced_arrays");u[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function m(){for(var e=L.newAttributes,n=L.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function v(e,n,r,a,o,s){i.isWebGL2!==!0||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,a,o,s):t.vertexAttribIPointer(e,n,r,o,s)}function g(r,a,o,s){if(i.isWebGL2!==!1||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){f();var u=s.attributes,c=o.getAttributes(),l=a.defaultAttributeValues;for(var h in c){var g=c[h];if(g>=0){var y=u[h];if(void 0!==y){var _=y.normalized,x=y.itemSize,b=n.get(y);if(void 0===b)continue;var w=b.buffer,M=b.type,S=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var A=y.data,T=A.stride,P=y.offset;A&&A.isInstancedInterleavedBuffer?(d(g,A.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)):p(g),t.bindBuffer(34962,w),v(g,x,M,_,T*S,P*S)}else y.isInstancedBufferAttribute?(d(g,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(g),t.bindBuffer(34962,w),v(g,x,M,_,0,0)}else if("instanceMatrix"===h){var L=n.get(r.instanceMatrix);if(void 0===L)continue;var E=L.buffer,O=L.type;d(g+0,1),d(g+1,1),d(g+2,1),d(g+3,1),t.bindBuffer(34962,E),t.vertexAttribPointer(g+0,4,O,!1,64,0),t.vertexAttribPointer(g+1,4,O,!1,64,16),t.vertexAttribPointer(g+2,4,O,!1,64,32),t.vertexAttribPointer(g+3,4,O,!1,64,48)}else if(void 0!==l){var C=l[h];if(void 0!==C)switch(C.length){case 2:t.vertexAttrib2fv(g,C);break;case 3:t.vertexAttrib3fv(g,C);break;case 4:t.vertexAttrib4fv(g,C);break;default:t.vertexAttrib1fv(g,C)}}}}m()}}function y(){b();for(var t in T){var e=T[t];for(var n in e){var i=e[n];for(var r in i)s(i[r].object),delete i[r];delete e[n]}delete T[t]}}function _(t){if(void 0!==T[t.id]){var e=T[t.id];for(var n in e){var i=e[n];for(var r in i)s(i[r].object),delete i[r];delete e[n]}delete T[t.id]}}function x(t){for(var e in T){var n=T[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)s(i[r].object),delete i[r];delete n[t.id]}}}function b(){w(),L!==P&&(L=P,o(L.object))}function w(){P.geometry=null,P.program=null,P.wireframe=!1}var M=t.getParameter(34921),S=i.isWebGL2?null:e.get("OES_vertex_array_object"),A=i.isWebGL2||null!==S,T={},P=c(null),L=P;return{setup:r,reset:b,resetDefaultState:w,dispose:y,releaseStatesOfGeometry:_,releaseStatesOfProgram:x,initAttributes:f,enableAttribute:p,disableUnusedAttributes:m}}function ut(t,e,n,i){function r(t){s=t}function a(e,i){t.drawArrays(s,e,i),n.update(i,s,1)}function o(i,r,a){if(0!==a){var o,c;if(u)o=t,c="drawArraysInstanced";else if(o=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===o)return;o[c](s,i,r,a),n.update(r,s,a)}}var s,u=i.isWebGL2;this.setMode=r,this.render=a,this.renderInstances=o}function ct(t,e,n){function i(){if(void 0!==a)return a;var n=e.get("EXT_texture_filter_anisotropic");return a=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a,o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",u=r(s);u!==s&&(s=u);var c=n.logarithmicDepthBuffer===!0,l=t.getParameter(34930),h=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),y=h>0,_=o||!!e.get("OES_texture_float"),x=y&&_,b=o?t.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:x,maxSamples:b}}function lt(){function t(){l.value!==r&&(l.value=r,l.needsUpdate=a>0),n.numPlanes=a,n.numIntersection=0}function e(t,e,i,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,r!==!0||null===o){var s=i+4*a,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===o||o.length<s)&&(o=new Float32Array(s));for(var f=0,p=i;f!==a;++f,p+=4)u.copy(t[f]).applyMatrix4(h,c),u.normal.toArray(o,p),o[p+3]=u.constant}l.value=o,l.needsUpdate=!0}return n.numPlanes=a,n.numIntersection=0,o}var n=this,r=null,a=0,o=!1,s=!1,u=new _,c=new i,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,i){var s=0!==t.length||n||0!==a||o;return o=n,r=e(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,i,u,c,h,f){if(!o||null===n||0===n.length||s&&!u)s?e(null):t();else{var p=s?0:a,d=4*p,m=h.clippingState||null;l.value=m,m=e(n,c,d,f);for(var v=0;v!==d;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=p}}}function ht(t){var e={};return{has:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,!!i},get:function(t){return!this.has(t),e[t]}}}function ft(t,e,n,i){function r(t){var a=t.target,o=c.get(a);null!==o.index&&e.remove(o.index);for(var s in o.attributes)e.remove(o.attributes[s]);a.removeEventListener("dispose",r),c["delete"](a);var u=l.get(o);u&&(e.remove(u),l["delete"](o)),i.releaseStatesOfGeometry(a),a.isInstancedBufferGeometry===!0&&delete a._maxInstanceCount,n.memory.geometries--}function a(t,e){var i=c.get(e);return i?i:(e.addEventListener("dispose",r),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new B).setFromObject(t)),i=e._bufferGeometry),c.set(e,i),n.memory.geometries++,i)}function o(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var a in r)for(var o=r[a],s=0,u=o.length;s<u;s++)e.update(o[s],34962)}function s(t){var n=[],i=t.index,r=t.attributes.position,a=0;if(null!==i){var o=i.array;a=i.version;for(var s=0,u=o.length;s<u;s+=3){var c=o[s+0],h=o[s+1],f=o[s+2];n.push(c,h,h,f,f,c)}}else{var p=r.array;a=r.version;for(var d=0,m=p.length/3-1;d<m;d+=3){var v=d+0,g=d+1,y=d+2;n.push(v,g,g,y,y,v)}}var _=new(U(n)>65535?D:I)(n,1);_.version=a;var x=l.get(t);x&&e.remove(x),l.set(t,_)}function u(t){var e=l.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return l.get(t)}var c=new WeakMap,l=new WeakMap;return{get:a,update:o,getWireframeAttribute:u}}function pt(t,e,n,i){function r(t){u=t}function a(t){c=t.type,l=t.bytesPerElement}function o(e,i){t.drawElements(u,i,c,e*l),n.update(i,u,1)}function s(i,r,a){if(0!==a){var o,s;if(h)o=t,s="drawElementsInstanced";else if(o=e.get("ANGLE_instanced_arrays"),s="drawElementsInstancedANGLE",null===o)return;o[s](u,r,c,i*l,a),n.update(r,u,a)}}var u,c,l,h=i.isWebGL2;this.setMode=r,this.setIndex=a,this.render=o,this.renderInstances=s}function dt(t){function e(t,e,n){switch(r.calls++,e){case 4:r.triangles+=n*(t/3);break;case 1:r.lines+=n*(t/2);break;case 3:r.lines+=n*(t-1);break;case 2:r.lines+=n*t;break;case 0:r.points+=n*t}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:e}}function mt(t,e){return t[0]-e[0]}function vt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gt(t){function e(e,a,o,s){var u=e.morphTargetInfluences,c=void 0===u?0:u.length,l=n[a.id];if(void 0===l){l=[];for(var h=0;h<c;h++)l[h]=[h,0];n[a.id]=l}for(var f=0;f<c;f++){var p=l[f];p[0]=f,p[1]=u[f]}l.sort(vt);for(var d=0;d<8;d++)d<c&&l[d][1]?(r[d][0]=l[d][0],r[d][1]=l[d][1]):(r[d][0]=Number.MAX_SAFE_INTEGER,r[d][1]=0);r.sort(mt);for(var m=o.morphTargets&&a.morphAttributes.position,v=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var _=r[y],x=_[0],b=_[1];x!==Number.MAX_SAFE_INTEGER&&b?(m&&a.getAttribute("morphTarget"+y)!==m[x]&&a.setAttribute("morphTarget"+y,m[x]),v&&a.getAttribute("morphNormal"+y)!==v[x]&&a.setAttribute("morphNormal"+y,v[x]),i[y]=b,g+=b):(m&&void 0!==a.getAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),v&&void 0!==a.getAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),i[y]=0)}var w=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(t,"morphTargetBaseInfluence",w),s.getUniforms().setValue(t,"morphTargetInfluences",i)}for(var n={},i=new Float32Array(8),r=[],a=0;a<8;a++)r[a]=[a,0];return{update:e}}function yt(t,e,n,i){function r(t){var r=i.render.frame,a=t.geometry,s=e.get(t,a);return o.get(s)!==r&&(a.isGeometry&&s.updateFromObject(t),e.update(s),o.set(s,r)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s}function a(){o=new WeakMap}var o=new WeakMap;return{update:r,dispose:a}}function _t(t,e,n,i,a,o,s,u,c,l){t=void 0!==t?t:[],e=void 0!==e?e:tu,s=void 0!==s?s:Fu,r.call(this,t,e,n,i,a,o,s,u,c,l),this.flipY=!1}function xt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=cu,this.minFilter=cu,this.wrapR=su,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function bt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=cu,this.minFilter=cu,this.wrapR=su,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function wt(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=em[r];if(void 0===a&&(a=new Float32Array(r),em[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Mt(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function St(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function At(t,e){var n=nm[e];void 0===n&&(n=new Int32Array(e),nm[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Tt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Pt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mt(n,e))return;t.uniform2fv(this.addr,e),St(n,e)}}function Lt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mt(n,e))return;t.uniform3fv(this.addr,e),St(n,e)}}function Et(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mt(n,e))return;t.uniform4fv(this.addr,e),St(n,e)}}function Ot(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;am.set(i),t.uniformMatrix2fv(this.addr,!1,am),St(n,i)}}function Ct(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;rm.set(i),t.uniformMatrix3fv(this.addr,!1,rm),St(n,i)}}function Ft(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;im.set(i),t.uniformMatrix4fv(this.addr,!1,im),St(n,i)}}function It(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Jd,r)}function Nt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||$d,r)}function Dt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Kd,r)}function Rt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||tm,r)}function kt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function zt(t,e){var n=this.cache;Mt(n,e)||(t.uniform2iv(this.addr,e),St(n,e))}function Ut(t,e){var n=this.cache;Mt(n,e)||(t.uniform3iv(this.addr,e),St(n,e))}function Bt(t,e){var n=this.cache;Mt(n,e)||(t.uniform4iv(this.addr,e),St(n,e))}function jt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Gt(t){switch(t){case 5126:return Tt;case 35664:return Pt;case 35665:return Lt;case 35666:return Et;case 35674:return Ot;case 35675:return Ct;case 35676:return Ft;case 5124:case 35670:return kt;case 35667:case 35671:return zt;case 35668:case 35672:return Ut;case 35669:case 35673:return Bt;case 5125:return jt;case 35678:case 36198:case 36298:case 36306:case 35682:return It;case 35679:case 36299:case 36307:return Dt;case 35680:case 36300:case 36308:case 36293:return Rt;case 36289:case 36303:case 36311:case 36292:return Nt}}function Vt(t,e){t.uniform1fv(this.addr,e)}function Wt(t,e){t.uniform1iv(this.addr,e)}function Ht(t,e){t.uniform2iv(this.addr,e)}function Xt(t,e){t.uniform3iv(this.addr,e)}function Yt(t,e){t.uniform4iv(this.addr,e)}function qt(t,e){var n=wt(e,this.size,2);t.uniform2fv(this.addr,n)}function Qt(t,e){var n=wt(e,this.size,3);t.uniform3fv(this.addr,n)}function Zt(t,e){var n=wt(e,this.size,4);t.uniform4fv(this.addr,n)}function Jt(t,e){var n=wt(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function $t(t,e){var n=wt(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Kt(t,e){var n=wt(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function te(t,e,n){var i=e.length,r=At(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||Jd,r[a])}function ee(t,e,n){var i=e.length,r=At(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||tm,r[a])}function ne(t){switch(t){case 5126:return Vt;case 35664:return qt;case 35665:return Qt;case 35666:return Zt;case 35674:return Jt;case 35675:return $t;case 35676:return Kt;case 5124:case 35670:return Wt;case 35667:case 35671:return Ht;case 35668:case 35672:return Xt;case 35669:case 35673:return Yt;case 35678:case 36198:case 36298:case 36306:case 35682:return te;case 35680:case 36300:case 36308:case 36293:return ee}}function ie(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Gt(e.type)}function re(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=ne(e.type)}function ae(t){this.id=t,this.seq=[],this.map={}}function oe(t,e){t.seq.push(e),t.map[e.id]=e}function se(t,e,n){var i=t.name,r=i.length;for(om.lastIndex=0;;){var a=om.exec(i),o=om.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s=0|s),void 0===c||"["===c&&o+2===r){oe(n,void 0===c?new ie(s,t,e):new re(s,t,e));break}var l=n.map,h=l[s];void 0===h&&(h=new ae(s),oe(n,h)),n=h}}function ue(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name);se(r,a,this)}}function ce(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function le(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function he(t){switch(t){case Hc:return["Linear","( value )"];case Xc:return["sRGB","( value )"];case qc:return["RGBE","( value )"];case Zc:return["RGBM","( value, 7.0 )"];case Jc:return["RGBM","( value, 16.0 )"];case $c:return["RGBD","( value, 256.0 )"];case Yc:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Qc:return["LogLuv","( value )"];default:return["Linear","( value )"]}}function fe(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";var a=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+le(a)}function pe(t,e){var n=he(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function de(t,e){var n=he(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function me(t,e){var n;switch(e){case qs:n="Linear";break;case Qs:n="Reinhard";break;case Zs:n="OptimizedCineon";break;case Js:n="ACESFilmic";break;case $s:n="Custom";break;default:n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ve(t){var e=[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(_e).join("\n")}function ge(t){var e=[];for(var n in t){var i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join("\n")}function ye(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r),o=a.name;n[o]=t.getAttribLocation(e,o)}return n}function _e(t){return""!==t}function xe(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function be(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function we(t){return t.replace(um,Me)}function Me(t,e){var n=Qd[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return we(n)}function Se(t){return t.replace(lm,Te).replace(cm,Ae)}function Ae(t,e,n,i){return Te(t,e,n,i)}function Te(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Pe(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Le(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===os?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===ss?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===us&&(e="SHADOWMAP_TYPE_VSM"),e}function Ee(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case tu:case eu:e="ENVMAP_TYPE_CUBE";break;case ru:case au:e="ENVMAP_TYPE_CUBE_UV";break;case nu:case iu:e="ENVMAP_TYPE_EQUIREC"}return e}function Oe(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case eu:case iu:case au:e="ENVMAP_MODE_REFRACTION"}return e}function Ce(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Ws:e="ENVMAP_BLENDING_MULTIPLY";break;case Hs:e="ENVMAP_BLENDING_MIX";break;case Xs:e="ENVMAP_BLENDING_ADD"}return e}function Fe(t,e,n,i){var r,a,o=t.getContext(),s=n.defines,u=n.vertexShader,c=n.fragmentShader,l=Le(n),h=Ee(n),f=Oe(n),p=Ce(n),d=t.gammaFactor>0?t.gammaFactor:1,m=n.isWebGL2?"":ve(n),v=ge(s),g=o.createProgram();n.isRawShaderMaterial?(r=[v].filter(_e).join("\n"),r.length>0&&(r+="\n"),a=[m,v].filter(_e).join("\n"),a.length>0&&(a+="\n")):(r=[Pe(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_e).join("\n"),
a=[m,Pe(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ys?"#define TONE_MAPPING":"",n.toneMapping!==Ys?Qd.tonemapping_pars_fragment:"",n.toneMapping!==Ys?me("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Qd.encodings_pars_fragment,n.map?pe("mapTexelToLinear",n.mapEncoding):"",n.matcap?pe("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?pe("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?pe("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?pe("lightMapTexelToLinear",n.lightMapEncoding):"",de("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(_e).join("\n")),u=we(u),u=xe(u,n),u=be(u,n),c=we(c),c=xe(c,n),c=be(c,n),u=Se(u),c=Se(c),n.isWebGL2&&!n.isRawShaderMaterial&&(r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#version 300 es\n","#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y=r+u,_=a+c,x=ce(o,35633,y),b=ce(o,35632,_);if(o.attachShader(g,x),o.attachShader(g,b),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),t.debug.checkShaderErrors){var w=o.getProgramInfoLog(g).trim(),M=o.getShaderInfoLog(x).trim(),S=o.getShaderInfoLog(b).trim(),A=!0,T=!0;if(o.getProgramParameter(g,35714)===!1){A=!1;fe(o,x,"vertex"),fe(o,b,"fragment")}else""!==w||""!==M&&""!==S||(T=!1);T&&(this.diagnostics={runnable:A,programLog:w,vertexShader:{log:M,prefix:r},fragmentShader:{log:S,prefix:a}})}o.deleteShader(x),o.deleteShader(b);var P;this.getUniforms=function(){return void 0===P&&(P=new ue(o,g)),P};var L;return this.getAttributes=function(){return void 0===L&&(L=ye(o,g)),L},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=sm++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=b,this}function Ie(t,e,n,i){function r(t){var e=t.skeleton,n=e.bones;if(d)return 1024;var i=m,r=Math.floor((i-20)/4),a=Math.min(r,n.length);return a<n.length?0:a}function a(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(e=t.texture.encoding):e=Hc,e}function o(i,o,s,u,c,l,h){var m=u.fog,_=i.isMeshStandardMaterial?u.environment:null,x=i.envMap||_,b=y[i.type],w=h.isSkinnedMesh?r(h):0;null!==i.precision&&(g=n.getMaxPrecision(i.precision),g!==i.precision);var M,S;if(b){var A=Zd[b];M=A.vertexShader,S=A.fragmentShader}else M=i.vertexShader,S=i.fragmentShader;var T=t.getRenderTarget(),P={isWebGL2:f,shaderID:b,shaderName:i.type,vertexShader:M,fragmentShader:S,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:g,instancing:h.isInstancedMesh===!0,supportsVertexTextures:v,outputEncoding:null!==T?a(T.texture):t.outputEncoding,map:!!i.map,mapEncoding:a(i.map),matcap:!!i.matcap,matcapEncoding:a(i.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:a(x),envMapCubeUV:!!x&&(x.mapping===ru||x.mapping===au),lightMap:!!i.lightMap,lightMapEncoding:a(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:a(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===nl,tangentSpaceNormalMap:i.normalMapType===el,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!m,useFog:i.fog,fogExp2:m&&m.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:p,skinning:i.skinning&&w>0,maxBones:w,useVertexTexture:d,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:c,numClipIntersection:l,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&s.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:Ys,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===hs,flipSided:i.side===ls,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:f||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||null!==e.get("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()};return P}function s(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);if(void 0===e.isRawShaderMaterial){for(var r=0;r<_.length;r++)n.push(e[_[r]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()}function u(t){var e,n=y[t.type];if(n){var i=Zd[n];e=xf.clone(i.uniforms)}else e=t.uniforms;return e}function c(e,n){for(var r,a=0,o=h.length;a<o;a++){var s=h[a];if(s.cacheKey===n){r=s,++r.usedTimes;break}}return void 0===r&&(r=new Fe(t,n,e,i),h.push(r)),r}function l(t){if(0===--t.usedTimes){var e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}}var h=[],f=n.isWebGL2,p=n.logarithmicDepthBuffer,d=n.floatVertexTextures,m=n.maxVertexUniforms,v=n.vertexTextures,g=n.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},_=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];return{getParameters:o,getProgramCacheKey:s,getUniforms:u,acquireProgram:c,releaseProgram:l,programs:h}}function Ne(){function t(t){var e=r.get(t);return void 0===e&&(e={},r.set(t,e)),e}function e(t){r["delete"](t)}function n(t,e,n){r.get(t)[e]=n}function i(){r=new WeakMap}var r=new WeakMap;return{get:t,remove:e,update:n,dispose:i}}function De(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Re(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ke(t){function e(){u=0,c.length=0,l.length=0}function n(e,n,i,r,a,o){var c=s[u],l=t.get(i);return void 0===c?(c={id:e.id,object:e,geometry:n,material:i,program:l.program||h,groupOrder:r,renderOrder:e.renderOrder,z:a,group:o},s[u]=c):(c.id=e.id,c.object=e,c.geometry=n,c.material=i,c.program=l.program||h,c.groupOrder=r,c.renderOrder=e.renderOrder,c.z=a,c.group=o),u++,c}function i(t,e,i,r,a,o){var s=n(t,e,i,r,a,o);(i.transparent===!0?l:c).push(s)}function r(t,e,i,r,a,o){var s=n(t,e,i,r,a,o);(i.transparent===!0?l:c).unshift(s)}function a(t,e){c.length>1&&c.sort(t||De),l.length>1&&l.sort(e||Re)}function o(){for(var t=u,e=s.length;t<e;t++){var n=s[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}}var s=[],u=0,c=[],l=[],h={id:-1};return{opaque:c,transparent:l,init:e,push:i,unshift:r,finish:o,sort:a}}function ze(t){function e(t){var n=t.target;n.removeEventListener("dispose",e),r["delete"](n)}function n(n,i){var a,o=r.get(n);return void 0===o?(a=new ke(t),r.set(n,new WeakMap),r.get(n).set(i,a),n.addEventListener("dispose",e)):(a=o.get(i),void 0===a&&(a=new ke(t),o.set(i,a))),a}function i(){r=new WeakMap}var r=new WeakMap;return{get:n,dispose:i}}function Ue(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new c,color:new b};break;case"SpotLight":n={position:new c,direction:new c,color:new b,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new c,color:new b,distance:0,decay:0};break;case"HemisphereLight":n={direction:new c,skyColor:new b,groundColor:new b};break;case"RectAreaLight":n={color:new b,position:new c,halfWidth:new c,halfHeight:new c}}return t[e.id]=n,n}}}function Be(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}function je(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ge(){function t(t,r,u){for(var c=0,l=0,h=0,f=0;f<9;f++)i.probe[f].set(0,0,0);var p=0,d=0,m=0,v=0,g=0,y=0,_=0,x=0,b=u.matrixWorldInverse;t.sort(je);for(var w=0,M=t.length;w<M;w++){var S=t[w],A=S.color,T=S.intensity,P=S.distance,L=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)c+=A.r*T,l+=A.g*T,h+=A.b*T;else if(S.isLightProbe)for(var E=0;E<9;E++)i.probe[E].addScaledVector(S.sh.coefficients[E],T);else if(S.isDirectionalLight){var O=e.get(S);if(O.color.copy(S.color).multiplyScalar(S.intensity),O.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(b),S.castShadow){var C=S.shadow,F=n.get(S);F.shadowBias=C.bias,F.shadowNormalBias=C.normalBias,F.shadowRadius=C.radius,F.shadowMapSize=C.mapSize,i.directionalShadow[p]=F,i.directionalShadowMap[p]=L,i.directionalShadowMatrix[p]=S.shadow.matrix,y++}i.directional[p]=O,p++}else if(S.isSpotLight){var I=e.get(S);if(I.position.setFromMatrixPosition(S.matrixWorld),I.position.applyMatrix4(b),I.color.copy(A).multiplyScalar(T),I.distance=P,I.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),I.direction.sub(a),I.direction.transformDirection(b),I.coneCos=Math.cos(S.angle),I.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),I.decay=S.decay,S.castShadow){var N=S.shadow,D=n.get(S);D.shadowBias=N.bias,D.shadowNormalBias=N.normalBias,D.shadowRadius=N.radius,D.shadowMapSize=N.mapSize,i.spotShadow[m]=D,i.spotShadowMap[m]=L,i.spotShadowMatrix[m]=S.shadow.matrix,x++}i.spot[m]=I,m++}else if(S.isRectAreaLight){var R=e.get(S);R.color.copy(A).multiplyScalar(T),R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(b),s.identity(),o.copy(S.matrixWorld),o.premultiply(b),s.extractRotation(o),R.halfWidth.set(.5*S.width,0,0),R.halfHeight.set(0,.5*S.height,0),R.halfWidth.applyMatrix4(s),R.halfHeight.applyMatrix4(s),i.rectArea[v]=R,v++}else if(S.isPointLight){var k=e.get(S);if(k.position.setFromMatrixPosition(S.matrixWorld),k.position.applyMatrix4(b),k.color.copy(S.color).multiplyScalar(S.intensity),k.distance=S.distance,k.decay=S.decay,S.castShadow){var z=S.shadow,U=n.get(S);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,U.shadowCameraNear=z.camera.near,U.shadowCameraFar=z.camera.far,i.pointShadow[d]=U,i.pointShadowMap[d]=L,i.pointShadowMatrix[d]=S.shadow.matrix,_++}i.point[d]=k,d++}else if(S.isHemisphereLight){var B=e.get(S);B.direction.setFromMatrixPosition(S.matrixWorld),B.direction.transformDirection(b),B.direction.normalize(),B.skyColor.copy(S.color).multiplyScalar(T),B.groundColor.copy(S.groundColor).multiplyScalar(T),i.hemi[g]=B,g++}}i.ambient[0]=c,i.ambient[1]=l,i.ambient[2]=h;var j=i.hash;j.directionalLength===p&&j.pointLength===d&&j.spotLength===m&&j.rectAreaLength===v&&j.hemiLength===g&&j.numDirectionalShadows===y&&j.numPointShadows===_&&j.numSpotShadows===x||(i.directional.length=p,i.spot.length=m,i.rectArea.length=v,i.point.length=d,i.hemi.length=g,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=_,i.spotShadowMatrix.length=x,j.directionalLength=p,j.pointLength=d,j.spotLength=m,j.rectAreaLength=v,j.hemiLength=g,j.numDirectionalShadows=y,j.numPointShadows=_,j.numSpotShadows=x,i.version=hm++)}for(var e=new Ue,n=Be(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;r<9;r++)i.probe.push(new c);var a=new c,o=new l,s=new l;return{setup:t,state:i}}function Ve(){function t(){a.length=0,o.length=0}function e(t){a.push(t)}function n(t){o.push(t)}function i(t){r.setup(a,o,t)}var r=new Ge,a=[],o=[],s={lightsArray:a,shadowsArray:o,lights:r};return{init:t,state:s,setupLights:i,pushLight:e,pushShadow:n}}function We(){function t(e){var n=e.target;n.removeEventListener("dispose",t),i["delete"](n)}function e(e,n){var r;return i.has(e)===!1?(r=new Ve,i.set(e,new WeakMap),i.get(e).set(n,r),e.addEventListener("dispose",t)):i.get(e).has(n)===!1?(r=new Ve,i.get(e).set(n,r)):r=i.get(e).get(n),r}function n(){i=new WeakMap}var i=new WeakMap;return{get:e,dispose:n}}function He(t){T.call(this),this.type="MeshDepthMaterial",this.depthPacking=Kc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Xe(t){T.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new c,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Ye(t,e,i){function r(n,i){var r=e.update(w);_.uniforms.shadow_pass.value=n.map.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,_,w,null),x.uniforms.shadow_pass.value=n.mapPass.texture,x.uniforms.resolution.value=n.mapSize,x.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,x,w,null)}function s(t,e,n){var i=t<<0|e<<1|n<<2,r=m[i];return void 0===r&&(r=new He({depthPacking:tl,morphTargets:t,skinning:e}),m[i]=r),r}function u(t,e,n){var i=t<<0|e<<1|n<<2,r=v[i];return void 0===r&&(r=new Xe({morphTargets:t,skinning:e}),v[i]=r),r}function c(e,n,i,r,a,o,c){var l=null,h=s,f=e.customDepthMaterial;if(r.isPointLight===!0&&(h=u,f=e.customDistanceMaterial),void 0===f){var p=!1;i.morphTargets===!0&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var d=!1;e.isSkinnedMesh===!0&&i.skinning===!0&&(d=!0);var m=e.isInstancedMesh===!0;l=h(p,d,m)}else l=f;if(t.localClippingEnabled&&i.clipShadows===!0&&0!==i.clippingPlanes.length){var v=l.uuid,_=i.uuid,x=g[v];void 0===x&&(x={},g[v]=x);var b=x[_];void 0===b&&(b=l.clone(),x[_]=b),l=b}return l.visible=i.visible,l.wireframe=i.wireframe,c===us?l.side=null!==i.shadowSide?i.shadowSide:i.side:l.side=null!==i.shadowSide?i.shadowSide:y[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,r.isPointLight===!0&&l.isMeshDistanceMaterial===!0&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=o),l}function l(n,i,r,a,o){if(n.visible!==!1){var s=n.layers.test(i.layers);if(s&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===us)&&(!n.frustumCulled||h.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);var u=e.update(n),f=n.material;if(Array.isArray(f))for(var p=u.groups,d=0,m=p.length;d<m;d++){var v=p[d],g=f[v.materialIndex];if(g&&g.visible){var y=c(n,u,g,a,r.near,r.far,o);t.renderBufferDirect(r,null,u,y,n,v)}}else if(f.visible){var _=c(n,u,f,a,r.near,r.far,o);t.renderBufferDirect(r,null,u,_,n,null)}}for(var x=n.children,b=0,w=x.length;b<w;b++)l(x[b],i,r,a,o)}}var h=new et,f=new n,p=new n,d=new a,m=[],v=[],g={},y={0:ls,1:cs,2:hs},_=new Q({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:pm,fragmentShader:fm}),x=_.clone();x.defines.HORIZONAL_PASS=1;var b=new B;b.setAttribute("position",new L(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var w=new j(b,_),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=os,this.render=function(e,n,a){if(M.enabled!==!1&&(M.autoUpdate!==!1||M.needsUpdate!==!1)&&0!==e.length){var s=t.getRenderTarget(),u=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),m=t.state;m.setBlending(ds),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var v=0,g=e.length;v<g;v++){var y=e[v],_=y.shadow;if((_.autoUpdate!==!1||_.needsUpdate!==!1)&&void 0!==_){f.copy(_.mapSize);var x=_.getFrameExtents();if(f.multiply(x),p.copy(_.mapSize),(f.x>i||f.y>i)&&(f.x>i&&(p.x=Math.floor(i/x.x),f.x=p.x*x.x,_.mapSize.x=p.x),f.y>i&&(p.y=Math.floor(i/x.y),f.y=p.y*x.y,_.mapSize.y=p.y)),null===_.map&&!_.isPointLightShadow&&this.type===us){var b={minFilter:du,magFilter:du,format:Iu,stencilBuffer:!1};_.map=new o(f.x,f.y,b),_.map.texture.name=y.name+".shadowMap",_.mapPass=new o(f.x,f.y,b),_.camera.updateProjectionMatrix()}if(null===_.map){var w={minFilter:cu,magFilter:cu,format:Iu,stencilBuffer:!1};_.map=new o(f.x,f.y,w),_.map.texture.name=y.name+".shadowMap",_.camera.updateProjectionMatrix()}t.setRenderTarget(_.map),t.clear();for(var S=_.getViewportCount(),A=0;A<S;A++){var T=_.getViewport(A);d.set(p.x*T.x,p.y*T.y,p.x*T.z,p.y*T.w),m.viewport(d),_.updateMatrices(y,A),h=_.getFrustum(),l(n,a,_.camera,y,this.type)}_.isPointLightShadow||this.type!==us||r(_,a),_.needsUpdate=!1}}M.needsUpdate=!1,t.setRenderTarget(s,u,c)}}}function qe(t,e,n){function i(){var e=!1,n=new a,i=null,r=new a(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){s===!0&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),r.equals(n)===!1&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function r(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?u(2929):c(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Rs:t.depthFunc(512);break;case ks:t.depthFunc(519);break;case zs:t.depthFunc(513);break;case Us:t.depthFunc(515);break;case Bs:t.depthFunc(514);break;case js:t.depthFunc(518);break;case Gs:t.depthFunc(516);break;case Vs:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function o(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,h=null;return{setTest:function(t){e||(t?u(2960):c(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&l===i||(t.stencilOp(e,n,i),o=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,h=null}}}function s(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}function u(e){C[e]!==!0&&(t.enable(e),C[e]=!0)}function c(e){C[e]!==!1&&(t.disable(e),C[e]=!1)}function l(e){return F!==e&&(t.useProgram(e),F=e,!0)}function h(e,n,i,r,a,o,s,l){if(e===ds)return void(I&&(c(3042),I=!1));if(I||(u(3042),I=!0),e===_s)a=a||n,o=o||i,s=s||r,n===D&&a===z||(t.blendEquationSeparate(nt[n],nt[a]),D=n,z=a),i===R&&r===k&&o===U&&s===B||(t.blendFuncSeparate(rt[i],rt[r],rt[o],rt[s]),R=i,k=r,U=o,B=s),N=e,j=null;else if(e!==N||l!==j){if(D===xs&&z===xs||(t.blendEquation(32774),D=xs,z=xs),l)switch(e){case ms:t.blendFuncSeparate(1,771,1,771);break;case vs:t.blendFunc(1,1);break;case gs:t.blendFuncSeparate(0,0,769,771);break;case ys:t.blendFuncSeparate(0,768,0,770)}else switch(e){case ms:t.blendFuncSeparate(770,771,1,771);break;case vs:t.blendFunc(770,1);break;case gs:t.blendFunc(0,769);break;case ys:t.blendFunc(0,768)}R=null,k=null,U=null,B=null,N=e,j=l}}function f(t,e){t.side===hs?c(2884):u(2884);var n=t.side===ls;e&&(n=!n),p(n),t.blending===ms&&t.transparent===!1?h(ds):h(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),E.setFunc(t.depthFunc),E.setTest(t.depthTest),E.setMask(t.depthWrite),L.setMask(t.colorWrite);var i=t.stencilWrite;O.setTest(i),i&&(O.setMask(t.stencilWriteMask),O.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),O.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),v(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function p(e){G!==e&&(e?t.frontFace(2304):t.frontFace(2305),G=e)}function d(e){e!==es?(u(2884),e!==V&&(e===ns?t.cullFace(1029):e===is?t.cullFace(1028):t.cullFace(1032))):c(2884),V=e}function m(e){e!==W&&(q&&t.lineWidth(e),W=e)}function v(e,n,i){e?(u(32823),H===n&&X===i||(t.polygonOffset(n,i),H=n,X=i)):c(32823)}function g(t){t?u(3089):c(3089)}function y(e){void 0===e&&(e=33984+Y-1),J!==e&&(t.activeTexture(e),J=e)}function _(e,n){null===J&&y();var i=$[J];void 0===i&&(i={type:void 0,texture:void 0},$[J]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||et[e]),i.type=e,i.texture=n)}function x(){var e=$[J];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function b(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){}}function w(){try{t.texImage2D.apply(t,arguments)}catch(e){}}function M(){try{t.texImage3D.apply(t,arguments)}catch(e){}}function S(e){K.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),K.copy(e))}function A(e){tt.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),tt.copy(e))}function T(){C={},J=null,$={},F=null,N=null,G=null,V=null,L.reset(),E.reset(),O.reset()}var P=n.isWebGL2,L=new i,E=new r,O=new o,C={},F=null,I=null,N=null,D=null,R=null,k=null,z=null,U=null,B=null,j=!1,G=null,V=null,W=null,H=null,X=null,Y=t.getParameter(35661),q=!1,Q=0,Z=t.getParameter(7938);Z.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL\ ([0-9])/.exec(Z)[1]),q=Q>=1):Z.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(Z)[1]),q=Q>=2);var J=null,$={},K=new a,tt=new a,et={};et[3553]=s(3553,3553,1),et[34067]=s(34067,34069,6),L.setClear(0,0,0,1),E.setClear(1),O.setClear(0),u(2929),E.setFunc(Us),p(!1),d(ns),u(2884),h(ds);var nt={};if(nt[xs]=32774,nt[bs]=32778,nt[ws]=32779,P)nt[Ms]=32775,nt[Ss]=32776;else{var it=e.get("EXT_blend_minmax");null!==it&&(nt[Ms]=it.MIN_EXT,nt[Ss]=it.MAX_EXT)}var rt={};return rt[As]=0,rt[Ts]=1,rt[Ps]=768,rt[Es]=770,rt[Ds]=776,rt[Is]=774,rt[Cs]=772,rt[Ls]=769,rt[Os]=771,rt[Ns]=775,rt[Fs]=773,{buffers:{color:L,depth:E,stencil:O},enable:u,disable:c,useProgram:l,setBlending:h,setMaterial:f,setFlipSided:p,setCullFace:d,setLineWidth:m,setPolygonOffset:v,setScissorTest:g,activeTexture:y,bindTexture:_,unbindTexture:x,compressedTexImage2D:b,texImage2D:w,texImage3D:M,scissor:S,viewport:A,reset:T}}function Qe(t,e,n,i,r,a,o){function s(t,e){return X?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||e===!0){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?Cl.floorPowerOfTwo:Math.floor,o=a(r*t.width),u=a(r*t.height);void 0===B&&(B=s(o,u));var c=n?s(o,u):B;c.width=o,c.height=u;var l=c.getContext("2d");return l.drawImage(t,0,0,o,u),c}return t}return t}function c(t){return Cl.isPowerOfTwo(t.width)&&Cl.isPowerOfTwo(t.height)}function l(t){return!j&&(t.wrapS!==su||t.wrapT!==su||t.minFilter!==cu&&t.minFilter!==du)}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==cu&&t.minFilter!==du}function f(e,n,r,a){t.generateMipmap(e);var o=i.get(n);o.__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function p(n,i,r){if(j===!1)return i;if(null!==n&&void 0!==t[n])return t[n];var a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function d(t){return t===cu||t===lu||t===fu?9728:9729}function m(t){var e=t.target;e.removeEventListener("dispose",m),g(e),e.isVideoTexture&&H["delete"](e),o.memory.textures--}function v(t){var e=t.target;e.removeEventListener("dispose",v),y(e),o.memory.textures--}function g(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function y(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}}function _(){q=0}function x(){var t=q;return q+=1,t}function b(t,e){var r=i.get(t);if(t.isVideoTexture&&k(t),t.version>0&&r.__version!==t.version){var a=t.image;if(void 0===a);else if(a.complete!==!1)return void L(r,t,e)}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function w(t,e){var r=i.get(t);return t.version>0&&r.__version!==t.version?void L(r,t,e):(n.activeTexture(33984+e),void n.bindTexture(35866,r.__webglTexture))}function M(t,e){var r=i.get(t);return t.version>0&&r.__version!==t.version?void L(r,t,e):(n.activeTexture(33984+e),void n.bindTexture(32879,r.__webglTexture))}function S(e,r){if(6===e.image.length){var o=i.get(e);if(e.version>0&&o.__version!==e.version){P(o,e),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),l=e.image[0]&&e.image[0].isDataTexture,d=[],m=0;m<6;m++)s||l?d[m]=l?e.image[m].image:e.image[m]:d[m]=u(e.image[m],!1,!0,G);var v=d[0],g=c(v)||j,y=a.convert(e.format),_=a.convert(e.type),x=p(e.internalFormat,y,_);T(34067,e,g);var b;if(s){for(var w=0;w<6;w++){b=d[w].mipmaps;for(var M=0;M<b.length;M++){var S=b[M];e.format!==Iu&&e.format!==Fu?null!==y&&n.compressedTexImage2D(34069+w,M,x,S.width,S.height,0,S.data):n.texImage2D(34069+w,M,x,S.width,S.height,0,y,_,S.data);
}}o.__maxMipLevel=b.length-1}else{b=e.mipmaps;for(var A=0;A<6;A++)if(l){n.texImage2D(34069+A,0,x,d[A].width,d[A].height,0,y,_,d[A].data);for(var L=0;L<b.length;L++){var E=b[L],O=E.image[A].image;n.texImage2D(34069+A,L+1,x,O.width,O.height,0,y,_,O.data)}}else{n.texImage2D(34069+A,0,x,y,_,d[A]);for(var C=0;C<b.length;C++){var F=b[C];n.texImage2D(34069+A,C+1,x,y,_,F.image[A])}}o.__maxMipLevel=b.length}h(e,g)&&f(34067,e,v.width,v.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function A(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function T(n,a,o){o?(t.texParameteri(n,10242,Q[a.wrapS]),t.texParameteri(n,10243,Q[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,Q[a.wrapR]),t.texParameteri(n,10240,Z[a.magFilter]),t.texParameteri(n,10241,Z[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS!==su||a.wrapT!==su,t.texParameteri(n,10240,d(a.magFilter)),t.texParameteri(n,10241,d(a.minFilter)),a.minFilter!==cu&&a.minFilter!==du);var s=e.get("EXT_texture_filter_anisotropic");if(s){if(a.type===Au&&null===e.get("OES_texture_float_linear"))return;if(a.type===Tu&&null===(j||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function P(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),o.memory.textures++)}function L(e,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),P(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var s=l(i)&&c(i.image)===!1,d=u(i.image,s,!1,V),m=c(d)||j,v=a.convert(i.format),g=a.convert(i.type),y=p(i.internalFormat,v,g);T(o,i,m);var _,x=i.mipmaps;if(i.isDepthTexture)y=6402,j?y=i.type===Au?36012:i.type===Su?33190:i.type===Ou?35056:33189:i.type===Au,i.format===ku&&6402===y&&i.type!==wu&&i.type!==Su&&(i.type=wu,g=a.convert(i.type)),i.format===zu&&6402===y&&(y=34041,i.type!==Ou&&(i.type=Ou,g=a.convert(i.type))),n.texImage2D(3553,0,y,d.width,d.height,0,v,g,null);else if(i.isDataTexture)if(x.length>0&&m){for(var b=0,w=x.length;b<w;b++)_=x[b],n.texImage2D(3553,b,y,_.width,_.height,0,v,g,_.data);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,d.width,d.height,0,v,g,d.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(var M=0,S=x.length;M<S;M++)_=x[M],i.format!==Iu&&i.format!==Fu?null!==v&&n.compressedTexImage2D(3553,M,y,_.width,_.height,0,_.data):n.texImage2D(3553,M,y,_.width,_.height,0,v,g,_.data);e.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,y,d.width,d.height,d.depth,0,v,g,d.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,y,d.width,d.height,d.depth,0,v,g,d.data),e.__maxMipLevel=0;else if(x.length>0&&m){for(var A=0,L=x.length;A<L;A++)_=x[A],n.texImage2D(3553,A,y,v,g,_);i.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,y,v,g,d),e.__maxMipLevel=0;h(i,m)&&f(o,i,d.width,d.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function E(e,r,o,s){var u=a.convert(r.texture.format),c=a.convert(r.texture.type),l=p(r.texture.internalFormat,u,c);n.texImage2D(s,0,l,r.width,r.height,0,u,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function O(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Au?r=36012:o.type===Su&&(r=33190));var s=R(n);t.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){var u=R(n);t.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var c=a.convert(n.texture.format),l=a.convert(n.texture.type),h=p(n.texture.internalFormat,c,l);if(i){var f=R(n);t.renderbufferStorageMultisample(36161,f,h,n.width,n.height)}else t.renderbufferStorage(36161,h,n.width,n.height)}t.bindRenderbuffer(36161,null)}function C(e,n){var r=n&&n.isWebGLCubeRenderTarget;if(r)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),b(n.depthTexture,0);var a=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ku)t.framebufferTexture2D(36160,36096,3553,a,0);else{if(n.depthTexture.format!==zu)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0)}}function F(e){var n=i.get(e),r=e.isWebGLCubeRenderTarget===!0;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),O(n.__webglDepthbuffer[a],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),O(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function I(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",v),s.__webglTexture=t.createTexture(),o.memory.textures++;var u=e.isWebGLCubeRenderTarget===!0,l=e.isWebGLMultisampleRenderTarget===!0,d=c(e)||j;if(!j||e.texture.format!==Fu||e.texture.type!==Au&&e.texture.type!==Tu||(e.texture.format=Iu),u){r.__webglFramebuffer=[];for(var m=0;m<6;m++)r.__webglFramebuffer[m]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),l&&j){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var g=a.convert(e.texture.format),y=a.convert(e.texture.type),_=p(e.texture.internalFormat,g,y),x=R(e);t.renderbufferStorageMultisample(36161,x,_,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),O(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}if(u){n.bindTexture(34067,s.__webglTexture),T(34067,e.texture,d);for(var b=0;b<6;b++)E(r.__webglFramebuffer[b],e,36064,34069+b);h(e.texture,d)&&f(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),T(3553,e.texture,d),E(r.__webglFramebuffer,e,36064,3553),h(e.texture,d)&&f(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&F(e)}function N(t){var e=t.texture,r=c(t)||j;if(h(e,r)){var a=t.isWebGLCubeRenderTarget?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(a,o),f(a,e,t.width,t.height),n.bindTexture(a,null)}}function D(e){if(e.isWebGLMultisampleRenderTarget&&j){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}}function R(t){return j&&t.isWebGLMultisampleRenderTarget?Math.min(W,t.samples):0}function k(t){var e=o.render.frame;H.get(t)!==e&&(H.set(t,e),t.update())}function z(t,e){t&&t.isWebGLRenderTarget&&(J===!1&&(J=!0),t=t.texture),b(t,e)}function U(t,e){t&&t.isWebGLCubeRenderTarget&&($===!1&&($=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?S(t,e):A(t,e)}var B,j=r.isWebGL2,G=(r.maxTextures,r.maxCubemapSize),V=r.maxTextureSize,W=r.maxSamples,H=new WeakMap,X=!1;try{X="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Y){}var q=0,Q={};Q[ou]=10497,Q[su]=33071,Q[uu]=33648;var Z={};Z[cu]=9728,Z[lu]=9984,Z[fu]=9986,Z[du]=9729,Z[mu]=9985,Z[gu]=9987;var J=!1,$=!1;this.allocateTextureUnit=x,this.resetTextureUnits=_,this.setTexture2D=b,this.setTexture2DArray=w,this.setTexture3D=M,this.setTextureCube=S,this.setTextureCubeDynamic=A,this.setupRenderTarget=I,this.updateRenderTargetMipmap=N,this.updateMultisampleRenderTarget=D,this.safeSetTexture2D=z,this.safeSetTextureCube=U}function Ze(t,e,n){function i(t){var n;if(t===_u)return 5121;if(t===Pu)return 32819;if(t===Lu)return 32820;if(t===Eu)return 33635;if(t===xu)return 5120;if(t===bu)return 5122;if(t===wu)return 5123;if(t===Mu)return 5124;if(t===Su)return 5125;if(t===Au)return 5126;if(t===Tu)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Cu)return 6406;if(t===Fu)return 6407;if(t===Iu)return 6408;if(t===Nu)return 6409;if(t===Du)return 6410;if(t===ku)return 6402;if(t===zu)return 34041;if(t===Uu)return 6403;if(t===Bu)return 36244;if(t===ju)return 33319;if(t===Gu)return 33320;if(t===Vu)return 36248;if(t===Wu)return 36249;if(t===Hu||t===Xu||t===Yu||t===qu){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Hu)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Xu)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Yu)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===qu)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Qu||t===Zu||t===Ju||t===$u){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===Qu)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Zu)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Ju)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===$u)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Ku)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===tc||t===ec)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===tc)return n.COMPRESSED_RGB8_ETC2;if(t===ec)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===nc||t===ic||t===rc||t===ac||t===oc||t===sc||t===uc||t===cc||t===lc||t===hc||t===fc||t===pc||t===dc||t===mc||t===gc||t===yc||t===_c||t===xc||t===bc||t===wc||t===Mc||t===Sc||t===Ac||t===Tc||t===Pc||t===Lc||t===Ec||t===Oc?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===vc?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Ou?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}var r=n.isWebGL2;return{convert:i}}function Je(t){J.call(this),this.cameras=t||[]}function $e(){p.call(this),this.type="Group"}function Ke(){this._targetRay=null,this._grip=null,this._hand=null}function tn(t,e){function n(t){var e=y.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function i(){y.forEach(function(t,e){t.disconnect(e)}),y.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),L.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function r(t){d=t,L.setContext(f),L.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}function o(t){for(var e=f.inputSources,n=0;n<g.length;n++)y.set(e[n],g[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],a=y.get(r);a&&(a.dispatchEvent({type:"disconnected",data:r}),y["delete"](r))}for(var o=0;o<t.added.length;o++){var s=t.added[o],u=y.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}function s(t,e,n){A.setFromMatrixPosition(e.matrixWorld),T.setFromMatrixPosition(n.matrixWorld);var i=A.distanceTo(T),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),u=(r[9]+1)/r[5],c=(r[9]-1)/r[5],l=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=o*l,p=o*h,d=i/(-l+h),m=d*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=o+d,g=s+d,y=f-m,_=p+(i-m),x=u*s/g*v,b=c*s/g*v;t.projectionMatrix.makePerspective(y,_,x,b,v,g)}function u(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}function l(e,n){if(v=n.getViewerPose(d),null!==v){var i=v.views,r=f.renderState.baseLayer;t.setFramebuffer(r.framebuffer);var a=!1;i.length!==w.cameras.length&&(w.cameras.length=0,a=!0);for(var o=0;o<i.length;o++){var s=i[o],u=r.getViewport(s),c=b[o];c.matrix.fromArray(s.transform.matrix),c.projectionMatrix.fromArray(s.projectionMatrix),c.viewport.set(u.x,u.y,u.width,u.height),0===o&&w.matrix.copy(c.matrix),a===!0&&w.cameras.push(c)}}for(var l=f.inputSources,h=0;h<g.length;h++){var p=g[h],m=l[h];p.update(m,n,d)}P&&P(e,n)}var h=this,f=null,p=1,d=null,m="local-floor",v=null,g=[],y=new Map,_=new J;_.layers.enable(1),_.viewport=new a;var x=new J;x.layers.enable(2),x.viewport=new a;var b=[_,x],w=new Je;w.layers.enable(1),w.layers.enable(2);var M=null,S=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=g[t];return void 0===e&&(e=new Ke,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=g[t];return void 0===e&&(e=new Ke,g[t]=e),e.getGripSpace()},this.getHand=function(t){var e=g[t];return void 0===e&&(e=new Ke,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){p=t,h.isPresenting===!0},this.setReferenceSpaceType=function(t){m=t,h.isPresenting===!0},this.getReferenceSpace=function(){return d},this.getSession=function(){return f},this.setSession=function(t){if(f=t,null!==f){f.addEventListener("select",n),f.addEventListener("selectstart",n),f.addEventListener("selectend",n),f.addEventListener("squeeze",n),f.addEventListener("squeezestart",n),f.addEventListener("squeezeend",n),f.addEventListener("end",i);var a=e.getContextAttributes();a.xrCompatible!==!0&&e.makeXRCompatible();var s={antialias:a.antialias,alpha:a.alpha,depth:a.depth,stencil:a.stencil,framebufferScaleFactor:p},u=new XRWebGLLayer(f,e,s);f.updateRenderState({baseLayer:u}),f.requestReferenceSpace(m).then(r),f.addEventListener("inputsourceschange",o)}};var A=new c,T=new c;this.getCamera=function(t){w.near=x.near=_.near=t.near,w.far=x.far=_.far=t.far,M===w.near&&S===w.far||(f.updateRenderState({depthNear:w.near,depthFar:w.far}),M=w.near,S=w.far);var e=t.parent,n=w.cameras;u(w,e);for(var i=0;i<n.length;i++)u(n[i],e);t.matrixWorld.copy(w.matrixWorld);for(var r=t.children,a=0,o=r.length;a<o;a++)r[a].updateMatrixWorld(!0);return 2===n.length?s(w,_,x):w.projectionMatrix.copy(_.projectionMatrix),w};var P=null,L=new nt;L.setAnimationLoop(l),this.setAnimationLoop=function(t){P=t},this.dispose=function(){}}function en(t){function e(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function n(t,e,n,g,y){e.isMeshBasicMaterial?i(t,e):e.isMeshLambertMaterial?(i(t,e),u(t,e)):e.isMeshToonMaterial?(i(t,e),l(t,e)):e.isMeshPhongMaterial?(i(t,e),c(t,e)):e.isMeshStandardMaterial?(i(t,e,n),e.isMeshPhysicalMaterial?f(t,e,n):h(t,e,n)):e.isMeshMatcapMaterial?(i(t,e),p(t,e)):e.isMeshDepthMaterial?(i(t,e),d(t,e)):e.isMeshDistanceMaterial?(i(t,e),m(t,e)):e.isMeshNormalMaterial?(i(t,e),v(t,e)):e.isLineBasicMaterial?(r(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?o(t,e,g,y):e.isSpriteMaterial?s(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(e,n,i){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var r=n.envMap||i;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var a=t.get(r).__maxMipLevel;void 0!==a&&(e.maxMipLevel.value=a)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity);var o;n.map?o=n.map:n.specularMap?o=n.specularMap:n.displacementMap?o=n.displacementMap:n.normalMap?o=n.normalMap:n.bumpMap?o=n.bumpMap:n.roughnessMap?o=n.roughnessMap:n.metalnessMap?o=n.metalnessMap:n.alphaMap?o=n.alphaMap:n.emissiveMap&&(o=n.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),o.matrixAutoUpdate===!0&&o.updateMatrix(),e.uvTransform.value.copy(o.matrix));var s;n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),s.matrixAutoUpdate===!0&&s.updateMatrix(),e.uv2Transform.value.copy(s.matrix))}function r(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function o(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap);var r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(r.matrixAutoUpdate===!0&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(n.matrixAutoUpdate===!0&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function u(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function c(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ls&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ls&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function l(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ls&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ls&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function h(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ls&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ls&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}function f(t,e,n){h(t,e,n),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===ls&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}function p(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ls&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ls&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function d(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function m(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function v(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ls&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ls&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function nn(t){function e(){return null===U?Q:1}function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=w.getContext(i,e);if(null!==r)return r}return null}function r(){Pt=new ht(Mt),Lt=new ct(Mt,Pt,t),Lt.isWebGL2===!1&&(Pt.get("WEBGL_depth_texture"),Pt.get("OES_texture_float"),Pt.get("OES_texture_half_float"),Pt.get("OES_texture_half_float_linear"),Pt.get("OES_standard_derivatives"),Pt.get("OES_element_index_uint"),Pt.get("OES_vertex_array_object"),Pt.get("ANGLE_instanced_arrays")),Pt.get("OES_texture_float_linear"),Wt=new Ze(Mt,Pt,Lt),Et=new qe(Mt,Pt,Lt),Et.scissor(H.copy(K).multiplyScalar(Q).floor()),Et.viewport(W.copy($).multiplyScalar(Q).floor()),Ot=new dt(Mt),Ct=new Ne,Ft=new Qe(Mt,Pt,Et,Ct,Lt,Wt,Ot),It=new it(Mt,Lt),Ht=new st(Mt,Pt,It,Lt),Nt=new ft(Mt,It,Ot,Ht),Dt=new yt(Mt,Nt,It,Ot),jt=new gt(Mt),Rt=new Ie(N,Pt,Lt,Ht),kt=new en(Ct),zt=new ze(Ct),Ut=new We,Bt=new ot(N,Et,Dt,L),Gt=new ut(Mt,Pt,Ot,Lt),Vt=new pt(Mt,Pt,Ot,Lt),Ot.programs=Rt.programs,N.capabilities=Lt,N.extensions=Pt,N.properties=Ct,N.renderLists=zt,N.state=Et,N.info=Ot}function o(t){t.preventDefault(),D=!0}function s(){D=!1,r()}function u(t){var e=t.target;e.removeEventListener("dispose",u),h(e)}function h(t){f(t),Ct.remove(t)}function f(t){var e=Ct.get(t).program;void 0!==e&&Rt.releaseProgram(e)}function p(t,e){t.render(function(t){N.renderBufferImmediate(t,e)})}function d(t){Xt.isPresenting||qt&&qt(t)}function m(t,e,n,i){if(t.visible!==!1){var r=t.layers.test(e.layers);if(r)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)t.autoUpdate===!0&&t.update(e);else if(t.isLight)I.pushLight(t),t.castShadow&&I.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||at.intersectsSprite(t)){i&&bt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(xt);var a=Dt.update(t),o=t.material;o.visible&&F.push(t,a,o,n,bt.z,null)}}else if(t.isImmediateRenderObject)i&&bt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(xt),F.push(t,null,t.material,n,bt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Ot.render.frame&&(t.skeleton.update(),t.skeleton.frame=Ot.render.frame),!t.frustumCulled||at.intersectsObject(t))){i&&bt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(xt);var s=Dt.update(t),u=t.material;if(Array.isArray(u))for(var c=s.groups,l=0,h=c.length;l<h;l++){var f=c[l],p=u[f.materialIndex];p&&p.visible&&F.push(t,s,p,n,bt.z,f)}else u.visible&&F.push(t,s,u,n,bt.z,null)}for(var d=t.children,v=0,g=d.length;v<g;v++)m(d[v],e,n,i)}}function v(t,e,n){for(var i=e.isScene===!0?e.overrideMaterial:null,r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,u=o.geometry,c=null===i?o.material:i,l=o.group;if(n.isArrayCamera){V=n;for(var h=n.cameras,f=0,p=h.length;f<p;f++){var d=h[f];s.layers.test(d.layers)&&(Et.viewport(W.copy(d.viewport)),I.setupLights(d),g(s,e,d,u,c,l))}}else V=null,g(s,e,n,u,c,l)}}function g(t,e,n,i,r,a){if(t.onBeforeRender(N,e,n,i,r,a),I=Ut.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var o=_(n,e,r,t);Et.setMaterial(r),Ht.reset(),p(t,o)}else N.renderBufferDirect(n,e,i,r,t,a);t.onAfterRender(N,e,n,i,r,a),I=Ut.get(e,V||n)}function y(t,e,n){e.isScene!==!0&&(e=wt);var i=Ct.get(t),r=I.state.lights,a=I.state.shadowsArray,o=r.state.version,s=Rt.getParameters(t,r.state,a,e,mt.numPlanes,mt.numIntersection,n),c=Rt.getProgramCacheKey(s),l=i.program,h=!0;if(void 0===l)t.addEventListener("dispose",u);else if(l.cacheKey!==c)f(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,h=!1;else{if(void 0!==s.shaderID)return;h=!1}h&&(s.uniforms=Rt.getUniforms(t,s),t.onBeforeCompile(s,N),l=Rt.acquireProgram(s,c),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<N.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var m=0;m<N.maxMorphNormals;m++)p["morphNormal"+m]>=0&&t.numSupportedMorphNormals++}var v=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&t.clipping!==!0||(i.numClippingPlanes=mt.numPlanes,i.numIntersection=mt.numIntersection,v.clippingPlanes=mt.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.needsLights=b(t),i.lightsStateVersion=o,i.needsLights&&(v.ambientLightColor.value=r.state.ambient,v.lightProbe.value=r.state.probe,v.directionalLights.value=r.state.directional,v.directionalLightShadows.value=r.state.directionalShadow,v.spotLights.value=r.state.spot,v.spotLightShadows.value=r.state.spotShadow,v.rectAreaLights.value=r.state.rectArea,v.pointLights.value=r.state.point,v.pointLightShadows.value=r.state.pointShadow,v.hemisphereLights.value=r.state.hemi,v.directionalShadowMap.value=r.state.directionalShadowMap,v.directionalShadowMatrix.value=r.state.directionalShadowMatrix,v.spotShadowMap.value=r.state.spotShadowMap,v.spotShadowMatrix.value=r.state.spotShadowMatrix,v.pointShadowMap.value=r.state.pointShadowMap,v.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),y=ue.seqWithValue(g.seq,v);i.uniformsList=y}function _(t,e,n,i){e.isScene!==!0&&(e=wt),Ft.resetTextureUnits();var r=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===U?N.outputEncoding:U.texture.encoding,s=Ct.get(n),u=I.state.lights;if(vt===!0&&(_t===!0||t!==G)){var c=t===G&&n.id===j;mt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,c)}n.version===s.__version?void 0===s.program?y(n,e,i):n.fog&&s.fog!==r?y(n,e,i):s.environment!==a?y(n,e,i):s.needsLights&&s.lightsStateVersion!==u.state.version?y(n,e,i):void 0===s.numClippingPlanes||s.numClippingPlanes===mt.numPlanes&&s.numIntersection===mt.numIntersection?s.outputEncoding!==o&&y(n,e,i):y(n,e,i):(y(n,e,i),s.__version=n.version);var l=!1,h=!1,f=!1,p=s.program,d=p.getUniforms(),m=s.uniforms;if(Et.useProgram(p.program)&&(l=!0,h=!0,f=!0),n.id!==j&&(j=n.id,h=!0),l||G!==t){if(d.setValue(Mt,"projectionMatrix",t.projectionMatrix),Lt.logarithmicDepthBuffer&&d.setValue(Mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),G!==t&&(G=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var v=d.map.cameraPosition;void 0!==v&&v.setValue(Mt,bt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&d.setValue(Mt,"isOrthographic",t.isOrthographicCamera===!0),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&d.setValue(Mt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){d.setOptional(Mt,i,"bindMatrix"),d.setOptional(Mt,i,"bindMatrixInverse");var g=i.skeleton;if(g){var _=g.bones;if(Lt.floatVertexTextures){if(void 0===g.boneTexture){var b=Math.sqrt(4*_.length);b=Cl.ceilPowerOfTwo(b),b=Math.max(b,4);var w=new Float32Array(b*b*4);w.set(g.boneMatrices);var M=new tt(w,b,b,Iu,Au);g.boneMatrices=w,g.boneTexture=M,g.boneTextureSize=b}d.setValue(Mt,"boneTexture",g.boneTexture,Ft),d.setValue(Mt,"boneTextureSize",g.boneTextureSize)}else d.setOptional(Mt,g,"boneMatrices")}}return(h||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,d.setValue(Mt,"receiveShadow",i.receiveShadow)),h&&(d.setValue(Mt,"toneMappingExposure",N.toneMappingExposure),s.needsLights&&x(m,f),r&&n.fog&&kt.refreshFogUniforms(m,r),kt.refreshMaterialUniforms(m,n,a,Q,q),void 0!==m.ltc_1&&(m.ltc_1.value=Pf.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=Pf.LTC_2),ue.upload(Mt,s.uniformsList,m,Ft)),n.isShaderMaterial&&n.uniformsNeedUpdate===!0&&(ue.upload(Mt,s.uniformsList,m,Ft),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&d.setValue(Mt,"center",i.center),d.setValue(Mt,"modelViewMatrix",i.modelViewMatrix),d.setValue(Mt,"normalMatrix",i.normalMatrix),d.setValue(Mt,"modelMatrix",i.matrixWorld),p}function x(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function b(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&t.lights===!0}t=t||{};var w=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),M=void 0!==t.context?t.context:null,S=void 0!==t.alpha&&t.alpha,A=void 0===t.depth||t.depth,T=void 0===t.stencil||t.stencil,P=void 0!==t.antialias&&t.antialias,L=void 0===t.premultipliedAlpha||t.premultipliedAlpha,E=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,O=void 0!==t.powerPreference?t.powerPreference:"default",C=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,F=null,I=null;this.domElement=w,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Hc,this.physicallyCorrectLights=!1,this.toneMapping=Ys,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var N=this,D=!1,R=null,k=0,z=0,U=null,B=null,j=-1,G=null,V=null,W=new a,H=new a,X=null,Y=w.width,q=w.height,Q=1,Z=null,J=null,$=new a(0,0,Y,q),K=new a(0,0,Y,q),rt=!1,at=new et,mt=new lt,vt=!1,_t=!1,xt=new l,bt=new c,wt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Mt=M;try{var St={alpha:S,depth:A,stencil:T,antialias:P,premultipliedAlpha:L,preserveDrawingBuffer:E,powerPreference:O,failIfMajorPerformanceCaveat:C};if(w.addEventListener("webglcontextlost",o,!1),w.addEventListener("webglcontextrestored",s,!1),null===Mt){var At=["webgl2","webgl","experimental-webgl"];if(N.isWebGL1Renderer===!0&&At.shift(),Mt=i(At,St),null===Mt)throw i(At)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Mt.getShaderPrecisionFormat&&(Mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Tt){throw Tt}var Pt,Lt,Et,Ot,Ct,Ft,It,Nt,Dt,Rt,kt,zt,Ut,Bt,jt,Gt,Vt,Wt,Ht;r();var Xt=new tn(N,Mt);this.xr=Xt;var Yt=new Ye(N,Dt,Lt.maxTextureSize);this.shadowMap=Yt,this.getContext=function(){
return Mt},this.getContextAttributes=function(){return Mt.getContextAttributes()},this.forceContextLoss=function(){var t=Pt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Pt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(t){void 0!==t&&(Q=t,this.setSize(Y,q,!1))},this.getSize=function(t){return void 0===t&&(t=new n),t.set(Y,q)},this.setSize=function(t,e,n){Xt.isPresenting||(Y=t,q=e,w.width=Math.floor(t*Q),w.height=Math.floor(e*Q),n!==!1&&(w.style.width=t+"px",w.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(t=new n),t.set(Y*Q,q*Q).floor()},this.setDrawingBufferSize=function(t,e,n){Y=t,q=e,Q=n,w.width=Math.floor(t*n),w.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(t=new a),t.copy(W)},this.getViewport=function(t){return t.copy($)},this.setViewport=function(t,e,n,i){t.isVector4?$.set(t.x,t.y,t.z,t.w):$.set(t,e,n,i),Et.viewport(W.copy($).multiplyScalar(Q).floor())},this.getScissor=function(t){return t.copy(K)},this.setScissor=function(t,e,n,i){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,i),Et.scissor(H.copy(K).multiplyScalar(Q).floor())},this.getScissorTest=function(){return rt},this.setScissorTest=function(t){Et.setScissorTest(rt=t)},this.setOpaqueSort=function(t){Z=t},this.setTransparentSort=function(t){J=t},this.getClearColor=function(){return Bt.getClearColor()},this.setClearColor=function(){Bt.setClearColor.apply(Bt,arguments)},this.getClearAlpha=function(){return Bt.getClearAlpha()},this.setClearAlpha=function(){Bt.setClearAlpha.apply(Bt,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),Mt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){w.removeEventListener("webglcontextlost",o,!1),w.removeEventListener("webglcontextrestored",s,!1),zt.dispose(),Ut.dispose(),Ct.dispose(),Dt.dispose(),Ht.dispose(),Xt.dispose(),Qt.stop()},this.renderBufferImmediate=function(t,e){Ht.initAttributes();var n=Ct.get(t);t.hasPositions&&!n.position&&(n.position=Mt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Mt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Mt.createBuffer()),t.hasColors&&!n.color&&(n.color=Mt.createBuffer());var i=e.getAttributes();t.hasPositions&&(Mt.bindBuffer(34962,n.position),Mt.bufferData(34962,t.positionArray,35048),Ht.enableAttribute(i.position),Mt.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(Mt.bindBuffer(34962,n.normal),Mt.bufferData(34962,t.normalArray,35048),Ht.enableAttribute(i.normal),Mt.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(Mt.bindBuffer(34962,n.uv),Mt.bufferData(34962,t.uvArray,35048),Ht.enableAttribute(i.uv),Mt.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(Mt.bindBuffer(34962,n.color),Mt.bufferData(34962,t.colorArray,35048),Ht.enableAttribute(i.color),Mt.vertexAttribPointer(i.color,3,5126,!1,0,0)),Ht.disableUnusedAttributes(),Mt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,i,r,a,o){null===n&&(n=wt);var s=a.isMesh&&a.matrixWorld.determinant()<0,u=_(t,n,r,a);Et.setMaterial(r,s);var c=i.index,l=i.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;var h=1;r.wireframe===!0&&(c=Nt.getWireframeAttribute(i),h=2),(r.morphTargets||r.morphNormals)&&jt.update(a,i,r,u),Ht.setup(a,r,u,i,c);var f,p=Gt;null!==c&&(f=It.get(c),p=Vt,p.setIndex(f));var d=null!==c?c.count:l.count,m=i.drawRange.start*h,v=i.drawRange.count*h,g=null!==o?o.start*h:0,y=null!==o?o.count*h:1/0,x=Math.max(m,g),b=Math.min(d,m+v,g+y)-1,w=Math.max(0,b-x+1);if(0!==w){if(a.isMesh)r.wireframe===!0?(Et.setLineWidth(r.wireframeLinewidth*e()),p.setMode(1)):p.setMode(4);else if(a.isLine){var M=r.linewidth;void 0===M&&(M=1),Et.setLineWidth(M*e()),a.isLineSegments?p.setMode(1):a.isLineLoop?p.setMode(2):p.setMode(3)}else a.isPoints?p.setMode(0):a.isSprite&&p.setMode(4);if(a.isInstancedMesh)p.renderInstances(x,w,a.count);else if(i.isInstancedBufferGeometry){var S=Math.min(i.instanceCount,i._maxInstanceCount);p.renderInstances(x,w,S)}else p.render(x,w)}},this.compile=function(t,e){I=Ut.get(t,e),I.init(),t.traverse(function(t){t.isLight&&(I.pushLight(t),t.castShadow&&I.pushShadow(t))}),I.setupLights(e);var n=new WeakMap;t.traverse(function(e){var i=e.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];n.has(a)===!1&&(y(a,t,e),n.set(a))}else n.has(i)===!1&&(y(i,t,e),n.set(i))})};var qt=null,Qt=new nt;Qt.setAnimationLoop(d),"undefined"!=typeof window&&Qt.setContext(window),this.setAnimationLoop=function(t){qt=t,Xt.setAnimationLoop(t),null===t?Qt.stop():Qt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(n=arguments[2]),void 0!==arguments[3]&&(i=arguments[3]),(void 0===e||e.isCamera===!0)&&D!==!0){Ht.resetDefaultState(),j=-1,G=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Xt.enabled===!0&&Xt.isPresenting===!0&&(e=Xt.getCamera(e)),t.isScene===!0&&t.onBeforeRender(N,t,e,n||U),I=Ut.get(t,e),I.init(),xt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),at.setFromProjectionMatrix(xt),_t=this.localClippingEnabled,vt=mt.init(this.clippingPlanes,_t,e),F=zt.get(t,e),F.init(),m(t,e,0,N.sortObjects),F.finish(),N.sortObjects===!0&&F.sort(Z,J),vt===!0&&mt.beginShadows();var r=I.state.shadowsArray;Yt.render(r,t,e),I.setupLights(e),vt===!0&&mt.endShadows(),this.info.autoReset===!0&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),Bt.render(F,t,e,i);var a=F.opaque,o=F.transparent;a.length>0&&v(a,t,e),o.length>0&&v(o,t,e),t.isScene===!0&&t.onAfterRender(N,t,e),null!==U&&(Ft.updateRenderTargetMipmap(U),Ft.updateMultisampleRenderTarget(U)),Et.buffers.depth.setTest(!0),Et.buffers.depth.setMask(!0),Et.buffers.color.setMask(!0),Et.setPolygonOffset(!1),F=null,I=null}},this.setFramebuffer=function(t){R!==t&&null===U&&Mt.bindFramebuffer(36160,t),R=t},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return U},this.setRenderTarget=function(t,e,n){U=t,k=e,z=n,t&&void 0===Ct.get(t).__webglFramebuffer&&Ft.setupRenderTarget(t);var i=R,r=!1;if(t){var a=Ct.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=a[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?Ct.get(t).__webglMultisampledFramebuffer:a,W.copy(t.viewport),H.copy(t.scissor),X=t.scissorTest}else W.copy($).multiplyScalar(Q).floor(),H.copy(K).multiplyScalar(Q).floor(),X=rt;if(B!==i&&(Mt.bindFramebuffer(36160,i),B=i),Et.viewport(W),Et.scissor(H),Et.setScissorTest(X),r){var o=Ct.get(t.texture);Mt.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=Ct.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var u=!1;s!==B&&(Mt.bindFramebuffer(36160,s),u=!0);try{var c=t.texture,l=c.format,h=c.type;if(l!==Iu&&Wt.convert(l)!==Mt.getParameter(35739))return;if(!(h===_u||Wt.convert(h)===Mt.getParameter(35738)||h===Au&&(Lt.isWebGL2||Pt.get("OES_texture_float")||Pt.get("WEBGL_color_buffer_float"))||h===Tu&&(Lt.isWebGL2?Pt.get("EXT_color_buffer_float"):Pt.get("EXT_color_buffer_half_float"))))return;36053===Mt.checkFramebufferStatus(36160)&&e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&Mt.readPixels(e,n,i,r,Wt.convert(l),Wt.convert(h),a)}finally{u&&Mt.bindFramebuffer(36160,B)}}}},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=Wt.convert(e.format);Ft.setTexture2D(e,0),Mt.copyTexImage2D(3553,n,o,t.x,t.y,r,a,0),Et.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,a=e.image.height,o=Wt.convert(n.format),s=Wt.convert(n.type);Ft.setTexture2D(n,0),Mt.pixelStorei(37440,n.flipY),Mt.pixelStorei(37441,n.premultiplyAlpha),Mt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?Mt.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?Mt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):Mt.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&Mt.generateMipmap(3553),Et.unbindTexture()},this.initTexture=function(t){Ft.setTexture2D(t,0),Et.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function rn(t){nn.call(this,t)}function an(t,e){this.name="",this.color=new b(t),this.density=void 0!==e?e:25e-5}function on(t,e,n){this.name="",this.color=new b(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function sn(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=_l,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cl.generateUUID()}function un(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}function cn(t){T.call(this),this.type="SpriteMaterial",this.color=new b(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}function ln(t){if(p.call(this),this.type="Sprite",void 0===mm){mm=new B;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new sn(e,5);mm.setIndex([0,1,2,0,2,3]),mm.setAttribute("position",new un(i,3,0,(!1))),mm.setAttribute("uv",new un(i,2,3,(!1)))}this.geometry=mm,this.material=void 0!==t?t:new cn,this.center=new n(.5,.5)}function hn(t,e,n,i,r,a){_m.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(xm.x=a*_m.x-r*_m.y,xm.y=r*_m.x+a*_m.y):xm.copy(_m),t.copy(e),t.x+=xm.x,t.y+=xm.y,t.applyMatrix4(bm)}function fn(){p.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function pn(t,e){t&&t.isGeometry,j.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l}function dn(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new l)}}function mn(){p.call(this),this.type="Bone"}function vn(t,e,n){j.call(this,t,e),this.instanceMatrix=new L(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function gn(t){T.call(this),this.type="LineBasicMaterial",this.color=new b(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}function yn(t,e,n){p.call(this),this.type="Line",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new gn,this.updateMorphTargets()}function _n(t,e){yn.call(this,t,e),this.type="LineSegments"}function xn(t,e){yn.call(this,t,e),this.type="LineLoop"}function bn(t){T.call(this),this.type="PointsMaterial",this.color=new b(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function wn(t,e){p.call(this),this.type="Points",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new bn,this.updateMorphTargets()}function Mn(t,e,n,i,r,a,o){var s=Wm.distanceSqToPoint(t);if(s<n){var u=new c;Wm.closestPointToPoint(t,u),u.applyMatrix4(i);var l=r.ray.origin.distanceTo(u);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:o})}}function Sn(t,e,n,i,a,o,s,u,c){function l(){h.needsUpdate=!0,t.requestVideoFrameCallback(l)}r.call(this,t,e,n,i,a,o,s,u,c),this.format=void 0!==s?s:Fu,this.minFilter=void 0!==o?o:du,this.magFilter=void 0!==a?a:du,this.generateMipmaps=!1;var h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(l)}function An(t,e,n,i,a,o,s,u,c,l,h,f){r.call(this,null,o,s,u,c,l,i,a,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Tn(t,e,n,i,a,o,s,u,c){r.call(this,t,e,n,i,a,o,s,u,c),this.needsUpdate=!0}function Pn(t,e,n,i,a,o,s,u,c,l){if(l=void 0!==l?l:ku,l!==ku&&l!==zu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===ku&&(n=wu),void 0===n&&l===zu&&(n=Ou),r.call(this,null,i,a,o,s,u,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:cu,this.minFilter=void 0!==u?u:cu,this.flipY=!1,this.generateMipmaps=!1}function Ln(t){B.call(this),this.type="WireframeGeometry";var e=[],n=[0,0],i={},r=["a","b","c"];if(t&&t.isGeometry){for(var a=t.faces,o=0,s=a.length;o<s;o++)for(var u=a[o],l=0;l<3;l++){var h=u[r[l]],f=u[r[(l+1)%3]];n[0]=Math.min(h,f),n[1]=Math.max(h,f);var p=n[0]+","+n[1];void 0===i[p]&&(i[p]={index1:n[0],index2:n[1]})}for(var d in i){var m=i[d],v=t.vertices[m.index1];e.push(v.x,v.y,v.z),v=t.vertices[m.index2],e.push(v.x,v.y,v.z)}}else if(t&&t.isBufferGeometry){var g=new c;if(null!==t.index){var y=t.attributes.position,_=t.index,x=t.groups;0===x.length&&(x=[{start:0,count:_.count,materialIndex:0}]);for(var b=0,w=x.length;b<w;++b)for(var M=x[b],S=M.start,A=M.count,T=S,P=S+A;T<P;T+=3)for(var L=0;L<3;L++){var E=_.getX(T+L),O=_.getX(T+(L+1)%3);n[0]=Math.min(E,O),n[1]=Math.max(E,O);var C=n[0]+","+n[1];void 0===i[C]&&(i[C]={index1:n[0],index2:n[1]})}for(var F in i){var I=i[F];g.fromBufferAttribute(y,I.index1),e.push(g.x,g.y,g.z),g.fromBufferAttribute(y,I.index2),e.push(g.x,g.y,g.z)}}else for(var N=t.attributes.position,D=0,k=N.count/3;D<k;D++)for(var z=0;z<3;z++){var U=3*D+z;g.fromBufferAttribute(N,U),e.push(g.x,g.y,g.z);var j=3*D+(z+1)%3;g.fromBufferAttribute(N,j),e.push(g.x,g.y,g.z)}}this.setAttribute("position",new R(e,3))}function En(t,e,n){W.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new On(t,e,n)),this.mergeVertices()}function On(t,e,n){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i=[],r=[],a=[],o=[],s=1e-5,u=new c,l=new c,h=new c,f=new c,p=new c;t.length<3;for(var d=e+1,m=0;m<=n;m++)for(var v=m/n,g=0;g<=e;g++){var y=g/e;t(y,v,l),r.push(l.x,l.y,l.z),y-s>=0?(t(y-s,v,h),f.subVectors(l,h)):(t(y+s,v,h),f.subVectors(h,l)),v-s>=0?(t(y,v-s,h),p.subVectors(l,h)):(t(y,v+s,h),p.subVectors(h,l)),u.crossVectors(f,p).normalize(),a.push(u.x,u.y,u.z),o.push(y,v)}for(var _=0;_<n;_++)for(var x=0;x<e;x++){var b=_*d+x,w=_*d+x+1,M=(_+1)*d+x+1,S=(_+1)*d+x;i.push(b,w,S),i.push(w,M,S)}this.setIndex(i),this.setAttribute("position",new R(r,3)),this.setAttribute("normal",new R(a,3)),this.setAttribute("uv",new R(o,2))}function Cn(t,e,n,i){W.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Fn(t,e,n,i)),this.mergeVertices()}function Fn(t,e,i,r){function a(t){for(var n=new c,i=new c,r=new c,a=0;a<e.length;a+=3)f(e[a+0],n),f(e[a+1],i),f(e[a+2],r),o(n,i,r,t)}function o(t,e,n,i){for(var r=Math.pow(2,i),a=[],o=0;o<=r;o++){a[o]=[];for(var s=t.clone().lerp(n,o/r),u=e.clone().lerp(n,o/r),c=r-o,l=0;l<=c;l++)0===l&&o===r?a[o][l]=s:a[o][l]=s.clone().lerp(u,l/c)}for(var f=0;f<r;f++)for(var p=0;p<2*(r-f)-1;p++){var d=Math.floor(p/2);p%2===0?(h(a[f][d+1]),h(a[f+1][d]),h(a[f][d])):(h(a[f][d+1]),h(a[f+1][d+1]),h(a[f+1][d]))}}function s(t){for(var e=new c,n=0;n<g.length;n+=3)e.x=g[n+0],e.y=g[n+1],e.z=g[n+2],e.normalize().multiplyScalar(t),g[n+0]=e.x,g[n+1]=e.y,g[n+2]=e.z}function u(){for(var t=new c,e=0;e<g.length;e+=3){t.x=g[e+0],t.y=g[e+1],t.z=g[e+2];var n=m(t)/2/Math.PI+.5,i=v(t)/Math.PI+.5;y.push(n,1-i)}p(),l()}function l(){for(var t=0;t<y.length;t+=6){var e=y[t+0],n=y[t+2],i=y[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(y[t+0]+=1),n<.2&&(y[t+2]+=1),i<.2&&(y[t+4]+=1))}}function h(t){g.push(t.x,t.y,t.z)}function f(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function p(){for(var t=new c,e=new c,i=new c,r=new c,a=new n,o=new n,s=new n,u=0,l=0;u<g.length;u+=9,l+=6){t.set(g[u+0],g[u+1],g[u+2]),e.set(g[u+3],g[u+4],g[u+5]),i.set(g[u+6],g[u+7],g[u+8]),a.set(y[l+0],y[l+1]),o.set(y[l+2],y[l+3]),s.set(y[l+4],y[l+5]),r.copy(t).add(e).add(i).divideScalar(3);var h=m(r);d(a,l+0,t,h),d(o,l+2,e,h),d(s,l+4,i,h)}}function d(t,e,n,i){i<0&&1===t.x&&(y[e]=t.x-1),0===n.x&&0===n.z&&(y[e]=i/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function v(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1,r=r||0;var g=[],y=[];a(r),s(i),u(),this.setAttribute("position",new R(g,3)),this.setAttribute("normal",new R(g.slice(),3)),this.setAttribute("uv",new R(y,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function In(t,e){W.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Nn(t,e)),this.mergeVertices()}function Nn(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Fn.call(this,n,i,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Dn(t,e){W.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Rn(t,e)),this.mergeVertices()}function Rn(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Fn.call(this,n,i,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function kn(t,e){W.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new zn(t,e)),this.mergeVertices()}function zn(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Fn.call(this,i,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Un(t,e){W.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Bn(t,e)),this.mergeVertices()}function Bn(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Fn.call(this,r,a,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function jn(t,e,n,i,r,a){W.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};var o=new Gn(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Gn(t,e,i,r,a){function o(){for(var t=0;t<e;t++)s(t);s(a===!1?e:0),l(),u()}function s(n){m=t.getPointAt(n/e,m);for(var a=h.normals[n],o=h.binormals[n],s=0;s<=r;s++){var u=s/r*Math.PI*2,c=Math.sin(u),l=-Math.cos(u);p.x=l*a.x+c*o.x,p.y=l*a.y+c*o.y,p.z=l*a.z+c*o.z,p.normalize(),g.push(p.x,p.y,p.z),f.x=m.x+i*p.x,f.y=m.y+i*p.y,f.z=m.z+i*p.z,v.push(f.x,f.y,f.z)}}function u(){for(var t=1;t<=e;t++)for(var n=1;n<=r;n++){var i=(r+1)*(t-1)+(n-1),a=(r+1)*t+(n-1),o=(r+1)*t+n,s=(r+1)*(t-1)+n;_.push(i,a,s),_.push(a,o,s)}}function l(){for(var t=0;t<=e;t++)for(var n=0;n<=r;n++)d.x=t/e,d.y=n/r,y.push(d.x,d.y)}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var h=t.computeFrenetFrames(e,a);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var f=new c,p=new c,d=new n,m=new c,v=[],g=[],y=[],_=[];o(),this.setIndex(_),this.setAttribute("position",new R(v,3)),this.setAttribute("normal",new R(g,3)),this.setAttribute("uv",new R(y,2))}function Vn(t,e,n,i,r,a,o){W.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},this.fromBufferGeometry(new Wn(t,e,n,i,r,a)),this.mergeVertices()}function Wn(t,e,n,i,r,a){function o(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,u=Math.cos(s);r.x=i*(2+u)*.5*a,r.y=i*(2+u)*o*.5,r.z=i*Math.sin(s)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;for(var s=[],u=[],l=[],h=[],f=new c,p=new c,d=new c,m=new c,v=new c,g=new c,y=new c,_=0;_<=n;++_){var x=_/n*r*Math.PI*2;o(x,r,a,t,d),o(x+.01,r,a,t,m),g.subVectors(m,d),y.addVectors(m,d),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize();for(var b=0;b<=i;++b){var w=b/i*Math.PI*2,M=-e*Math.cos(w),S=e*Math.sin(w);f.x=d.x+(M*y.x+S*v.x),f.y=d.y+(M*y.y+S*v.y),f.z=d.z+(M*y.z+S*v.z),u.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),h.push(_/n),h.push(b/i)}}for(var A=1;A<=n;A++)for(var T=1;T<=i;T++){var P=(i+1)*(A-1)+(T-1),L=(i+1)*A+(T-1),E=(i+1)*A+T,O=(i+1)*(A-1)+T;s.push(P,L,O),s.push(L,E,O)}this.setIndex(s),this.setAttribute("position",new R(u,3)),this.setAttribute("normal",new R(l,3)),this.setAttribute("uv",new R(h,2))}function Hn(t,e,n,i,r){W.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Xn(t,e,n,i,r)),this.mergeVertices()}function Xn(t,e,n,i,r){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;for(var a=[],o=[],s=[],u=[],l=new c,h=new c,f=new c,p=0;p<=n;p++)for(var d=0;d<=i;d++){var m=d/i*r,v=p/n*Math.PI*2;h.x=(t+e*Math.cos(v))*Math.cos(m),h.y=(t+e*Math.cos(v))*Math.sin(m),h.z=e*Math.sin(v),o.push(h.x,h.y,h.z),l.x=t*Math.cos(m),l.y=t*Math.sin(m),f.subVectors(h,l).normalize(),s.push(f.x,f.y,f.z),u.push(d/i),u.push(p/n)}for(var g=1;g<=n;g++)for(var y=1;y<=i;y++){var _=(i+1)*g+y-1,x=(i+1)*(g-1)+y-1,b=(i+1)*(g-1)+y,w=(i+1)*g+y;a.push(_,x,w),a.push(x,b,w)}this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("normal",new R(s,3)),this.setAttribute("uv",new R(u,2))}function Yn(t,e,n,i,r){var a,o;if(r===Mi(t,e,n,i)>0)for(a=e;a<n;a+=i)o=xi(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=xi(a,t[a],t[a+1],o);return o&&fi(o,o.next)&&(bi(o),o=o.next),o}function qn(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!fi(i,i.next)&&0!==hi(i.prev,i,i.next))i=i.next;else{if(bi(i),i=e=i.prev,i===i.next)break;n=!0}while(n||i!==e);return e}function Qn(t,e,n,i,r,a,o){if(t){!o&&a&&ai(t,i,r,a);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?Jn(t,i,r,a):Zn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),bi(t),t=u.next,c=u.next;else if(t=u,t===c){o?1===o?(t=$n(qn(t),e,n),Qn(t,e,n,i,r,a,2)):2===o&&Kn(t,e,n,i,r,a):Qn(qn(t),e,n,i,r,a,1);break}}}function Zn(t){var e=t.prev,n=t,i=t.next;if(hi(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ci(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&hi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Jn(t,e,n,i){var r=t.prev,a=t,o=t.next;if(hi(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,u=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=si(s,u,e,n,i),f=si(c,l,e,n,i),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&ci(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&hi(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&ci(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&hi(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&ci(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&hi(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&ci(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&hi(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function $n(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!fi(r,a)&&pi(r,i,i.next,a)&&gi(r,a)&&gi(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),bi(i),bi(i.next),i=t=a),i=i.next}while(i!==t);return qn(i)}function Kn(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&li(o,s)){var u=_i(o,s);return o=qn(o,o.next),u=qn(u,u.next),Qn(o,e,n,i,r,a),void Qn(u,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function ti(t,e,n,i){var r,a,o,s,u,c=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,s=r<a-1?e[r+1]*i:t.length,u=Yn(t,o,s,i,!1),u===u.next&&(u.steiner=!0),c.push(ui(u));for(c.sort(ei),r=0;r<c.length;r++)ni(c[r],n),n=qn(n,n.next);return n}function ei(t,e){return t.x-e.x}function ni(t,e){if(e=ii(t,e)){var n=_i(e,t);qn(e,e.next),qn(n,n.next)}}function ii(t,e){var n,i=e,r=t.x,a=t.y,o=-(1/0);do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n;var u,c=n,l=n.x,h=n.y,f=1/0;i=n;do r>=i.x&&i.x>=l&&r!==i.x&&ci(a<h?r:o,a,l,h,a<h?o:r,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(r-i.x),gi(i,t)&&(u<f||u===f&&(i.x>n.x||i.x===n.x&&ri(n,i)))&&(n=i,f=u)),i=i.next;while(i!==c);return n}function ri(t,e){return hi(t.prev,t,e.prev)<0&&hi(e.next,t,t.next)<0}function ai(t,e,n,i){var r=t;do null===r.z&&(r.z=si(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,oi(r)}function oi(t){var e,n,i,r,a,o,s,u,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ,i);e++);for(u=c;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1);return t}function si(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function ui(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ci(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function li(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!vi(t,e)&&(gi(t,e)&&gi(e,t)&&yi(t,e)&&(hi(t.prev,t,e.prev)||hi(t,e.prev,e))||fi(t,e)&&hi(t.prev,t,t.next)>0&&hi(e.prev,e,e.next)>0)}function hi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function fi(t,e){return t.x===e.x&&t.y===e.y}function pi(t,e,n,i){var r=mi(hi(t,e,n)),a=mi(hi(t,e,i)),o=mi(hi(n,i,t)),s=mi(hi(n,i,e));return r!==a&&o!==s||(!(0!==r||!di(t,n,e))||(!(0!==a||!di(t,i,e))||(!(0!==o||!di(n,t,i))||!(0!==s||!di(n,e,i)))))}function di(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mi(t){return t>0?1:t<0?-1:0}function vi(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&pi(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function gi(t,e){return hi(t.prev,t,t.next)<0?hi(t,e,t.next)>=0&&hi(t,t.prev,e)>=0:hi(t,e,t.prev)<0||hi(t,t.next,e)<0}function yi(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function _i(t,e){var n=new wi(t.i,t.x,t.y),i=new wi(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function xi(t,e,n,i){var r=new wi(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wi(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mi(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}function Si(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ai(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Ti(t,e){W.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Pi(t,e)),this.mergeVertices()}function Pi(t,e){function i(t){function i(t,e,n){return e.clone().multiplyScalar(n).add(t)}function s(t,e,i){var r,a,o,s=t.x-e.x,u=t.y-e.y,c=i.x-t.x,l=i.y-t.y,h=s*s+u*u,f=s*l-u*c;if(Math.abs(f)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(c*c+l*l),m=e.x-u/p,v=e.y+s/p,g=i.x-l/d,y=i.y+c/d,_=((g-m)*l-(y-v)*c)/(s*l-u*c);r=m+s*_-t.x,a=v+u*_-t.y;var x=r*r+a*a;if(x<=2)return new n(r,a);o=Math.sqrt(x/2)}else{var b=!1;s>Number.EPSILON?c>Number.EPSILON&&(b=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(b=!0):Math.sign(u)===Math.sign(l)&&(b=!0),b?(r=-u,a=s,o=Math.sqrt(h)):(r=s,a=u,o=Math.sqrt(h/2))}return new n(r/o,a/o)}function u(){var t=a.length/3;if(b){for(var e=0,n=X*e,i=0;i<Y;i++){var o=j[i];p(o[2]+n,o[1]+n,o[0]+n)}e=_+2*A,n=X*e;for(var s=0;s<Y;s++){var u=j[s];p(u[0]+n,u[1]+n,u[2]+n)}}else{for(var c=0;c<Y;c++){var l=j[c];p(l[2],l[1],l[0])}for(var h=0;h<Y;h++){var f=j[h];p(f[0]+X*_,f[1]+X*_,f[2]+X*_)}}r.addGroup(t,a.length/3-t,0)}function l(){var t=a.length/3,e=0;h(G,e),e+=G.length;for(var n=0,i=R.length;n<i;n++){var o=R[n];h(o,e),e+=o.length}r.addGroup(t,a.length/3-t,1)}function h(t,e){for(var n=t.length;--n>=0;){var i=n,r=n-1;r<0&&(r=t.length-1);for(var a=0,o=_+2*A;a<o;a++){var s=X*a,u=X*(a+1),c=e+i+s,l=e+r+s,h=e+r+u,f=e+i+u;d(c,l,h,f)}}}function f(t,e,n){g.push(t),g.push(e),g.push(n)}function p(t,e,n){m(t),m(e),m(n);var i=a.length/3,o=P.generateTopUV(r,a,i-3,i-2,i-1);v(o[0]),v(o[1]),v(o[2])}function d(t,e,n,i){m(t),m(e),m(i),m(e),m(n),m(i);var o=a.length/3,s=P.generateSideWallUV(r,a,o-6,o-3,o-2,o-1);v(s[0]),v(s[1]),v(s[3]),v(s[1]),v(s[2]),v(s[3])}function m(t){a.push(g[3*t+0]),a.push(g[3*t+1]),a.push(g[3*t+2])}function v(t){o.push(t.x),o.push(t.y)}var g=[],y=void 0!==e.curveSegments?e.curveSegments:12,_=void 0!==e.steps?e.steps:1,x=void 0!==e.depth?e.depth:100,b=void 0===e.bevelEnabled||e.bevelEnabled,w=void 0!==e.bevelThickness?e.bevelThickness:6,M=void 0!==e.bevelSize?e.bevelSize:w-2,S=void 0!==e.bevelOffset?e.bevelOffset:0,A=void 0!==e.bevelSegments?e.bevelSegments:3,T=e.extrudePath,P=void 0!==e.UVGenerator?e.UVGenerator:Qm;void 0!==e.amount&&(x=e.amount);var L,E,O,C,F,I=!1;T&&(L=T.getSpacedPoints(_),I=!0,b=!1,E=T.computeFrenetFrames(_,!1),O=new c,C=new c,F=new c),b||(A=0,w=0,M=0,S=0);var N=t.extractPoints(y),D=N.shape,R=N.holes,k=!qm.isClockWise(D);if(k){D=D.reverse();for(var z=0,U=R.length;z<U;z++){var B=R[z];qm.isClockWise(B)&&(R[z]=B.reverse())}}for(var j=qm.triangulateShape(D,R),G=D,V=0,W=R.length;V<W;V++){var H=R[V];D=D.concat(H)}for(var X=D.length,Y=j.length,q=[],Q=0,Z=G.length,J=Z-1,$=Q+1;Q<Z;Q++,J++,$++)J===Z&&(J=0),$===Z&&($=0),q[Q]=s(G[Q],G[J],G[$]);for(var K,tt=[],et=q.concat(),nt=0,it=R.length;nt<it;nt++){var rt=R[nt];K=[];for(var at=0,ot=rt.length,st=ot-1,ut=at+1;at<ot;at++,st++,ut++)st===ot&&(st=0),ut===ot&&(ut=0),K[at]=s(rt[at],rt[st],rt[ut]);tt.push(K),et=et.concat(K)}for(var ct=0;ct<A;ct++){for(var lt=ct/A,ht=w*Math.cos(lt*Math.PI/2),ft=M*Math.sin(lt*Math.PI/2)+S,pt=0,dt=G.length;pt<dt;pt++){var mt=i(G[pt],q[pt],ft);f(mt.x,mt.y,-ht)}for(var vt=0,gt=R.length;vt<gt;vt++){var yt=R[vt];K=tt[vt];for(var _t=0,xt=yt.length;_t<xt;_t++){var bt=i(yt[_t],K[_t],ft);f(bt.x,bt.y,-ht)}}}for(var wt=M+S,Mt=0;Mt<X;Mt++){var St=b?i(D[Mt],et[Mt],wt):D[Mt];I?(C.copy(E.normals[0]).multiplyScalar(St.x),O.copy(E.binormals[0]).multiplyScalar(St.y),F.copy(L[0]).add(C).add(O),f(F.x,F.y,F.z)):f(St.x,St.y,0)}for(var At=1;At<=_;At++)for(var Tt=0;Tt<X;Tt++){var Pt=b?i(D[Tt],et[Tt],wt):D[Tt];I?(C.copy(E.normals[At]).multiplyScalar(Pt.x),O.copy(E.binormals[At]).multiplyScalar(Pt.y),F.copy(L[At]).add(C).add(O),f(F.x,F.y,F.z)):f(Pt.x,Pt.y,x/_*At);
}for(var Lt=A-1;Lt>=0;Lt--){for(var Et=Lt/A,Ot=w*Math.cos(Et*Math.PI/2),Ct=M*Math.sin(Et*Math.PI/2)+S,Ft=0,It=G.length;Ft<It;Ft++){var Nt=i(G[Ft],q[Ft],Ct);f(Nt.x,Nt.y,x+Ot)}for(var Dt=0,Rt=R.length;Dt<Rt;Dt++){var kt=R[Dt];K=tt[Dt];for(var zt=0,Ut=kt.length;zt<Ut;zt++){var Bt=i(kt[zt],K[zt],Ct);I?f(Bt.x,Bt.y+L[_-1].y,L[_-1].x+Ot):f(Bt.x,Bt.y,x+Ot)}}}u(),l()}B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,a=[],o=[],s=0,u=t.length;s<u;s++){var l=t[s];i(l)}this.setAttribute("position",new R(a,3)),this.setAttribute("uv",new R(o,2)),this.computeVertexNormals()}function Li(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Ei(t,e){W.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Oi(t,e)),this.mergeVertices()}function Oi(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return new W;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Pi.call(this,i,e),this.type="TextBufferGeometry"}function Ci(t,e,n,i,r,a,o){W.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Fi(t,e,n,i,r,a,o)),this.mergeVertices()}function Fi(t,e,n,i,r,a,o){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),u=0,l=[],h=new c,f=new c,p=[],d=[],m=[],v=[],g=0;g<=n;g++){var y=[],_=g/n,x=0;0==g&&0==a?x=.5/e:g==n&&s==Math.PI&&(x=-.5/e);for(var b=0;b<=e;b++){var w=b/e;h.x=-t*Math.cos(i+w*r)*Math.sin(a+_*o),h.y=t*Math.cos(a+_*o),h.z=t*Math.sin(i+w*r)*Math.sin(a+_*o),d.push(h.x,h.y,h.z),f.copy(h).normalize(),m.push(f.x,f.y,f.z),v.push(w+x,1-_),y.push(u++)}l.push(y)}for(var M=0;M<n;M++)for(var S=0;S<e;S++){var A=l[M][S+1],T=l[M][S],P=l[M+1][S],L=l[M+1][S+1];(0!==M||a>0)&&p.push(A,T,L),(M!==n-1||s<Math.PI)&&p.push(T,P,L)}this.setIndex(p),this.setAttribute("position",new R(d,3)),this.setAttribute("normal",new R(m,3)),this.setAttribute("uv",new R(v,2))}function Ii(t,e,n,i,r,a){W.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ni(t,e,n,i,r,a)),this.mergeVertices()}function Ni(t,e,i,r,a,o){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},t=t||.5,e=e||1,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):1;for(var s=[],u=[],l=[],h=[],f=t,p=(e-t)/r,d=new c,m=new n,v=0;v<=r;v++){for(var g=0;g<=i;g++){var y=a+g/i*o;d.x=f*Math.cos(y),d.y=f*Math.sin(y),u.push(d.x,d.y,d.z),l.push(0,0,1),m.x=(d.x/e+1)/2,m.y=(d.y/e+1)/2,h.push(m.x,m.y)}f+=p}for(var _=0;_<r;_++)for(var x=_*(i+1),b=0;b<i;b++){var w=b+x,M=w,S=w+i+1,A=w+i+2,T=w+1;s.push(M,S,T),s.push(S,A,T)}this.setIndex(s),this.setAttribute("position",new R(u,3)),this.setAttribute("normal",new R(l,3)),this.setAttribute("uv",new R(h,2))}function Di(t,e,n,i){W.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Ri(t,e,n,i)),this.mergeVertices()}function Ri(t,e,i,r){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=Cl.clamp(r,0,2*Math.PI);for(var a=[],o=[],s=[],u=1/e,l=new c,h=new n,f=0;f<=e;f++)for(var p=i+f*u*r,d=Math.sin(p),m=Math.cos(p),v=0;v<=t.length-1;v++)l.x=t[v].x*d,l.y=t[v].y,l.z=t[v].x*m,o.push(l.x,l.y,l.z),h.x=f/e,h.y=v/(t.length-1),s.push(h.x,h.y);for(var g=0;g<e;g++)for(var y=0;y<t.length-1;y++){var _=y+g*t.length,x=_,b=_+t.length,w=_+t.length+1,M=_+1;a.push(x,b,M),a.push(b,w,M)}if(this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("uv",new R(s,2)),this.computeVertexNormals(),r===2*Math.PI)for(var S=this.attributes.normal.array,A=new c,T=new c,P=new c,L=e*t.length*3,E=0,O=0;E<t.length;E++,O+=3)A.x=S[O+0],A.y=S[O+1],A.z=S[O+2],T.x=S[L+O+0],T.y=S[L+O+1],T.z=S[L+O+2],P.addVectors(A,T).normalize(),S[O+0]=S[L+O+0]=P.x,S[O+1]=S[L+O+1]=P.y,S[O+2]=S[L+O+2]=P.z}function ki(t,e){W.call(this),this.type="ShapeGeometry","object"==typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new zi(t,e)),this.mergeVertices()}function zi(t,e){function n(t){var n=r.length/3,s=t.extractPoints(e),c=s.shape,l=s.holes;qm.isClockWise(c)===!1&&(c=c.reverse());for(var h=0,f=l.length;h<f;h++){var p=l[h];qm.isClockWise(p)===!0&&(l[h]=p.reverse())}for(var d=qm.triangulateShape(c,l),m=0,v=l.length;m<v;m++){var g=l[m];c=c.concat(g)}for(var y=0,_=c.length;y<_;y++){var x=c[y];r.push(x.x,x.y,0),a.push(0,0,1),o.push(x.x,x.y)}for(var b=0,w=d.length;b<w;b++){var M=d[b],S=M[0]+n,A=M[1]+n,T=M[2]+n;i.push(S,A,T),u+=3}}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],a=[],o=[],s=0,u=0;if(Array.isArray(t)===!1)n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(i),this.setAttribute("position",new R(r,3)),this.setAttribute("normal",new R(a,3)),this.setAttribute("uv",new R(o,2))}function Ui(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function Bi(t,e){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,o=[],s=Math.cos(Cl.DEG2RAD*e),u=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(a=new W,a.fromBufferGeometry(t)):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,p=0,d=f.length;p<d;p++)for(var m=f[p],v=0;v<3;v++)n=m[l[v]],i=m[l[(v+1)%3]],u[0]=Math.min(n,i),u[1]=Math.max(n,i),r=u[0]+","+u[1],void 0===c[r]?c[r]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var g=c[r];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new R(o,3))}function ji(t,e,n,i,r,a,o,s){W.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Gi(t,e,n,i,r,a,o,s)),this.mergeVertices()}function Gi(t,e,i,r,a,o,s,u){function l(){for(var n=new c,o=new c,l=0,h=(e-t)/i,b=0;b<=a;b++){for(var w=[],M=b/a,S=M*(e-t)+t,A=0;A<=r;A++){var T=A/r,P=T*u+s,L=Math.sin(P),E=Math.cos(P);o.x=S*L,o.y=-M*i+_,o.z=S*E,d.push(o.x,o.y,o.z),n.set(L,h,E).normalize(),m.push(n.x,n.y,n.z),v.push(T,1-M),w.push(g++)}y.push(w)}for(var O=0;O<r;O++)for(var C=0;C<a;C++){var F=y[C][O],I=y[C+1][O],N=y[C+1][O+1],D=y[C][O+1];p.push(F,I,D),p.push(I,N,D),l+=6}f.addGroup(x,l,0),x+=l}function h(i){var a,o,l=new n,h=new c,y=0,b=i===!0?t:e,w=i===!0?1:-1;a=g;for(var M=1;M<=r;M++)d.push(0,_*w,0),m.push(0,w,0),v.push(.5,.5),g++;o=g;for(var S=0;S<=r;S++){var A=S/r,T=A*u+s,P=Math.cos(T),L=Math.sin(T);h.x=b*L,h.y=_*w,h.z=b*P,d.push(h.x,h.y,h.z),m.push(0,w,0),l.x=.5*P+.5,l.y=.5*L*w+.5,v.push(l.x,l.y),g++}for(var E=0;E<r;E++){var O=a+E,C=o+E;i===!0?p.push(C,C+1,O):p.push(C+1,C,O),y+=3}f.addGroup(x,y,i===!0?1:2),x+=y}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};var f=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var p=[],d=[],m=[],v=[],g=0,y=[],_=i/2,x=0;l(),o===!1&&(t>0&&h(!0),e>0&&h(!1)),this.setIndex(p),this.setAttribute("position",new R(d,3)),this.setAttribute("normal",new R(m,3)),this.setAttribute("uv",new R(v,2))}function Vi(t,e,n,i,r,a,o){ji.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Wi(t,e,n,i,r,a,o){Gi.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Hi(t,e,n,i){W.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Xi(t,e,n,i)),this.mergeVertices()}function Xi(t,e,i,r){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a=[],o=[],s=[],u=[],l=new c,h=new n;o.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(var f=0,p=3;f<=e;f++,p+=3){var d=i+f/e*r;l.x=t*Math.cos(d),l.y=t*Math.sin(d),o.push(l.x,l.y,l.z),s.push(0,0,1),h.x=(o[p]/t+1)/2,h.y=(o[p+1]/t+1)/2,u.push(h.x,h.y)}for(var m=1;m<=e;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("normal",new R(s,3)),this.setAttribute("uv",new R(u,2))}function Yi(t){T.call(this),this.type="ShadowMaterial",this.color=new b(0),this.transparent=!0,this.setValues(t)}function qi(t){Q.call(this,t),this.type="RawShaderMaterial"}function Qi(t){T.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new b(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=el,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Zi(t){Qi.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new n(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Ji(t){T.call(this),this.type="MeshPhongMaterial",this.color=new b(16777215),this.specular=new b(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=el,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $i(t){T.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new b(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=el,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ki(t){T.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=el,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function tr(t){T.call(this),this.type="MeshLambertMaterial",this.color=new b(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ws,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function er(t){T.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new b(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=el,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function nr(t){gn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function ir(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function rr(t,e,n,i){ir.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ar(t,e,n,i){ir.call(this,t,e,n,i)}function or(t,e,n,i){ir.call(this,t,e,n,i)}function sr(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=$m.convertArray(e,this.TimeBufferType),this.values=$m.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function ur(t,e,n){sr.call(this,t,e,n)}function cr(t,e,n,i){sr.call(this,t,e,n,i)}function lr(t,e,n,i){sr.call(this,t,e,n,i)}function hr(t,e,n,i){ir.call(this,t,e,n,i)}function fr(t,e,n,i){sr.call(this,t,e,n,i)}function pr(t,e,n,i){sr.call(this,t,e,n,i)}function dr(t,e,n,i){sr.call(this,t,e,n,i)}function mr(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:Bc,this.uuid=Cl.generateUUID(),this.duration<0&&this.resetDuration()}function vr(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lr;case"vector":case"vector2":case"vector3":case"vector4":return dr;case"color":return cr;case"quaternion":return fr;case"bool":case"boolean":return ur;case"string":return pr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function gr(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=vr(t.type);if(void 0===t.times){var n=[],i=[];$m.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function yr(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,r===!1&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return e!==-1&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var i=u[e],r=u[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}function _r(t){this.manager=void 0!==t?t:tv,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}function xr(t){_r.call(this,t)}function br(t){_r.call(this,t)}function wr(t){_r.call(this,t)}function Mr(t){_r.call(this,t)}function Sr(t){_r.call(this,t)}function Ar(t){_r.call(this,t)}function Tr(t){_r.call(this,t)}function Pr(){this.type="Curve",this.arcLengthDivisions=200}function Lr(t,e,n,i,r,a,o,s){Pr.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Er(t,e,n,i,r,a){Lr.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function Or(){function t(t,a,o,s){e=t,n=o,i=-3*t+3*a-2*o-s,r=2*t-2*a+o+s}var e=0,n=0,i=0,r=0;return{initCatmullRom:function(e,n,i,r,a){t(n,i,a*(i-e),a*(r-n))},initNonuniformCatmullRom:function(e,n,i,r,a,o,s){var u=(n-e)/a-(i-e)/(a+o)+(i-n)/o,c=(i-n)/o-(r-n)/(o+s)+(r-i)/s;u*=o,c*=o,t(n,i,u,c)},calc:function(t){var a=t*t,o=a*t;return e+n*t+i*a+r*o}}}function Cr(t,e,n,i){Pr.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Fr(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t,u=t*s;return(2*n-2*i+a+o)*u+(-3*n+3*i-2*a-o)*s+a*t+n}function Ir(t,e){var n=1-t;return n*n*e}function Nr(t,e){return 2*(1-t)*t*e}function Dr(t,e){return t*t*e}function Rr(t,e,n,i){return Ir(t,e)+Nr(t,n)+Dr(t,i)}function kr(t,e){var n=1-t;return n*n*n*e}function zr(t,e){var n=1-t;return 3*n*n*t*e}function Ur(t,e){return 3*(1-t)*t*t*e}function Br(t,e){return t*t*t*e}function jr(t,e,n,i,r){return kr(t,e)+zr(t,n)+Ur(t,i)+Br(t,r)}function Gr(t,e,i,r){Pr.call(this),this.type="CubicBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n,this.v3=r||new n}function Vr(t,e,n,i){Pr.call(this),this.type="CubicBezierCurve3",this.v0=t||new c,this.v1=e||new c,this.v2=n||new c,this.v3=i||new c}function Wr(t,e){Pr.call(this),this.type="LineCurve",this.v1=t||new n,this.v2=e||new n}function Hr(t,e){Pr.call(this),this.type="LineCurve3",this.v1=t||new c,this.v2=e||new c}function Xr(t,e,i){Pr.call(this),this.type="QuadraticBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n}function Yr(t,e,n){Pr.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new c,this.v1=e||new c,this.v2=n||new c}function qr(t){Pr.call(this),this.type="SplineCurve",this.points=t||[]}function Qr(){Pr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Zr(t){Qr.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function Jr(t){Zr.call(this,t),this.uuid=Cl.generateUUID(),this.type="Shape",this.holes=[]}function $r(t,e){p.call(this),this.type="Light",this.color=new b(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Kr(t,e,n){$r.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(p.DefaultUp),this.updateMatrix(),this.groundColor=new b(e)}function ta(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.mapPass=null,this.matrix=new l,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new et,this._frameExtents=new n(1,1),this._viewportCount=1,this._viewports=[new a(0,0,1,1)]}function ea(){ta.call(this,new J(50,1,.5,500))}function na(t,e,n,i,r,a){$r.call(this,t,e),this.type="SpotLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new ea}function ia(){ta.call(this,new J(90,1,.5,500)),this._frameExtents=new n(4,2),this._viewportCount=6,this._viewports=[new a(2,1,1,1),new a(0,1,1,1),new a(3,1,1,1),new a(1,1,1,1),new a(3,0,1,1),new a(1,0,1,1)],this._cubeDirections=[new c(1,0,0),new c((-1),0,0),new c(0,0,1),new c(0,0,(-1)),new c(0,1,0),new c(0,(-1),0)],this._cubeUps=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,(-1))]}function ra(t,e,n,i){$r.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ia}function aa(t,e,n,i,r,a){Z.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function oa(){ta.call(this,new aa((-5),5,5,(-5),.5,500))}function sa(t,e){$r.call(this,t,e),this.type="DirectionalLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,this.shadow=new oa}function ua(t,e){$r.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function ca(t,e,n,i){$r.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function la(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new c)}function ha(t,e){$r.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new la}function fa(t){_r.call(this,t),this.textures={}}function pa(){B.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function da(t,e,n,i){"number"==typeof n&&(i=n,n=!1),L.call(this,t,e,n),this.meshPerAttribute=i||1}function ma(t){_r.call(this,t)}function va(t){_r.call(this,t)}function ga(t){"undefined"==typeof createImageBitmap,"undefined"==typeof fetch,_r.call(this,t),this.options={premultiplyAlpha:"none"}}function ya(){this.type="ShapePath",this.color=new b,this.subPaths=[],this.currentPath=null}function _a(t){this.type="Font",this.data=t}function xa(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,u=0,c=0;c<i.length;c++){var l=i[c];if("\n"===l)s=0,u-=a;else{var h=ba(l,r,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}function ba(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,u,c,l,h,f,p,d=new ya;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":o=m[v++]*e+n,s=m[v++]*e+i,d.moveTo(o,s);break;case"l":o=m[v++]*e+n,s=m[v++]*e+i,d.lineTo(o,s);break;case"q":u=m[v++]*e+n,c=m[v++]*e+i,l=m[v++]*e+n,h=m[v++]*e+i,d.quadraticCurveTo(l,h,u,c);break;case"b":u=m[v++]*e+n,c=m[v++]*e+i,l=m[v++]*e+n,h=m[v++]*e+i,f=m[v++]*e+n,p=m[v++]*e+i,d.bezierCurveTo(l,h,f,p,u,c)}}return{offsetX:a.ha*e,path:d}}}function wa(t){_r.call(this,t)}function Ma(t){_r.call(this,t)}function Sa(t,e,n){ha.call(this,void 0,n);var i=(new b).set(t),r=(new b).set(e),a=new c(i.r,i.g,i.b),o=new c(r.r,r.g,r.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}function Aa(t,e){ha.call(this,void 0,e);var n=(new b).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Ta(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new J,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new J,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Pa(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function La(){p.call(this),this.type="AudioListener",this.context=pv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Pa}function Ea(t){p.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}function Oa(t){Ea.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Ca(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Fa(t,e,n){this.binding=t,this.valueSize=n;var i,r,a;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}function Ia(t,e,n){var i=n||Na.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Na(t,e,n){this.path=e,this.parsedPath=n||Na.parseTrackName(e),this.node=Na.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Da(){this.uuid=Cl.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ra(t,e,n,i){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=i||e.blendMode;for(var r=e.tracks,a=r.length,o=new Array(a),s={endingStart:kc,endingEnd:kc},u=0;u!==a;++u){var c=r[u].createInterpolant(null);o[u]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Fc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ka(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function za(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function Ua(t,e,n){sn.call(this,t,e),this.meshPerAttribute=n||1}function Ba(t,e,n,i){this.ray=new y(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new f,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function ja(t,e){return t.distance-e.distance}function Ga(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0)for(var r=t.children,a=0,o=r.length;a<o;a++)Ga(r[a],e,n,!0)}function Va(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Wa(t,e){this.min=void 0!==t?t:new n((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new n((-(1/0)),(-(1/0)))}function Ha(t,e){this.start=void 0!==t?t:new c,this.end=void 0!==e?e:new c}function Xa(t){p.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function Ya(t,e){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new B,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1,o=32;r<o;r++,a++){var s=r/o*Math.PI*2,u=a/o*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new R(i,3));var c=new gn({fog:!1,toneMapped:!1});this.cone=new _n(n,c),this.add(this.cone),this.update()}function qa(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,qa(t.children[n]));return e}function Qa(t){for(var e=qa(t),n=new B,i=[],r=[],a=new b(0,0,1),o=new b(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new R(i,3)),n.setAttribute("color",new R(r,3));var c=new gn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});_n.call(this,n,c),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Za(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new Fi(e,4,2),r=new P({wireframe:!0,fog:!1,toneMapped:!1});j.call(this,i,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ja(t,e,n){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Rn(e);i.rotateY(.5*Math.PI),this.material=new P({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new L(a,3)),this.add(new j(i,this.material)),this.update()}function $a(t,e,n,i){t=t||10,e=e||10,n=new b(void 0!==n?n:4473924),i=new b(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],u=[],c=0,l=0,h=-o;c<=e;c++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=c===r?n:i;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var p=new B;p.setAttribute("position",new R(s,3)),p.setAttribute("color",new R(u,3));var d=new gn({vertexColors:!0,toneMapped:!1});_n.call(this,p,d),this.type="GridHelper"}function Ka(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new b(void 0!==r?r:4473924),a=new b(void 0!==a?a:8947848);for(var o=[],s=[],u=0;u<=e;u++){var c=u/e*(2*Math.PI),l=Math.sin(c)*t,h=Math.cos(c)*t;o.push(0,0,0),o.push(l,0,h);var f=1&u?r:a;s.push(f.r,f.g,f.b),s.push(f.r,f.g,f.b)}for(var p=0;p<=n;p++)for(var d=1&p?r:a,m=t-t/n*p,v=0;v<i;v++){var g=v/i*(2*Math.PI),y=Math.sin(g)*m,_=Math.cos(g)*m;o.push(y,0,_),s.push(d.r,d.g,d.b),g=(v+1)/i*(2*Math.PI),y=Math.sin(g)*m,_=Math.cos(g)*m,o.push(y,0,_),s.push(d.r,d.g,d.b)}var x=new B;x.setAttribute("position",new R(o,3)),x.setAttribute("color",new R(s,3));var w=new gn({vertexColors:!0,toneMapped:!1});_n.call(this,x,w),this.type="PolarGridHelper"}function to(t,e,n){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new B;i.setAttribute("position",new R([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new gn({fog:!1,toneMapped:!1});this.lightPlane=new yn(i,r),this.add(this.lightPlane),i=new B,i.setAttribute("position",new R([0,0,0,0,0,1],3)),this.targetLine=new yn(i,r),this.add(this.targetLine),this.update()}function eo(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var i=new B,r=new gn({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],s={},u=new b(16755200),c=new b(16711680),l=new b(43775),h=new b(16777215),f=new b(3355443);
e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),i.setAttribute("position",new R(a,3)),i.setAttribute("color",new R(o,3)),_n.call(this,i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function no(t,e,n,i,r,a,o){qv.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],qv.x,qv.y,qv.z)}function io(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new B;r.setIndex(new L(n,1)),r.setAttribute("position",new L(i,3)),_n.call(this,r,new gn({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function ro(t,e){this.type="Box3Helper",this.box=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new B;r.setIndex(new L(n,1)),r.setAttribute("position",new R(i,3)),_n.call(this,r,new gn({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function ao(t,e,n){this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new B;a.setAttribute("position",new R(r,3)),a.computeBoundingSphere(),yn.call(this,a,new gn({color:i,toneMapped:!1})),this.type="PlaneHelper";var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new B;s.setAttribute("position",new R(o,3)),s.computeBoundingSphere(),this.add(new j(s,new P({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function oo(t,e,n,i,r,a){p.call(this),this.type="ArrowHelper",void 0===t&&(t=new c(0,0,1)),void 0===e&&(e=new c(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Jv&&(Jv=new B,Jv.setAttribute("position",new R([0,0,0,0,1,0],3)),$v=new Gi(0,.5,1,5,1),$v.translate(0,-.5,0)),this.position.copy(e),this.line=new yn(Jv,new gn({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new j($v,new P({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function so(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new B;i.setAttribute("position",new R(e,3)),i.setAttribute("color",new R(n,3));var r=new gn({vertexColors:!0,toneMapped:!1});_n.call(this,i,r),this.type="AxesHelper"}function uo(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=po(ag),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function co(t){return void 0!==t&&t.type===_u&&(t.encoding===Hc||t.encoding===Xc||t.encoding===Yc)}function lo(){for(var t=[],e=[],n=[],i=eg,r=0;r<rg;r++){var a=Math.pow(2,i);e.push(a);var o=1/a;r>eg-tg?o=ig[r-eg+tg-1]:0==r&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=6,f=6,p=3,d=2,m=1,v=new Float32Array(p*f*h),g=new Float32Array(d*f*h),y=new Float32Array(m*f*h),_=0;_<h;_++){var x=_%3*2/3-1,b=_>2?0:-1,w=[x,b,0,x+2/3,b,0,x+2/3,b+1,0,x,b,0,x+2/3,b+1,0,x,b+1,0];v.set(w,p*f*_),g.set(l,d*f*_);var M=[_,_,_,_,_,_];y.set(M,m*f*_)}var S=new B;S.setAttribute("position",new L(v,p)),S.setAttribute("uv",new L(g,d)),S.setAttribute("faceIndex",new L(y,m)),t.push(S),i>tg&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function ho(t){var e=new o(3*ng,3*ng,t);return e.texture.mapping=ru,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function fo(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function po(t){var e=new Float32Array(t),n=new c(0,1,0),i=new qi({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:og[Hc]},outputEncoding:{value:og[Hc]}},vertexShader:go(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+yo()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ds,depthTest:!1,depthWrite:!1});return i}function mo(){var t=new n(1,1),e=new qi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:og[Hc]},outputEncoding:{value:og[Hc]}},vertexShader:go(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+yo()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ds,depthTest:!1,depthWrite:!1});return e}function vo(){var t=new qi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:og[Hc]},outputEncoding:{value:og[Hc]}},vertexShader:go(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+yo()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ds,depthTest:!1,depthWrite:!1});return t}function go(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function yo(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function _o(t,e,n,i,r,a,o){return new A(t,e,n,r,a,o)}function xo(t){return t}function bo(t){return void 0===t&&(t=[]),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function wo(t,e){return new wn(t,e)}function Mo(t){return new ln(t)}function So(t,e){return new wn(t,e)}function Ao(t){return new bn(t)}function To(t){return new bn(t)}function Po(t){return new bn(t)}function Lo(t,e,n){return new c(t,e,n)}function Eo(t,e){return new L(t,e).setUsage(xl)}function Oo(t,e){return new E(t,e)}function Co(t,e){return new O(t,e)}function Fo(t,e){return new C(t,e)}function Io(t,e){return new F(t,e)}function No(t,e){return new I(t,e)}function Do(t,e){return new N(t,e)}function Ro(t,e){return new D(t,e)}function ko(t,e){return new R(t,e)}function zo(t,e){return new k(t,e)}function Uo(t){Cr.call(this,t),this.type="catmullrom",this.closed=!0}function Bo(t){Cr.call(this,t),this.type="catmullrom"}function jo(t){Cr.call(this,t),this.type="catmullrom"}function Go(t){return new so(t)}function Vo(t,e){return new io(t,e)}function Wo(t,e){return new _n(new Bi(t.geometry),new gn({color:void 0!==e?e:16777215}))}function Ho(t,e){return new _n(new Ln(t.geometry),new gn({color:void 0!==e?e:16777215}))}function Xo(t){return new xr(t)}function Yo(t){return new Mr(t)}function qo(t,e,n){return new K(t,n)}function Qo(){}function Zo(){}function Jo(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e});var $o="119",Ko={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ts={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},es=0,ns=1,is=2,rs=3,as=0,os=1,ss=2,us=3,cs=0,ls=1,hs=2,fs=1,ps=2,ds=0,ms=1,vs=2,gs=3,ys=4,_s=5,xs=100,bs=101,ws=102,Ms=103,Ss=104,As=200,Ts=201,Ps=202,Ls=203,Es=204,Os=205,Cs=206,Fs=207,Is=208,Ns=209,Ds=210,Rs=0,ks=1,zs=2,Us=3,Bs=4,js=5,Gs=6,Vs=7,Ws=0,Hs=1,Xs=2,Ys=0,qs=1,Qs=2,Zs=3,Js=4,$s=5,Ks=300,tu=301,eu=302,nu=303,iu=304,ru=306,au=307,ou=1e3,su=1001,uu=1002,cu=1003,lu=1004,hu=1004,fu=1005,pu=1005,du=1006,mu=1007,vu=1007,gu=1008,yu=1008,_u=1009,xu=1010,bu=1011,wu=1012,Mu=1013,Su=1014,Au=1015,Tu=1016,Pu=1017,Lu=1018,Eu=1019,Ou=1020,Cu=1021,Fu=1022,Iu=1023,Nu=1024,Du=1025,Ru=Iu,ku=1026,zu=1027,Uu=1028,Bu=1029,ju=1030,Gu=1031,Vu=1032,Wu=1033,Hu=33776,Xu=33777,Yu=33778,qu=33779,Qu=35840,Zu=35841,Ju=35842,$u=35843,Ku=36196,tc=37492,ec=37496,nc=37808,ic=37809,rc=37810,ac=37811,oc=37812,sc=37813,uc=37814,cc=37815,lc=37816,hc=37817,fc=37818,pc=37819,dc=37820,mc=37821,vc=36492,gc=37840,yc=37841,_c=37842,xc=37843,bc=37844,wc=37845,Mc=37846,Sc=37847,Ac=37848,Tc=37849,Pc=37850,Lc=37851,Ec=37852,Oc=37853,Cc=2200,Fc=2201,Ic=2202,Nc=2300,Dc=2301,Rc=2302,kc=2400,zc=2401,Uc=2402,Bc=2500,jc=2501,Gc=0,Vc=1,Wc=2,Hc=3e3,Xc=3001,Yc=3007,qc=3002,Qc=3003,Zc=3004,Jc=3005,$c=3006,Kc=3200,tl=3201,el=0,nl=1,il=0,rl=7680,al=7681,ol=7682,sl=7683,ul=34055,cl=34056,ll=5386,hl=512,fl=513,pl=514,dl=515,ml=516,vl=517,gl=518,yl=519,_l=35044,xl=35048,bl=35040,wl=35045,Ml=35049,Sl=35041,Al=35046,Tl=35050,Pl=35042;Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);r!==-1&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),r=0,a=i.length;r<a;r++)i[r].call(this,t)}}}});for(var Ll=[],El=0;El<256;El++)Ll[El]=(El<16?"0":"")+El.toString(16);var Ol=1234567,Cl={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=Ll[255&t]+Ll[t>>8&255]+Ll[t>>16&255]+Ll[t>>24&255]+"-"+Ll[255&e]+Ll[e>>8&255]+"-"+Ll[e>>16&15|64]+Ll[e>>24&255]+"-"+Ll[63&n|128]+Ll[n>>8&255]+"-"+Ll[n>>16&255]+Ll[n>>24&255]+Ll[255&i]+Ll[i>>8&255]+Ll[i>>16&255]+Ll[i>>24&255];return r.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Ol=t%2147483647),Ol=16807*Ol%2147483647,(Ol-1)/2147483646},degToRad:function(t){return t*Cl.DEG2RAD},radToDeg:function(t){return t*Cl.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),c=a((e+i)/2),l=o((e+i)/2),h=a((e-i)/2),f=o((e-i)/2),p=a((i-e)/2),d=o((i-e)/2);switch(r){case"XYX":t.set(s*l,u*h,u*f,s*c);break;case"YZY":t.set(u*f,s*l,u*h,s*c);break;case"ZXZ":t.set(u*h,u*f,s*l,s*c);break;case"XZX":t.set(s*l,u*d,u*p,s*c);break;case"YXY":t.set(u*p,s*l,u*d,s*c);break;case"ZYZ":t.set(u*d,u*p,s*l,s*c)}}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(i.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,u){var c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],p=n[8],d=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],x=i[2],b=i[5],w=i[8];return r[0]=a*d+o*g+s*x,r[3]=a*m+o*y+s*b,r[6]=a*v+o*_+s*w,r[1]=u*d+c*g+l*x,r[4]=u*m+c*y+l*b,r[7]=u*v+c*_+l*w,r[2]=h*d+f*g+p*x,r[5]=h*m+f*y+p*b,r[8]=h*v+f*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*a*c-e*o*u-n*r*c+n*o*s+i*r*u-i*a*s},getInverse:function(t,e){var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],p=f*u-c*h,d=c*l-f*s,m=h*s-u*l,v=r*p+a*d+o*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);var g=1/v;return i[0]=p*g,i[1]=(o*h-f*a)*g,i[2]=(c*a-o*u)*g,i[3]=d*g,i[4]=(f*r-o*l)*g,i[5]=(o*s-c*r)*g,i[6]=m*g,i[7]=(a*l-h*r)*g,i[8]=(u*r-a*s)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r),u=Math.sin(r);this.set(n*s,n*u,-n*(s*a+u*o)+a+t,-i*u,i*s,-i*(-u*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],u=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*u,i[6]=e*o+n*c,i[1]=-n*r+e*s,i[4]=-n*a+e*u,i[7]=-n*o+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Fl,Il={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Fl&&(Fl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Fl.width=t.width,Fl.height=t.height;var n=Fl.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Fl}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Nl=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=Ks,r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Cl.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(Il.getDataURL(i[a]))}else r=Il.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==Ks)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ou:t.x=t.x-Math.floor(t.x);break;case su:t.x=t.x<0?0:1;break;case uu:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ou:t.y=t.y-Math.floor(t.y);break;case su:t.y=t.y<0?0:1;break;case uu:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(r.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.defineProperties(a.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(a.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=.01,o=.1,s=t.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<a&&Math.abs(l-d)<a&&Math.abs(p-m)<a){if(Math.abs(c+h)<o&&Math.abs(l+d)<o&&Math.abs(p+m)<o&&Math.abs(u+f+v-3)<o)return this.set(1,0,0,0),this;e=Math.PI;var g=(u+1)/2,y=(f+1)/2,_=(v+1)/2,x=(c+h)/4,b=(l+d)/4,w=(p+m)/4;return g>y&&g>_?g<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=b/n):y>_?y<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=x/i,r=w/i):_<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=b/r,i=w/r),this.set(n,i,r,e),this}var M=Math.sqrt((m-p)*(m-p)+(l-d)*(l-d)+(h-c)*(h-c));return Math.abs(M)<.001&&(M=1),this.x=(m-p)/M,this.y=(l-d)/M,this.z=(h-c)/M,this.w=Math.acos((u+f+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){
return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.assign(Object.create(o.prototype),{constructor:s,isWebGLMultisampleRenderTarget:!0,copy:function(t){return o.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(u,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],u=n[i+1],c=n[i+2],l=n[i+3],h=r[a+0],f=r[a+1],p=r[a+2],d=r[a+3];if(l!==d||s!==h||u!==f||c!==p){var m=1-o,v=s*h+u*f+c*p+l*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,o=Math.sin(o*x)/_}var b=o*g;if(s=s*m+h*b,u=u*m+f*b,c=c*m+p*b,l=l*m+d*b,m===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l},multiplyQuaternionsFlat:function(t,e,n,i,r,a){var o=n[i],s=n[i+1],u=n[i+2],c=n[i+3],l=r[a],h=r[a+1],f=r[a+2],p=r[a+3];return t[e]=o*p+c*l+s*f-u*h,t[e+1]=s*p+c*h+u*l-o*f,t[e+2]=u*p+c*f+o*h-s*l,t[e+3]=c*p-o*l-s*h-u*f,t}}),Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(u.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(i/2),l=o(r/2),h=s(n/2),f=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p;break;case"YXZ":this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p;break;case"ZXY":this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p;break;case"ZYX":this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p;break;case"YZX":this._x=h*c*l+u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l-h*f*p;break;case"XZY":this._x=h*c*l-u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l+h*f*p}return e!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],o=e[5],s=e[9],u=e[2],c=e[6],l=e[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(r-u)*f,this._z=(a-i)*f}else if(n>o&&n>l){var p=2*Math.sqrt(1+n-o-l);this._w=(c-s)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(r+u)/p}else if(o>l){var d=2*Math.sqrt(1+o-n-l);this._w=(r-u)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(s+c)/d}else{var m=2*Math.sqrt(1+l-n-o);this._w=(a-i)/m,this._x=(r+u)/m,this._y=(s+c)/m,this._z=.25*m}return this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=1e-6,i=t.dot(e)+1;return i<n?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Cl.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+a*o+i*u-r*s,this._y=i*c+a*s+r*o-n*u,this._z=r*c+a*u+n*s-i*o,this._w=a*c-n*o-i*s-r*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*i+e*this._y,this._z=u*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-e)*l)/c,f=Math.sin(e*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=i*h+this._y*f,this._z=r*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Dl=new c,Rl=new u;Object.assign(c.prototype,{isVector3:!0,set:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return!t||!t.isEuler,this.applyQuaternion(Rl.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(Rl.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*i-o*n,c=s*n+o*e-r*i,l=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=u*s+h*-r+c*-o-l*-a,this.y=c*s+h*-a+l*-r-u*-o,this.z=l*s+h*-o+u*-a-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return Dl.copy(this).projectOnVector(t),this.sub(Dl)},reflect:function(t){return this.sub(Dl.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(Cl.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var kl=new c,zl=new l,Ul=new c(0,0,0),Bl=new c(1,1,1),jl=new c,Gl=new c,Vl=new c;Object.assign(l.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,u,c,l,h,f,p,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/kl.setFromMatrixColumn(t,0).length(),r=1/kl.setFromMatrixColumn(t,1).length(),a=1/kl.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){!t||!t.isEuler;var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),u=Math.sin(i),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var h=a*c,f=a*l,p=o*c,d=o*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+p*u,e[5]=h-d*u,e[9]=-o*s,e[2]=d-h*u,e[6]=p+f*u,e[10]=a*s}else if("YXZ"===t.order){var m=s*c,v=s*l,g=u*c,y=u*l;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*u,e[1]=a*l,e[5]=a*c,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){var _=s*c,x=s*l,b=u*c,w=u*l;e[0]=_-w*o,e[4]=-a*l,e[8]=b+x*o,e[1]=x+b*o,e[5]=a*c,e[9]=w-_*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var M=a*c,S=a*l,A=o*c,T=o*l;e[0]=s*c,e[4]=A*u-S,e[8]=M*u+T,e[1]=s*l,e[5]=T*u+M,e[9]=S*u-A,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var P=a*s,L=a*u,E=o*s,O=o*u;e[0]=s*c,e[4]=O-P*l,e[8]=E*l+L,e[1]=l,e[5]=a*c,e[9]=-o*c,e[2]=-u*c,e[6]=L*l+E,e[10]=P-O*l}else if("XZY"===t.order){var C=a*s,F=a*u,I=o*s,N=o*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=C*l+N,e[5]=a*c,e[9]=F*l-I,e[2]=I*l-F,e[6]=o*c,e[10]=N*l+C}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Ul,t,Bl)},lookAt:function(t,e,n){var i=this.elements;return Vl.subVectors(t,e),0===Vl.lengthSq()&&(Vl.z=1),Vl.normalize(),jl.crossVectors(n,Vl),0===jl.lengthSq()&&(1===Math.abs(n.z)?Vl.x+=1e-4:Vl.z+=1e-4,Vl.normalize(),jl.crossVectors(n,Vl)),jl.normalize(),Gl.crossVectors(Vl,jl),i[0]=jl.x,i[4]=Gl.x,i[8]=Vl.x,i[1]=jl.y,i[5]=Gl.y,i[9]=Vl.y,i[2]=jl.z,i[6]=Gl.z,i[10]=Vl.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=i[0],w=i[4],M=i[8],S=i[12],A=i[1],T=i[5],P=i[9],L=i[13],E=i[2],O=i[6],C=i[10],F=i[14],I=i[3],N=i[7],D=i[11],R=i[15];return r[0]=a*b+o*A+s*E+u*I,r[4]=a*w+o*T+s*O+u*N,r[8]=a*M+o*P+s*C+u*D,r[12]=a*S+o*L+s*F+u*R,r[1]=c*b+l*A+h*E+f*I,r[5]=c*w+l*T+h*O+f*N,r[9]=c*M+l*P+h*C+f*D,r[13]=c*S+l*L+h*F+f*R,r[2]=p*b+d*A+m*E+v*I,r[6]=p*w+d*T+m*O+v*N,r[10]=p*M+d*P+m*C+v*D,r[14]=p*S+d*L+m*F+v*R,r[3]=g*b+y*A+_*E+x*I,r[7]=g*w+y*T+_*O+x*N,r[11]=g*M+y*P+_*C+x*D,r[15]=g*S+y*L+_*F+x*R,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14],p=t[3],d=t[7],m=t[11],v=t[15];return p*(+r*s*l-i*u*l-r*o*h+n*u*h+i*o*f-n*s*f)+d*(+e*s*f-e*u*h+r*a*h-i*a*f+i*u*c-r*s*c)+m*(+e*u*l-e*o*f-r*a*l+n*a*f+r*o*c-n*u*c)+v*(-i*o*c-e*s*l+e*o*h+i*a*l-n*a*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],u=i[4],c=i[5],l=i[6],h=i[7],f=i[8],p=i[9],d=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15],x=p*y*h-g*d*h+g*l*m-c*y*m-p*l*_+c*d*_,b=v*d*h-f*y*h-v*l*m+u*y*m+f*l*_-u*d*_,w=f*g*h-v*p*h+v*c*m-u*g*m-f*c*_+u*p*_,M=v*p*l-f*g*l-v*c*d+u*g*d+f*c*y-u*p*y,S=r*x+a*b+o*w+s*M;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var A=1/S;return n[0]=x*A,n[1]=(g*d*s-p*y*s-g*o*m+a*y*m+p*o*_-a*d*_)*A,n[2]=(c*y*s-g*l*s+g*o*h-a*y*h-c*o*_+a*l*_)*A,n[3]=(p*l*s-c*d*s-p*o*h+a*d*h+c*o*m-a*l*m)*A,n[4]=b*A,n[5]=(f*y*s-v*d*s+v*o*m-r*y*m-f*o*_+r*d*_)*A,n[6]=(v*l*s-u*y*s-v*o*h+r*y*h+u*o*_-r*l*_)*A,n[7]=(u*d*s-f*l*s+f*o*h-r*d*h-u*o*m+r*l*m)*A,n[8]=w*A,n[9]=(v*p*s-f*g*s-v*a*m+r*g*m+f*a*_-r*p*_)*A,n[10]=(u*g*s-v*c*s+v*a*h-r*g*h-u*a*_+r*c*_)*A,n[11]=(f*c*s-u*p*s-f*a*h+r*p*h+u*a*m-r*c*m)*A,n[12]=M*A,n[13]=(f*g*o-v*p*o+v*a*d-r*g*d-f*a*y+r*p*y)*A,n[14]=(v*c*o-u*g*o-v*a*l+r*g*l+u*a*y-r*c*y)*A,n[15]=(u*p*o-f*c*o+f*a*l-r*p*l-u*a*d+r*c*d)*A,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,u=r*a,c=r*o;return this.set(u*a+n,u*o-i*s,u*s+i*o,0,u*o+i*s,c*o+n,c*s-i*a,0,u*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,u=r+r,c=a+a,l=o+o,h=r*u,f=r*c,p=r*l,d=a*c,m=a*l,v=o*l,g=s*u,y=s*c,_=s*l,x=n.x,b=n.y,w=n.z;return i[0]=(1-(d+v))*x,i[1]=(f+_)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(f-_)*b,i[5]=(1-(h+v))*b,i[6]=(m+g)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-g)*w,i[10]=(1-(h+d))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=kl.set(i[0],i[1],i[2]).length(),a=kl.set(i[4],i[5],i[6]).length(),o=kl.set(i[8],i[9],i[10]).length(),s=this.determinant();s<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],zl.copy(this);var u=1/r,c=1/a,l=1/o;return zl.elements[0]*=u,zl.elements[1]*=u,zl.elements[2]*=u,zl.elements[4]*=c,zl.elements[5]*=c,zl.elements[6]*=c,zl.elements[8]*=l,zl.elements[9]*=l,zl.elements[10]*=l,e.setFromRotationMatrix(zl),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){var o=this.elements,s=2*r/(e-t),u=2*r/(n-i),c=(e+t)/(e-t),l=(n+i)/(n-i),h=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),u=1/(n-i),c=1/(a-r),l=(e+t)*s,h=(n+i)*u,f=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var Wl=new l,Hl=new u;h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],h.DefaultOrder="XYZ",Object.defineProperties(h.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(h.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=Cl.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],u=r[1],c=r[5],l=r[9],h=r[2],f=r[6],p=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-l,p),this._y=0)}return this._order=e,n!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return Wl.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Wl,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Hl.setFromEuler(this),this.setFromQuaternion(Hl,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(f.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}});var Xl=0,Yl=new c,ql=new u,Ql=new l,Zl=new c,Jl=new c,$l=new c,Kl=new u,th=new c(1,0,0),eh=new c(0,1,0),nh=new c(0,0,1),ih={type:"added"},rh={type:"removed"};p.DefaultUp=new c(0,1,0),p.DefaultMatrixAutoUpdate=!0,p.prototype=Object.assign(Object.create(e.prototype),{constructor:p,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ql.setFromAxisAngle(t,e),this.quaternion.multiply(ql),this},rotateOnWorldAxis:function(t,e){return ql.setFromAxisAngle(t,e),this.quaternion.premultiply(ql),this},rotateX:function(t){return this.rotateOnAxis(th,t)},rotateY:function(t){return this.rotateOnAxis(eh,t)},rotateZ:function(t){return this.rotateOnAxis(nh,t)},translateOnAxis:function(t,e){return Yl.copy(t).applyQuaternion(this.quaternion),this.position.add(Yl.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(th,t)},translateY:function(t){return this.translateOnAxis(eh,t)},translateZ:function(t){return this.translateOnAxis(nh,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Ql.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Zl.copy(t):Zl.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Jl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ql.lookAt(Jl,Zl,this.up):Ql.lookAt(Zl,Jl,this.up),this.quaternion.setFromRotationMatrix(Ql),i&&(Ql.extractRotation(i.matrixWorld),ql.setFromRotationMatrix(Ql),this.quaternion.premultiply(ql.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ih)),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(rh)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Ql.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ql.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ql),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],a=r.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){return void 0===t&&(t=new c),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jl,t,$l),t},getWorldScale:function(t){return void 0===t&&(t=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jl,Kl,t),t},getWorldDirection:function(t){void 0===t&&(t=new c),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(t===!0&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),
0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];e(t.shapes,l)}else e(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],f=0,p=this.material.length;f<p;f++)h.push(e(t.materials,this.material[f]));a.material=h}else a.material=e(t.materials,this.material);if(this.children.length>0){a.children=[];for(var d=0;d<this.children.length;d++)a.children.push(this.children[d].toJSON(t).object)}if(i){var m=n(t.geometries),v=n(t.materials),g=n(t.textures),y=n(t.images),_=n(t.shapes);m.length>0&&(r.geometries=m),v.length>0&&(r.materials=v),g.length>0&&(r.textures=g),y.length>0&&(r.images=y),_.length>0&&(r.shapes=_)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),d.prototype=Object.assign(Object.create(p.prototype),{constructor:d,isScene:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ah=[new c,new c,new c,new c,new c,new c,new c,new c],oh=new c,sh=new m,uh=new c,ch=new c,lh=new c,hh=new c,fh=new c,ph=new c,dh=new c,mh=new c,vh=new c,gh=new c;Object.assign(m.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),a=-(1/0),o=-(1/0),s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),a=-(1/0),o=-(1/0),s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=oh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new c),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new c),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),sh.copy(e.boundingBox),sh.applyMatrix4(t.matrixWorld),this.union(sh));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new c),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,oh),oh.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(dh),mh.subVectors(this.max,dh),uh.subVectors(t.a,dh),ch.subVectors(t.b,dh),lh.subVectors(t.c,dh),hh.subVectors(ch,uh),fh.subVectors(lh,ch),ph.subVectors(uh,lh);var e=[0,-hh.z,hh.y,0,-fh.z,fh.y,0,-ph.z,ph.y,hh.z,0,-hh.x,fh.z,0,-fh.x,ph.z,0,-ph.x,-hh.y,hh.x,0,-fh.y,fh.x,0,-ph.y,ph.x,0];return!!v(e,uh,ch,lh,mh)&&(e=[1,0,0,0,1,0,0,0,1],!!v(e,uh,ch,lh,mh)&&(vh.crossVectors(hh,fh),e=[vh.x,vh.y,vh.z],v(e,uh,ch,lh,mh)))},clampPoint:function(t,e){return void 0===e&&(e=new c),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=oh.copy(t).clamp(this.min,this.max);return e.sub(t).length()},getBoundingSphere:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(oh).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(ah[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ah[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ah[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ah[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ah[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ah[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ah[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ah[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ah),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var yh=new m;Object.assign(g.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):yh.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(e=new c),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new m),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var _h=new c,xh=new c,bh=new c,wh=new c,Mh=new c,Sh=new c,Ah=new c;Object.assign(y.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new c),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,_h)),this},closestPointToPoint:function(t,e){void 0===e&&(e=new c),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=_h.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(_h.copy(this.direction).multiplyScalar(e).add(this.origin),_h.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){xh.copy(t).add(e).multiplyScalar(.5),bh.copy(e).sub(t).normalize(),wh.copy(this.origin).sub(xh);var r,a,o,s,u=.5*t.distanceTo(e),c=-this.direction.dot(bh),l=wh.dot(this.direction),h=-wh.dot(bh),f=wh.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(r=c*h-l,a=c*l-h,s=u*p,r>=0)if(a>=-s)if(a<=s){var d=1/p;r*=d,a*=d,o=r*(r+c*a+2*l)+a*(c*r+a+2*h)+f}else a=u,r=Math.max(0,-(c*a+l)),o=-r*r+a*(a+2*h)+f;else a=-u,r=Math.max(0,-(c*a+l)),o=-r*r+a*(a+2*h)+f;else a<=-s?(r=Math.max(0,-(-c*u+l)),a=r>0?-u:Math.min(Math.max(-u,-h),u),o=-r*r+a*(a+2*h)+f):a<=s?(r=0,a=Math.min(Math.max(-u,-h),u),o=a*(a+2*h)+f):(r=Math.max(0,-(c*u+l)),a=r>0?u:Math.min(Math.max(-u,-h),u),o=-r*r+a*(a+2*h)+f);else a=c>0?-u:u,r=Math.max(0,-(c*a+l)),o=-r*r+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(bh).multiplyScalar(a).add(xh),o},intersectSphere:function(t,e){_h.subVectors(t.center,this.origin);var n=_h.dot(this.direction),i=_h.dot(_h)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,i=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,i=(t.min.x-h.x)*u),c>=0?(r=(t.min.y-h.y)*c,a=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,a=(t.min.y-h.y)*c),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),l>=0?(o=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(o=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,_h)},intersectTriangle:function(t,e,n,i,r){Mh.subVectors(e,t),Sh.subVectors(n,t),Ah.crossVectors(Mh,Sh);var a,o=this.direction.dot(Ah);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}wh.subVectors(this.origin,t);var s=a*this.direction.dot(Sh.crossVectors(wh,Sh));if(s<0)return null;var u=a*this.direction.dot(Mh.cross(wh));if(u<0)return null;if(s+u>o)return null;var c=-a*wh.dot(Ah);return c<0?null:this.at(c/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Th=new c,Ph=new c,Lh=new i;Object.assign(_.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=Th.subVectors(n,e).cross(Ph.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(e=new c),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(e=new c);var n=t.delta(Th),i=this.normal.dot(n);if(0!==i){var r=-(t.start.dot(this.normal)+this.constant)/i;if(!(r<0||r>1))return e.copy(n).multiplyScalar(r).add(t.start)}else if(0===this.distanceToPoint(t.start))return e.copy(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(t=new c),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Lh.getNormalMatrix(t),i=this.coplanarPoint(Th).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Eh=new c,Oh=new c,Ch=new c,Fh=new c,Ih=new c,Nh=new c,Dh=new c,Rh=new c,kh=new c,zh=new c;Object.assign(x,{getNormal:function(t,e,n,i){void 0===i&&(i=new c),i.subVectors(n,e),Eh.subVectors(t,e),i.cross(Eh);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){Eh.subVectors(i,e),Oh.subVectors(n,e),Ch.subVectors(t,e);var a=Eh.dot(Eh),o=Eh.dot(Oh),s=Eh.dot(Ch),u=Oh.dot(Oh),l=Oh.dot(Ch),h=a*u-o*o;if(void 0===r&&(r=new c),0===h)return r.set(-2,-1,-1);var f=1/h,p=(u*s-o*l)*f,d=(a*l-o*s)*f;return r.set(1-p-d,d,p)},containsPoint:function(t,e,n,i){return x.getBarycoord(t,e,n,i,Fh),Fh.x>=0&&Fh.y>=0&&Fh.x+Fh.y<=1},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Fh),s.set(0,0),s.addScaledVector(r,Fh.x),s.addScaledVector(a,Fh.y),s.addScaledVector(o,Fh.z),s},isFrontFacing:function(t,e,n,i){return Eh.subVectors(n,e),Oh.subVectors(t,e),Eh.cross(Oh).dot(i)<0}}),Object.assign(x.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Eh.subVectors(this.c,this.b),Oh.subVectors(this.a,this.b),.5*Eh.cross(Oh).length()},getMidpoint:function(t){return void 0===t&&(t=new c),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return x.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(t=new _),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return x.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return x.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return x.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return x.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(e=new c);var n,i,r=this.a,a=this.b,o=this.c;Ih.subVectors(a,r),Nh.subVectors(o,r),Rh.subVectors(t,r);var s=Ih.dot(Rh),u=Nh.dot(Rh);if(s<=0&&u<=0)return e.copy(r);kh.subVectors(t,a);var l=Ih.dot(kh),h=Nh.dot(kh);if(l>=0&&h<=l)return e.copy(a);var f=s*h-l*u;if(f<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(r).addScaledVector(Ih,n);zh.subVectors(t,o);var p=Ih.dot(zh),d=Nh.dot(zh);if(d>=0&&p<=d)return e.copy(o);var m=p*u-s*d;if(m<=0&&u>=0&&d<=0)return i=u/(u-d),e.copy(r).addScaledVector(Nh,i);var v=l*d-p*h;if(v<=0&&h-l>=0&&p-d>=0)return Dh.subVectors(o,a),i=(h-l)/(h-l+(p-d)),e.copy(a).addScaledVector(Dh,i);var g=1/(v+m+f);return n=m*g,i=f*g,e.copy(r).addScaledVector(Ih,n).addScaledVector(Nh,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Uh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bh={h:0,s:0,l:0},jh={h:0,s:0,l:0};Object.assign(b.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=Cl.euclideanModulo(t,1),e=Cl.clamp(e,0,1),n=Cl.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=w(r,i,t+1/3),this.g=w(r,i,t),this.b=w(r,i,t-1/3)}return this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)<1}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Uh[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=M(t.r),this.g=M(t.g),this.b=M(t.b),this},copyLinearToSRGB:function(t){return this.r=S(t.r),this.g=S(t.g),this.b=S(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),u=(s+o)/2;if(s===o)e=0,n=0;else{var c=o-s;switch(n=u<=.5?c/(o+s):c/(2-o-s),o){case i:e=(r-a)/c+(r<a?6:0);break;case r:e=(a-i)/c+2;break;case a:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Bh),Bh.h+=t,Bh.s+=e,Bh.l+=n,this.setHSL(Bh.h,Bh.s,Bh.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Bh),t.getHSL(jh);var n=Cl.lerp(Bh.h,jh.h,e),i=Cl.lerp(Bh.s,jh.s,e),r=Cl.lerp(Bh.l,jh.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},fromBufferAttribute:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),b.NAMES=Uh,Object.assign(A.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var i=0,r=t.vertexColors.length;i<r;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this}});var Gh=0;T.prototype=Object.assign(Object.create(e.prototype),{constructor:T,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}else this.flatShading=n===fs}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ms&&(i.blending=this.blending),this.flatShading===!0&&(i.flatShading=this.flatShading),this.side!==cs&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(i.morphTargets=!0),this.morphNormals===!0&&(i.morphNormals=!0),this.skinning===!0&&(i.skinning=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),a=e(t.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,
this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),P.prototype=Object.create(T.prototype),P.prototype.constructor=P,P.prototype.isMeshBasicMaterial=!0,P.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Vh=new c,Wh=new n;Object.defineProperty(L.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(L.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new b),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(o=new n),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new c),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Wh.fromBufferAttribute(this,e),Wh.applyMatrix3(t),this.setXY(e,Wh.x,Wh.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Vh.fromBufferAttribute(this,i),Vh.applyMatrix3(t),this.setXYZ(i,Vh.x,Vh.y,Vh.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Vh.x=this.getX(e),Vh.y=this.getY(e),Vh.z=this.getZ(e),Vh.applyMatrix4(t),this.setXYZ(e,Vh.x,Vh.y,Vh.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Vh.x=this.getX(e),Vh.y=this.getY(e),Vh.z=this.getZ(e),Vh.applyNormalMatrix(t),this.setXYZ(e,Vh.x,Vh.y,Vh.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Vh.x=this.getX(e),Vh.y=this.getY(e),Vh.z=this.getZ(e),Vh.transformDirection(t),this.setXYZ(e,Vh.x,Vh.y,Vh.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),E.prototype=Object.create(L.prototype),E.prototype.constructor=E,O.prototype=Object.create(L.prototype),O.prototype.constructor=O,C.prototype=Object.create(L.prototype),C.prototype.constructor=C,F.prototype=Object.create(L.prototype),F.prototype.constructor=F,I.prototype=Object.create(L.prototype),I.prototype.constructor=I,N.prototype=Object.create(L.prototype),N.prototype.constructor=N,D.prototype=Object.create(L.prototype),D.prototype.constructor=D,R.prototype=Object.create(L.prototype),R.prototype.constructor=R,k.prototype=Object.create(L.prototype),k.prototype.constructor=k,Object.assign(z.prototype,{computeGroups:function(t){var e,n,i=[],r=void 0,a=t.faces;for(n=0;n<a.length;n++){var o=a[n];o.materialIndex!==r&&(r=o.materialIndex,void 0!==e&&(e.count=3*n-e.start,i.push(e)),e={start:3*n,materialIndex:r})}void 0!==e&&(e.count=3*n-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,u=t.morphTargets,c=u.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]={name:u[l].name,data:[]};this.morphTargets.position=e}var h,f=t.morphNormals,p=f.length;if(p>0){h=[];for(var d=0;d<p;d++)h[d]={name:f[d].name,data:[]};this.morphTargets.normal=h}var m=t.skinIndices,v=t.skinWeights,g=m.length===r.length,y=v.length===r.length;r.length>0&&0===i.length;for(var _=0;_<i.length;_++){var x=i[_];this.vertices.push(r[x.a],r[x.b],r[x.c]);var b=x.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=x.normal;this.normals.push(w,w,w)}var M=x.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var S=x.color;this.colors.push(S,S,S)}if(o===!0){var A=a[0][_];void 0!==A?this.uvs.push(A[0],A[1],A[2]):this.uvs.push(new n,new n,new n)}if(s===!0){var T=a[1][_];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):this.uvs2.push(new n,new n,new n)}for(var P=0;P<c;P++){var L=u[P].vertices;e[P].data.push(L[x.a],L[x.b],L[x.c])}for(var E=0;E<p;E++){var O=f[E].vertexNormals[_];h[E].data.push(O.a,O.b,O.c)}g&&this.skinIndices.push(m[x.a],m[x.b],m[x.c]),y&&this.skinWeights.push(v[x.a],v[x.b],v[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Hh=1,Xh=new l,Yh=new p,qh=new c,Qh=new m,Zh=new m,Jh=new c;B.prototype=Object.assign(Object.create(e.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(U(t)>65535?D:I)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new i).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(t),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Xh.makeRotationX(t),this.applyMatrix4(Xh),this},rotateY:function(t){return Xh.makeRotationY(t),this.applyMatrix4(Xh),this},rotateZ:function(t){return Xh.makeRotationZ(t),this.applyMatrix4(Xh),this},translate:function(t,e,n){return Xh.makeTranslation(t,e,n),this.applyMatrix4(Xh),this},scale:function(t,e,n){return Xh.makeScale(t,e,n),this.applyMatrix4(Xh),this},lookAt:function(t){return Yh.lookAt(t),Yh.updateMatrix(),this.applyMatrix4(Yh.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(qh).negate(),this.translate(qh.x,qh.y,qh.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new R(3*e.vertices.length,3),i=new R(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new R(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new R(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){var i=this.attributes.position;void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){var a=this.attributes.color;void 0!==a&&(a.copyColorsArray(e.colors),a.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var o=this.attributes.uv;void 0!==o&&(o.copyVector2sArray(e.uvs),o.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(e.lineDistances),s.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new z).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new L(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new L(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.setAttribute("color",new L(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new L(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new L(a,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var o in t.morphTargets){for(var s=[],u=t.morphTargets[o],c=0,l=u.length;c<l;c++){var h=u[c],f=new R(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var p=new R(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new R(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];Qh.setFromBufferAttribute(r),this.morphTargetsRelative?(Jh.addVectors(this.boundingBox.min,Qh.min),this.boundingBox.expandByPoint(Jh),Jh.addVectors(this.boundingBox.max,Qh.max),this.boundingBox.expandByPoint(Jh)):(this.boundingBox.expandByPoint(Qh.min),this.boundingBox.expandByPoint(Qh.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(Qh.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];Zh.setFromBufferAttribute(a),this.morphTargetsRelative?(Jh.addVectors(Qh.min,Zh.min),Qh.expandByPoint(Jh),Jh.addVectors(Qh.max,Zh.max),Qh.expandByPoint(Jh)):(Qh.expandByPoint(Zh.min),Qh.expandByPoint(Zh.max))}Qh.getCenter(n);for(var o=0,s=0,u=t.count;s<u;s++)Jh.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(Jh));if(e)for(var c=0,l=e.length;c<l;c++)for(var h=e[c],f=this.morphTargetsRelative,p=0,d=h.count;p<d;p++)Jh.fromBufferAttribute(h,p),f&&(qh.fromBufferAttribute(t,p),Jh.add(qh)),o=Math.max(o,n.distanceToSquared(Jh));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new L(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new c,o=new c,s=new c,u=new c,l=new c,h=new c,f=new c,p=new c;if(t)for(var d=0,m=t.count;d<m;d+=3){var v=t.getX(d+0),g=t.getX(d+1),y=t.getX(d+2);a.fromBufferAttribute(e,v),o.fromBufferAttribute(e,g),s.fromBufferAttribute(e,y),f.subVectors(s,o),p.subVectors(a,o),f.cross(p),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,g),h.fromBufferAttribute(n,y),u.add(f),l.add(f),h.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(y,h.x,h.y,h.z)}else for(var _=0,x=e.count;_<x;_+=3)a.fromBufferAttribute(e,_+0),o.fromBufferAttribute(e,_+1),s.fromBufferAttribute(e,_+2),f.subVectors(s,o),p.subVectors(a,o),f.cross(p),n.setXYZ(_+0,f.x,f.y,f.z),n.setXYZ(_+1,f.x,f.y,f.z),n.setXYZ(_+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],a=r.array,o=t.attributes[i],s=o.array,u=o.itemSize*e,c=Math.min(s.length,a.length-u),l=0,h=u;l<c;l++,h++)a[h]=s[l];return this}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Jh.fromBufferAttribute(t,e),Jh.normalize(),t.setXYZ(e,Jh.x,Jh.y,Jh.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i),o=0,s=0,u=0,c=e.length;u<c;u++){o=e[u]*i;for(var l=0;l<i;l++)a[s++]=n[o++]}return new L(a,i,r)}if(null===this.index)return this;var e=new B,n=this.index.array,i=this.attributes;for(var r in i){var a=i[r],o=t(a,n);e.setAttribute(r,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],h=0,f=l.length;h<f;h++){var p=l[h],d=t(p,n);c.push(d)}e.morphAttributes[u]=c}e.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,v=0,g=m.length;v<g;v++){var y=m[v];e.addGroup(y.start,y.count,y.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a],s=o.toJSON(t.data);""!==o.name&&(s.name=o.name),t.data.attributes[a]=s}var u={},c=!1;for(var l in this.morphAttributes){for(var h=this.morphAttributes[l],f=[],p=0,d=h.length;p<d;p++){var m=h[p],v=m.toJSON(t.data);""!==m.name&&(v.name=m.name),f.push(v)}f.length>0&&(u[l]=f,c=!0)}c&&(t.data.morphAttributes=u,t.data.morphTargetsRelative=this.morphTargetsRelative);var g=this.groups;g.length>0&&(t.data.groups=JSON.parse(JSON.stringify(g)));var y=this.boundingSphere;return null!==y&&(t.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),t},clone:function(){return(new B).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var o=t.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,h=c.length;l<h;l++)u.push(c[l].clone(e));this.morphAttributes[s]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var f=t.groups,p=0,d=f.length;p<d;p++){var m=f[p];this.addGroup(m.start,m.count,m.materialIndex)}var v=t.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var $h=new l,Kh=new y,tf=new g,ef=new c,nf=new c,rf=new c,af=new c,of=new c,sf=new c,uf=new c,cf=new c,lf=new c,hf=new n,ff=new n,pf=new n,df=new c,mf=new c;j.prototype=Object.assign(Object.create(p.prototype),{constructor:j,isMesh:!0,copy:function(t){return p.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0}},raycast:function(t,e){var i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),tf.copy(i.boundingSphere),tf.applyMatrix4(a),t.ray.intersectsSphere(tf)!==!1&&($h.getInverse(a),Kh.copy(t.ray).applyMatrix4($h),null===i.boundingBox||Kh.intersectsBox(i.boundingBox)!==!1))){var o;if(i.isBufferGeometry){var s=i.index,u=i.attributes.position,c=i.morphAttributes.position,l=i.morphTargetsRelative,h=i.attributes.uv,f=i.attributes.uv2,p=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(r))for(var m=0,v=p.length;m<v;m++)for(var g=p[m],y=r[g.materialIndex],_=Math.max(g.start,d.start),b=Math.min(g.start+g.count,d.start+d.count),w=_,M=b;w<M;w+=3){var S=s.getX(w),A=s.getX(w+1),T=s.getX(w+2);o=V(this,y,t,Kh,u,c,l,h,f,S,A,T),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=g.materialIndex,e.push(o))}else for(var P=Math.max(0,d.start),L=Math.min(s.count,d.start+d.count),E=P,O=L;E<O;E+=3){var C=s.getX(E),F=s.getX(E+1),I=s.getX(E+2);o=V(this,r,t,Kh,u,c,l,h,f,C,F,I),o&&(o.faceIndex=Math.floor(E/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(var N=0,D=p.length;N<D;N++)for(var R=p[N],k=r[R.materialIndex],z=Math.max(R.start,d.start),U=Math.min(R.start+R.count,d.start+d.count),B=z,j=U;B<j;B+=3){var W=B,H=B+1,X=B+2;o=V(this,k,t,Kh,u,c,l,h,f,W,H,X),o&&(o.faceIndex=Math.floor(B/3),o.face.materialIndex=R.materialIndex,e.push(o))}else for(var Y=Math.max(0,d.start),q=Math.min(u.count,d.start+d.count),Q=Y,Z=q;Q<Z;Q+=3){var J=Q,$=Q+1,K=Q+2;o=V(this,r,t,Kh,u,c,l,h,f,J,$,K),o&&(o.faceIndex=Math.floor(Q/3),e.push(o))}}else if(i.isGeometry){var tt,et=Array.isArray(r),nt=i.vertices,it=i.faces,rt=i.faceVertexUvs[0];rt.length>0&&(tt=rt);for(var at=0,ot=it.length;at<ot;at++){var st=it[at],ut=et?r[st.materialIndex]:r;if(void 0!==ut){var ct=nt[st.a],lt=nt[st.b],ht=nt[st.c];if(o=G(this,ut,t,Kh,ct,lt,ht,df)){if(tt&&tt[at]){var ft=tt[at];hf.copy(ft[0]),ff.copy(ft[1]),pf.copy(ft[2]),o.uv=x.getUV(df,ct,lt,ht,hf,ff,pf,new n)}o.face=st,o.faceIndex=at,e.push(o)}}}}}}});var vf=0,gf=new l,yf=new p,_f=new c;W.prototype=Object.assign(Object.create(e.prototype),{constructor:W,isGeometry:!0,applyMatrix4:function(t){for(var e=(new i).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var a=this.vertices[n];a.applyMatrix4(t)}for(var o=0,s=this.faces.length;o<s;o++){var u=this.faces[o];u.normal.applyMatrix3(e).normalize();for(var c=0,l=u.vertexNormals.length;c<l;c++)u.vertexNormals[c].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return gf.makeRotationX(t),this.applyMatrix4(gf),this},rotateY:function(t){return gf.makeRotationY(t),this.applyMatrix4(gf),this},rotateZ:function(t){return gf.makeRotationZ(t),this.applyMatrix4(gf),this},translate:function(t,e,n){return gf.makeTranslation(t,e,n),this.applyMatrix4(gf),this},scale:function(t,e,n){return gf.makeScale(t,e,n),this.applyMatrix4(gf),this},lookAt:function(t){return yf.lookAt(t),yf.updateMatrix(),this.applyMatrix4(yf.matrix),this},fromBufferGeometry:function(t){function e(t,e,r,a){var o=void 0===u?[]:[i.colors[t].clone(),i.colors[e].clone(),i.colors[r].clone()],f=void 0===s?[]:[(new c).fromBufferAttribute(s,t),(new c).fromBufferAttribute(s,e),(new c).fromBufferAttribute(s,r)],p=new A(t,e,r,f,o,a);i.faces.push(p),void 0!==l&&i.faceVertexUvs[0].push([(new n).fromBufferAttribute(l,t),(new n).fromBufferAttribute(l,e),(new n).fromBufferAttribute(l,r)]),void 0!==h&&i.faceVertexUvs[1].push([(new n).fromBufferAttribute(h,t),(new n).fromBufferAttribute(h,e),(new n).fromBufferAttribute(h,r)])}var i=this,r=null!==t.index?t.index:void 0,a=t.attributes;if(void 0===a.position)return this;var o=a.position,s=a.normal,u=a.color,l=a.uv,h=a.uv2;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=0;f<o.count;f++)i.vertices.push((new c).fromBufferAttribute(o,f)),void 0!==u&&i.colors.push((new b).fromBufferAttribute(u,f));var p=t.groups;if(p.length>0)for(var d=0;d<p.length;d++)for(var m=p[d],v=m.start,g=m.count,y=v,_=v+g;y<_;y+=3)void 0!==r?e(r.getX(y),r.getX(y+1),r.getX(y+2),m.materialIndex):e(y,y+1,y+2,m.materialIndex);else if(void 0!==r)for(var x=0;x<r.count;x+=3)e(r.getX(x),r.getX(x+1),r.getX(x+2));else for(var w=0;w<o.count;w+=3)e(w,w+1,w+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_f).negate(),this.translate(_f.x,_f.y,_f.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new l;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new c,e=new c,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)e[n]=new c;if(t)for(var r=new c,a=new c,o=0,s=this.faces.length;o<s;o++){var u=this.faces[o],l=this.vertices[u.a],h=this.vertices[u.b],f=this.vertices[u.c];r.subVectors(f,h),a.subVectors(l,h),r.cross(a),e[u.a].add(r),e[u.b].add(r),e[u.c].add(r)}else{this.computeFaceNormals();for(var p=0,d=this.faces.length;p<d;p++){var m=this.faces[p];e[m.a].add(m.normal),e[m.b].add(m.normal),e[m.c].add(m.normal)}}for(var v=0,g=this.vertices.length;v<g;v++)e[v].normalize();for(var y=0,_=this.faces.length;y<_;y++){var x=this.faces[y],b=x.vertexNormals;3===b.length?(b[0].copy(e[x.a]),b[1].copy(e[x.b]),b[2].copy(e[x.c])):(b[0]=e[x.a].clone(),b[1]=e[x.b].clone(),b[2]=e[x.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,r=n.vertexNormals.length;i<r;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var a=new W;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var u=this.morphNormals[o].faceNormals,l=this.morphNormals[o].vertexNormals,h=0,f=this.faces.length;h<f;h++){var p=new c,d={a:new c,b:new c,c:new c};u.push(p),l.push(d)}}var m=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var v=0,g=this.faces.length;v<g;v++){var y=this.faces[v],_=m.faceNormals[v],x=m.vertexNormals[v];_.copy(y.normal),x.a.copy(y.vertexNormals[0]),x.b.copy(y.vertexNormals[1]),x.c.copy(y.vertexNormals[2])}}for(var b=0,w=this.faces.length;b<w;b++){var M=this.faces[b];M.normal=M.__originalFaceNormal,M.vertexNormals=M.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,a=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,c=t.faces,l=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new i).getNormalMatrix(e));for(var f=0,p=s.length;f<p;f++){var d=s[f],m=d.clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(var v=0,g=h.length;v<g;v++)l.push(h[v].clone());for(var y=0,_=c.length;y<_;y++){var x=c[y],b=void 0,w=void 0,M=void 0,S=x.vertexNormals,T=x.vertexColors;b=new A(x.a+a,x.b+a,x.c+a),b.normal.copy(x.normal),void 0!==r&&b.normal.applyMatrix3(r).normalize();for(var P=0,L=S.length;P<L;P++)w=S[P].clone(),void 0!==r&&w.applyMatrix3(r).normalize(),b.vertexNormals.push(w);b.color.copy(x.color);for(var E=0,O=T.length;E<O;E++)M=T[E],b.vertexColors.push(M.clone());b.materialIndex=x.materialIndex+n,u.push(b)}for(var C=0,F=t.faceVertexUvs.length;C<F;C++){var I=t.faceVertexUvs[C];void 0===this.faceVertexUvs[C]&&(this.faceVertexUvs[C]=[]);for(var N=0,D=I.length;N<D;N++){for(var R=I[N],k=[],z=0,U=R.length;z<U;z++)k.push(R[z].clone());this.faceVertexUvs[C].push(k)}}}},mergeMesh:function(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){for(var t={},e=[],n=[],i=4,r=Math.pow(10,i),a=0,o=this.vertices.length;a<o;a++){var s=this.vertices[a],u=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r);void 0===t[u]?(t[u]=a,e.push(this.vertices[a]),n[a]=e.length-1):n[a]=n[t[u]]}for(var c=[],l=0,h=this.faces.length;l<h;l++){var f=this.faces[l];f.a=n[f.a],f.b=n[f.b],f.c=n[f.c];for(var p=[f.a,f.b,f.c],d=0;d<3;d++)if(p[d]===p[(d+1)%3]){c.push(l);break}}for(var m=c.length-1;m>=0;m--){var v=c[m];this.faces.splice(v,1);for(var g=0,y=this.faceVertexUvs.length;g<y;g++)this.faceVertexUvs[g].splice(v,1)}var _=this.vertices.length-e.length;return this.vertices=e,_},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new c(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,i=0;i<n;i++)e[i]._id=i;e.sort(t);var r,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===n&&(r=[]),s&&s.length===n&&(a=[]);for(var u=0;u<n;u++){var c=e[u]._id;r&&r.push(o[c]),a&&a.push(s[c])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=p.length,p.push(t.getHex()),d[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],h=[],f={},p=[],d={},m=[],v={},g=0;g<this.faces.length;g++){var y=this.faces[g],_=!0,x=!1,b=void 0!==this.faceVertexUvs[0][g],w=y.normal.length()>0,M=y.vertexNormals.length>0,S=1!==y.color.r||1!==y.color.g||1!==y.color.b,A=y.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,_),T=t(T,2,x),T=t(T,3,b),T=t(T,4,w),T=t(T,5,M),T=t(T,6,S),T=t(T,7,A),l.push(T),l.push(y.a,y.b,y.c),l.push(y.materialIndex),b){var P=this.faceVertexUvs[0][g];l.push(i(P[0]),i(P[1]),i(P[2]))}if(w&&l.push(e(y.normal)),M){var L=y.vertexNormals;l.push(e(L[0]),e(L[1]),e(L[2]))}if(S&&l.push(n(y.color)),A){var E=y.vertexColors;l.push(n(E[0]),n(E[1]),n(E[2]))}}return r.data={},r.data.vertices=s,r.data.normals=h,p.length>0&&(r.data.colors=p),m.length>0&&(r.data.uvs=[m]),r.data.faces=l,r},clone:function(){return(new W).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var r=t.colors,a=0,o=r.length;a<o;a++)this.colors.push(r[a].clone());for(var s=t.faces,u=0,c=s.length;u<c;u++)this.faces.push(s[u].clone());for(var l=0,h=t.faceVertexUvs.length;l<h;l++){var f=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var p=0,d=f.length;p<d;p++){for(var m=f[p],v=[],g=0,y=m.length;g<y;g++){var _=m[g];v.push(_.clone())}this.faceVertexUvs[l].push(v)}}for(var x=t.morphTargets,b=0,w=x.length;b<w;b++){var M={};if(M.name=x[b].name,void 0!==x[b].vertices){M.vertices=[];for(var S=0,A=x[b].vertices.length;S<A;S++)M.vertices.push(x[b].vertices[S].clone());
}if(void 0!==x[b].normals){M.normals=[];for(var T=0,P=x[b].normals.length;T<P;T++)M.normals.push(x[b].normals[T].clone())}this.morphTargets.push(M)}for(var L=t.morphNormals,E=0,O=L.length;E<O;E++){var C={};if(void 0!==L[E].vertexNormals){C.vertexNormals=[];for(var F=0,I=L[E].vertexNormals.length;F<I;F++){var N=L[E].vertexNormals[F],D={};D.a=N.a.clone(),D.b=N.b.clone(),D.c=N.c.clone(),C.vertexNormals.push(D)}}if(void 0!==L[E].faceNormals){C.faceNormals=[];for(var R=0,k=L[E].faceNormals.length;R<k;R++)C.faceNormals.push(L[E].faceNormals[R].clone())}this.morphNormals.push(C)}for(var z=t.skinWeights,U=0,B=z.length;U<B;U++)this.skinWeights.push(z[U].clone());for(var j=t.skinIndices,G=0,V=j.length;G<V;G++)this.skinIndices.push(j[G].clone());for(var W=t.lineDistances,H=0,X=W.length;H<X;H++)this.lineDistances.push(W[H]);var Y=t.boundingBox;null!==Y&&(this.boundingBox=Y.clone());var q=t.boundingSphere;return null!==q&&(this.boundingSphere=q.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),H.prototype=Object.create(W.prototype),H.prototype.constructor=H,X.prototype=Object.create(B.prototype),X.prototype.constructor=X;var xf={clone:Y,merge:q},bf="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",wf="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";Q.prototype=Object.create(T.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Y(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},Q.prototype.toJSON=function(t){var e=T.prototype.toJSON.call(this,t);e.uniforms={};for(var n in this.uniforms){var i=this.uniforms[n],r=i.value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)this.extensions[o]===!0&&(a[o]=!0);return Object.keys(a).length>0&&(e.extensions=a),e},Z.prototype=Object.assign(Object.create(p.prototype),{constructor:Z,isCamera:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new c),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){p.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),J.prototype=Object.assign(Object.create(Z.prototype),{constructor:J,isPerspectiveCamera:!0,copy:function(t,e){return Z.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Cl.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Cl.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Cl.RAD2DEG*Math.atan(Math.tan(.5*Cl.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Cl.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(r+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var Mf=90,Sf=1;$.prototype=Object.create(p.prototype),$.prototype.constructor=$,K.prototype=Object.create(o.prototype),K.prototype.constructor=K,K.prototype.isWebGLCubeRenderTarget=!0,K.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Iu,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n=new d,i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new Q({name:"CubemapFromEquirect",uniforms:Y(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ls,blending:ds});r.uniforms.tEquirect.value=e;var a=new j(new X(5,5,5),r);n.add(a);var o=new $(1,10,this);return o.update(t,n),a.geometry.dispose(),a.material.dispose(),this},tt.prototype=Object.create(r.prototype),tt.prototype.constructor=tt,tt.prototype.isDataTexture=!0;var Af=new g,Tf=new c;Object.assign(et.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(o-i,l-s,d-h,y-m).normalize(),e[1].setComponents(o+i,l+s,d+h,y+m).normalize(),e[2].setComponents(o+r,l+u,d+f,y+v).normalize(),e[3].setComponents(o-r,l-u,d-f,y-v).normalize(),e[4].setComponents(o-a,l-c,d-p,y-g).normalize(),e[5].setComponents(o+a,l+c,d+p,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Af.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Af)},intersectsSprite:function(t){return Af.center.set(0,0,0),Af.radius=.7071067811865476,Af.applyMatrix4(t.matrixWorld),this.intersectsSphere(Af)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){var a=e[r].distanceToPoint(n);if(a<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Tf.x=i.normal.x>0?t.max.x:t.min.x,Tf.y=i.normal.y>0?t.max.y:t.min.y,Tf.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Tf)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Pf={common:{diffuse:{value:new b(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new i},uv2Transform:{value:new i},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new b(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new b(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}},sprite:{diffuse:{value:new b(15658734)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}}};rt.prototype=Object.create(W.prototype),rt.prototype.constructor=rt,at.prototype=Object.create(B.prototype),at.prototype.constructor=at;var Lf="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Ef="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Of="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Cf="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",Ff="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",If="vec3 transformed = vec3( position );",Nf="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Df="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",Rf="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",kf="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",zf="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Uf="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Bf="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",jf="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Gf="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Vf="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Wf="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Hf="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Xf="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",Yf="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",qf="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Qf="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Zf="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Jf="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",$f="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kf="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",tp="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",ep="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",np="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",ip="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",rp="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ap="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",op="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",sp="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",up="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",cp="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lp="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",hp="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",fp="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",pp="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",dp="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",mp="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",vp="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",gp="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",yp="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",_p="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",xp="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",bp="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",wp="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",Mp="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Sp="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Ap="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Tp="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Pp="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Lp="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",Ep="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Op="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Cp="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Fp="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Ip="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Np="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Dp="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Rp="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",kp="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",zp="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",Up="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",Bp="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",jp="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",Gp="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Vp="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Wp="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Hp="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Xp="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Yp="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",qp="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Qp="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Zp="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Jp="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",$p="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",Kp="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",td="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ed="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",nd="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",id="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",rd="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ad="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",od="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",sd="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ud="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",cd="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",ld="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",hd="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",fd="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",pd="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",dd="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",md="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",vd="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",gd="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",yd="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",_d="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",xd="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",bd="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",wd="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Md="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Sd="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Ad="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Td="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Pd="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ld="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ed="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Od="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Cd="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fd="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Id="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Nd="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Dd="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Rd="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",kd="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",zd="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ud="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Bd="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",jd="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",Gd="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Vd="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Wd="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Hd="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Xd="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Yd="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",qd="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Qd={
alphamap_fragment:Lf,alphamap_pars_fragment:Ef,alphatest_fragment:Of,aomap_fragment:Cf,aomap_pars_fragment:Ff,begin_vertex:If,beginnormal_vertex:Nf,bsdfs:Df,bumpmap_pars_fragment:Rf,clipping_planes_fragment:kf,clipping_planes_pars_fragment:zf,clipping_planes_pars_vertex:Uf,clipping_planes_vertex:Bf,color_fragment:jf,color_pars_fragment:Gf,color_pars_vertex:Vf,color_vertex:Wf,common:Hf,cube_uv_reflection_fragment:Xf,defaultnormal_vertex:Yf,displacementmap_pars_vertex:qf,displacementmap_vertex:Qf,emissivemap_fragment:Zf,emissivemap_pars_fragment:Jf,encodings_fragment:$f,encodings_pars_fragment:Kf,envmap_fragment:tp,envmap_common_pars_fragment:ep,envmap_pars_fragment:np,envmap_pars_vertex:ip,envmap_physical_pars_fragment:dp,envmap_vertex:rp,fog_vertex:ap,fog_pars_vertex:op,fog_fragment:sp,fog_pars_fragment:up,gradientmap_pars_fragment:cp,lightmap_fragment:lp,lightmap_pars_fragment:hp,lights_lambert_vertex:fp,lights_pars_begin:pp,lights_toon_fragment:mp,lights_toon_pars_fragment:vp,lights_phong_fragment:gp,lights_phong_pars_fragment:yp,lights_physical_fragment:_p,lights_physical_pars_fragment:xp,lights_fragment_begin:bp,lights_fragment_maps:wp,lights_fragment_end:Mp,logdepthbuf_fragment:Sp,logdepthbuf_pars_fragment:Ap,logdepthbuf_pars_vertex:Tp,logdepthbuf_vertex:Pp,map_fragment:Lp,map_pars_fragment:Ep,map_particle_fragment:Op,map_particle_pars_fragment:Cp,metalnessmap_fragment:Fp,metalnessmap_pars_fragment:Ip,morphnormal_vertex:Np,morphtarget_pars_vertex:Dp,morphtarget_vertex:Rp,normal_fragment_begin:kp,normal_fragment_maps:zp,normalmap_pars_fragment:Up,clearcoat_normal_fragment_begin:Bp,clearcoat_normal_fragment_maps:jp,clearcoat_pars_fragment:Gp,packing:Vp,premultiplied_alpha_fragment:Wp,project_vertex:Hp,dithering_fragment:Xp,dithering_pars_fragment:Yp,roughnessmap_fragment:qp,roughnessmap_pars_fragment:Qp,shadowmap_pars_fragment:Zp,shadowmap_pars_vertex:Jp,shadowmap_vertex:$p,shadowmask_pars_fragment:Kp,skinbase_vertex:td,skinning_pars_vertex:ed,skinning_vertex:nd,skinnormal_vertex:id,specularmap_fragment:rd,specularmap_pars_fragment:ad,tonemapping_fragment:od,tonemapping_pars_fragment:sd,transmissionmap_fragment:ud,transmissionmap_pars_fragment:cd,uv_pars_fragment:ld,uv_pars_vertex:hd,uv_vertex:fd,uv2_pars_fragment:pd,uv2_pars_vertex:dd,uv2_vertex:md,worldpos_vertex:vd,background_frag:gd,background_vert:yd,cube_frag:_d,cube_vert:xd,depth_frag:bd,depth_vert:wd,distanceRGBA_frag:Md,distanceRGBA_vert:Sd,equirect_frag:Ad,equirect_vert:Td,linedashed_frag:Pd,linedashed_vert:Ld,meshbasic_frag:Ed,meshbasic_vert:Od,meshlambert_frag:Cd,meshlambert_vert:Fd,meshmatcap_frag:Id,meshmatcap_vert:Nd,meshtoon_frag:Dd,meshtoon_vert:Rd,meshphong_frag:kd,meshphong_vert:zd,meshphysical_frag:Ud,meshphysical_vert:Bd,normal_frag:jd,normal_vert:Gd,points_frag:Vd,points_vert:Wd,shadow_frag:Hd,shadow_vert:Xd,sprite_frag:Yd,sprite_vert:qd},Zd={basic:{uniforms:q([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.fog]),vertexShader:Qd.meshbasic_vert,fragmentShader:Qd.meshbasic_frag},lambert:{uniforms:q([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.fog,Pf.lights,{emissive:{value:new b(0)}}]),vertexShader:Qd.meshlambert_vert,fragmentShader:Qd.meshlambert_frag},phong:{uniforms:q([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.fog,Pf.lights,{emissive:{value:new b(0)},specular:{value:new b(1118481)},shininess:{value:30}}]),vertexShader:Qd.meshphong_vert,fragmentShader:Qd.meshphong_frag},standard:{uniforms:q([Pf.common,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.roughnessmap,Pf.metalnessmap,Pf.fog,Pf.lights,{emissive:{value:new b(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qd.meshphysical_vert,fragmentShader:Qd.meshphysical_frag},toon:{uniforms:q([Pf.common,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.gradientmap,Pf.fog,Pf.lights,{emissive:{value:new b(0)}}]),vertexShader:Qd.meshtoon_vert,fragmentShader:Qd.meshtoon_frag},matcap:{uniforms:q([Pf.common,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.fog,{matcap:{value:null}}]),vertexShader:Qd.meshmatcap_vert,fragmentShader:Qd.meshmatcap_frag},points:{uniforms:q([Pf.points,Pf.fog]),vertexShader:Qd.points_vert,fragmentShader:Qd.points_frag},dashed:{uniforms:q([Pf.common,Pf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qd.linedashed_vert,fragmentShader:Qd.linedashed_frag},depth:{uniforms:q([Pf.common,Pf.displacementmap]),vertexShader:Qd.depth_vert,fragmentShader:Qd.depth_frag},normal:{uniforms:q([Pf.common,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,{opacity:{value:1}}]),vertexShader:Qd.normal_vert,fragmentShader:Qd.normal_frag},sprite:{uniforms:q([Pf.sprite,Pf.fog]),vertexShader:Qd.sprite_vert,fragmentShader:Qd.sprite_frag},background:{uniforms:{uvTransform:{value:new i},t2D:{value:null}},vertexShader:Qd.background_vert,fragmentShader:Qd.background_frag},cube:{uniforms:q([Pf.envmap,{opacity:{value:1}}]),vertexShader:Qd.cube_vert,fragmentShader:Qd.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qd.equirect_vert,fragmentShader:Qd.equirect_frag},distanceRGBA:{uniforms:q([Pf.common,Pf.displacementmap,{referencePosition:{value:new c},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qd.distanceRGBA_vert,fragmentShader:Qd.distanceRGBA_frag},shadow:{uniforms:q([Pf.lights,Pf.fog,{color:{value:new b(0)},opacity:{value:1}}]),vertexShader:Qd.shadow_vert,fragmentShader:Qd.shadow_frag}};Zd.physical={uniforms:q([Zd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new n(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new b(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Qd.meshphysical_vert,fragmentShader:Qd.meshphysical_frag},_t.prototype=Object.create(r.prototype),_t.prototype.constructor=_t,_t.prototype.isCubeTexture=!0,Object.defineProperty(_t.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),xt.prototype=Object.create(r.prototype),xt.prototype.constructor=xt,xt.prototype.isDataTexture2DArray=!0,bt.prototype=Object.create(r.prototype),bt.prototype.constructor=bt,bt.prototype.isDataTexture3D=!0;var Jd=new r,$d=new xt,Kd=new bt,tm=new _t,em=[],nm=[],im=new Float32Array(16),rm=new Float32Array(9),am=new Float32Array(4);re.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),St(e,t)},ae.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var om=/([\w\d_]+)(\])?(\[|\.)?/g;ue.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},ue.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},ue.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];s.needsUpdate!==!1&&o.setValue(t,s.value,i)}},ue.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var sm=0,um=/^[ \t]*#include +<([\w\d.\/]+)>/gm,cm=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lm=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,hm=0;He.prototype=Object.create(T.prototype),He.prototype.constructor=He,He.prototype.isMeshDepthMaterial=!0,He.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Xe.prototype=Object.create(T.prototype),Xe.prototype.constructor=Xe,Xe.prototype.isMeshDistanceMaterial=!0,Xe.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var fm="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",pm="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";Je.prototype=Object.assign(Object.create(J.prototype),{constructor:Je,isArrayCamera:!0}),$e.prototype=Object.assign(Object.create(p.prototype),{constructor:$e,isGroup:!0}),Object.assign(Ke.prototype,{constructor:Ke,getHandSpace:function(){if(null===this._hand&&(this._hand=new $e,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new $e;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new $e,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new $e,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(t)if(t.hand){a=!0;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){var l=e.getJointPose(t.hand[c],n),h=u.joints[c];null!==l&&(h.matrix.fromArray(l.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=l.radius),h.visible=null!==l;var f=u.joints[window.XRHand.INDEX_PHALANX_TIP],p=u.joints[window.XRHand.THUMB_PHALANX_TIP],d=f.position.distanceTo(p.position),m=.02,v=.005;u.inputState.pinching&&d>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&d<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==o&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==s&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==u&&(u.visible=null!==a),this}}),Object.assign(tn.prototype,e.prototype),rn.prototype=Object.assign(Object.create(nn.prototype),{constructor:rn,isWebGL1Renderer:!0}),Object.assign(an.prototype,{isFogExp2:!0,clone:function(){return new an(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(on.prototype,{isFog:!0,clone:function(){return new on(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(sn.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(sn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cl.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new sn(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cl.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var dm=new c;Object.defineProperties(un.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(un.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)dm.x=this.getX(e),dm.y=this.getY(e),dm.z=this.getZ(e),dm.applyMatrix4(t),this.setXYZ(e,dm.x,dm.y,dm.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return new L(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new un(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),cn.prototype=Object.create(T.prototype),cn.prototype.constructor=cn,cn.prototype.isSpriteMaterial=!0,cn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var mm,vm=new c,gm=new c,ym=new c,_m=new n,xm=new n,bm=new l,wm=new c,Mm=new c,Sm=new c,Am=new n,Tm=new n,Pm=new n;ln.prototype=Object.assign(Object.create(p.prototype),{constructor:ln,isSprite:!0,raycast:function(t,e){null===t.camera,gm.setFromMatrixScale(this.matrixWorld),bm.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ym.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gm.multiplyScalar(-ym.z);var i,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),i=Math.sin(a));var o=this.center;hn(wm.set(-.5,-.5,0),ym,o,gm,i,r),hn(Mm.set(.5,-.5,0),ym,o,gm,i,r),hn(Sm.set(.5,.5,0),ym,o,gm,i,r),Am.set(0,0),Tm.set(1,0),Pm.set(1,1);var s=t.ray.intersectTriangle(wm,Mm,Sm,!1,vm);if(null!==s||(hn(Mm.set(-.5,.5,0),ym,o,gm,i,r),Tm.set(0,1),s=t.ray.intersectTriangle(wm,Sm,Mm,!1,vm),null!==s)){var u=t.ray.origin.distanceTo(vm);u<t.near||u>t.far||e.push({distance:u,point:vm.clone(),uv:x.getUV(vm,wm,Mm,Sm,Am,Tm,Pm,new n),face:null,object:this})}},copy:function(t){return p.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var Lm=new c,Em=new c;fn.prototype=Object.assign(Object.create(p.prototype),{constructor:fn,isLOD:!0,copy:function(t){p.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);var n,i=this.levels;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){var n=this.levels;if(n.length>0){Lm.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(Lm);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Lm.setFromMatrixPosition(t.matrixWorld),Em.setFromMatrixPosition(this.matrixWorld);var n=Lm.distanceTo(Em)/t.zoom;e[0].object.visible=!0;var i,r;for(i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),pn.prototype=Object.assign(Object.create(j.prototype),{constructor:pn,isSkinnedMesh:!0,copy:function(t){return j.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new a,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){j.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},boneTransform:function(){var t=new c,e=new a,n=new a,i=new c,r=new l;return function(a,o){var s=this.skeleton,u=this.geometry;e.fromBufferAttribute(u.attributes.skinIndex,a),n.fromBufferAttribute(u.attributes.skinWeight,a),t.fromBufferAttribute(u.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var c=0;c<4;c++){var l=n.getComponent(c);if(0!==l){var h=e.getComponent(c);r.multiplyMatrices(s.bones[h].matrixWorld,s.boneInverses[h]),o.addScaledVector(i.copy(t).applyMatrix4(r),l)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});var Om=new l,Cm=new l;Object.assign(dn.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new l;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:Cm;Om.multiplyMatrices(o,e[r]),Om.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new dn(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),mn.prototype=Object.assign(Object.create(p.prototype),{constructor:mn,isBone:!0});var Fm=new l,Im=new l,Nm=[],Dm=new j;vn.prototype=Object.assign(Object.create(j.prototype),{constructor:vn,isInstancedMesh:!0,copy:function(t){return j.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(Dm.geometry=this.geometry,Dm.material=this.material,void 0!==Dm.material)for(var r=0;r<i;r++){this.getMatrixAt(r,Fm),Im.multiplyMatrices(n,Fm),Dm.matrixWorld=Im,Dm.raycast(t,Nm);for(var a=0,o=Nm.length;a<o;a++){var s=Nm[a];s.instanceId=r,s.object=this,e.push(s)}Nm.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),gn.prototype=Object.create(T.prototype),gn.prototype.constructor=gn,gn.prototype.isLineBasicMaterial=!0,gn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var Rm=new c,km=new c,zm=new l,Um=new y,Bm=new g;yn.prototype=Object.assign(Object.create(p.prototype),{constructor:yn,isLine:!0,copy:function(t){return p.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Rm.fromBufferAttribute(e,i-1),km.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Rm.distanceTo(km);t.setAttribute("lineDistance",new R(n,1))}}else if(t.isGeometry){var a=t.vertices,o=t.lineDistances;o[0]=0;for(var s=1,u=a.length;s<u;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bm.copy(n.boundingSphere),Bm.applyMatrix4(i),Bm.radius+=r,t.ray.intersectsSphere(Bm)!==!1){zm.getInverse(i),Um.copy(t.ray).applyMatrix4(zm);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new c,u=new c,l=new c,h=new c,f=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var p=n.index,d=n.attributes,m=d.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=f){var _=v[g],x=v[g+1];s.fromArray(m,3*_),u.fromArray(m,3*x);var b=Um.distanceSqToSegment(s,u,h,l);if(!(b>o)){h.applyMatrix4(this.matrixWorld);var w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var M=0,S=m.length/3-1;M<S;M+=f){s.fromArray(m,3*M),u.fromArray(m,3*M+3);var A=Um.distanceSqToSegment(s,u,h,l);if(!(A>o)){h.applyMatrix4(this.matrixWorld);var T=t.ray.origin.distanceTo(h);T<t.near||T>t.far||e.push({distance:T,point:l.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var P=n.vertices,L=P.length,E=0;E<L-1;E+=f){var O=Um.distanceSqToSegment(P[E],P[E+1],h,l);if(!(O>o)){h.applyMatrix4(this.matrixWorld);var C=t.ray.origin.distanceTo(h);C<t.near||C>t.far||e.push({distance:C,point:l.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0}}});var jm=new c,Gm=new c;_n.prototype=Object.assign(Object.create(yn.prototype),{constructor:_n,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)jm.fromBufferAttribute(e,i),Gm.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+jm.distanceTo(Gm);t.setAttribute("lineDistance",new R(n,1))}}else if(t.isGeometry)for(var a=t.vertices,o=t.lineDistances,s=0,u=a.length;s<u;s+=2)jm.copy(a[s]),Gm.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+jm.distanceTo(Gm);return this}}),xn.prototype=Object.assign(Object.create(yn.prototype),{constructor:xn,isLineLoop:!0}),bn.prototype=Object.create(T.prototype),bn.prototype.constructor=bn,bn.prototype.isPointsMaterial=!0,bn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Vm=new l,Wm=new y,Hm=new g,Xm=new c;wn.prototype=Object.assign(Object.create(p.prototype),{constructor:wn,isPoints:!0,copy:function(t){return p.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Hm.copy(n.boundingSphere),Hm.applyMatrix4(i),Hm.radius+=r,t.ray.intersectsSphere(Hm)!==!1){Vm.getInverse(i),Wm.copy(t.ray).applyMatrix4(Vm);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,u=n.attributes,c=u.position.array;if(null!==s)for(var l=s.array,h=0,f=l.length;h<f;h++){var p=l[h];Xm.fromArray(c,3*p),Mn(Xm,p,o,i,t,e,this)}else for(var d=0,m=c.length/3;d<m;d++)Xm.fromArray(c,3*d),Mn(Xm,d,o,i,t,e,this)}else for(var v=n.vertices,g=0,y=v.length;g<y;g++)Mn(v[g],g,o,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0}}}),Sn.prototype=Object.assign(Object.create(r.prototype),{constructor:Sn,isVideoTexture:!0,update:function(){var t=this.image,e="requestVideoFrameCallback"in t;e===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),An.prototype=Object.create(r.prototype),An.prototype.constructor=An,An.prototype.isCompressedTexture=!0,Tn.prototype=Object.create(r.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isCanvasTexture=!0,Pn.prototype=Object.create(r.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isDepthTexture=!0,Ln.prototype=Object.create(B.prototype),Ln.prototype.constructor=Ln,En.prototype=Object.create(W.prototype),En.prototype.constructor=En,On.prototype=Object.create(B.prototype),On.prototype.constructor=On,Cn.prototype=Object.create(W.prototype),Cn.prototype.constructor=Cn,Fn.prototype=Object.create(B.prototype),Fn.prototype.constructor=Fn,In.prototype=Object.create(W.prototype),In.prototype.constructor=In,Nn.prototype=Object.create(Fn.prototype),Nn.prototype.constructor=Nn,Dn.prototype=Object.create(W.prototype),Dn.prototype.constructor=Dn,Rn.prototype=Object.create(Fn.prototype),Rn.prototype.constructor=Rn,kn.prototype=Object.create(W.prototype),kn.prototype.constructor=kn,zn.prototype=Object.create(Fn.prototype),zn.prototype.constructor=zn,Un.prototype=Object.create(W.prototype),Un.prototype.constructor=Un,Bn.prototype=Object.create(Fn.prototype),Bn.prototype.constructor=Bn,jn.prototype=Object.create(W.prototype),jn.prototype.constructor=jn,Gn.prototype=Object.create(B.prototype),Gn.prototype.constructor=Gn,Gn.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},Vn.prototype=Object.create(W.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(B.prototype),Wn.prototype.constructor=Wn,Hn.prototype=Object.create(W.prototype),Hn.prototype.constructor=Hn,Xn.prototype=Object.create(B.prototype),Xn.prototype.constructor=Xn;var Ym={triangulate:function(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,a=Yn(t,0,r,n,!0),o=[];if(!a||a.next===a.prev)return o;var s,u,c,l,h,f,p;if(i&&(a=ti(t,e,a,n)),t.length>80*n){s=c=t[0],u=l=t[1];for(var d=n;d<r;d+=n)h=t[d],f=t[d+1],h<s&&(s=h),f<u&&(u=f),h>c&&(c=h),f>l&&(l=f);p=Math.max(c-s,l-u),p=0!==p?1/p:0}return Qn(a,o,n,s,u,p),o}},qm={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return qm.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Si(t),Ai(n,t);var a=t.length;e.forEach(Si);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Ai(n,e[o]);for(var s=Ym.triangulate(n,i),u=0;u<s.length;u+=3)r.push(s.slice(u,u+3));return r}};Ti.prototype=Object.create(W.prototype),Ti.prototype.constructor=Ti,Ti.prototype.toJSON=function(){var t=W.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return Li(e,n,t)},Pi.prototype=Object.create(B.prototype),Pi.prototype.constructor=Pi,Pi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return Li(e,n,t)};var Qm={generateTopUV:function(t,e,i,r,a){var o=e[3*i],s=e[3*i+1],u=e[3*r],c=e[3*r+1],l=e[3*a],h=e[3*a+1];return[new n(o,s),new n(u,c),new n(l,h)]},generateSideWallUV:function(t,e,i,r,a,o){var s=e[3*i],u=e[3*i+1],c=e[3*i+2],l=e[3*r],h=e[3*r+1],f=e[3*r+2],p=e[3*a],d=e[3*a+1],m=e[3*a+2],v=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(u-h)<.01?[new n(s,1-c),new n(l,1-f),new n(p,1-m),new n(v,1-y)]:[new n(u,1-c),new n(h,1-f),new n(d,1-m),new n(g,1-y)]}};Ei.prototype=Object.create(W.prototype),Ei.prototype.constructor=Ei,Oi.prototype=Object.create(Pi.prototype),Oi.prototype.constructor=Oi,Ci.prototype=Object.create(W.prototype),Ci.prototype.constructor=Ci,Fi.prototype=Object.create(B.prototype),
Fi.prototype.constructor=Fi,Ii.prototype=Object.create(W.prototype),Ii.prototype.constructor=Ii,Ni.prototype=Object.create(B.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.create(W.prototype),Di.prototype.constructor=Di,Ri.prototype=Object.create(B.prototype),Ri.prototype.constructor=Ri,ki.prototype=Object.create(W.prototype),ki.prototype.constructor=ki,ki.prototype.toJSON=function(){var t=W.prototype.toJSON.call(this),e=this.parameters.shapes;return Ui(e,t)},zi.prototype=Object.create(B.prototype),zi.prototype.constructor=zi,zi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this),e=this.parameters.shapes;return Ui(e,t)},Bi.prototype=Object.create(B.prototype),Bi.prototype.constructor=Bi,ji.prototype=Object.create(W.prototype),ji.prototype.constructor=ji,Gi.prototype=Object.create(B.prototype),Gi.prototype.constructor=Gi,Vi.prototype=Object.create(ji.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(Gi.prototype),Wi.prototype.constructor=Wi,Hi.prototype=Object.create(W.prototype),Hi.prototype.constructor=Hi,Xi.prototype=Object.create(B.prototype),Xi.prototype.constructor=Xi;var Zm=Object.freeze({__proto__:null,WireframeGeometry:Ln,ParametricGeometry:En,ParametricBufferGeometry:On,TetrahedronGeometry:In,TetrahedronBufferGeometry:Nn,OctahedronGeometry:Dn,OctahedronBufferGeometry:Rn,IcosahedronGeometry:kn,IcosahedronBufferGeometry:zn,DodecahedronGeometry:Un,DodecahedronBufferGeometry:Bn,PolyhedronGeometry:Cn,PolyhedronBufferGeometry:Fn,TubeGeometry:jn,TubeBufferGeometry:Gn,TorusKnotGeometry:Vn,TorusKnotBufferGeometry:Wn,TorusGeometry:Hn,TorusBufferGeometry:Xn,TextGeometry:Ei,TextBufferGeometry:Oi,SphereGeometry:Ci,SphereBufferGeometry:Fi,RingGeometry:Ii,RingBufferGeometry:Ni,PlaneGeometry:rt,PlaneBufferGeometry:at,LatheGeometry:Di,LatheBufferGeometry:Ri,ShapeGeometry:ki,ShapeBufferGeometry:zi,ExtrudeGeometry:Ti,ExtrudeBufferGeometry:Pi,EdgesGeometry:Bi,ConeGeometry:Vi,ConeBufferGeometry:Wi,CylinderGeometry:ji,CylinderBufferGeometry:Gi,CircleGeometry:Hi,CircleBufferGeometry:Xi,BoxGeometry:H,BoxBufferGeometry:X});Yi.prototype=Object.create(T.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isShadowMaterial=!0,Yi.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this},qi.prototype=Object.create(Q.prototype),qi.prototype.constructor=qi,qi.prototype.isRawShaderMaterial=!0,Qi.prototype=Object.create(T.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isMeshStandardMaterial=!0,Qi.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Zi.prototype=Object.create(Qi.prototype),Zi.prototype.constructor=Zi,Zi.prototype.isMeshPhysicalMaterial=!0,Zi.prototype.copy=function(t){return Qi.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new b).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},Ji.prototype=Object.create(T.prototype),Ji.prototype.constructor=Ji,Ji.prototype.isMeshPhongMaterial=!0,Ji.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},$i.prototype=Object.create(T.prototype),$i.prototype.constructor=$i,$i.prototype.isMeshToonMaterial=!0,$i.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ki.prototype=Object.create(T.prototype),Ki.prototype.constructor=Ki,Ki.prototype.isMeshNormalMaterial=!0,Ki.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},tr.prototype=Object.create(T.prototype),tr.prototype.constructor=tr,tr.prototype.isMeshLambertMaterial=!0,tr.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},er.prototype=Object.create(T.prototype),er.prototype.constructor=er,er.prototype.isMeshMatcapMaterial=!0,er.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nr.prototype=Object.create(gn.prototype),nr.prototype.constructor=nr,nr.prototype.isLineDashedMaterial=!0,nr.prototype.copy=function(t){return gn.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Jm=Object.freeze({__proto__:null,ShadowMaterial:Yi,SpriteMaterial:cn,RawShaderMaterial:qi,ShaderMaterial:Q,PointsMaterial:bn,MeshPhysicalMaterial:Zi,MeshStandardMaterial:Qi,MeshPhongMaterial:Ji,MeshToonMaterial:$i,MeshNormalMaterial:Ki,MeshLambertMaterial:tr,MeshDepthMaterial:He,MeshDistanceMaterial:Xe,MeshBasicMaterial:P,MeshMatcapMaterial:er,LineDashedMaterial:nr,LineBasicMaterial:gn,Material:T}),$m={arraySlice:function(t,e,n){return $m.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,u=0;u!==e;++u)r[o++]=t[s+u];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o)){do o=a[i],void 0!==o&&(e.push(a.time),n.push.apply(n,o)),a=t[r++];while(void 0!==a)}else if(void 0!==o.toArray){do o=a[i],void 0!==o&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++];while(void 0!==a)}else do o=a[i],void 0!==o&&(e.push(a.time),n.push(o)),a=t[r++];while(void 0!==a)}},subclip:function(t,e,n,i,r){r=r||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var p=u.times[f]*r;if(!(p<n||p>=i)){l.push(u.times[f]);for(var d=0;d<c;++d)h.push(u.values[f*c+d])}}0!==l.length&&(u.times=$m.convertArray(l,u.times.constructor),u.values=$m.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===i||i<=0)&&(i=30);for(var r=t.tracks.length,a=e/i,o=function(e){var i=n.tracks[e],r=i.ValueTypeName;if("bool"!==r&&"string"!==r){var o=t.tracks.find(function(t){return t.name===i.name&&t.ValueTypeName===r});if(void 0!==o){var s=i.getValueSize(),c=i.times.length-1,l=void 0;if(a<=i.times[0])l=$m.arraySlice(i.values,0,i.valueSize);else if(a>=i.times[c]){var h=c*s;l=$m.arraySlice(i.values,h)}else{var f=i.createInterpolant();f.evaluate(a),l=f.resultBuffer}if("quaternion"===r){var p=new u(l[0],l[1],l[2],l[3]).normalize().conjugate();p.toArray(l)}for(var d=o.times.length,m=0;m<d;++m){var v=m*s;if("quaternion"===r)u.multiplyQuaternionsFlat(o.values,v,l,0,o.values,v);else for(var g=0;g<s;++g)o.values[v+g]-=l[g]}}}},s=0;s<r;++s)o(s);return t.blendMode=jc,t}};Object.assign(ir.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,i=e[++n],t<i)break e}a=e.length;break n}{if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var u=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===u)break;if(i=r,r=e[--n-1],t>=r)break e}a=n,n=0}}for(;n<a;){var c=n+a>>>1;t<e[c]?a=c:n=c+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ir.prototype,{beforeStart_:ir.prototype.copySampleValue_,afterEnd_:ir.prototype.copySampleValue_}),rr.prototype=Object.assign(Object.create(ir.prototype),{constructor:rr,DefaultSettings_:{endingStart:kc,endingEnd:kc},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case zc:r=t,o=2*e-n;break;case Uc:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case zc:a=t,s=2*n-e;break;case Uc:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(i-e),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,_=f*m-f*d,x=0;x!==o;++x)r[x]=v*a[c+x]+g*a[u+x]+y*a[s+x]+_*a[l+x];return r}}),ar.prototype=Object.assign(Object.create(ir.prototype),{constructor:ar,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=(n-e)/(i-e),l=1-c,h=0;h!==o;++h)r[h]=a[u+h]*l+a[s+h]*c;return r}}),or.prototype=Object.assign(Object.create(ir.prototype),{constructor:or,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(sr,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:$m.convertArray(t.times,Array),values:$m.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(sr.prototype,{constructor:sr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Dc,InterpolantFactoryMethodDiscrete:function(t){return new or(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ar(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new rr(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Nc:e=this.InterpolantFactoryMethodDiscrete;break;case Dc:e=this.InterpolantFactoryMethodLinear;break;case Rc:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nc;case this.InterpolantFactoryMethodLinear:return Dc;case this.InterpolantFactoryMethodSmooth:return Rc}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=$m.arraySlice(n,r,a),this.values=$m.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==a&&a>s){t=!1;break}a=s}if(void 0!==i&&$m.isTypedArray(i))for(var u=0,c=i.length;u!==c;++u){var l=i[u];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=$m.arraySlice(this.times),e=$m.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Rc,r=t.length-1,a=1,o=1;o<r;++o){var s=!1,u=t[o],c=t[o+1];if(u!==c&&(1!==o||u!==u[0]))if(i)s=!0;else for(var l=o*n,h=l-n,f=l+n,p=0;p!==n;++p){var d=e[l+p];if(d!==e[h+p]||d!==e[f+p]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var m=o*n,v=a*n,g=0;g!==n;++g)e[v+g]=e[m+g]}++a}}if(r>0){t[a]=t[r];for(var y=r*n,_=a*n,x=0;x!==n;++x)e[_+x]=e[y+x];++a}return a!==t.length?(this.times=$m.arraySlice(t,0,a),this.values=$m.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this},clone:function(){var t=$m.arraySlice(this.times,0),e=$m.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),ur.prototype=Object.assign(Object.create(sr.prototype),{constructor:ur,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Nc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cr.prototype=Object.assign(Object.create(sr.prototype),{constructor:cr,ValueTypeName:"color"}),lr.prototype=Object.assign(Object.create(sr.prototype),{constructor:lr,ValueTypeName:"number"}),hr.prototype=Object.assign(Object.create(ir.prototype),{constructor:hr,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(i-e),c=t*o,l=c+o;c!==l;c+=4)u.slerpFlat(r,0,a,c-o,a,c,s);return r}}),fr.prototype=Object.assign(Object.create(sr.prototype),{constructor:fr,ValueTypeName:"quaternion",DefaultInterpolation:Dc,InterpolantFactoryMethodLinear:function(t){return new hr(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),pr.prototype=Object.assign(Object.create(sr.prototype),{constructor:pr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Nc,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dr.prototype=Object.assign(Object.create(sr.prototype),{constructor:dr,ValueTypeName:"vector"}),Object.assign(mr,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(gr(n[r]).scale(i));return new mr(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,a=n.length;r!==a;++r)e.push(sr.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],u=[];s.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);var c=$m.getKeyframeOrder(s);s=$m.sortedArray(s,1,c),u=$m.sortedArray(u,1,c),i||0!==s[0]||(s.push(r),u.push(u[0])),a.push(new lr(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/n))}return new mr(t,(-1),a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(r);if(u&&u.length>1){var c=u[1],l=i[c];l||(i[c]=l=[]),l.push(s)}}var h=[];for(var f in i)h.push(mr.CreateFromMorphTargetSequence(f,i[f],e,n));return h},parseAnimation:function(t,e){if(!t)return null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];$m.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,u=t.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var h={},f=void 0;for(f=0;f<l.length;f++)if(l[f].morphTargets)for(var p=0;p<l[f].morphTargets.length;p++)h[l[f].morphTargets[p]]=-1;for(var d in h){for(var m=[],v=[],g=0;g!==l[f].morphTargets.length;++g){var y=l[f];m.push(y.time),v.push(y.morphTarget===d?1:0)}i.push(new lr(".morphTargetInfluence["+d+"]",m,v))}s=h.length*(a||1)}else{var _=".bones["+e[c].name+"]";n(dr,_+".position",l,"pos",i),n(fr,_+".quaternion",l,"rot",i),n(dr,_+".scale",l,"scl",i)}}if(0===i.length)return null;var x=new mr(r,s,i,o);return x}}),Object.assign(mr.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new mr(this.name,this.duration,t,this.blendMode)}});var Km={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},tv=new yr;Object.assign(_r.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var ev={};xr.prototype=Object.assign(Object.create(_r.prototype),{constructor:xr,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Km.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0!==ev[t])return void ev[t].push({onLoad:e,onProgress:n,onError:i});var o,s=/^data:(.*?)(;base64)?,(.*)$/,u=t.match(s);if(u){var c=u[1],l=!!u[2],h=u[3];h=decodeURIComponent(h),l&&(h=atob(h));try{var f,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":for(var d=new Uint8Array(h.length),m=0;m<h.length;m++)d[m]=h.charCodeAt(m);f="blob"===p?new Blob([d.buffer],{type:c}):d.buffer;break;case"document":var v=new DOMParser;f=v.parseFromString(h,c);break;case"json":f=JSON.parse(h);break;default:f=h}setTimeout(function(){e&&e(f),r.manager.itemEnd(t)},0)}catch(g){setTimeout(function(){i&&i(g),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{ev[t]=[],ev[t].push({onLoad:e,onProgress:n,onError:i}),o=new XMLHttpRequest,o.open("GET",t,!0),o.addEventListener("load",function(e){var n=this.response,i=ev[t];if(delete ev[t],200===this.status||0===this.status){0===this.status,Km.add(t,n);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(var u=0,c=i.length;u<c;u++){var l=i[u];l.onError&&l.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),o.addEventListener("progress",function(e){for(var n=ev[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}},!1),o.addEventListener("error",function(e){var n=ev[t];delete ev[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),o.addEventListener("abort",function(e){var n=ev[t];delete ev[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var y in this.requestHeader)o.setRequestHeader(y,this.requestHeader[y]);o.send(null)}return r.manager.itemStart(t),o},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),br.prototype=Object.assign(Object.create(_r.prototype),{constructor:br,load:function(t,e,n,i){var r=this,a=new xr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i&&i(a),r.manager.itemError(t)}},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=mr.parse(t[n]);e.push(i)}return e}}),wr.prototype=Object.assign(Object.create(_r.prototype),{constructor:wr,load:function(t,e,n,i){function r(r){u.load(t[r],function(t){var n=a.parse(t,!0);o[r]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(s.minFilter=du),s.format=n.format,s.needsUpdate=!0,e&&e(s))},n,i)}var a=this,o=[],s=new An;s.image=o;var u=new xr(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader);var c=0;if(Array.isArray(t))for(var l=0,h=t.length;l<h;++l)r(l);else u.load(t,function(t){var n=a.parse(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,r=0;r<i;r++){o[r]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[r].mipmaps.push(n.mipmaps[r*n.mipmapCount+u]),o[r].format=n.format,o[r].width=n.width,o[r].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=du),s.format=n.format,s.needsUpdate=!0,e&&e(s)},n,i);return s}}),Mr.prototype=Object.assign(Object.create(_r.prototype),{constructor:Mr,load:function(t,e,n,i){var r=this,a=new tt,o=new xr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,function(t){var n=r.parse(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:su,a.wrapT=void 0!==n.wrapT?n.wrapT:su,a.magFilter=void 0!==n.magFilter?n.magFilter:du,a.minFilter=void 0!==n.minFilter?n.minFilter:du,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=gu),1===n.mipmapCount&&(a.minFilter=du),a.needsUpdate=!0,e&&e(a,n))},n,i),a}}),Sr.prototype=Object.assign(Object.create(_r.prototype),{constructor:Sr,load:function(t,e,n,i){function r(){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),Km.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),i&&i(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=Km.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",r,!1),u.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}),Ar.prototype=Object.assign(Object.create(_r.prototype),{constructor:Ar,load:function(t,e,n,i){function r(n){o.load(t[n],function(t){a.images[n]=t,s++,6===s&&(a.needsUpdate=!0,e&&e(a))},void 0,i)}var a=new _t,o=new Sr(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,u=0;u<t.length;++u)r(u);return a}}),Tr.prototype=Object.assign(Object.create(_r.prototype),{constructor:Tr,load:function(t,e,n,i){var a=new r,o=new Sr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){a.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);a.format=i?Fu:Iu,a.needsUpdate=!0,void 0!==e&&e(a)},n,i),a}}),Object.assign(Pr.prototype,{getPoint:function(){return null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=t;a++)e=this.getPoint(a/t),r+=e.distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e?e:t*i[a-1];for(var o,s=0,u=a-1;s<=u;)if(r=Math.floor(s+(u-s)/2),o=i[r]-n,o<0)s=r+1;else{if(!(o>0)){u=r;break}u=r-1}if(r=u,i[r]===n)return r/(a-1);var c=i[r],l=i[r+1],h=l-c,f=(n-c)/h,p=(r+f)/(a-1);return p},getTangent:function(t,e){var i=1e-4,r=t-i,a=t+i;r<0&&(r=0),a>1&&(a=1);var o=this.getPoint(r),s=this.getPoint(a),u=e||(o.isVector2?new n:new c);return u.copy(s).sub(o).normalize(),u},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new c,i=[],r=[],a=[],o=new c,s=new l,u=0;u<=t;u++){var h=u/t;i[u]=this.getTangentAt(h,new c),i[u].normalize()}r[0]=new c,a[0]=new c;var f=Number.MAX_VALUE,p=Math.abs(i[0].x),d=Math.abs(i[0].y),m=Math.abs(i[0].z);p<=f&&(f=p,n.set(1,0,0)),d<=f&&(f=d,n.set(0,1,0)),m<=f&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var v=1;v<=t;v++){if(r[v]=r[v-1].clone(),a[v]=a[v-1].clone(),o.crossVectors(i[v-1],i[v]),o.length()>Number.EPSILON){o.normalize();var g=Math.acos(Cl.clamp(i[v-1].dot(i[v]),-1,1));r[v].applyMatrix4(s.makeRotationAxis(o,g))}a[v].crossVectors(i[v],r[v])}if(e===!0){var y=Math.acos(Cl.clamp(r[0].dot(r[t]),-1,1));y/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(y=-y);for(var _=1;_<=t;_++)r[_].applyMatrix4(s.makeRotationAxis(i[_],y*_)),a[_].crossVectors(i[_],r[_])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Lr.prototype=Object.create(Pr.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isEllipseCurve=!0,Lr.prototype.getPoint=function(t,e){for(var i=e||new n,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,o=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=o?0:r),this.aClockwise!==!0||o||(a===r?a=-r:a-=r);var s=this.aStartAngle+t*a,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,p=c-this.aY;u=f*l-p*h+this.aX,c=f*h+p*l+this.aY}return i.set(u,c)},Lr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Lr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Lr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.aX=t.aX,
this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Er.prototype=Object.create(Lr.prototype),Er.prototype.constructor=Er,Er.prototype.isArcCurve=!0;var nv=new c,iv=new Or,rv=new Or,av=new Or;Cr.prototype=Object.create(Pr.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isCatmullRomCurve3=!0,Cr.prototype.getPoint=function(t,e){var n=e||new c,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===s&&o===r-1&&(o=r-2,s=1);var u,l,h,f;if(this.closed||o>0?u=i[(o-1)%r]:(nv.subVectors(i[0],i[1]).add(i[0]),u=nv),l=i[o%r],h=i[(o+1)%r],this.closed||o+2<r?f=i[(o+2)%r]:(nv.subVectors(i[r-1],i[r-2]).add(i[r-1]),f=nv),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(u.distanceToSquared(l),p),m=Math.pow(l.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(f),p);m<1e-4&&(m=1),d<1e-4&&(d=m),v<1e-4&&(v=m),iv.initNonuniformCatmullRom(u.x,l.x,h.x,f.x,d,m,v),rv.initNonuniformCatmullRom(u.y,l.y,h.y,f.y,d,m,v),av.initNonuniformCatmullRom(u.z,l.z,h.z,f.z,d,m,v)}else"catmullrom"===this.curveType&&(iv.initCatmullRom(u.x,l.x,h.x,f.x,this.tension),rv.initCatmullRom(u.y,l.y,h.y,f.y,this.tension),av.initCatmullRom(u.z,l.z,h.z,f.z,this.tension));return n.set(iv.calc(s),rv.calc(s),av.calc(s)),n},Cr.prototype.copy=function(t){Pr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Cr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Cr.prototype.fromJSON=function(t){Pr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new c).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Gr.prototype=Object.create(Pr.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isCubicBezierCurve=!0,Gr.prototype.getPoint=function(t,e){var i=e||new n,r=this.v0,a=this.v1,o=this.v2,s=this.v3;return i.set(jr(t,r.x,a.x,o.x,s.x),jr(t,r.y,a.y,o.y,s.y)),i},Gr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Gr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Gr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Vr.prototype=Object.create(Pr.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isCubicBezierCurve3=!0,Vr.prototype.getPoint=function(t,e){var n=e||new c,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(jr(t,i.x,r.x,a.x,o.x),jr(t,i.y,r.y,a.y,o.y),jr(t,i.z,r.z,a.z,o.z)),n},Vr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Vr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Vr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Wr.prototype=Object.create(Pr.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isLineCurve=!0,Wr.prototype.getPoint=function(t,e){var i=e||new n;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Wr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Wr.prototype.getTangent=function(t,e){var i=e||new n;return i.copy(this.v2).sub(this.v1).normalize(),i},Wr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hr.prototype=Object.create(Pr.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isLineCurve3=!0,Hr.prototype.getPoint=function(t,e){var n=e||new c;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Hr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Hr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Xr.prototype=Object.create(Pr.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isQuadraticBezierCurve=!0,Xr.prototype.getPoint=function(t,e){var i=e||new n,r=this.v0,a=this.v1,o=this.v2;return i.set(Rr(t,r.x,a.x,o.x),Rr(t,r.y,a.y,o.y)),i},Xr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Xr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Xr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Yr.prototype=Object.create(Pr.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isQuadraticBezierCurve3=!0,Yr.prototype.getPoint=function(t,e){var n=e||new c,i=this.v0,r=this.v1,a=this.v2;return n.set(Rr(t,i.x,r.x,a.x),Rr(t,i.y,r.y,a.y),Rr(t,i.z,r.z,a.z)),n},Yr.prototype.copy=function(t){return Pr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Yr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Yr.prototype.fromJSON=function(t){return Pr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},qr.prototype=Object.create(Pr.prototype),qr.prototype.constructor=qr,qr.prototype.isSplineCurve=!0,qr.prototype.getPoint=function(t,e){var i=e||new n,r=this.points,a=(r.length-1)*t,o=Math.floor(a),s=a-o,u=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(Fr(s,u.x,c.x,l.x,h.x),Fr(s,u.y,c.y,l.y,h.y)),i},qr.prototype.copy=function(t){Pr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},qr.prototype.toJSON=function(){var t=Pr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},qr.prototype.fromJSON=function(t){Pr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new n).fromArray(r))}return this};var ov=Object.freeze({__proto__:null,ArcCurve:Er,CatmullRomCurve3:Cr,CubicBezierCurve:Gr,CubicBezierCurve3:Vr,EllipseCurve:Lr,LineCurve:Wr,LineCurve3:Hr,QuadraticBezierCurve:Xr,QuadraticBezierCurve3:Yr,SplineCurve:qr});Qr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Qr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Wr(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Pr.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Pr.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Pr.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new ov[i.type]).fromJSON(i))}return this}}),Zr.prototype=Object.assign(Object.create(Qr.prototype),{constructor:Zr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var i=new Wr(this.currentPoint.clone(),new n(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,r){var a=new Xr(this.currentPoint.clone(),new n(t,e),new n(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this},bezierCurveTo:function(t,e,i,r,a,o){var s=new Gr(this.currentPoint.clone(),new n(t,e),new n(i,r),new n(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new qr(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this},absarc:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this},ellipse:function(t,e,n,i,r,a,o,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,i,r,a,o,s),this},absellipse:function(t,e,n,i,r,a,o,s){var u=new Lr(t,e,n,i,r,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return Qr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Qr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Qr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Jr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Jr,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Zr.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Zr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Zr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Zr).fromJSON(i))}return this}}),$r.prototype=Object.assign(Object.create(p.prototype),{constructor:$r,isLight:!0,copy:function(t){return p.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Kr.prototype=Object.assign(Object.create($r.prototype),{constructor:Kr,isHemisphereLight:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ta.prototype,{_projScreenMatrix:new l,_lightPositionWorld:new c,_lookTarget:new c,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ea.prototype=Object.assign(Object.create(ta.prototype),{constructor:ea,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*Cl.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),ta.prototype.updateMatrices.call(this,t)}}),na.prototype=Object.assign(Object.create($r.prototype),{constructor:na,isSpotLight:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ia.prototype=Object.assign(Object.create(ta.prototype),{constructor:ia,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),ra.prototype=Object.assign(Object.create($r.prototype),{constructor:ra,isPointLight:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),aa.prototype=Object.assign(Object.create(Z.prototype),{constructor:aa,isOrthographicCamera:!0,copy:function(t,e){return Z.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,a=r+u*this.view.width,o-=c*this.view.offsetY,s=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),oa.prototype=Object.assign(Object.create(ta.prototype),{constructor:oa,isDirectionalLightShadow:!0,updateMatrices:function(t){ta.prototype.updateMatrices.call(this,t)}}),sa.prototype=Object.assign(Object.create($r.prototype),{constructor:sa,isDirectionalLight:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ua.prototype=Object.assign(Object.create($r.prototype),{constructor:ua,isAmbientLight:!0}),ca.prototype=Object.assign(Object.create($r.prototype),{constructor:ca,isRectAreaLight:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=$r.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(la.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*i)),e.addScaledVector(a[5],1.092548*(i*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(la,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),ha.prototype=Object.assign(Object.create($r.prototype),{constructor:ha,isLightProbe:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=$r.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),fa.prototype=Object.assign(Object.create(_r.prototype),{constructor:fa,load:function(t,e,n,i){var r=this,a=new xr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i&&i(a),r.manager.itemError(t)}},n,i)},parse:function(t){function e(t){return void 0===r[t],r[t]}var r=this.textures,o=new Jm[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new b).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?o.vertexColors=t.vertexColors>0:o.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var u=t.uniforms[s];switch(o.uniforms[s]={},u.type){case"t":o.uniforms[s].value=e(u.value);break;case"c":o.uniforms[s].value=(new b).setHex(u.value);break;case"v2":o.uniforms[s].value=(new n).fromArray(u.value);break;case"v3":o.uniforms[s].value=(new c).fromArray(u.value);break;case"v4":o.uniforms[s].value=(new a).fromArray(u.value);break;case"m3":o.uniforms[s].value=(new i).fromArray(u.value);case"m4":o.uniforms[s].value=(new l).fromArray(u.value);break;default:o.uniforms[s].value=u.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];if(void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale){var f=t.normalScale;Array.isArray(f)===!1&&(f=[f,f]),o.normalScale=(new n).fromArray(f)}return void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new n).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(o.transmission=t.transmission),void 0!==t.transmissionMap&&(o.transmissionMap=e(t.transmissionMap)),o},setTextures:function(t){return this.textures=t,this}});var sv={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(r){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};pa.prototype=Object.assign(Object.create(B.prototype),{constructor:pa,isInstancedBufferGeometry:!0,copy:function(t){return B.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=B.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),da.prototype=Object.assign(Object.create(L.prototype),{constructor:da,isInstancedBufferAttribute:!0,copy:function(t){return L.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=L.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),ma.prototype=Object.assign(Object.create(_r.prototype),{constructor:ma,load:function(t,e,n,i){var r=this,a=new xr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i&&i(a),r.manager.itemError(t)}},n,i)},parse:function(t){function e(t,e){if(void 0!==i[e])return i[e];var r=t.interleavedBuffers,a=r[e],o=n(t,a.buffer),s=new uv[a.type](o),u=new sn(s,a.stride);return u.uuid=a.uuid,i[e]=u,u}function n(t,e){if(void 0!==r[e])return r[e];var n=t.arrayBuffers,i=n[e],a=new Uint32Array(i).buffer;return r[e]=a,a}var i={},r={},a=t.isInstancedBufferGeometry?new pa:new B,o=t.data.index;if(void 0!==o){var s=new uv[o.type](o.array);a.setIndex(new L(s,1))}var u=t.data.attributes;for(var l in u){var h=u[l],f=void 0;if(h.isInterleavedBufferAttribute){var p=e(t.data,h.data);f=new un(p,h.itemSize,h.offset,h.normalized)}else{var d=new uv[h.type](h.array),m=h.isInstancedBufferAttribute?da:L;f=new m(d,h.itemSize,h.normalized)}void 0!==h.name&&(f.name=h.name),a.setAttribute(l,f)}var v=t.data.morphAttributes;if(v)for(var y in v){for(var _=v[y],x=[],b=0,w=_.length;b<w;b++){var M=_[b],S=void 0;if(M.isInterleavedBufferAttribute){var A=e(t.data,M.data);S=new un(A,M.itemSize,M.offset,M.normalized)}else{var T=new uv[M.type](M.array);S=new L(T,M.itemSize,M.normalized)}void 0!==M.name&&(S.name=M.name),x.push(S)}a.morphAttributes[y]=x}var P=t.data.morphTargetsRelative;P&&(a.morphTargetsRelative=!0);var E=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==E)for(var O=0,C=E.length;O!==C;++O){var F=E[O];a.addGroup(F.start,F.count,F.materialIndex)}var I=t.data.boundingSphere;if(void 0!==I){var N=new c;void 0!==I.center&&N.fromArray(I.center),a.boundingSphere=new g(N,I.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}});var uv={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};va.prototype=Object.assign(Object.create(_r.prototype),{constructor:va,load:function(t,e,n,i){var r=this,a=""===this.path?sv.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new xr(r.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(t){var n=null;try{n=JSON.parse(t)}catch(a){return void(void 0!==i&&i(a))}var o=n.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()&&r.parse(n,e)},n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Jr).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n,i={};if(void 0!==t)for(var r=new ma,a=0,o=t.length;a<o;a++){var s=void 0,u=t[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Zm[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Zm[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Zm[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Zm[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Zm[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Zm[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":
case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Zm[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Zm[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Zm[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Zm[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Zm[u.type]((new ov[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Zm[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Zm[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var c=0,l=u.shapes.length;c<l;c++){var h=e[u.shapes[c]];n.push(h)}s=new Zm[u.type](n,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var f=0,p=u.shapes.length;f<p;f++){var d=e[u.shapes[f]];n.push(d)}var m=u.options.extrudePath;void 0!==m&&(u.options.extrudePath=(new ov[m.type]).fromJSON(m)),s=new Zm[u.type](n,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(u);break;case"Geometry":break;default:continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),s.isBufferGeometry===!0&&void 0!==u.userData&&(s.userData=u.userData),i[u.uuid]=s}return i},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new fa;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=r.parse(l)),u.push(n[l.uuid])}i[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=mr.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),i.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}var i,r=this,a={};if(void 0!==t&&t.length>0){var o=new yr(e);i=new Sr(o),i.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],l=c.url;if(Array.isArray(l)){a[c.uuid]=[];for(var h=0,f=l.length;h<f;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;a[c.uuid].push(n(d))}}else{var m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;a[c.uuid]=n(m)}}}return a},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:e[t]}var i={};if(void 0!==t)for(var a=0,o=t.length;a<o;a++){var s=t[a];void 0===s.image,void 0===e[s.image];var u=void 0;u=Array.isArray(e[s.image])?new _t(e[s.image]):new r(e[s.image]),u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping,cv)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.center&&u.center.fromArray(s.center),void 0!==s.rotation&&(u.rotation=s.rotation),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0],lv),u.wrapT=n(s.wrap[1],lv)),void 0!==s.format&&(u.format=s.format),void 0!==s.type&&(u.type=s.type),void 0!==s.encoding&&(u.encoding=s.encoding),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter,hv)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter,hv)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(u.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(u.unpackAlignment=s.unpackAlignment),i[s.uuid]=u}return i},parseObject:function(t,e,n){function i(t){return void 0===e[t],e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a],e.push(n[a])}return e}return void 0===n[t],n[t]}}var a,o,s;switch(t.type){case"Scene":a=new d,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new b(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new on(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new an(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new J(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new aa(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new ua(t.color,t.intensity);break;case"DirectionalLight":a=new sa(t.color,t.intensity);break;case"PointLight":a=new ra(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new ca(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new na(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Kr(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new ha).fromJSON(t);break;case"SkinnedMesh":case"Mesh":o=i(t.geometry),s=r(t.material),a=new j(o,s);break;case"InstancedMesh":o=i(t.geometry),s=r(t.material);var u=t.count,c=t.instanceMatrix;a=new vn(o,s,u),a.instanceMatrix=new L(new Float32Array(c.array),16);break;case"LOD":a=new fn;break;case"Line":a=new yn(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new xn(i(t.geometry),r(t.material));break;case"LineSegments":a=new _n(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new wn(i(t.geometry),r(t.material));break;case"Sprite":a=new ln(r(t.material));break;case"Group":a=new $e;break;default:a=new p}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,h=0;h<l.length;h++)a.add(this.parseObject(l[h],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);for(var f=t.levels,m=0;m<f.length;m++){var v=f[m],g=a.getObjectByProperty("uuid",v.object);void 0!==g&&a.addLevel(g,v.distance)}}return a}});var cv={UVMapping:Ks,CubeReflectionMapping:tu,CubeRefractionMapping:eu,EquirectangularReflectionMapping:nu,EquirectangularRefractionMapping:iu,CubeUVReflectionMapping:ru,CubeUVRefractionMapping:au},lv={RepeatWrapping:ou,ClampToEdgeWrapping:su,MirroredRepeatWrapping:uu},hv={NearestFilter:cu,NearestMipmapNearestFilter:lu,NearestMipmapLinearFilter:fu,LinearFilter:du,LinearMipmapNearestFilter:mu,LinearMipmapLinearFilter:gu};ga.prototype=Object.assign(Object.create(_r.prototype),{constructor:ga,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Km.get(t);return void 0!==a?(r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a):(fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){Km.add(t,n),e&&e(n),r.manager.itemEnd(t)})["catch"](function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),void r.manager.itemStart(t))}}),Object.assign(ya.prototype,{moveTo:function(t,e){return this.currentPath=new Zr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new Jr;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=e[a],u=-u,s=e[r],c=-c),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var l=c*(t.x-o.x)-u*(t.y-o.y);if(0===l)return!0;if(l<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=qm.isClockWise,a=this.subPaths;if(0===a.length)return[];if(e===!0)return n(a);var o,s,u,c=[];if(1===a.length)return s=a[0],u=new Jr,u.curves=s.curves,c.push(u),c;var l=!r(a[0].getPoints());l=t?!l:l;var h,f=[],p=[],d=[],m=0;p[m]=void 0,d[m]=[];for(var v=0,g=a.length;v<g;v++)s=a[v],h=s.getPoints(),o=r(h),o=t?!o:o,o?(!l&&p[m]&&m++,p[m]={s:new Jr,p:h},p[m].s.curves=s.curves,l&&m++,d[m]=[]):d[m].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var y=!1,_=[],x=0,b=p.length;x<b;x++)f[x]=[];for(var w=0,M=p.length;w<M;w++)for(var S=d[w],A=0;A<S.length;A++){for(var T=S[A],P=!0,L=0;L<p.length;L++)i(T.p,p[L].p)&&(w!==L&&_.push({froms:w,tos:L,hole:A}),P?(P=!1,f[L].push(T)):y=!0);P&&f[w].push(T)}_.length>0&&(y||(d=f))}for(var E,O=0,C=p.length;O<C;O++){u=p[O].s,c.push(u),E=d[O];for(var F=0,I=E.length;F<I;F++)u.holes.push(E[F].h)}return c}}),Object.assign(_a.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=xa(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),wa.prototype=Object.assign(Object.create(_r.prototype),{constructor:wa,load:function(t,e,n,i){var r=this,a=new xr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,function(t){var n;try{n=JSON.parse(t)}catch(i){n=JSON.parse(t.substring(65,t.length-2))}var a=r.parse(n);e&&e(a)},n,i)},parse:function(t){return new _a(t)}});var fv,pv={getContext:function(){return void 0===fv&&(fv=new(window.AudioContext||window.webkitAudioContext)),fv},setContext:function(t){fv=t}};Ma.prototype=Object.assign(Object.create(_r.prototype),{constructor:Ma,load:function(t,e,n,i){var r=this,a=new xr(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{var a=n.slice(0),o=pv.getContext();o.decodeAudioData(a,function(t){e(t)})}catch(s){i&&i(s),r.manager.itemError(t)}},n,i)}}),Sa.prototype=Object.assign(Object.create(ha.prototype),{constructor:Sa,isHemisphereLightProbe:!0,copy:function(t){return ha.prototype.copy.call(this,t),this},toJSON:function(t){var e=ha.prototype.toJSON.call(this,t);return e}}),Aa.prototype=Object.assign(Object.create(ha.prototype),{constructor:Aa,isAmbientLightProbe:!0,copy:function(t){return ha.prototype.copy.call(this,t),this},toJSON:function(t){var e=ha.prototype.toJSON.call(this,t);return e}});var dv=new l,mv=new l;Object.assign(Ta.prototype,{update:function(t){var e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var i,r,a=t.projectionMatrix.clone(),o=e.eyeSep/2,s=o*e.near/e.focus,u=e.near*Math.tan(Cl.DEG2RAD*e.fov*.5)/e.zoom;mv.elements[12]=-o,dv.elements[12]=o,i=-u*e.aspect+s,r=u*e.aspect+s,a.elements[0]=2*e.near/(r-i),a.elements[8]=(r+i)/(r-i),this.cameraL.projectionMatrix.copy(a),i=-u*e.aspect-s,r=u*e.aspect-s,a.elements[0]=2*e.near/(r-i),a.elements[8]=(r+i)/(r-i),this.cameraR.projectionMatrix.copy(a)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(mv),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(dv)}}),Object.assign(Pa.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var vv=new c,gv=new u,yv=new c,_v=new c;La.prototype=Object.assign(Object.create(p.prototype),{constructor:La,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vv,gv,yv),_v.set(0,0,-1).applyQuaternion(gv),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(vv.x,i),e.positionY.linearRampToValueAtTime(vv.y,i),e.positionZ.linearRampToValueAtTime(vv.z,i),e.forwardX.linearRampToValueAtTime(_v.x,i),e.forwardY.linearRampToValueAtTime(_v.y,i),e.forwardZ.linearRampToValueAtTime(_v.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(vv.x,vv.y,vv.z),e.setOrientation(_v.x,_v.y,_v.z,n.x,n.y,n.z)}}),Ea.prototype=Object.assign(Object.create(p.prototype),{constructor:Ea,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),this.isPlaying!==!0&&this.hasPlaybackControl!==!1){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},pause:function(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(this.hasPlaybackControl!==!1)return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl!==!1&&this.loop},setLoop:function(t){if(this.hasPlaybackControl!==!1)return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var xv=new c,bv=new u,wv=new c,Mv=new c;Oa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Oa,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(p.prototype.updateMatrixWorld.call(this,t),this.hasPlaybackControl!==!0||this.isPlaying!==!1){this.matrixWorld.decompose(xv,bv,wv),Mv.set(0,0,1).applyQuaternion(bv);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(xv.x,n),e.positionY.linearRampToValueAtTime(xv.y,n),e.positionZ.linearRampToValueAtTime(xv.z,n),e.orientationX.linearRampToValueAtTime(Mv.x,n),e.orientationY.linearRampToValueAtTime(Mv.y,n),e.orientationZ.linearRampToValueAtTime(Mv.z,n)}else e.setPosition(xv.x,xv.y,xv.z),e.setOrientation(Mv.x,Mv.y,Mv.z)}}}),Object.assign(Ca.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Fa.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=e*this._origIndex;this._mixBufferRegion(n,i,s,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var u=e,c=e+e;u!==c;++u)if(n[u]!==n[u+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){u.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){var a=this._workIndex*r;u.multiplyQuaternionsFlat(t,a,t,e,t,n),u.slerpFlat(t,e,t,e,t,a,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}},_lerpAdditive:function(t,e,n,i,r){for(var a=0;a!==r;++a){var o=e+a;t[o]=t[o]+t[n+a]*i}}});var Sv="\\[\\]\\.:\\/",Av=new RegExp("["+Sv+"]","g"),Tv="[^"+Sv+"]",Pv="[^"+Sv.replace("\\.","")+"]",Lv=/((?:WC+[\/:])*)/.source.replace("WC",Tv),Ev=/(WCOD+)?/.source.replace("WCOD",Pv),Ov=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Tv),Cv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Tv),Fv=new RegExp("^"+Lv+Ev+Ov+Cv+"$"),Iv=["material","materials","bones"];Object.assign(Ia.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Na,{Composite:Ia,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Na.Composite(t,e,n):new Na(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Av,"")},parseTrackName:function(t){var e=Fv.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&i!==-1){var r=n.nodeName.substring(i+1);Iv.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(Na.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Na.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==a){if(void 0===t[a])return;t=t[a]}}var s=t[i];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{e.nodeName}}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Na.prototype,{_getValue_unbound:Na.prototype.getValue,_setValue_unbound:Na.prototype.setValue}),Object.assign(Da.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=t.length,u=this.nCachedObjects_,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,p=e[f];if(void 0===p){p=s++,e[f]=p,t.push(h);for(var d=0,m=a;d!==m;++d)r[d].push(new Na(h,n[d],i[d]))}else if(p<u){o=t[p];var v=--u,g=t[v];e[g.uuid]=p,t[p]=g,e[f]=v,t[v]=h;for(var y=0,_=a;y!==_;++y){var x=r[y],b=x[v],w=x[p];x[p]=b,void 0===w&&(w=new Na(h,n[y],i[y])),x[v]=w}}else t[p]!==o}this.nCachedObjects_=u},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=e[u];if(void 0!==c&&c>=r){var l=r++,h=t[l];e[h.uuid]=c,t[c]=h,e[u]=l,t[l]=s;for(var f=0,p=i;f!==p;++f){var d=n[f],m=d[l],v=d[c];d[c]=m,d[l]=v}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=e[c];if(void 0!==l)if(delete e[c],l<r){var h=--r,f=t[h],p=--a,d=t[p];e[f.uuid]=l,t[l]=f,e[d.uuid]=h,t[h]=d,t.pop();for(var m=0,v=i;m!==v;++m){var g=n[m],y=g[h],_=g[p];g[l]=y,g[h]=_,g.pop()}}else{var x=--a,b=t[x];e[b.uuid]=l,t[l]=b,t.pop();for(var w=0,M=i;w!==M;++w){var S=n[w];S[l]=S[x],S.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(l);for(var h=c,f=s.length;h!==f;++h){var p=s[h];l[h]=new Na(p,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],u=t[o];e[u]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Ra.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=r,s[1]=r+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case jc:for(var l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);break;case Bc:default:for(var f=0,p=u.length;f!==p;++f)u[f].evaluate(o),c[f].accumulate(i,s)}}},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;
var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this._clip.duration,n=this.loop,i=this.time+t,r=this._loopCount,a=n===Ic;if(0===t)return r===-1?i:a&&1===(1&r)?e-i:i;if(n===Cc){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=e||i<0){var o=Math.floor(i/e);i-=e*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return e-i}return i},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=zc,i.endingEnd=zc):(t?i.endingStart=this.zeroSlopeAtStart?zc:kc:i.endingStart=Uc,e?i.endingEnd=this.zeroSlopeAtEnd?zc:kc:i.endingEnd=Uc)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),ka.prototype=Object.assign(Object.create(e.prototype),{constructor:ka,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==r;++l){var h=i[l],f=h.name,p=c[f];if(void 0!==p)a[l]=p;else{if(p=a[l],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=e&&e._propertyBindings[l].binding.parsedPath;p=new Fa(Na.create(n,f,d),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,f),a[l]=p}o[l].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null;var l=o.actionByRoot,h=(t._localRoot||this._root).uuid;delete l[h],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[e];void 0===a&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new ar(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var i=e||this._root,r=i.uuid,a="string"==typeof t?mr.findByName(i,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Bc),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var l=new Ra(this,a,e,n);return this._bindAction(l,u),this._addInactiveAction(l,o,r),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?mr.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[i]||null:null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){var s=e[o];s._update(i,t,r,a)}for(var u=this._bindings,c=this._nActiveBindings,l=0;l!==c;++l)u[l].apply(a);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,a=r[e];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),za.prototype.clone=function(){return new za(void 0===this.value.clone?this.value:this.value.clone())},Ua.prototype=Object.assign(Object.create(sn.prototype),{constructor:Ua,isInstancedInterleavedBuffer:!0,copy:function(t){return sn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=sn.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=sn.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.assign(Ba.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,n){var i=n||[];return Ga(t,this,i,e),i.sort(ja),i},intersectObjects:function(t,e,n){var i=n||[];if(Array.isArray(t)===!1)return i;for(var r=0,a=t.length;r<a;r++)Ga(t[r],this,i,e);return i.sort(ja),i}});var Nv=function(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),this.radius=t,this.phi=e,this.theta=n,this};Nv.prototype.set=function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},Nv.prototype.clone=function(){return(new this.constructor).copy(this)},Nv.prototype.copy=function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},Nv.prototype.makeSafe=function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},Nv.prototype.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},Nv.prototype.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Cl.clamp(e/this.radius,-1,1))),this},Object.assign(Va.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Dv=new n;Object.assign(Wa.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Dv.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(t=new n),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new n),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(e=new n),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(e=new n),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=Dv.copy(t).clamp(this.min,this.max);return e.sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Rv=new c,kv=new c;Object.assign(Ha.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(t=new c),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(t=new c),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(e=new c),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){Rv.subVectors(t,this.start),kv.subVectors(this.end,this.start);var n=kv.dot(kv),i=kv.dot(Rv),r=i/n;return e&&(r=Cl.clamp(r,0,1)),r},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(n=new c),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Xa.prototype=Object.create(p.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isImmediateRenderObject=!0;var zv=new c;Ya.prototype=Object.create(p.prototype),Ya.prototype.constructor=Ya,Ya.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ya.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),zv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zv),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Uv=new c,Bv=new l,jv=new l;Qa.prototype=Object.create(_n.prototype),Qa.prototype.constructor=Qa,Qa.prototype.isSkeletonHelper=!0,Qa.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");jv.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(Bv.multiplyMatrices(jv,o.matrixWorld),Uv.setFromMatrixPosition(Bv),i.setXYZ(a,Uv.x,Uv.y,Uv.z),Bv.multiplyMatrices(jv,o.parent.matrixWorld),Uv.setFromMatrixPosition(Bv),i.setXYZ(a+1,Uv.x,Uv.y,Uv.z),a+=2)}n.getAttribute("position").needsUpdate=!0,p.prototype.updateMatrixWorld.call(this,t)},Za.prototype=Object.create(j.prototype),Za.prototype.constructor=Za,Za.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Za.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Gv=new c,Vv=new b,Wv=new b;Ja.prototype=Object.create(p.prototype),Ja.prototype.constructor=Ja,Ja.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ja.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Vv.copy(this.light.color),Wv.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Vv:Wv;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Gv.setFromMatrixPosition(this.light.matrixWorld).negate())},$a.prototype=Object.create(_n.prototype),$a.prototype.constructor=$a,Ka.prototype=Object.create(_n.prototype),Ka.prototype.constructor=Ka;var Hv=new c,Xv=new c,Yv=new c;to.prototype=Object.create(p.prototype),to.prototype.constructor=to,to.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},to.prototype.update=function(){Hv.setFromMatrixPosition(this.light.matrixWorld),Xv.setFromMatrixPosition(this.light.target.matrixWorld),Yv.subVectors(Xv,Hv),this.lightPlane.lookAt(Xv),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Xv),this.targetLine.scale.z=Yv.length()};var qv=new c,Qv=new Z;eo.prototype=Object.create(_n.prototype),eo.prototype.constructor=eo,eo.prototype.update=function(){var t=this.geometry,e=this.pointMap,n=1,i=1;Qv.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),no("c",e,t,Qv,0,0,-1),no("t",e,t,Qv,0,0,1),no("n1",e,t,Qv,-n,-i,-1),no("n2",e,t,Qv,n,-i,-1),no("n3",e,t,Qv,-n,i,-1),no("n4",e,t,Qv,n,i,-1),no("f1",e,t,Qv,-n,-i,1),no("f2",e,t,Qv,n,-i,1),no("f3",e,t,Qv,-n,i,1),no("f4",e,t,Qv,n,i,1),no("u1",e,t,Qv,.7*n,1.1*i,-1),no("u2",e,t,Qv,.7*-n,1.1*i,-1),no("u3",e,t,Qv,0,2*i,-1),no("cf1",e,t,Qv,-n,0,1),no("cf2",e,t,Qv,n,0,1),no("cf3",e,t,Qv,0,-i,1),no("cf4",e,t,Qv,0,i,1),no("cn1",e,t,Qv,-n,0,-1),no("cn2",e,t,Qv,n,0,-1),no("cn3",e,t,Qv,0,-i,-1),no("cn4",e,t,Qv,0,i,-1),t.getAttribute("position").needsUpdate=!0};var Zv=new m;io.prototype=Object.create(_n.prototype),io.prototype.constructor=io,io.prototype.update=function(t){if(void 0!==this.object&&Zv.setFromObject(this.object),!Zv.isEmpty()){var e=Zv.min,n=Zv.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},io.prototype.setFromObject=function(t){return this.object=t,this.update(),this},io.prototype.copy=function(t){return _n.prototype.copy.call(this,t),this.object=t.object,this},ro.prototype=Object.create(_n.prototype),ro.prototype.constructor=ro,ro.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),p.prototype.updateMatrixWorld.call(this,t))},ao.prototype=Object.create(yn.prototype),ao.prototype.constructor=ao,ao.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?ls:cs,this.lookAt(this.plane.normal),p.prototype.updateMatrixWorld.call(this,t)};var Jv,$v,Kv=new c;oo.prototype=Object.create(p.prototype),oo.prototype.constructor=oo,oo.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Kv.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Kv,e)}},oo.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},oo.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},oo.prototype.copy=function(t){return p.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},so.prototype=Object.create(_n.prototype),so.prototype.constructor=so;var tg=4,eg=8,ng=Math.pow(2,eg),ig=[.125,.215,.35,.446,.526,.582],rg=eg-tg+1+ig.length,ag=20,og={};og[Hc]=0,og[Xc]=1,og[qc]=2,og[Zc]=3,og[Jc]=4,og[$c]=5,og[Yc]=6;var sg=new aa,ug=lo(),cg=ug._lodPlanes,lg=ug._sizeLods,hg=ug._sigmas,fg=null,pg=(1+Math.sqrt(5))/2,dg=1/pg,mg=[new c(1,1,1),new c((-1),1,1),new c(1,1,(-1)),new c((-1),1,(-1)),new c(0,pg,dg),new c(0,pg,(-dg)),new c(dg,0,pg),new c((-dg),0,pg),new c(pg,dg,0),new c((-pg),dg,0)];uo.prototype={constructor:uo,fromScene:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=.1),void 0===i&&(i=100),fg=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(t){return this._fromTexture(t)},fromCubemap:function(t){return this._fromTexture(t)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=vo(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=mo(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<cg.length;t++)cg[t].dispose()},_cleanup:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(fg),t.scissorTest=!1,fo(t,0,0,t.width,t.height)},_fromTexture:function(t){fg=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},_allocateTargets:function(t){var e={magFilter:cu,minFilter:cu,generateMipmaps:!1,type:_u,format:Ru,encoding:co(t)?t.encoding:qc,depthBuffer:!1,stencilBuffer:!1},n=ho(e);return n.depthBuffer=!t,this._pingPongRenderTarget=ho(e),n},_compileMaterial:function(t){var e=new j(cg[0],t);this._renderer.compile(e,sg)},_sceneToCubeUV:function(t,e,n,i){var r=90,a=1,o=new J(r,a,e,n),s=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,l=c.outputEncoding,h=c.toneMapping,f=c.getClearColor(),p=c.getClearAlpha();c.toneMapping=Ys,c.outputEncoding=Hc;var d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();var m=Math.max(d.r,d.g,d.b),v=Math.min(Math.max(Math.ceil(Math.log2(m)),-128),127);d=d.multiplyScalar(Math.pow(2,-v));var g=(v+128)/255;c.setClearColor(d,g),t.background=null}for(var y=0;y<6;y++){var _=y%3;0==_?(o.up.set(0,s[y],0),o.lookAt(u[y],0,0)):1==_?(o.up.set(0,0,s[y]),o.lookAt(0,u[y],0)):(o.up.set(0,s[y],0),o.lookAt(0,0,u[y])),fo(i,_*ng,y>2?ng:0,ng,ng),c.setRenderTarget(i),c.render(t,o)}c.toneMapping=h,c.outputEncoding=l,c.setClearColor(f,p)},_textureToCubeUV:function(t,e){var n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=vo()):null==this._equirectShader&&(this._equirectShader=mo());var i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new j(cg[0],i),a=i.uniforms;a.envMap.value=t,t.isCubeTexture||a.texelSize.value.set(1/t.image.width,1/t.image.height),a.inputEncoding.value=og[t.encoding],a.outputEncoding.value=og[e.texture.encoding],fo(e,0,0,3*ng,2*ng),n.setRenderTarget(e),n.render(r,sg)},_applyPMREM:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<rg;i++){var r=Math.sqrt(hg[i]*hg[i]-hg[i-1]*hg[i-1]),a=mg[(i-1)%mg.length];this._blur(t,i-1,i,r,a)}e.autoClear=n},_blur:function(t,e,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)},_halfBlur:function(t,e,n,i,r,a,o){for(var s=this._renderer,u=this._blurMaterial,c=3,l=new j(cg[i],u),h=u.uniforms,f=lg[n]-1,p=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*ag-1),d=r/p,m=isFinite(r)?1+Math.floor(c*d):ag,v=[],g=0,y=0;y<ag;++y){var _=y/d,x=Math.exp(-_*_/2);v.push(x),0==y?g+=x:y<m&&(g+=2*x)}for(var b=0;b<v.length;b++)v[b]=v[b]/g;h.envMap.value=t.texture,h.samples.value=m,h.weights.value=v,h.latitudinal.value="latitudinal"===a,o&&(h.poleAxis.value=o),h.dTheta.value=p,h.mipInt.value=eg-n,h.inputEncoding.value=og[t.texture.encoding],h.outputEncoding.value=og[t.texture.encoding];var w=lg[i],M=3*Math.max(0,ng-2*w),S=(0===i?0:2*ng)+2*w*(i>eg-tg?i-eg+tg:0);fo(e,M,S,3*w,2*w),s.setRenderTarget(e),s.render(l,sg)}};var vg=0,gg=1,yg=0,_g=1,xg=2;Pr.create=function(t,e){return t.prototype=Object.create(Pr.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Qr.prototype,{createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new W,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new c(r.x,r.y,r.z||0))}return e}}),Object.assign(Zr.prototype,{fromPoints:function(t){return this.setFromPoints(t)}}),Uo.prototype=Object.create(Cr.prototype),Bo.prototype=Object.create(Cr.prototype),jo.prototype=Object.create(Cr.prototype),Object.assign(jo.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),$a.prototype.setColors=function(){},Qa.prototype.update=function(){},Object.assign(_r.prototype,{extractUrlBase:function(t){return sv.extractUrlBase(t)}}),_r.Handlers={add:function(){},get:function(){}},Object.assign(va.prototype,{setTexturePath:function(t){return this.setResourcePath(t)}}),Object.assign(Wa.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(m.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Object.assign(g.prototype,{empty:function(){return this.isEmpty()}}),et.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},Ha.prototype.center=function(t){return this.getCenter(t)},Object.assign(Cl,{random16:function(){return Math.random()},nearestPowerOfTwo:function(t){return Cl.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return Cl.ceilPowerOfTwo(t)}}),Object.assign(i.prototype,{flattenToArrayOffset:function(t,e){return this.toArray(t,e)},multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBufferAttribute:function(t){return t.applyMatrix3(this)},applyToVector3Array:function(){}}),Object.assign(l.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){return(new c).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBufferAttribute:function(t){return t.applyMatrix4(this)},applyToVector3Array:function(){},makeFrustum:function(t,e,n,i,r,a){return this.makePerspective(t,e,i,n,r,a)}}),_.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},u.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(y.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(x.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(t,e){return this.getBarycoord(t,e)},midpoint:function(t){return this.getMidpoint(t)},normal:function(t){return this.getNormal(t)},plane:function(t){return this.getPlane(t)}}),Object.assign(x,{barycoordFromPoint:function(t,e,n,i,r){return x.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return x.getNormal(t,e,n,i)}}),Object.assign(Jr.prototype,{extractAllPoints:function(t){return this.extractPoints(t)},extrude:function(t){return new Ti(this,t)},makeGeometry:function(t){return new ki(this,t)}}),Object.assign(n.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(a.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(W.prototype,{computeTangents:function(){},computeLineDistances:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.assign(p.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)},getWorldRotation:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(p.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Object.assign(j.prototype,{setDrawMode:function(){}}),Object.defineProperties(j.prototype,{drawMode:{get:function(){return Gc},set:function(){}}}),Object.defineProperties(fn.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(dn.prototype,"useVertexTexture",{get:function(){},set:function(){}}),pn.prototype.initBones=function(){},Object.defineProperty(Pr.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(t){this.arcLengthDivisions=t}}),J.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties($r.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(L.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===xl},set:function(){this.setUsage(xl)}}}),Object.assign(L.prototype,{setDynamic:function(t){return this.setUsage(t===!0?xl:_l),this},copyIndicesArray:function(){},setArray:function(){}}),Object.assign(B.prototype,{addIndex:function(t){this.setIndex(t)},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new L(arguments[1],arguments[2]))},addDrawCall:function(t,e,n){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){},removeAttribute:function(t){return this.deleteAttribute(t)},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(pa.prototype,{maxInstancedCount:{get:function(){
return this.instanceCount},set:function(t){this.instanceCount=t}}}),Object.defineProperties(Ba.prototype,{linePrecision:{get:function(){return this.params.Line.threshold},set:function(t){this.params.Line.threshold=t}}}),Object.defineProperties(sn.prototype,{dynamic:{get:function(){return this.usage===xl},set:function(t){this.setUsage(t)}}}),Object.assign(sn.prototype,{setDynamic:function(t){return this.setUsage(t===!0?xl:_l),this},setArray:function(){}}),Object.assign(Pi.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.defineProperties(za.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(T.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new b}},shading:{get:function(){},set:function(t){this.flatShading=t===fs}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}}}),Object.defineProperties(Ji.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Zi.prototype,{transparency:{get:function(){return this.transmission},set:function(t){this.transmission=t}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),Object.assign(nn.prototype,{clearTarget:function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(nn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=t===!0?Xc:Hc}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}}}),Object.defineProperties(Ye.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(Ea.prototype,{load:{value:function(t){var e=this,n=new Ma;return n.load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){}}}),Ca.prototype.getData=function(){return this.getFrequencyData()},$.prototype.updateCubeMap=function(t,e){return this.update(t,e)};var bg={merge:function(t,e,n){var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return t.center()}};Il.crossOrigin=void 0,Il.loadTexture=function(t,e,n,i){var r=new Tr;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Il.loadTextureCube=function(t,e,n,i){var r=new Ar;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Il.loadCompressedTexture=function(){},Il.loadCompressedTextureCube=function(){};var wg={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$o}})),t.ACESFilmicToneMapping=Js,t.AddEquation=xs,t.AddOperation=Xs,t.AdditiveAnimationBlendMode=jc,t.AdditiveBlending=vs,t.AlphaFormat=Cu,t.AlwaysDepth=ks,t.AlwaysStencilFunc=yl,t.AmbientLight=ua,t.AmbientLightProbe=Aa,t.AnimationClip=mr,t.AnimationLoader=br,t.AnimationMixer=ka,t.AnimationObjectGroup=Da,t.AnimationUtils=$m,t.ArcCurve=Er,t.ArrayCamera=Je,t.ArrowHelper=oo,t.Audio=Ea,t.AudioAnalyser=Ca,t.AudioContext=pv,t.AudioListener=La,t.AudioLoader=Ma,t.AxesHelper=so,t.AxisHelper=Go,t.BackSide=ls,t.BasicDepthPacking=Kc,t.BasicShadowMap=as,t.BinaryTextureLoader=Yo,t.Bone=mn,t.BooleanKeyframeTrack=ur,t.BoundingBoxHelper=Vo,t.Box2=Wa,t.Box3=m,t.Box3Helper=ro,t.BoxBufferGeometry=X,t.BoxGeometry=H,t.BoxHelper=io,t.BufferAttribute=L,t.BufferGeometry=B,t.BufferGeometryLoader=ma,t.ByteType=xu,t.Cache=Km,t.Camera=Z,t.CameraHelper=eo,t.CanvasRenderer=Qo,t.CanvasTexture=Tn,t.CatmullRomCurve3=Cr,t.CineonToneMapping=Zs,t.CircleBufferGeometry=Xi,t.CircleGeometry=Hi,t.ClampToEdgeWrapping=su,t.Clock=Pa,t.ClosedSplineCurve3=Uo,t.Color=b,t.ColorKeyframeTrack=cr,t.CompressedTexture=An,t.CompressedTextureLoader=wr,t.ConeBufferGeometry=Wi,t.ConeGeometry=Vi,t.CubeCamera=$,t.CubeGeometry=H,t.CubeReflectionMapping=tu,t.CubeRefractionMapping=eu,t.CubeTexture=_t,t.CubeTextureLoader=Ar,t.CubeUVReflectionMapping=ru,t.CubeUVRefractionMapping=au,t.CubicBezierCurve=Gr,t.CubicBezierCurve3=Vr,t.CubicInterpolant=rr,t.CullFaceBack=ns,t.CullFaceFront=is,t.CullFaceFrontBack=rs,t.CullFaceNone=es,t.Curve=Pr,t.CurvePath=Qr,t.CustomBlending=_s,t.CustomToneMapping=$s,t.CylinderBufferGeometry=Gi,t.CylinderGeometry=ji,t.Cylindrical=Va,t.DataTexture=tt,t.DataTexture2DArray=xt,t.DataTexture3D=bt,t.DataTextureLoader=Mr,t.DecrementStencilOp=sl,t.DecrementWrapStencilOp=cl,t.DefaultLoadingManager=tv,t.DepthFormat=ku,t.DepthStencilFormat=zu,t.DepthTexture=Pn,t.DirectionalLight=sa,t.DirectionalLightHelper=to,t.DirectionalLightShadow=oa,t.DiscreteInterpolant=or,t.DodecahedronBufferGeometry=Bn,t.DodecahedronGeometry=Un,t.DoubleSide=hs,t.DstAlphaFactor=Cs,t.DstColorFactor=Is,t.DynamicBufferAttribute=Eo,t.DynamicCopyUsage=Tl,t.DynamicDrawUsage=xl,t.DynamicReadUsage=Ml,t.EdgesGeometry=Bi,t.EdgesHelper=Wo,t.EllipseCurve=Lr,t.EqualDepth=Bs,t.EqualStencilFunc=pl,t.EquirectangularReflectionMapping=nu,t.EquirectangularRefractionMapping=iu,t.Euler=h,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Pi,t.ExtrudeGeometry=Ti,t.Face3=A,t.Face4=_o,t.FaceColors=_g,t.FileLoader=xr,t.FlatShading=fs,t.Float32Attribute=ko,t.Float32BufferAttribute=R,t.Float64Attribute=zo,t.Float64BufferAttribute=k,t.FloatType=Au,t.Fog=on,t.FogExp2=an,t.Font=_a,t.FontLoader=wa,t.FrontSide=cs,t.Frustum=et,t.GammaEncoding=Yc,t.Geometry=W,t.GeometryUtils=bg,t.GreaterDepth=Gs,t.GreaterEqualDepth=js,t.GreaterEqualStencilFunc=gl,t.GreaterStencilFunc=ml,t.GridHelper=$a,t.Group=$e,t.HalfFloatType=Tu,t.HemisphereLight=Kr,t.HemisphereLightHelper=Ja,t.HemisphereLightProbe=Sa,t.IcosahedronBufferGeometry=zn,t.IcosahedronGeometry=kn,t.ImageBitmapLoader=ga,t.ImageLoader=Sr,t.ImageUtils=Il,t.ImmediateRenderObject=Xa,t.IncrementStencilOp=ol,t.IncrementWrapStencilOp=ul,t.InstancedBufferAttribute=da,t.InstancedBufferGeometry=pa,t.InstancedInterleavedBuffer=Ua,t.InstancedMesh=vn,t.Int16Attribute=Io,t.Int16BufferAttribute=F,t.Int32Attribute=Do,t.Int32BufferAttribute=N,t.Int8Attribute=Oo,t.Int8BufferAttribute=E,t.IntType=Mu,t.InterleavedBuffer=sn,t.InterleavedBufferAttribute=un,t.Interpolant=ir,t.InterpolateDiscrete=Nc,t.InterpolateLinear=Dc,t.InterpolateSmooth=Rc,t.InvertStencilOp=ll,t.JSONLoader=Zo,t.KeepStencilOp=rl,t.KeyframeTrack=sr,t.LOD=fn,t.LatheBufferGeometry=Ri,t.LatheGeometry=Di,t.Layers=f,t.LensFlare=Jo,t.LessDepth=zs,t.LessEqualDepth=Us,t.LessEqualStencilFunc=dl,t.LessStencilFunc=fl,t.Light=$r,t.LightProbe=ha,t.LightShadow=ta,t.Line=yn,t.Line3=Ha,t.LineBasicMaterial=gn,t.LineCurve=Wr,t.LineCurve3=Hr,t.LineDashedMaterial=nr,t.LineLoop=xn,t.LinePieces=gg,t.LineSegments=_n,t.LineStrip=vg,t.LinearEncoding=Hc,t.LinearFilter=du,t.LinearInterpolant=ar,t.LinearMipMapLinearFilter=yu,t.LinearMipMapNearestFilter=vu,t.LinearMipmapLinearFilter=gu,t.LinearMipmapNearestFilter=mu,t.LinearToneMapping=qs,t.Loader=_r,t.LoaderUtils=sv,t.LoadingManager=yr,t.LogLuvEncoding=Qc,t.LoopOnce=Cc,t.LoopPingPong=Ic,t.LoopRepeat=Fc,t.LuminanceAlphaFormat=Du,t.LuminanceFormat=Nu,t.MOUSE=Ko,t.Material=T,t.MaterialLoader=fa,t.Math=Cl,t.MathUtils=Cl,t.Matrix3=i,t.Matrix4=l,t.MaxEquation=Ss,t.Mesh=j,t.MeshBasicMaterial=P,t.MeshDepthMaterial=He,t.MeshDistanceMaterial=Xe,t.MeshFaceMaterial=xo,t.MeshLambertMaterial=tr,t.MeshMatcapMaterial=er,t.MeshNormalMaterial=Ki,t.MeshPhongMaterial=Ji,t.MeshPhysicalMaterial=Zi,t.MeshStandardMaterial=Qi,t.MeshToonMaterial=$i,t.MinEquation=Ms,t.MirroredRepeatWrapping=uu,t.MixOperation=Hs,t.MultiMaterial=bo,t.MultiplyBlending=ys,t.MultiplyOperation=Ws,t.NearestFilter=cu,t.NearestMipMapLinearFilter=pu,t.NearestMipMapNearestFilter=hu,t.NearestMipmapLinearFilter=fu,t.NearestMipmapNearestFilter=lu,t.NeverDepth=Rs,t.NeverStencilFunc=hl,t.NoBlending=ds,t.NoColors=yg,t.NoToneMapping=Ys,t.NormalAnimationBlendMode=Bc,t.NormalBlending=ms,t.NotEqualDepth=Vs,t.NotEqualStencilFunc=vl,t.NumberKeyframeTrack=lr,t.Object3D=p,t.ObjectLoader=va,t.ObjectSpaceNormalMap=nl,t.OctahedronBufferGeometry=Rn,t.OctahedronGeometry=Dn,t.OneFactor=Ts,t.OneMinusDstAlphaFactor=Fs,t.OneMinusDstColorFactor=Ns,t.OneMinusSrcAlphaFactor=Os,t.OneMinusSrcColorFactor=Ls,t.OrthographicCamera=aa,t.PCFShadowMap=os,t.PCFSoftShadowMap=ss,t.PMREMGenerator=uo,t.ParametricBufferGeometry=On,t.ParametricGeometry=En,t.Particle=Mo,t.ParticleBasicMaterial=To,t.ParticleSystem=So,t.ParticleSystemMaterial=Po,t.Path=Zr,t.PerspectiveCamera=J,t.Plane=_,t.PlaneBufferGeometry=at,t.PlaneGeometry=rt,t.PlaneHelper=ao,t.PointCloud=wo,t.PointCloudMaterial=Ao,t.PointLight=ra,t.PointLightHelper=Za,t.Points=wn,t.PointsMaterial=bn,t.PolarGridHelper=Ka,t.PolyhedronBufferGeometry=Fn,t.PolyhedronGeometry=Cn,t.PositionalAudio=Oa,t.PropertyBinding=Na,t.PropertyMixer=Fa,t.QuadraticBezierCurve=Xr,t.QuadraticBezierCurve3=Yr,t.Quaternion=u,t.QuaternionKeyframeTrack=fr,t.QuaternionLinearInterpolant=hr,t.REVISION=$o,t.RGBADepthPacking=tl,t.RGBAFormat=Iu,t.RGBAIntegerFormat=Wu,t.RGBA_ASTC_10x10_Format=pc,t.RGBA_ASTC_10x5_Format=lc,t.RGBA_ASTC_10x6_Format=hc,t.RGBA_ASTC_10x8_Format=fc,t.RGBA_ASTC_12x10_Format=dc,t.RGBA_ASTC_12x12_Format=mc,t.RGBA_ASTC_4x4_Format=nc,t.RGBA_ASTC_5x4_Format=ic,t.RGBA_ASTC_5x5_Format=rc,t.RGBA_ASTC_6x5_Format=ac,t.RGBA_ASTC_6x6_Format=oc,t.RGBA_ASTC_8x5_Format=sc,t.RGBA_ASTC_8x6_Format=uc,t.RGBA_ASTC_8x8_Format=cc,t.RGBA_BPTC_Format=vc,t.RGBA_ETC2_EAC_Format=ec,t.RGBA_PVRTC_2BPPV1_Format=$u,t.RGBA_PVRTC_4BPPV1_Format=Ju,t.RGBA_S3TC_DXT1_Format=Xu,t.RGBA_S3TC_DXT3_Format=Yu,t.RGBA_S3TC_DXT5_Format=qu,t.RGBDEncoding=$c,t.RGBEEncoding=qc,t.RGBEFormat=Ru,t.RGBFormat=Fu,t.RGBIntegerFormat=Vu,t.RGBM16Encoding=Jc,t.RGBM7Encoding=Zc,t.RGB_ETC1_Format=Ku,t.RGB_ETC2_Format=tc,t.RGB_PVRTC_2BPPV1_Format=Zu,t.RGB_PVRTC_4BPPV1_Format=Qu,t.RGB_S3TC_DXT1_Format=Hu,t.RGFormat=ju,t.RGIntegerFormat=Gu,t.RawShaderMaterial=qi,t.Ray=y,t.Raycaster=Ba,t.RectAreaLight=ca,t.RedFormat=Uu,t.RedIntegerFormat=Bu,t.ReinhardToneMapping=Qs,t.RepeatWrapping=ou,t.ReplaceStencilOp=al,t.ReverseSubtractEquation=ws,t.RingBufferGeometry=Ni,t.RingGeometry=Ii,t.SRGB8_ALPHA8_ASTC_10x10_Format=Lc,t.SRGB8_ALPHA8_ASTC_10x5_Format=Ac,t.SRGB8_ALPHA8_ASTC_10x6_Format=Tc,t.SRGB8_ALPHA8_ASTC_10x8_Format=Pc,t.SRGB8_ALPHA8_ASTC_12x10_Format=Ec,t.SRGB8_ALPHA8_ASTC_12x12_Format=Oc,t.SRGB8_ALPHA8_ASTC_4x4_Format=gc,t.SRGB8_ALPHA8_ASTC_5x4_Format=yc,t.SRGB8_ALPHA8_ASTC_5x5_Format=_c,t.SRGB8_ALPHA8_ASTC_6x5_Format=xc,t.SRGB8_ALPHA8_ASTC_6x6_Format=bc,t.SRGB8_ALPHA8_ASTC_8x5_Format=wc,t.SRGB8_ALPHA8_ASTC_8x6_Format=Mc,t.SRGB8_ALPHA8_ASTC_8x8_Format=Sc,t.Scene=d,t.SceneUtils=wg,t.ShaderChunk=Qd,t.ShaderLib=Zd,t.ShaderMaterial=Q,t.ShadowMaterial=Yi,t.Shape=Jr,t.ShapeBufferGeometry=zi,t.ShapeGeometry=ki,t.ShapePath=ya,t.ShapeUtils=qm,t.ShortType=bu,t.Skeleton=dn,t.SkeletonHelper=Qa,t.SkinnedMesh=pn,t.SmoothShading=ps,t.Sphere=g,t.SphereBufferGeometry=Fi,t.SphereGeometry=Ci,t.Spherical=Nv,t.SphericalHarmonics3=la,t.Spline=jo,t.SplineCurve=qr,t.SplineCurve3=Bo,t.SpotLight=na,t.SpotLightHelper=Ya,t.SpotLightShadow=ea,t.Sprite=ln,t.SpriteMaterial=cn,t.SrcAlphaFactor=Es,t.SrcAlphaSaturateFactor=Ds,t.SrcColorFactor=Ps,t.StaticCopyUsage=Al,t.StaticDrawUsage=_l,t.StaticReadUsage=wl,t.StereoCamera=Ta,t.StreamCopyUsage=Pl,t.StreamDrawUsage=bl,t.StreamReadUsage=Sl,t.StringKeyframeTrack=pr,t.SubtractEquation=bs,t.SubtractiveBlending=gs,t.TOUCH=ts,t.TangentSpaceNormalMap=el,t.TetrahedronBufferGeometry=Nn,t.TetrahedronGeometry=In,t.TextBufferGeometry=Oi,t.TextGeometry=Ei,t.Texture=r,t.TextureLoader=Tr,t.TorusBufferGeometry=Xn,t.TorusGeometry=Hn,t.TorusKnotBufferGeometry=Wn,t.TorusKnotGeometry=Vn,t.Triangle=x,t.TriangleFanDrawMode=Wc,t.TriangleStripDrawMode=Vc,t.TrianglesDrawMode=Gc,t.TubeBufferGeometry=Gn,t.TubeGeometry=jn,t.UVMapping=Ks,t.Uint16Attribute=No,t.Uint16BufferAttribute=I,t.Uint32Attribute=Ro,t.Uint32BufferAttribute=D,t.Uint8Attribute=Co,t.Uint8BufferAttribute=O,t.Uint8ClampedAttribute=Fo,t.Uint8ClampedBufferAttribute=C,t.Uniform=za,t.UniformsLib=Pf,t.UniformsUtils=xf,t.UnsignedByteType=_u,t.UnsignedInt248Type=Ou,t.UnsignedIntType=Su,t.UnsignedShort4444Type=Pu,t.UnsignedShort5551Type=Lu,t.UnsignedShort565Type=Eu,t.UnsignedShortType=wu,t.VSMShadowMap=us,t.Vector2=n,t.Vector3=c,t.Vector4=a,t.VectorKeyframeTrack=dr,t.Vertex=Lo,t.VertexColors=xg,t.VideoTexture=Sn,t.WebGL1Renderer=rn,t.WebGLCubeRenderTarget=K,t.WebGLMultisampleRenderTarget=s,t.WebGLRenderTarget=o,t.WebGLRenderTargetCube=qo,t.WebGLRenderer=nn,t.WebGLUtils=Ze,t.WireframeGeometry=Ln,t.WireframeHelper=Ho,t.WrapAroundEnding=Uc,t.XHRLoader=Xo,t.ZeroCurvatureEnding=kc,t.ZeroFactor=As,t.ZeroSlopeEnding=zc,t.ZeroStencilOp=il,t.sRGBEncoding=Xc,Object.defineProperty(t,"__esModule",{value:!0})})},{}],6:[function(t,e,n){function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=b(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function r(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function a(t,e,n){if(e)t.call(n);else for(var i=t.length,r=v(t,i),a=0;a<i;++a)r[a].call(n)}function o(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,a=v(t,r),o=0;o<r;++o)a[o].call(n,i)}function s(t,e,n,i,r){if(e)t.call(n,i,r);else for(var a=t.length,o=v(t,a),s=0;s<a;++s)o[s].call(n,i,r)}function u(t,e,n,i,r,a){if(e)t.call(n,i,r,a);else for(var o=t.length,s=v(t,o),u=0;u<o;++u)s[u].call(n,i,r,a)}function c(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,a=v(t,r),o=0;o<r;++o)a[o].apply(n,i)}function l(t,e,n,i){var a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=b(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(a=r(t),a&&a>0&&s.length>a)){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,"object"==typeof console&&console.warn}}else s=o[e]=n,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function f(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=M.call(h,i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(!i)return[];var r=i[e];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?g(r):v(r,r.length):[]}function d(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}function v(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function g(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function y(t){var e=function(){};return e.prototype=t,new e}function _(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n}function x(t){var e=this;return function(){return e.apply(t,arguments)}}var b=Object.create||y,w=Object.keys||_,M=Function.prototype.bind||x;e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var S,A=10;try{var T={};Object.defineProperty&&Object.defineProperty(T,"x",{value:0}),S=0===T.x}catch(P){S=!1}S?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(t){if("number"!=typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');A=t}}):i.defaultMaxListeners=A,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return r(this)},i.prototype.emit=function(t){var e,n,i,r,l,h,f="error"===t;if(h=this._events)f=f&&null==h.error;else if(!f)return!1;if(f){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var p=new Error('Unhandled "error" event. ('+e+")");throw p.context=e,p}if(n=h[t],!n)return!1;var d="function"==typeof n;switch(i=arguments.length){case 1:a(n,d,this);break;case 2:o(n,d,this,arguments[1]);break;case 3:s(n,d,this,arguments[1],arguments[2]);break;case 4:u(n,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),l=1;l<i;l++)r[l-1]=arguments[l];c(n,d,this,r)}return!0},i.prototype.addListener=function(t,e){return l(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return l(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,f(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,f(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,i,r,a,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=b(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():m(n,r),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=b(null),this._eventsCount=0):n[t]&&(0===--this._eventsCount?this._events=b(null):delete n[t]),this;if(0===arguments.length){var r,a=w(n);for(i=0;i<a.length;++i)r=a[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=b(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],7:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):(t=t||self,i(t.window=t.window||{}))}(this,function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i,r,a,o,s,u,c,l,h={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},f={duration:.5,overwrite:!1,delay:0},p=1e8,d=1/p,m=2*Math.PI,v=m/4,g=0,y=Math.sqrt,_=Math.cos,x=Math.sin,b=function(t){return"string"==typeof t},w=function(t){return"function"==typeof t},M=function(t){return"number"==typeof t},S=function(t){return"undefined"==typeof t},A=function(t){return"object"==typeof t},T=function(t){return t!==!1},P=function(){return"undefined"!=typeof window},L=function(t){return w(t)||b(t)},E=Array.isArray,O=/(?:-?\.?\d|\.)+/gi,C=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,F=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,I=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,N=/\(([^()]+)\)/i,D=/[+-]=-?[\.\d]+/,R=/[#\-+.]*\b[a-z\d-=+%.]+/gi,k={},z={},U=function(t){return(z=ht(t,k))&&ln},B=function(t,e){},j=function(t,e){return!e&&void 0},G=function(t,e){return t&&(k[t]=e)&&z&&(z[t]=e)||k},V=function(){return 0},W={},H=[],X={},Y={},q={},Q=30,Z=[],J="",$=function(t){var e,n,i=t[0];if(A(i)||w(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=Z.length;n--&&!Z[n].targetTest(i););e=Z[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ce(t[n],e)))||t.splice(n,1);return t},K=function(t){return t._gsap||$(Vt(t))[0]._gsap},tt=function(t,e){var n=t[e];return w(n)?t[e]():S(n)&&t.getAttribute(e)||n},et=function(t,e){return(t=t.split(",")).forEach(e)||t},nt=function(t){return Math.round(1e5*t)/1e5||0},it=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},rt=function(t,e,n){var i,r=M(t[1]),a=(r?2:1)+(e<2?0:1),o=t[a];if(r&&(o.duration=t[1]),o.parent=n,e){for(i=o;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=T(n.vars.inherit)&&n.parent;o.immediateRender=T(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o},at=function(){var t,e,n=H.length,i=H.slice(0);for(X={},H.length=0,t=0;t<n;t++)e=i[t],e&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},ot=function(t,e,n,i){H.length&&at(),t.render(e,n,i),H.length&&at()},st=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(R).length<2?e:t},ut=function(t){return t},ct=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},lt=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},ht=function(t,e){for(var n in e)t[n]=e[n];return t},ft=function Xi(t,e){for(var n in e)t[n]=A(e[n])?Xi(t[n]||(t[n]={}),e[n]):e[n];return t},pt=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},dt=function(t){var e=t.parent||i,n=t.keyframes?lt:ct;if(T(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},mt=function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0},vt=function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,o=t[i];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e},gt=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},yt=function(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0},_t=function(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t},xt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},bt=function Yi(t){return!t||t._ts&&Yi(t.parent)},wt=function(t){return t._repeat?Mt(t._tTime,t=t.duration()+t._rDelay)*t:0},Mt=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},St=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},At=function(t){return t._end=nt(t._start+(t._tDur/Math.abs(t._ts||t._rts||d)||0))},Tt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=St(t.rawTime(),e),(!e._dur||kt(0,e.totalDuration(),n)-e._tTime>d)&&e.render(n,!0)),_t(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-d}},Pt=function(t,e,n,i){return e.parent&&yt(e),e._start=nt(n+e._delay),e._end=nt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),vt(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||Tt(t,e),t},Lt=function(t,e){return(k.ScrollTrigger||B("scrollTrigger",e))&&k.ScrollTrigger.create(e,t)},Et=function(t,e,n,i){return Ue(t,e),t._initted?!n&&t._pt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&u!==ge.frame?(H.push(t),t._lazy=[e,i],1):void 0:1},Ot=function(t,e,n,i){var r,a,o,s=t.ratio,u=e<0||!e&&s&&!t._start&&t._zTime>d&&!t._dp._lock||t._ts<0||t._dp._ts<0?0:1,c=t._rDelay,l=0;if(c&&t._repeat&&(l=kt(0,t._tDur,e),a=Mt(l,c),o=Mt(t._tTime,c),a!==o&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),t._initted||!Et(t,e,i,n))if(u!==s||i||t._zTime===d||!e&&t._zTime){for(o=t._zTime,t._zTime=e||(n?d:0),n||(n=e&&!o),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=l,n||ae(t,"onStart"),r=t._pt;r;)r.r(u,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&ae(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&ae(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&yt(t,1),n||(ae(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Ct=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}},Ft=function(t,e,n){var i=t._repeat,r=nt(e)||0;return t._dur=r,t._tDur=i?i<0?1e10:nt(r*(i+1)+t._rDelay*i):r,t._time>r&&(t._time=r,t._tTime=Math.min(t._tTime,t._tDur)),!n&&_t(t.parent),t.parent&&At(t),t},It=function(t){return t instanceof Ie?_t(t):Ft(t,t._dur)},Nt={_start:0,endTime:V},Dt=function qi(t,e){var n,i,r=t.labels,a=t._recent||Nt,o=t.duration()>=p?a.endTime(!1):t._dur;return b(e)&&(isNaN(e)||e in r)?(n=e.charAt(0),"<"===n||">"===n?("<"===n?a._start:a.endTime(a._repeat>=0))+(parseFloat(e.substr(1))||0):(n=e.indexOf("="),n<0?(e in r||(r[e]=o),r[e]):(i=+(e.charAt(n-1)+e.substr(n+1)),n>1?qi(t,e.substr(0,n-1))+i:o+i))):null==e?o:+e},Rt=function(t,e){return t||0===t?e(t):e},kt=function(t,e,n){return n<t?t:n>e?e:n},zt=function(t){return(t+"").substr((parseFloat(t)+"").length)},Ut=function(t,e,n){return Rt(n,function(n){return kt(t,e,n)})},Bt=[].slice,jt=function(t,e){return t&&A(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&A(t[0]))&&!t.nodeType&&t!==r},Gt=function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){var i;return b(t)&&!e||jt(t,1)?(i=n).push.apply(i,Vt(t)):n.push(t)})||n},Vt=function(t,e){return!b(t)||e||!a&&ye()?E(t)?Gt(t,e):jt(t)?Bt.call(t,0):t?[t]:[]:Bt.call(o.querySelectorAll(t),0)},Wt=function(t){return t.sort(function(){return.5-Math.random()})},Ht=function(t){if(w(t))return t;var e=A(t)?t:{each:t},n=Te(e.ease),i=e.from||0,r=parseFloat(e.base)||0,a={},o=i>0&&i<1,s=isNaN(i)||o,u=e.axis,c=i,l=i;return b(i)?c=l={center:.5,edges:.5,end:1}[i]||0:!o&&s&&(c=i[0],l=i[1]),function(t,o,h){var f,d,m,v,g,_,x,b,w,M=(h||e).length,S=a[M];if(!S){if(w="auto"===e.grid?0:(e.grid||[1,p])[1],!w){for(x=-p;x<(x=h[w++].getBoundingClientRect().left)&&w<M;);w--}for(S=a[M]=[],f=s?Math.min(w,M)*c-.5:i%w,d=s?M*l/w-.5:i/w|0,x=0,b=p,_=0;_<M;_++)m=_%w-f,v=d-(_/w|0),S[_]=g=u?Math.abs("y"===u?v:m):y(m*m+v*v),g>x&&(x=g),g<b&&(b=g);"random"===i&&Wt(S),S.max=x-b,S.min=b,S.v=M=(parseFloat(e.amount)||parseFloat(e.each)*(w>M?M-1:u?"y"===u?M/w:w:Math.max(w,M/w))||0)*("edges"===i?-1:1),S.b=M<0?r-M:r,S.u=zt(e.amount||e.each)||0,n=n&&M<0?Se(n):n}return M=(S[t]-S.min)/S.max||0,nt(S.b+(n?n(M):M)*S.v)+S.u}},Xt=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return Math.floor(Math.round(parseFloat(n)/t)*t*e)/e+(M(n)?0:zt(n))}},Yt=function(t,e){var n,i,r=E(t);return!r&&A(t)&&(n=r=t.radius||p,t.values?(t=Vt(t.values),(i=!M(t[0]))&&(n*=n)):t=Xt(t.increment)),Rt(e,r?w(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,a,o=parseFloat(i?e.x:e),s=parseFloat(i?e.y:0),u=p,c=0,l=t.length;l--;)i?(r=t[l].x-o,a=t[l].y-s,r=r*r+a*a):r=Math.abs(t[l]-o),r<u&&(u=r,c=l);return c=!n||u<=n?t[c]:e,i||c===e||M(e)?c:c+zt(e)}:Xt(t))},qt=function(t,e,n,i){return Rt(E(t)?!e:n===!0?!!(n=0):!i,function(){return E(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/n)*n*i)/i})},Qt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},Zt=function(t,e){return function(n){return t(parseFloat(n))+(e||zt(n))}},Jt=function(t,e,n){return ne(t,e,0,1,n)},$t=function(t,e,n){return Rt(n,function(n){return t[~~e(n)]})},Kt=function Qi(t,e,n){var i=e-t;return E(t)?$t(t,Qi(0,t.length),e):Rt(n,function(e){return(i+(e-t)%i)%i+t})},te=function Zi(t,e,n){var i=e-t,r=2*i;return E(t)?$t(t,Zi(0,t.length-1),e):Rt(n,function(e){return e=(r+(e-t)%r)%r||0,t+(e>i?r-e:e)})},ee=function(t){for(var e,n,i,r,a=0,o="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?R:O),o+=t.substr(a,e-a)+qt(r?n:+n[0],+n[1],+n[2]||1e-5),a=i+1;return o+t.substr(a,t.length-a)},ne=function(t,e,n,i,r){var a=e-t,o=i-n;return Rt(r,function(e){return n+((e-t)/a*o||0)})},ie=function Ji(t,e,n,i){var r=isNaN(t+e)?0:function(n){return(1-n)*t+n*e};if(!r){var a,o,s,u,c,l=b(t),h={};if(n===!0&&(i=1)&&(n=null),l)t={p:t},e={p:e};else if(E(t)&&!E(e)){for(s=[],u=t.length,c=u-2,o=1;o<u;o++)s.push(Ji(t[o-1],t[o]));u--,r=function(t){t*=u;var e=Math.min(c,~~t);return s[e](t-e)},n=e}else i||(t=ht(E(t)?[]:{},t));if(!s){for(a in e)Re.call(h,t,a,"get",e[a]);r=function(e){return Ke(e,h)||(l?t.p:t)}}}return Rt(n,r)},re=function(t,e,n){var i,r,a,o=t.labels,s=p;for(i in o)r=o[i]-e,r<0==!!n&&r&&s>(r=Math.abs(r))&&(a=i,s=r);return a},ae=function(t,e,n){var i,r,a=t.vars,o=a[e];if(o)return i=a[e+"Params"],r=a.callbackScope||t,
n&&H.length&&at(),i?o.apply(r,i):o.call(r)},oe=function(t){return yt(t),t.progress()<1&&ae(t,"onInterrupt"),t},se=function(t){t=!t.name&&t["default"]||t;var e=t.name,n=w(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:V,render:Ke,add:Re,kill:en,modifier:tn,rawVars:0},a={targetTest:0,get:0,getSetter:Qe,aliases:{},register:0};if(ye(),t!==i){if(Y[e])return;ct(i,ct(pt(t,r),a)),ht(i.prototype,ht(r,pt(t,a))),Y[i.prop=e]=i,t.targetTest&&(Z.push(i),W[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}G(e,i),t.register&&t.register(ln,i,an)},ue=255,ce={aqua:[0,ue,ue],lime:[0,ue,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ue],navy:[0,0,128],white:[ue,ue,ue],olive:[128,128,0],yellow:[ue,ue,0],orange:[ue,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ue,0,0],pink:[ue,192,203],cyan:[0,ue,ue],transparent:[ue,ue,ue,0]},le=function(t,e,n){return t=t<0?t+1:t>1?t-1:t,(6*t<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*ue+.5|0},he=function(t,e,n){var i,r,a,o,s,u,c,l,h,f,p=t?M(t)?[t>>16,t>>8&ue,t&ue]:0:ce.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ce[t])p=ce[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),a=t.charAt(3),t="#"+i+i+r+r+a+a),t=parseInt(t.substr(1),16),p=[t>>16,t>>8&ue,t&ue];else if("hsl"===t.substr(0,3))if(p=f=t.match(O),e){if(~t.indexOf("="))return p=t.match(C),n&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,s=+p[1]/100,u=+p[2]/100,r=u<=.5?u*(s+1):u+s-u*s,i=2*u-r,p.length>3&&(p[3]*=1),p[0]=le(o+1/3,i,r),p[1]=le(o,i,r),p[2]=le(o-1/3,i,r);else p=t.match(O)||ce.transparent;p=p.map(Number)}return e&&!f&&(i=p[0]/ue,r=p[1]/ue,a=p[2]/ue,c=Math.max(i,r,a),l=Math.min(i,r,a),u=(c+l)/2,c===l?o=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),o=c===i?(r-a)/h+(r<a?6:0):c===r?(a-i)/h+2:(i-r)/h+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},fe=function(t){var e=[],n=[],i=-1;return t.split(de).forEach(function(t){var r=t.match(F)||[];e.push.apply(e,r),n.push(i+=r.length+1)}),e.c=n,e},pe=function(t,e,n){var i,r,a,o,s="",u=(t+s).match(de),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map(function(t){return(t=he(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(a=fe(t),i=n.c,i.join(s)!==a.c.join(s)))for(r=t.replace(de,"1").split(F),o=r.length-1;l<o;l++)s+=r[l]+(~i.indexOf(l)?u.shift()||c+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!r)for(r=t.split(de),o=r.length-1;l<o;l++)s+=r[l]+u[l];return s+r[o]},de=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in ce)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),me=/hsl[a]?\(/,ve=function(t){var e,n=t.join(" ");if(de.lastIndex=0,de.test(n))return e=me.test(n),t[1]=pe(t[1],e),t[0]=pe(t[0],e,fe(t[1])),!0},ge=function(){var t,e,n,i,u=Date.now,c=500,h=33,f=u(),p=f,m=1/240,v=m,g=[],y=function _(n){var r,a,o=u()-p,s=n===!0;o>c&&(f+=o-h),p+=o,i.time=(p-f)/1e3,r=i.time-v,(r>0||s)&&(i.frame++,v+=r+(r>=m?.004:m-r),a=1),s||(t=e(_)),a&&g.forEach(function(t){return t(i.time,o,i.frame,n)})};return i={time:0,frame:0,tick:function(){y(!0)},wake:function(){s&&(!a&&P()&&(r=a=window,o=r.document||{},k.gsap=ln,(r.gsapVersions||(r.gsapVersions=[])).push(ln.version),U(z||r.GreenSockGlobals||!r.gsap&&r||{}),n=r.requestAnimationFrame),t&&i.sleep(),e=n||function(t){return setTimeout(t,1e3*(v-i.time)+1|0)},l=1,y(2))},sleep:function(){(n?r.cancelAnimationFrame:clearTimeout)(t),l=0,e=V},lagSmoothing:function(t,e){c=t||1/d,h=Math.min(e,c,0)},fps:function(t){m=1/(t||240),v=i.time+m},add:function(t){g.indexOf(t)<0&&g.push(t),ye()},remove:function(t){var e;~(e=g.indexOf(t))&&g.splice(e,1)},_listeners:g}}(),ye=function(){return!l&&ge.wake()},_e={},xe=/^[\d.\-M][\d.\-,\s]/,be=/["']/g,we=function(t){for(var e,n,i,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)n=a[s],e=s!==u-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(be,"").trim():+i,o=n.substr(e+1).trim();return r},Me=function(t){var e=(t+"").split("("),n=_e[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[we(e[1])]:N.exec(t)[1].split(",").map(st)):_e._CE&&xe.test(t)?_e._CE("",t):n},Se=function(t){return function(e){return 1-t(1-e)}},Ae=function $i(t,e){for(var n,i=t._first;i;)i instanceof Ie?$i(i,e):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===e||(i.timeline?$i(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Te=function(t,e){return t?(w(t)?t:_e[t]||Me(t))||e:e},Pe=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return et(t,function(t){_e[t]=k[t]=a,_e[r=t.toLowerCase()]=n;for(var e in a)_e[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=_e[t+"."+e]=a[e]}),a},Le=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Ee=function Ki(t,e,n){var i=e>=1?e:1,r=(n||(t?.3:.45))/(e<1?e:1),a=r/m*(Math.asin(1/i)||0),o=function(t){return 1===t?1:i*Math.pow(2,-10*t)*x((t-a)*r)+1},s="out"===t?o:"in"===t?function(t){return 1-o(1-t)}:Le(o);return r=m/r,s.config=function(e,n){return Ki(t,e,n)},s},Oe=function tr(t,e){void 0===e&&(e=1.70158);var n=function(t){return t?--t*t*((e+1)*t+e)+1:0},i="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:Le(n);return i.config=function(e){return tr(t,e)},i};et("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Pe(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),_e.Linear.easeNone=_e.none=_e.Linear.easeIn,Pe("Elastic",Ee("in"),Ee("out"),Ee()),function(t,e){var n=1/e,i=2*n,r=2.5*n,a=function(a){return a<n?t*a*a:a<i?t*Math.pow(a-1.5/e,2)+.75:a<r?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};Pe("Bounce",function(t){return 1-a(1-t)},a)}(7.5625,2.75),Pe("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Pe("Circ",function(t){return-(y(1-t*t)-1)}),Pe("Sine",function(t){return 1===t?1:-_(t*v)+1}),Pe("Back",Oe("in"),Oe("out"),Oe()),_e.SteppedEase=_e.steps=k.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,a=1-d;return function(t){return((i*kt(0,a,t)|0)+r)*n}}},f.ease=_e["quad.out"],et("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return J+=t+","+t+"Params,"});var Ce=function(t,e){this.id=g++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:tt,this.set=e?e.getSetter:Qe},Fe=function(){function t(t,e){var n=t.parent||i;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ft(this,+t.duration,1),this.data=t.data,l||ge.wake(),n&&Pt(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Ft(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ye(),!arguments.length)return this._tTime;var n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){for(this._start=nt(n._time-(this._ts>0?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),At(this),n._dirty||_t(n);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Pt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===d||!t&&!this._initted)&&(this._ts||(this._pTime=t),ot(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+wt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+wt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Mt(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-d?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?St(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-d?0:this._rts,xt(this.totalTime(kt(0,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ye(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=d)&&Math.abs(this._zTime)!==d))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Pt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(T(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?St(e.rawTime(t),this):this._tTime:this._tTime},e.repeat=function(t){return arguments.length?(this._repeat=t,It(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,It(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Dt(this,t),T(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,T(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-d:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-d,this},e.isActive=function(t){var e,n=this.parent||this._dp,i=this._start;return!(n&&!(this._ts&&(this._initted||!t)&&n.isActive(t)&&(e=n.rawTime(!0))>=i&&e<this.endTime(!0)-d))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise(function(n){var i=w(t)?t:ut,r=function(){var t=e.then;e.then=null,w(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r})},e.kill=function(){oe(this)},t}();ct(Fe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-d,_prom:0,_ps:!1,_rts:1});var Ie=function(t){function r(e,i){var r;return void 0===e&&(e={}),r=t.call(this,e,i)||this,r.labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=T(e.sortChildren),r.parent&&Tt(r.parent,n(r)),e.scrollTrigger&&Lt(n(r),e.scrollTrigger),r}e(r,t);var a=r.prototype;return a.to=function(t,e,n){return new We(t,rt(arguments,0,this),Dt(this,M(e)?arguments[3]:n)),this},a.from=function(t,e,n){return new We(t,rt(arguments,1,this),Dt(this,M(e)?arguments[3]:n)),this},a.fromTo=function(t,e,n,i){return new We(t,rt(arguments,2,this),Dt(this,M(e)?arguments[4]:i)),this},a.set=function(t,e,n){return e.duration=0,e.parent=this,dt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new We(t,e,Dt(this,n),1),this},a.call=function(t,e,n){return Pt(this,We.delayedCall(0,t,e),Dt(this,n))},a.staggerTo=function(t,e,n,i,r,a,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new We(t,n,Dt(this,r)),this},a.staggerFrom=function(t,e,n,i,r,a,o){return n.runBackwards=1,dt(n).immediateRender=T(n.immediateRender),this.staggerTo(t,e,n,i,r,a,o)},a.staggerFromTo=function(t,e,n,i,r,a,o,s){return i.startAt=n,dt(i).immediateRender=T(i.immediateRender),this.staggerTo(t,e,i,r,a,o,s)},a.render=function(t,e,n){var r,a,o,s,u,c,l,h,f,p,m,v,g=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,x=this!==i&&t>y-d&&t>=0?y:t<d?0:t,b=this._zTime<0!=t<0&&(this._initted||!_);if(x!==this._tTime||n||b){if(g!==this._time&&_&&(x+=this._time-g,t+=this._time-g),r=x,f=this._start,h=this._ts,c=!h,b&&(_||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat&&(m=this._yoyo,u=_+this._rDelay,r=nt(x%u),(r>_||y===x)&&(r=_),s=~~(x/u),s&&s===x/u&&(r=_,s--),p=Mt(this._tTime,u),!g&&this._tTime&&p!==s&&(p=s),m&&1&s&&(r=_-r,v=1),s!==p&&!this._lock)){var w=m&&1&p,M=w===(m&&1&s);if(s<p&&(w=!w),g=w?0:_,this._lock=1,this.render(g||(v?0:nt(s*u)),e,!_)._lock=0,!e&&this.parent&&ae(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),g!==this._time||c!==!this._ts)return this;if(M&&(this._lock=2,g=w?_+1e-4:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;Ae(this,v)}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=Ct(this,nt(g),nt(r)),l&&(x-=r-(r=l._start))),this._tTime=x,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),g||!r||e||ae(this,"onStart"),r>=g&&t>=0)for(a=this._first;a;){if(o=a._next,(a._act||r>=a._start)&&a._ts&&l!==a){if(a.parent!==this)return this.render(t,e,n);if(a.render(a._ts>0?(r-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(r-a._start)*a._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(x+=this._zTime=-d);break}}a=o}else{a=this._last;for(var S=t<0?t:r;a;){if(o=a._prev,(a._act||S<=a._end)&&a._ts&&l!==a){if(a.parent!==this)return this.render(t,e,n);if(a.render(a._ts>0?(S-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(S-a._start)*a._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(x+=this._zTime=S?-d:d);break}}a=o}}if(l&&!e&&(this.pause(),l.render(r>=g?0:-d)._zTime=r>=g?1:-1,this._ts))return this._start=f,At(this),this.render(t,e,n);this._onUpdate&&!e&&ae(this,"onUpdate",!0),(x===y&&y>=this.totalDuration()||!x&&g)&&(f!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(x===y&&this._ts>0||!x&&this._ts<0)&&yt(this,1),e||t<0&&!g||!x&&!g||(ae(this,x===y?"onComplete":"onReverseComplete",!0),this._prom&&!(x<y&&this.timeScale()>0)&&this._prom())))}return this},a.add=function(t,e){var n=this;if(M(e)||(e=Dt(this,e)),!(t instanceof Fe)){if(E(t))return t.forEach(function(t){return n.add(t,e)}),_t(this);if(b(t))return this.addLabel(t,e);if(!w(t))return this;t=We.delayedCall(0,t)}return this!==t?Pt(this,t,e):this},a.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-p);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof We?e&&r.push(a):(n&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,n)))),a=a._next;return r},a.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},a.remove=function(t){return b(t)?this.removeLabel(t):w(t)?this.killTweensOf(t):(gt(this,t),t===this._recent&&(this._recent=this._last),_t(this))},a.totalTime=function(e,n){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=nt(ge.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},a.addLabel=function(t,e){return this.labels[t]=Dt(this,e),this},a.removeLabel=function(t){return delete this.labels[t],this},a.addPause=function(t,e,n){var i=We.delayedCall(0,e||V,n);return i.data="isPause",this._hasPause=1,Pt(this,i,Dt(this,t))},a.removePause=function(t){var e=this._first;for(t=Dt(this,t);e;)e._start===t&&"isPause"===e.data&&yt(e),e=e._next},a.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)Ne!==i[r]&&i[r].kill(t,e);return this},a.getTweensOf=function(t,e){for(var n,i=[],r=Vt(t),a=this._first;a;)a instanceof We?!it(a._targets,r)||e&&!a.isActive("started"===e)||i.push(a):(n=a.getTweensOf(r,e)).length&&i.push.apply(i,n),a=a._next;return i},a.tweenTo=function(t,e){e=e||{};var n=this,i=Dt(n,t),r=e,a=r.startAt,o=r.onStart,s=r.onStartParams,u=We.to(n,ct(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:n._time))/n.timeScale())||d,onStart:function(){n.pause();var t=e.duration||Math.abs((i-n._time)/n.timeScale());u._dur!==t&&Ft(u,t).render(u._time,!0,!0),o&&o.apply(u,s||[])}}));return u},a.tweenFromTo=function(t,e,n){return this.tweenTo(e,ct({startAt:{time:Dt(this,t)}},n))},a.recent=function(){return this._recent},a.nextLabel=function(t){return void 0===t&&(t=this._time),re(this,Dt(this,t))},a.previousLabel=function(t){return void 0===t&&(t=this._time),re(this,Dt(this,t),1)},a.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+d)},a.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return _t(this)},a.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},a.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),_t(this)},a.totalDuration=function(t){var e,n,r,a,o=0,s=this,u=s._last,c=p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(a=s.parent;u;)e=u._prev,u._dirty&&u.totalDuration(),r=u._start,r>c&&s._sort&&u._ts&&!s._lock?(s._lock=1,Pt(s,u,r-u._delay,1)._lock=0):c=r,r<0&&u._ts&&(o-=r,(!a&&!s._dp||a&&a.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),c=0),n=At(u),n>o&&u._ts&&(o=n),u=e;Ft(s,s===i&&s._time>o?s._time:o,1),s._dirty=0}return s._tDur},r.updateRoot=function(t){if(i._ts&&(ot(i,St(t,i)),u=ge.frame),ge.frame>=Q){Q+=h.autoSleep||120;var e=i._first;if((!e||!e._ts)&&h.autoSleep&&ge._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||ge.sleep()}}},r}(Fe);ct(Ie.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ne,De=function(t,e,n,i,r,a,o){var s,u,c,l,h,f,p,d,m=new an(this._pt,t,e,0,1,$e,null,r),v=0,g=0;for(m.b=n,m.e=i,n+="",i+="",(p=~i.indexOf("random("))&&(i=ee(i)),a&&(d=[n,i],a(d,t,e),n=d[0],i=d[1]),u=n.match(I)||[];s=I.exec(i);)l=s[0],h=i.substring(v,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),l!==u[g++]&&(f=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:f,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-f,m:c&&c<4?Math.round:0},v=I.lastIndex);return m.c=v<i.length?i.substring(v,i.length):"",m.fp=o,(D.test(i)||p)&&(m.e=0),this._pt=m,m},Re=function(t,e,n,i,r,a,o,s,u){w(i)&&(i=i(r||0,t,a));var c,l=t[e],f="get"!==n?n:w(l)?u?t[e.indexOf("set")||!w(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():l,p=w(l)?u?Ye:Xe:He;if(b(i)&&(~i.indexOf("random(")&&(i=ee(i)),"="===i.charAt(1)&&(i=parseFloat(f)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(zt(f)||0))),f!==i)return isNaN(f+i)?(!l&&!(e in t)&&B(e,i),De.call(this,t,e,f,i,p,s||h.stringFilter,u)):(c=new an(this._pt,t,e,+f||0,i-(f||0),"boolean"==typeof l?Je:Ze,0,p),u&&(c.fp=u),o&&c.modifier(o,this,t),this._pt=c)},ke=function(t,e,n,i,r){if(w(t)&&(t=je(t,r,e,n,i)),!A(t)||t.style&&t.nodeType||E(t))return b(t)?je(t,r,e,n,i):t;var a,o={};for(a in t)o[a]=je(t[a],r,e,n,i);return o},ze=function(t,e,n,i,r,a){var o,s,u,l;if(Y[t]&&(o=new Y[t]).init(r,o.rawVars?e[t]:ke(e[t],i,r,a,n),n,i,a)!==!1&&(n._pt=s=new an(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==c))for(u=n._ptLookup[n._targets.indexOf(r)],l=o._props.length;l--;)u[o._props[l]]=s;return o},Ue=function er(t,e){var n,r,a,o,s,u,c,l,h,p,m,v,g=t.vars,y=g.ease,_=g.startAt,x=g.immediateRender,b=g.lazy,w=g.onUpdate,M=g.onUpdateParams,S=g.callbackScope,A=g.runBackwards,P=g.yoyoEase,L=g.keyframes,E=g.autoRevert,O=t._dur,C=t._startAt,F=t._targets,I=t.parent,N=I&&"nested"===I.data?I.parent._targets:F,D="auto"===t._overwrite,R=t.timeline;if(R&&(!L||!y)&&(y="none"),t._ease=Te(y,f.ease),t._yEase=P?Se(Te(P===!0?y:P,f.ease)):0,P&&t._yoyo&&!t._repeat&&(P=t._yEase,t._yEase=t._ease,t._ease=P),!R){if(l=F[0]?K(F[0]).harness:0,v=l&&g[l.prop],n=pt(g,W),C&&C.render(-1,!0).kill(),_){if(yt(t._startAt=We.set(F,ct({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:T(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:M,callbackScope:S,stagger:0},_))),x)if(e>0)!E&&(t._startAt=0);else if(O)return}else if(A&&O)if(C)!E&&(t._startAt=0);else if(e&&(x=!1),a=ht(n,{overwrite:!1,data:"isFromStart",lazy:x&&T(b),immediateRender:x,stagger:0,parent:I}),v&&(a[l.prop]=v),yt(t._startAt=We.set(F,a)),x){if(!e)return}else er(t._startAt,d);for(t._pt=0,b=O&&T(b)||b&&!O,r=0;r<F.length;r++){if(s=F[r],c=s._gsap||$(F)[r]._gsap,t._ptLookup[r]=p={},X[c.id]&&at(),m=N===F?r:N.indexOf(s),l&&(h=new l).init(s,v||n,t,m,N)!==!1&&(t._pt=o=new an(t._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(t){p[t]=o}),h.priority&&(u=1)),!l||v)for(a in n)Y[a]&&(h=ze(a,n,t,m,s,N))?h.priority&&(u=1):p[a]=o=Re.call(t,s,a,"get",n[a],m,N,0,g.stringFilter);t._op&&t._op[r]&&t.kill(s,t._op[r]),D&&t._pt&&(Ne=t,i.killTweensOf(s,p,"started"),Ne=0),t._pt&&b&&(X[c.id]=1)}u&&rn(t),t._onInit&&t._onInit(t)}t._from=!R&&!!g.runBackwards,t._onUpdate=w,t._initted=!!t.parent},Be=function(t,e){var n,i,r,a,o=t[0]?K(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;n=ht({},e);for(i in s)if(i in n)for(a=s[i].split(","),r=a.length;r--;)n[a[r]]=n[i];return n},je=function(t,e,n,i,r){return w(t)?t.call(e,n,i,r):b(t)&&~t.indexOf("random(")?ee(t):t},Ge=J+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ve=(Ge+",id,stagger,delay,duration,paused,scrollTrigger").split(","),We=function(t){function r(e,r,a,o){var s;"number"==typeof r&&(a.duration=r,r=a,a=null),s=t.call(this,o?r:dt(r),a)||this;var u,c,l,f,p,m,v,g,y=s.vars,_=y.duration,x=y.delay,b=y.immediateRender,w=y.stagger,S=y.overwrite,P=y.keyframes,O=y.defaults,C=y.scrollTrigger,F=y.yoyoEase,I=s.parent,N=(E(e)?M(e[0]):"length"in r)?[e]:Vt(e);if(s._targets=N.length?$(N):j("GSAP target "+e+" not found. https://greensock.com",!h.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=S,P||w||L(_)||L(x)){if(r=s.vars,u=s.timeline=new Ie({data:"nested",defaults:O||{}}),u.kill(),u.parent=n(s),P)ct(u.vars.defaults,{ease:"none"}),P.forEach(function(t){return u.to(N,t,">")});else{if(f=N.length,v=w?Ht(w):V,A(w))for(p in w)~Ge.indexOf(p)&&(g||(g={}),g[p]=w[p]);for(c=0;c<f;c++){l={};for(p in r)Ve.indexOf(p)<0&&(l[p]=r[p]);l.stagger=0,F&&(l.yoyoEase=F),g&&ht(l,g),m=N[c],l.duration=+je(_,n(s),c,m,N),l.delay=(+je(x,n(s),c,m,N)||0)-s._delay,!w&&1===f&&l.delay&&(s._delay=x=l.delay,s._start+=x,l.delay=0),u.to(m,l,v(c,m,N))}u.duration()?_=x=0:s.timeline=0}_||s.duration(_=u.duration())}else s.timeline=0;return S===!0&&(Ne=n(s),i.killTweensOf(N),Ne=0),I&&Tt(I,n(s)),(b||!_&&!P&&s._start===nt(I._time)&&T(b)&&bt(n(s))&&"nested"!==I.data)&&(s._tTime=-d,s.render(Math.max(0,-x))),C&&Lt(n(s),C),s}e(r,t);var a=r.prototype;return a.render=function(t,e,n){var i,r,a,o,s,u,c,l,h,f=this._time,p=this._tDur,m=this._dur,v=t>p-d&&t>=0?p:t<d?0:t;if(m){if(v!==this._tTime||!t||n||this._startAt&&this._zTime<0!=t<0){if(i=v,l=this.timeline,this._repeat){if(o=m+this._rDelay,i=nt(v%o),(i>m||p===v)&&(i=m),a=~~(v/o),a&&a===v/o&&(i=m,a--),u=this._yoyo&&1&a,u&&(h=this._yEase,i=m-i),s=Mt(this._tTime,o),i===f&&!n&&this._initted)return this;a!==s&&(l&&this._yEase&&Ae(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(nt(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(Et(this,i,n,e))return this._tTime=0,this;if(m!==this._dur)return this.render(t,e,n)}for(this._tTime=v,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/m),this._from&&(this.ratio=c=1-c),i&&!f&&!e&&ae(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;l&&l.render(t<0?t:!i&&u?-d:l._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),ae(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&ae(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&yt(this,1),e||t<0&&!f||!v&&!f||(ae(this,v===p?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom()))}}else Ot(this,t,e,n);return this},a.targets=function(){return this._targets},a.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},a.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return oe(this);if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ne&&Ne.vars.overwrite!==!0)._first||oe(this),this.parent&&n!==this.timeline.totalDuration()&&Ft(this,this._dur*this.timeline._tDur/n),this}var i,r,a,o,s,u,c,l=this._targets,h=t?Vt(t):l,f=this._ptLookup,p=this._pt;if((!e||"all"===e)&&mt(l,h))return oe(this);for(i=this._op=this._op||[],"all"!==e&&(b(e)&&(s={},et(e,function(t){return s[t]=1}),e=s),e=Be(l,e)),c=l.length;c--;)if(~h.indexOf(l[c])){r=f[c],"all"===e?(i[c]=e,o=r,a={}):(a=i[c]=i[c]||{},o=e);for(s in o)u=r&&r[s],u&&("kill"in u.d&&u.d.kill(s)!==!0||gt(this,u,"_pt"),delete r[s]),"all"!==a&&(a[s]=1)}return this._initted&&!this._pt&&p&&oe(this),this},r.to=function(t,e){return new r(t,e,arguments[2])},r.from=function(t,e){return new r(t,rt(arguments,1))},r.delayedCall=function(t,e,n,i){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},r.fromTo=function(t,e,n){return new r(t,rt(arguments,2))},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,n){return i.killTweensOf(t,e,n)},r}(Fe);ct(We.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),et("staggerTo,staggerFrom,staggerFromTo",function(t){We[t]=function(){var e=new Ie,n=Bt.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var He=function(t,e,n){return t[e]=n},Xe=function(t,e,n){return t[e](n)},Ye=function(t,e,n,i){return t[e](i.fp,n)},qe=function(t,e,n){return t.setAttribute(e,n)},Qe=function(t,e){return w(t[e])?Xe:S(t[e])&&t.setAttribute?qe:He},Ze=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Je=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},$e=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Ke=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},tn=function(t,e,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(t,e,n),a=r},en=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?gt(this,i,"_pt"):i.dep||(e=1),i=n;return!e},nn=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},rn=function(t){for(var e,n,i,r,a=t._pt;a;){for(e=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=e}t._pt=i},an=function(){function t(t,e,n,i,r,a,o,s,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||Ze,this.d=o||this,this.set=s||He,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=t.prototype;return e.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=nn,this.m=t,this.mt=n,this.tween=e},t}();et(J+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return W[t]=1}),k.TweenMax=k.TweenLite=We,k.TimelineLite=k.TimelineMax=Ie,i=new Ie({sortChildren:!1,defaults:f,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),h.stringFilter=ve;var on={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){return se(t)})},timeline:function(t){return new Ie(t)},getTweensOf:function(t,e){return i.getTweensOf(t,e)},getProperty:function(t,e,n,i){b(t)&&(t=Vt(t)[0]);var r=K(t||{}).get,a=n?ut:st;return"native"===n&&(n=""),t?e?a((Y[e]&&Y[e].get||r)(t,e,n,i)):function(e,n,i){return a((Y[e]&&Y[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if(t=Vt(t),t.length>1){var i=t.map(function(t){return ln.quickSetter(t,e,n)}),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var a=Y[e],o=K(t),s=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(e){var i=new a;c._pt=0,i.init(t,n?e+n:e,c,0,[t]),i.render(1,i),c._pt&&Ke(1,c)}:o.set(t,s);return a?u:function(e){return u(t,s,n?e+n:e,o,1)}},isTweening:function(t){return i.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Te(t.ease,f.ease)),ft(f,t||{})},config:function(t){return ft(h,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach(function(t){return t&&!Y[t]&&!k[t]&&j(e+" effect requires "+t+" plugin.")}),q[e]=function(t,e,i){return n(Vt(t),ct(e||{},r),i)},a&&(Ie.prototype[e]=function(t,n,i){return this.add(q[e](t,A(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){_e[t]=Te(e)},parseEase:function(t,e){return arguments.length?Te(t,e):_e},getById:function(t){return i.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,a=new Ie(t);for(a.smoothChildTiming=T(t.smoothChildTiming),i.remove(a),a._dp=0,a._time=a._tTime=i._time,n=i._first;n;)r=n._next,!e&&!n._dur&&n instanceof We&&n.vars.onComplete===n._targets[0]||Pt(a,n,n._start-n._delay),n=r;return Pt(i,a,0),a},utils:{wrap:Kt,wrapYoyo:te,distribute:Ht,random:qt,snap:Yt,normalize:Jt,getUnit:zt,clamp:Ut,splitColor:he,toArray:Vt,mapRange:ne,pipe:Qt,unitize:Zt,interpolate:ie,shuffle:Wt},install:U,effects:q,ticker:ge,updateRoot:Ie.updateRoot,plugins:Y,globalTimeline:i,core:{PropTween:an,globals:G,Tween:We,Timeline:Ie,Animation:Fe,getCache:K,_removeLinkedListItem:gt}};et("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return on[t]=We[t]}),ge.add(Ie.updateRoot),c=on.to({},{duration:0});var sn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},un=function(t,e){var n,i,r,a=t._targets;for(n in e)for(i=a.length;i--;)r=t._ptLookup[i][n],r&&(r=r.d)&&(r._pt&&(r=sn(r,n)),r&&r.modifier&&r.modifier(e[n],t,a[i],n))},cn=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(b(n)&&(i={},et(n,function(t){return i[t]=1}),n=i),e){i={};for(r in n)i[r]=e(n[r]);n=i}un(t,n)}}}},ln=on.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,o;for(a in e)o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,r,0,0,a),o&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},cn("roundProps",Xt),cn("modifiers"),cn("snap",Yt))||on;We.version=Ie.version=ln.version="3.3.3",s=1,P()&&ye();var hn,fn,pn,dn,mn,vn,gn,yn,_n=_e.Power0,xn=_e.Power1,bn=_e.Power2,wn=_e.Power3,Mn=_e.Power4,Sn=_e.Linear,An=_e.Quad,Tn=_e.Cubic,Pn=_e.Quart,Ln=_e.Quint,En=_e.Strong,On=_e.Elastic,Cn=_e.Back,Fn=_e.SteppedEase,In=_e.Bounce,Nn=_e.Sine,Dn=_e.Expo,Rn=_e.Circ,kn=function(){
return"undefined"!=typeof window},zn={},Un=180/Math.PI,Bn=Math.PI/180,jn=Math.atan2,Gn=1e8,Vn=/([A-Z])/g,Wn=/(?:left|right|width|margin|padding|x)/i,Hn=/[\s,\(]\S/,Xn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Yn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},qn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Qn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Zn=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Jn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},$n=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Kn=function(t,e,n){return t.style[e]=n},ti=function(t,e,n){return t.style.setProperty(e,n)},ei=function(t,e,n){return t._gsap[e]=n},ni=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},ii=function(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},ri=function(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)},ai="transform",oi=ai+"Origin",si=function(t,e){var n=fn.createElementNS?fn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):fn.createElement(t);return n.style?n:fn.createElement(t)},ui=function nr(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(Vn,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&nr(t,li(e)||e,1)||""},ci="O,Moz,ms,Ms,Webkit".split(","),li=function(t,e,n){var i=e||mn,r=i.style,a=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(ci[a]+t in r););return a<0?null:(3===a?"ms":a>=0?ci[a]:"")+t},hi=function(){kn()&&window.document&&(hn=window,fn=hn.document,pn=fn.documentElement,mn=si("div")||{style:{}},vn=si("div"),ai=li(ai),oi=li(oi),mn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",yn=!!li("perspective"),dn=1)},fi=function ir(t){var e,n=si("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(pn.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=ir}catch(o){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),pn.removeChild(n),this.style.cssText=a,e},pi=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},di=function(t){var e;try{e=t.getBBox()}catch(n){e=fi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===fi||(e=fi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+pi(t,["x","cx","x1"])||0,y:+pi(t,["y","cy","y1"])||0,width:0,height:0}},mi=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!di(t))},vi=function(t,e){if(e){var n=t.style;e in zn&&(e=ai),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(Vn,"-$1").toLowerCase())):n.removeAttribute(e)}},gi=function(t,e,n,i,r,a){var o=new an(t._pt,e,n,0,1,a?$n:Jn);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},yi={deg:1,rad:1,turn:1},_i=function rr(t,e,n,i){var r,a,o,s,u=parseFloat(n)||0,c=(n+"").trim().substr((u+"").length)||"px",l=mn.style,h=Wn.test(e),f="svg"===t.tagName.toLowerCase(),p=(f?"client":"offset")+(h?"Width":"Height"),d=100,m="px"===i,v="%"===i;return i===c||!u||yi[i]||yi[c]?u:("px"!==c&&!m&&(u=rr(t,e,n,"px")),s=t.getCTM&&mi(t),v&&(zn[e]||~e.indexOf("adius"))?nt(u/(s?t.getBBox()[h?"width":"height"]:t[p])*d):(l[h?"width":"height"]=d+(m?c:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!f?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==fn&&a.appendChild||(a=fn.body),o=a._gsap,o&&v&&o.width&&h&&o.time===ge.time?nt(u/o.width*d):((v||"%"===c)&&(l.position=ui(t,"position")),a===t&&(l.position="static"),a.appendChild(mn),r=mn[p],a.removeChild(mn),l.position="absolute",h&&v&&(o=K(a),o.time=ge.time,o.width=a[p]),nt(m?r*u/d:r&&u?d/r*u:0))))},xi=function(t,e,n,i){var r;return dn||hi(),e in Xn&&"transform"!==e&&(e=Xn[e],~e.indexOf(",")&&(e=e.split(",")[0])),zn[e]&&"transform"!==e?(r=Fi(t,i),r="transformOrigin"!==e?r[e]:Ii(ui(t,oi))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Ai[e]&&Ai[e](t,e,n)||ui(t,e)||tt(t,e)||("opacity"===e?1:0))),n&&!~(r+"").indexOf(" ")?_i(t,e,r,n)+n:r},bi=function(t,e,n,i){if(!n||"none"===n){var r=li(e,t,1),a=r&&ui(t,r,1);a&&a!==n&&(e=r,n=a)}var o,s,u,c,l,f,p,d,m,v,g,y,_,x=new an(this._pt,t.style,e,0,1,$e),b=0,w=0;if(x.b=n,x.e=i,n+="",i+="","auto"===i&&(t.style[e]=i,i=ui(t,e)||i,t.style[e]=n),o=[n,i],ve(o),n=o[0],i=o[1],u=n.match(F)||[],_=i.match(F)||[],_.length){for(;s=F.exec(i);)p=s[0],m=i.substring(b,s.index),l?l=(l+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(l=1),p!==(f=u[w++]||"")&&(c=parseFloat(f)||0,g=f.substr((c+"").length),y="="===p.charAt(1)?+(p.charAt(0)+"1"):0,y&&(p=p.substr(2)),d=parseFloat(p),v=p.substr((d+"").length),b=F.lastIndex-v.length,v||(v=v||h.units[e]||g,b===i.length&&(i+=v,x.e+=v)),g!==v&&(c=_i(t,e,f,v)||0),x._pt={_next:x._pt,p:m||1===w?m:",",s:c,c:y?y*d:d-c,m:l&&l<4?Math.round:0});x.c=b<i.length?i.substring(b,i.length):""}else x.r="display"===e&&"none"===i?$n:Jn;return D.test(i)&&(x.e=0),this._pt=x,x},wi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Mi=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=wi[n]||n,e[1]=wi[i]||i,e.join(" ")},Si=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,o=a.style,s=e.u,u=a._gsap;if("all"===s||s===!0)o.cssText="",i=1;else for(s=s.split(","),r=s.length;--r>-1;)n=s[r],zn[n]&&(i=1,n="transformOrigin"===n?oi:ai),vi(a,n);i&&(vi(a,ai),u&&(u.svg&&a.removeAttribute("transform"),Fi(a,1),u.uncache=1))}},Ai={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var a=t._pt=new an(t._pt,e,n,0,0,Si);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},Ti=[1,0,0,1,0,0],Pi={},Li=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Ei=function(t){var e=ui(t,ai);return Li(e)?Ti:e.substr(7).match(C).map(nt)},Oi=function(t,e){var n,i,r,a,o=t._gsap||K(t),s=t.style,u=Ei(t);return o.svg&&t.getAttribute("transform")?(r=t.transform.baseVal.consolidate().matrix,u=[r.a,r.b,r.c,r.d,r.e,r.f],"1,0,0,1,0,0"===u.join(",")?Ti:u):(u!==Ti||t.offsetParent||t===pn||o.svg||(r=s.display,s.display="block",n=t.parentNode,n&&t.offsetParent||(a=1,i=t.nextSibling,pn.appendChild(t)),u=Ei(t),r?s.display=r:vi(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):pn.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},Ci=function(t,e,n,i,r,a){var o,s,u,c,l=t._gsap,h=r||Oi(t,!0),f=l.xOrigin||0,p=l.yOrigin||0,d=l.xOffset||0,m=l.yOffset||0,v=h[0],g=h[1],y=h[2],_=h[3],x=h[4],b=h[5],w=e.split(" "),M=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?h!==Ti&&(s=v*_-g*y)&&(u=M*(_/s)+S*(-y/s)+(y*b-_*x)/s,c=M*(-g/s)+S*(v/s)-(v*b-g*x)/s,M=u,S=c):(o=di(t),M=o.x+(~w[0].indexOf("%")?M/100*o.width:M),S=o.y+(~(w[1]||w[0]).indexOf("%")?S/100*o.height:S)),i||i!==!1&&l.smooth?(x=M-f,b=S-p,l.xOffset=d+(x*v+b*y)-x,l.yOffset=m+(x*g+b*_)-b):l.xOffset=l.yOffset=0,l.xOrigin=M,l.yOrigin=S,l.smooth=!!i,l.origin=e,l.originIsAbsolute=!!n,t.style[oi]="0px 0px",a&&(gi(a,l,"xOrigin",f,M),gi(a,l,"yOrigin",p,S),gi(a,l,"xOffset",d,l.xOffset),gi(a,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",M+" "+S)},Fi=function(t,e){var n=t._gsap||new Ce(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,a,o,s,u,c,l,f,p,d,m,v,g,y,_,x,b,w,M,S,A,T,P,L,E,O,C,F,I,N,D,R=t.style,k=n.scaleX<0,z="px",U="deg",B=ui(t,oi)||"0";return i=r=a=u=c=l=f=p=d=0,o=s=1,n.svg=!(!t.getCTM||!mi(t)),g=Oi(t,n.svg),n.svg&&(P=!n.uncache&&t.getAttribute("data-svg-origin"),Ci(t,P||B,!!P||n.originIsAbsolute,n.smooth!==!1,g)),m=n.xOrigin||0,v=n.yOrigin||0,g!==Ti&&(b=g[0],w=g[1],M=g[2],S=g[3],i=A=g[4],r=T=g[5],6===g.length?(o=Math.sqrt(b*b+w*w),s=Math.sqrt(S*S+M*M),u=b||w?jn(w,b)*Un:0,f=M||S?jn(M,S)*Un+u:0,f&&(s*=Math.cos(f*Bn)),n.svg&&(i-=m-(m*b+v*M),r-=v-(m*w+v*S))):(D=g[6],I=g[7],O=g[8],C=g[9],F=g[10],N=g[11],i=g[12],r=g[13],a=g[14],y=jn(D,F),c=y*Un,y&&(_=Math.cos(-y),x=Math.sin(-y),P=A*_+O*x,L=T*_+C*x,E=D*_+F*x,O=A*-x+O*_,C=T*-x+C*_,F=D*-x+F*_,N=I*-x+N*_,A=P,T=L,D=E),y=jn(-M,F),l=y*Un,y&&(_=Math.cos(-y),x=Math.sin(-y),P=b*_-O*x,L=w*_-C*x,E=M*_-F*x,N=S*x+N*_,b=P,w=L,M=E),y=jn(w,b),u=y*Un,y&&(_=Math.cos(y),x=Math.sin(y),P=b*_+w*x,L=A*_+T*x,w=w*_-b*x,T=T*_-A*x,b=P,A=L),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,l=180-l),o=nt(Math.sqrt(b*b+w*w+M*M)),s=nt(Math.sqrt(T*T+D*D)),y=jn(A,T),f=Math.abs(y)>2e-4?y*Un:0,d=N?1/(N<0?-N:N):0),n.svg&&(P=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Li(ui(t,ai)),P&&t.setAttribute("transform",P))),Math.abs(f)>90&&Math.abs(f)<270&&(k?(o*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,f+=f<=0?180:-180)),n.x=((n.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+z,n.y=((n.yPercent=r&&Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+z,n.z=a+z,n.scaleX=nt(o),n.scaleY=nt(s),n.rotation=nt(u)+U,n.rotationX=nt(c)+U,n.rotationY=nt(l)+U,n.skewX=f+U,n.skewY=p+U,n.transformPerspective=d+z,(n.zOrigin=parseFloat(B.split(" ")[2])||0)&&(R[oi]=Ii(B)),n.xOffset=n.yOffset=0,n.force3D=h.force3D,n.renderTransform=n.svg?Bi:yn?Ui:Di,n.uncache=0,n},Ii=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ni=function(t,e,n){var i=zt(e);return nt(parseFloat(e)+parseFloat(_i(t,"x",n+"px",i)))+i},Di=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ui(t,e)},Ri="0deg",ki="0px",zi=") ",Ui=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,o=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,h=n.skewX,f=n.skewY,p=n.scaleX,d=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,_="",x="auto"===v&&t&&1!==t||v===!0;if(y&&(l!==Ri||c!==Ri)){var b,w=parseFloat(c)*Bn,M=Math.sin(w),S=Math.cos(w);w=parseFloat(l)*Bn,b=Math.cos(w),a=Ni(g,a,M*b*-y),o=Ni(g,o,-Math.sin(w)*-y),s=Ni(g,s,S*b*-y+y)}m!==ki&&(_+="perspective("+m+zi),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),(x||a!==ki||o!==ki||s!==ki)&&(_+=s!==ki||x?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+zi),u!==Ri&&(_+="rotate("+u+zi),c!==Ri&&(_+="rotateY("+c+zi),l!==Ri&&(_+="rotateX("+l+zi),h===Ri&&f===Ri||(_+="skew("+h+", "+f+zi),1===p&&1===d||(_+="scale("+p+", "+d+zi),g.style[ai]=_||"translate(0, 0)"},Bi=function(t,e){var n,i,r,a,o,s=e||this,u=s.xPercent,c=s.yPercent,l=s.x,h=s.y,f=s.rotation,p=s.skewX,d=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,_=s.yOrigin,x=s.xOffset,b=s.yOffset,w=s.forceCSS,M=parseFloat(l),S=parseFloat(h);f=parseFloat(f),p=parseFloat(p),d=parseFloat(d),d&&(d=parseFloat(d),p+=d,f+=d),f||p?(f*=Bn,p*=Bn,n=Math.cos(f)*m,i=Math.sin(f)*m,r=Math.sin(f-p)*-v,a=Math.cos(f-p)*v,p&&(d*=Bn,o=Math.tan(p-d),o=Math.sqrt(1+o*o),r*=o,a*=o,d&&(o=Math.tan(d),o=Math.sqrt(1+o*o),n*=o,i*=o)),n=nt(n),i=nt(i),r=nt(r),a=nt(a)):(n=m,a=v,i=r=0),(M&&!~(l+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(M=_i(g,"x",l,"px"),S=_i(g,"y",h,"px")),(y||_||x||b)&&(M=nt(M+y-(y*n+_*r)+x),S=nt(S+_-(y*i+_*a)+b)),(u||c)&&(o=g.getBBox(),M=nt(M+u/100*o.width),S=nt(S+c/100*o.height)),o="matrix("+n+","+i+","+r+","+a+","+M+","+S+")",g.setAttribute("transform",o),w&&(g.style[ai]=o)},ji=function(t,e,n,i,r,a){var o,s,u=360,c=b(r),l=parseFloat(r)*(c&&~r.indexOf("rad")?Un:1),h=a?l*a:l-i,f=i+h+"deg";return c&&(o=r.split("_")[1],"short"===o&&(h%=u,h!==h%(u/2)&&(h+=h<0?u:-u)),"cw"===o&&h<0?h=(h+u*Gn)%u-~~(h/u)*u:"ccw"===o&&h>0&&(h=(h-u*Gn)%u-~~(h/u)*u)),t._pt=s=new an(t._pt,e,n,i,h,qn),s.e=f,s.u="deg",t._props.push(n),s},Gi=function(t,e,n){var i,r,a,o,s,u,c,l,h=vn.style,f=n._gsap,p="perspective,force3D,transformOrigin,svgOrigin";h.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",h[ai]=e,fn.body.appendChild(vn),i=Fi(vn,1);for(r in zn)a=f[r],o=i[r],a!==o&&p.indexOf(r)<0&&(c=zt(a),l=zt(o),s=c!==l?_i(n,r,a,l):parseFloat(a),u=parseFloat(o),t._pt=new an(t._pt,f,r,s,u-s,Yn),t._pt.u=l||0,t._props.push(r));fn.body.removeChild(vn)};et("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",a="Left",o=(e<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(n){return e<2?t+n:"border"+n+t});Ai[e>1?"border"+t:t]=function(t,e,n,i,r){var a,s;return arguments.length<4?(a=o.map(function(e){return xi(t,e,n)}),s=a.join(" "),5===s.split(a[0]).length?a[0]:s):(a=(i+"").split(" "),s={},o.forEach(function(t,e){return s[t]=a[e]=a[e]||a[(e-1)/2|0]}),void t.init(e,s,r))}});var Vi={name:"css",register:hi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a,o,s,u,c,l,f,p,d,m,v,g,y,_,x,b=this._props,w=t.style;dn||hi();for(f in e)if("autoRound"!==f&&(o=e[f],!Y[f]||!ze(f,e,n,i,t,r)))if(c=typeof o,l=Ai[f],"function"===c&&(o=o.call(n,i,t,r),c=typeof o),"string"===c&&~o.indexOf("random(")&&(o=ee(o)),l)l(this,t,f,o,n)&&(x=1);else if("--"===f.substr(0,2))this.add(w,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",o+"",i,r,0,0,f);else{if(a=xi(t,f),u=parseFloat(a),m="string"===c&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0,m&&(o=o.substr(2)),s=parseFloat(o),f in Xn&&("autoAlpha"===f&&(1===u&&"hidden"===xi(t,"visibility")&&s&&(u=0),gi(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==f&&"transform"!==f&&(f=Xn[f],~f.indexOf(",")&&(f=f.split(",")[0]))),v=f in zn)if(g||(y=t._gsap,y.renderTransform||Fi(t),_=e.smoothOrigin!==!1&&y.smooth,g=this._pt=new an(this._pt,w,ai,0,1,y.renderTransform,y,0,(-1)),g.dep=1),"scale"===f)this._pt=new an(this._pt,y,"scaleY",y.scaleY,m?m*s:s-y.scaleY),b.push("scaleY",f),f+="X";else{if("transformOrigin"===f){o=Mi(o),y.svg?Ci(t,o,0,_,0,this):(d=parseFloat(o.split(" ")[2])||0,d!==y.zOrigin&&gi(this,y,"zOrigin",y.zOrigin,d),gi(this,w,f,Ii(a),Ii(o)));continue}if("svgOrigin"===f){Ci(t,o,1,_,0,this);continue}if(f in Pi){ji(this,y,f,u,o,m);continue}if("smoothOrigin"===f){gi(this,y,"smooth",y.smooth,o);continue}if("force3D"===f){y[f]=o;continue}if("transform"===f){Gi(this,o,t);continue}}else f in w||(f=li(f)||f);if(v||(s||0===s)&&(u||0===u)&&!Hn.test(o)&&f in w)p=(a+"").substr((u+"").length),s||(s=0),d=(o+"").substr((s+"").length)||(f in h.units?h.units[f]:p),p!==d&&(u=_i(t,f,a,d)),this._pt=new an(this._pt,v?y:w,f,u,m?m*s:s-u,"px"!==d||e.autoRound===!1||v?Yn:Zn),this._pt.u=d||0,p!==d&&(this._pt.b=a,this._pt.r=Qn);else if(f in w)bi.call(this,t,f,a,o);else{if(!(f in t)){B(f,o);continue}this.add(t,f,t[f],o,i,r)}b.push(f)}x&&rn(this)},get:xi,aliases:Xn,getSetter:function(t,e,n){var i=Xn[e];return i&&i.indexOf(",")<0&&(e=i),e in zn&&e!==oi&&(t._gsap.x||xi(t,"x"))?n&&gn===n?"scale"===e?ni:ei:(gn=n||{})&&("scale"===e?ii:ri):t.style&&!S(t.style[e])?Kn:~e.indexOf("-")?ti:Qe(t,e)},core:{_removeProperty:vi,_getMatrix:Oi}};ln.utils.checkPrefix=li,function(t,e,n,i){var r=et(t+","+e+","+n,function(t){zn[t]=1});et(e,function(t){h.units[t]="deg",Pi[t]=1}),Xn[r[13]]=t+","+e,et(i,function(t){var e=t.split(":");Xn[e[1]]=r[e[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),et("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){h.units[t]="px"}),ln.registerPlugin(Vi);var Wi=ln.registerPlugin(Vi)||ln,Hi=Wi.core.Tween;t.Back=Cn,t.Bounce=In,t.CSSPlugin=Vi,t.Circ=Rn,t.Cubic=Tn,t.Elastic=On,t.Expo=Dn,t.Linear=Sn,t.Power0=_n,t.Power1=xn,t.Power2=bn,t.Power3=wn,t.Power4=Mn,t.Quad=An,t.Quart=Pn,t.Quint=Ln,t.Sine=Nn,t.SteppedEase=Fn,t.Strong=En,t.TimelineLite=Ie,t.TimelineMax=Ie,t.TweenLite=We,t.TweenMax=Hi,t["default"]=Wi,t.gsap=Wi,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window["default"]})},{}],8:[function(t,e,n){(function(t){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self,t.LocomotiveScroll=i())}(this,function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=u(t),null!==t););return t}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=f(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function d(t){return m(t)||v(t)||g()}function m(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function v(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function y(t,e){return e={exports:{}},t(e,e.exports),e.exports}function _(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function x(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}function b(){}function w(t,e){return function(){return t.apply(e,arguments)}}function M(t){Q(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=V({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new Z),this._emitter=new W,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function S(t,e,n){return(1-n)*t+n*e}function A(t){var e={};if(window.getComputedStyle){var n=getComputedStyle(t),i=n.transform||n.webkitTransform||n.mozTransform,r=i.match(/^matrix3d\((.+)\)$/);return r?(e.x=r?parseFloat(r[1].split(", ")[12]):0,e.y=r?parseFloat(r[1].split(", ")[13]):0):(r=i.match(/^matrix\((.+)\)$/),e.x=r?parseFloat(r[1].split(", ")[4]):0,e.y=r?parseFloat(r[1].split(", ")[5]):0),e}}function T(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}function P(t,e){return 1-3*e+3*t}function L(t,e){return 3*e-6*t}function E(t){return 3*t}function O(t,e,n){return((P(e,n)*t+L(e,n))*t+E(e))*t}function C(t,e,n){return 3*P(e,n)*t*t+2*L(e,n)*t+E(e)}function F(t,e,n,i,r){var a,o,s=0;do o=e+(n-e)/2,a=O(o,i,r)-t,a>0?n=o:e=o;while(Math.abs(a)>nt&&++s<it);return o}function I(t,e,n,i){for(var r=0;r<tt;++r){var a=C(e,n,i);if(0===a)return e;var o=O(e,n,i)-t;e-=o/a}return e}function N(t){return t}var D={el:document,elMobile:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,smoothMobile:!1,direction:"vertical",lerp:.1,"class":"is-inview",scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,scrollFromAnywhere:!1},R=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),Object.assign(this,D,n),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.els=[],this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:this.html.offsetHeight},this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return i(t,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame(function(){t.resize(),t.resizeTick=!1}))}},{key:"resize",value:function(){}},{key:"initEvents",value:function(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach(function(e){e.addEventListener("click",t.setScrollTo,!1)})}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),t.currentTarget.getAttribute("data-".concat(this.name,"-offset")))}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(t){var e=this,n=this.instance.scroll.y,i=n+this.windowHeight;this.els.forEach(function(r,a){!r||r.inView&&!t||i>=r.top&&n<r.bottom&&e.setInView(r,a),r&&r.inView&&(i<r.top||n>r.bottom)&&e.setOutOfView(r,a)}),this.els=this.els.filter(function(t,e){return null!==t}),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t["class"]),t.call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1)),t.repeat||t.speed||t.sticky||(!t.call||t.call&&this.hasCallEventSet)&&(this.els[e]=null)}},{key:"setOutOfView",value:function(t,e){(t.repeat||void 0!==t.speed)&&(this.els[e].inView=!1),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t["class"])}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map(function(t){return t.trim()}),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);var n=new Event(this.namespace+"call");this.el.dispatchEvent(n)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var n=this.listeners[t];n.push(e),1===n.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){if(this.listeners[t]){var n=this.listeners[t],i=n.indexOf(e);i<0||(n.splice(i,1),0===n.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}}},{key:"checkEvent",value:function(t){var e=this,n=t.type.replace(this.namespace,""),i=this.listeners[n];i&&0!==i.length&&i.forEach(function(t){switch(n){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}})}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var t=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach(function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,!1)}),this.listeners={},this.scrollToEls.forEach(function(e){e.removeEventListener("click",t.setScrollTo,!1)})}}]),t}(),k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},z=y(function(t,e){!function(){function e(){function t(t){var e=["MSIE ","Trident/","Edge/"];return new RegExp(e.join("|")).test(t)}function e(t,e){this.scrollLeft=t,this.scrollTop=e}function n(t){return.5*(1-Math.cos(Math.PI*t))}function i(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function r(t,e){return"Y"===e?t.clientHeight+v<t.scrollHeight:"X"===e?t.clientWidth+v<t.scrollWidth:void 0}function a(t,e){var n=l.getComputedStyle(t,null)["overflow"+e];return"auto"===n||"scroll"===n}function o(t){var e=r(t,"Y")&&a(t,"Y"),n=r(t,"X")&&a(t,"X");return e||n}function s(t){for(;t!==h.body&&o(t)===!1;)t=t.parentNode||t.host;return t}function u(t){var e,i,r,a=m(),o=(a-t.startTime)/p;o=o>1?1:o,e=n(o),i=t.startX+(t.x-t.startX)*e,r=t.startY+(t.y-t.startY)*e,t.method.call(t.scrollable,i,r),i===t.x&&r===t.y||l.requestAnimationFrame(u.bind(l,t))}function c(t,n,i){var r,a,o,s,c=m();t===h.body?(r=l,a=l.scrollX||l.pageXOffset,o=l.scrollY||l.pageYOffset,s=d.scroll):(r=t,a=t.scrollLeft,o=t.scrollTop,s=e),u({scrollable:r,method:s,startTime:c,startX:a,startY:o,x:n,y:i})}var l=window,h=document;if(!("scrollBehavior"in h.documentElement.style&&l.__forceSmoothScrollPolyfill__!==!0)){var f=l.HTMLElement||l.Element,p=468,d={scroll:l.scroll||l.scrollTo,scrollBy:l.scrollBy,elementScroll:f.prototype.scroll||e,scrollIntoView:f.prototype.scrollIntoView},m=l.performance&&l.performance.now?l.performance.now.bind(l.performance):Date.now,v=t(l.navigator.userAgent)?1:0;l.scroll=l.scrollTo=function(){if(void 0!==arguments[0])return i(arguments[0])===!0?void d.scroll.call(l,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:l.scrollX||l.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:l.scrollY||l.pageYOffset):void c.call(l,h.body,void 0!==arguments[0].left?~~arguments[0].left:l.scrollX||l.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:l.scrollY||l.pageYOffset)},l.scrollBy=function(){if(void 0!==arguments[0])return i(arguments[0])?void d.scrollBy.call(l,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):void c.call(l,h.body,~~arguments[0].left+(l.scrollX||l.pageXOffset),~~arguments[0].top+(l.scrollY||l.pageYOffset))},f.prototype.scroll=f.prototype.scrollTo=function(){if(void 0!==arguments[0]){if(i(arguments[0])===!0){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void d.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}var t=arguments[0].left,e=arguments[0].top;c.call(this,this,"undefined"==typeof t?this.scrollLeft:~~t,"undefined"==typeof e?this.scrollTop:~~e)}},f.prototype.scrollBy=function(){if(void 0!==arguments[0])return i(arguments[0])===!0?void d.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop):void this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})},f.prototype.scrollIntoView=function(){if(i(arguments[0])===!0)return void d.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);var t=s(this),e=t.getBoundingClientRect(),n=this.getBoundingClientRect();t!==h.body?(c.call(this,t,t.scrollLeft+n.left-e.left,t.scrollTop+n.top-e.top),"fixed"!==l.getComputedStyle(t).position&&l.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):l.scrollBy({left:n.left,top:n.top,behavior:"smooth"})}}}t.exports={polyfill:e}}()}),U=(z.polyfill,function(t){function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,n),t=h(this,u(n).call(this,i)),window.addEventListener("scroll",t.checkScroll,!1),z.polyfill(),t}return s(n,t),i(n,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),p(u(n.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;p(u(n.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.instance.scroll.y=window.pageYOffset,this.els.length&&(this.hasScrollTicking||(requestAnimationFrame(function(){t.detectElements()}),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/(Date.now()-this.timestamp):this.instance.speed=0}},{key:"resize",value:function(){this.els.length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var t=this;this.els=[];var e=this.el.querySelectorAll("[data-"+this.name+"]");e.forEach(function(e,n){var i=e.dataset[t.name+"Class"]||t["class"],r=e.getBoundingClientRect().top+t.instance.scroll.y,a=r+e.offsetHeight,o="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,s=e.dataset[t.name+"Repeat"],u=e.dataset[t.name+"Call"];s="false"!=s&&(void 0!=s||t.repeat);var c=t.getRelativeOffset(o),l={el:e,id:n,"class":i,top:r+c[0],bottom:a-c[1],offset:o,repeat:s,inView:!!e.classList.contains(i),call:u};t.els.push(l)})}},{key:"updateElements",value:function(){var t=this;this.els.forEach(function(e,n){var i=e.el.getBoundingClientRect().top+t.instance.scroll.y,r=i+e.el.offsetHeight,a=t.getRelativeOffset(e.offset);t.els[n].top=i+a[0],t.els[n].bottom=r-a[1]}),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var n=0;n<t.length;n++)"string"==typeof t[n]?t[n].includes("%")?e[n]=parseInt(t[n].replace("%","")*this.windowHeight/100):e[n]=parseInt(t[n]):e[n]=t[n];return e}},{key:"scrollTo",value:function(t,e,n,i,r,a){var o,s=e?parseInt(e):0;if("string"==typeof t){if("top"===t)o=this.html;else if("bottom"===t)o=this.html.offsetHeight-window.innerHeight;else if(o=document.querySelector(t),!o)return}else if("number"==typeof t)o=parseInt(t);else{if(!t||!t.tagName)return;o=t}if(s="number"!=typeof o?o.getBoundingClientRect().top+s+this.instance.scroll.y:o+s,a){s=s.toFixed();var u=function c(){window.pageYOffset.toFixed()===s&&(window.removeEventListener("scroll",c),a())};window.addEventListener("scroll",u)}window.scrollTo({top:s,behavior:"smooth"})}},{key:"update",
value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){p(u(n.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),n}(R)),B=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,V=x()?Object.assign:function(t,e){for(var n,i,r=_(t),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var o in n)j.call(n,o)&&(r[o]=n[o]);if(B){i=B(n);for(var s=0;s<i.length;s++)G.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};b.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var a=0,o=i.length;a<o;a++)i[a].fn!==e&&i[a].fn._!==e&&r.push(i[a]);return r.length?n[t]=r:delete n[t],this}};var W=b,H=y(function(t,e){(function(){var t;t=null!==e?e:this,t.Lethargy=function(){function t(t,e,n,i){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.lastDownDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.deltasTimestamp=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this)}return t.prototype.check=function(t){var e;return t=t.originalEvent||t,null!=t.wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=t.deltaY*-40:null==t.detail&&0!==t.detail||(e=t.detail*-40),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,n,i,r,a,o,s;return e=t===-1?this.lastDownDeltas:this.lastUpDeltas,null===e[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(i=e.slice(0,this.stability),n=e.slice(this.stability,2*this.stability),s=i.reduce(function(t,e){return t+e}),a=n.reduce(function(t,e){return t+e}),o=s/i.length,r=a/n.length,Math.abs(o)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(k)}),X=function(){return{hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}}(),Y=Object.prototype.toString,q=Object.prototype.hasOwnProperty,Q=function(t){if(t){var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var n in t)q.call(t,n)&&"function"==typeof t[n]&&"[object Function]"==Y.call(t[n])&&e.push(n);for(var i=0;i<e.length;i++){var r=e[i];t[r]=w(t[r],t)}}},Z=H.Lethargy,J="virtualscroll",$=M,K={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32};M.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(J,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},M.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||this._lethargy.check(t)!==!1){var n=this._event;n.deltaX=t.wheelDeltaX||t.deltaX*-1,n.deltaY=t.wheelDeltaY||t.deltaY*-1,X.isFirefox&&1==t.deltaMode&&(n.deltaX*=e.firefoxMultiplier,n.deltaY*=e.firefoxMultiplier),n.deltaX*=e.mouseMultiplier,n.deltaY*=e.mouseMultiplier,this._notify(t)}},M.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||this._lethargy.check(t)!==!1){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},M.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},M.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var n=this._event,i=t.targetTouches?t.targetTouches[0]:t;n.deltaX=(i.pageX-this.touchStartX)*e.touchMultiplier,n.deltaY=(i.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this._notify(t)},M.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var n=window.innerHeight-40;switch(t.keyCode){case K.LEFT:case K.UP:e.deltaY=this.options.keyStep;break;case K.RIGHT:case K.DOWN:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=n;break;case K.SPACE:e.deltaY=-n;break;default:return}this._notify(t)},M.prototype._bind=function(){X.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),X.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),X.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),X.hasPointer&&X.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),X.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},M.prototype._unbind=function(){X.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),X.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),X.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),X.hasPointer&&X.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),X.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},M.prototype.on=function(t,e){this._emitter.on(J,t,e);var n=this._emitter.e;n&&n[J]&&1===n[J].length&&this._bind()},M.prototype.off=function(t,e){this._emitter.off(J,t,e);var n=this._emitter.e;(!n[J]||n[J].length<=0)&&this._unbind()},M.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},M.prototype.destroy=function(){this._emitter.off(),this._unbind()};var tt=4,et=.001,nt=1e-7,it=10,rt=11,at=1/(rt-1),ot="function"==typeof Float32Array,st=function(t,e,n,i){function r(e){for(var i=0,r=1,o=rt-1;r!==o&&a[r]<=e;++r)i+=at;--r;var s=(e-a[r])/(a[r+1]-a[r]),u=i+s*at,c=C(u,t,n);return c>=et?I(e,u,t,n):0===c?u:F(e,i,i+at,t,n)}if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===i)return N;for(var a=ot?new Float32Array(rt):new Array(rt),o=0;o<rt;++o)a[o]=O(o*at,t,n);return function(t){return 0===t?0:1===t?1:O(r(t),e,i)}},ut={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,TAB:9,PAGEUP:33,PAGEDOWN:34,HOME:36,END:35},ct=function(t){function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,n),window.scrollTo(0,0),history.scrollRestoration="manual",t=h(this,u(n).call(this,i)),t.inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements=[],t.stop=!1,t.checkKey=t.checkKey.bind(l(t)),window.addEventListener("keydown",t.checkKey,!1),t}return s(n,t),i(n,[{key:"init",value:function(){var t=this;this.html.classList.add(this.smoothClass),this.instance=o({delta:{x:0,y:0}},this.instance),this.vs=new $({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on(function(e){t.stop||(t.isTicking||t.isDraggingScrollbar||(requestAnimationFrame(function(){t.updateDelta(e),t.isScrolling||t.startScrolling()}),t.isTicking=!0),t.isTicking=!1)}),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.detectElements(),this.transformElements(!0,!0),this.checkScroll(!0),p(u(n.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){this.instance.limit=this.el.offsetHeight-this.windowHeight}},{key:"startScrolling",value:function(){this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)return void(t.keyCode==ut.TAB&&requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0}));switch(t.keyCode){case ut.TAB:requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0,e.scrollTo(document.activeElement,-window.innerHeight/2)});break;case ut.UP:this.instance.delta.y-=240;break;case ut.DOWN:this.instance.delta.y+=240;break;case ut.PAGEUP:this.instance.delta.y-=window.innerHeight;break;case ut.PAGEDOWN:this.instance.delta.y+=window.innerHeight;break;case ut.HOME:this.instance.delta.y-=this.instance.limit;break;case ut.END:this.instance.delta.y+=this.instance.limit;break;case ut.SPACE:document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||(t.shiftKey?this.instance.delta.y-=window.innerHeight:this.instance.delta.y+=window.innerHeight);break;default:return}this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"checkScroll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(requestAnimationFrame(function(){return t.checkScroll()}),this.hasScrollTicking=!0),this.updateScroll();var i=Math.abs(this.instance.delta.y-this.instance.scroll.y);!this.animatingScroll&&(i<.5&&0!=this.instance.delta.y||i<.5&&0==this.instance.delta.y)&&this.stopScrolling();for(var r=this.sections.length-1;r>=0;r--)this.sections[r].persistent||this.instance.scroll.y>this.sections[r].offset&&this.instance.scroll.y<this.sections[r].limit?(this.transform(this.sections[r].el,0,-this.instance.scroll.y),this.sections[r].inView||(this.sections[r].inView=!0,this.sections[r].el.style.opacity=1,this.sections[r].el.style.pointerEvents="all",this.sections[r].el.setAttribute("data-".concat(this.name,"-section-inview"),""))):(this.sections[r].inView&&(this.sections[r].inView=!1,this.sections[r].el.style.opacity=0,this.sections[r].el.style.pointerEvents="none",this.sections[r].el.removeAttribute("data-".concat(this.name,"-section-inview"))),this.transform(this.sections[r].el,0,0));this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.detectElements(),this.transformElements();var a=this.instance.scroll.y/this.instance.limit*this.scrollBarLimit;this.transform(this.scrollbarThumb,0,a),p(u(n.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.update()}},{key:"updateDelta",value:function(t){this.instance.delta.y-=t.deltaY*this.multiplier,this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit)}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll.y=S(this.instance.scroll.y,this.instance.delta.y,this.lerp):this.instance.scroll.y>this.instance.limit?this.setScroll(this.instance.scroll.x,this.instance.limit):this.instance.scroll.y<0?this.setScroll(this.instance.scroll.x,0):this.setScroll(this.instance.scroll.x,this.instance.delta.y)}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){this.instance.delta.y!=this.instance.scroll.y?this.instance.speed=(this.instance.delta.y-this.instance.scroll.y)/Math.max(1,Date.now()-this.timestamp):this.instance.speed=0}},{key:"initScrollBar",value:function(){this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"reinitScrollBar",value:function(){this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(t){var e=this;!this.isTicking&&this.isDraggingScrollbar&&(requestAnimationFrame(function(){var n=100*t.clientY/e.scrollbarHeight*e.instance.limit/100;n>0&&n<e.instance.limit&&(e.instance.delta.y=n)}),this.isTicking=!0),this.isTicking=!1}},{key:"addElements",value:function(){var t=this;this.els=[],this.parallaxElements=[],this.sections.forEach(function(e,n){var i=t.sections[n].el.querySelectorAll("[data-".concat(t.name,"]"));i.forEach(function(e,i){var r,a,o=e.dataset[t.name+"Class"]||t["class"],s=e.dataset[t.name+"Repeat"],u=e.dataset[t.name+"Call"],c=e.dataset[t.name+"Position"],l=e.dataset[t.name+"Delay"],h=e.dataset[t.name+"Direction"],f="string"==typeof e.dataset[t.name+"Sticky"],p=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10,d="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,m=e.dataset[t.name+"Target"];a=void 0!==m?document.querySelector("".concat(m)):e,r=t.sections[n].inView?a.getBoundingClientRect().top+t.instance.scroll.y-A(a).y:a.getBoundingClientRect().top-A(t.sections[n].el).y-A(a).y;var v=r+a.offsetHeight,g=(v-r)/2+r;if(f){var y=e.getBoundingClientRect().top,_=y-r;r+=window.innerHeight,v=y+a.offsetHeight-e.offsetHeight-_,g=(v-r)/2+r}s="false"!=s&&(void 0!=s||t.repeat);var x=[0,0];if(d)for(var b=0;b<d.length;b++)"string"==typeof d[b]?d[b].includes("%")?x[b]=parseInt(d[b].replace("%","")*t.windowHeight/100):x[b]=parseInt(d[b]):x[b]=d[b];var w={el:e,id:i,"class":o,top:r+x[0],middle:g,bottom:v-x[1],offset:d,repeat:s,inView:!!e.classList.contains(o),call:u,speed:p,delay:l,position:c,target:a,direction:h,sticky:f};t.els.push(w),(p!==!1||f)&&t.parallaxElements.push(w)})})}},{key:"addSections",value:function(){var t=this;this.sections=[];var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]),e.forEach(function(e,n){var i=e.getBoundingClientRect().top-1.5*window.innerHeight-A(e).y,r=i+e.getBoundingClientRect().height+2*window.innerHeight,a="string"==typeof e.dataset[t.name+"Persistent"],o={el:e,offset:i,limit:r,inView:!1,persistent:a};t.sections[n]=o})}},{key:"transform",value:function r(t,e,n,i){var r;if(i){var a=A(t),o=S(a.x,e,i),s=S(a.y,n,i);r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(o,",").concat(s,",0,1)")}else r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(n,",0,1)");t.style.webkitTransform=r,t.style.msTransform=r,t.style.transform=r}},{key:"transformElements",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.scroll.y+this.windowHeight,r=this.instance.scroll.y+this.windowMiddle;this.parallaxElements.forEach(function(a,o){var s=!1;if(t&&(s=0),a.inView||n)switch(a.position){case"top":s=e.instance.scroll.y*-a.speed;break;case"elementTop":s=(i-a.top)*-a.speed;break;case"bottom":s=(e.instance.limit-i+e.windowHeight)*a.speed;break;default:s=(r-a.middle)*-a.speed}a.sticky&&(s=a.inView?e.instance.scroll.y-a.top+window.innerHeight:e.instance.scroll.y<a.top-window.innerHeight&&e.instance.scroll.y<a.top-window.innerHeight/2?0:e.instance.scroll.y>a.bottom&&e.instance.scroll.y>a.bottom+100&&a.bottom-a.top+window.innerHeight),s!==!1&&("horizontal"===a.direction?e.transform(a.el,s,0,!t&&a.delay):e.transform(a.el,0,s,!t&&a.delay))})}},{key:"scrollTo",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.25,0,.35,1],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,u=e?parseInt(e):0;if(a=st.apply(void 0,d(a)),"string"==typeof t){if("top"===t)n=0;else if("bottom"===t)n=this.instance.limit;else if(n=document.querySelector(t),!n)return}else if("number"==typeof t)n=parseInt(t);else{if(!t||!t.tagName)return;n=t}if("number"!=typeof n){var c=T(n).includes(this.el);if(!c)return;var l=n.getBoundingClientRect(),h=l.top,f=T(n),p=f.find(function(t){return i.sections.find(function(e){return e.el==t})}),m=0;p&&(m=A(p).y),u=h+u-m}else u=n+u;var v=parseFloat(this.instance.delta.y),g=Math.max(0,Math.min(u,this.instance.limit)),y=g-v,_=function(t){o?i.setScroll(i.instance.delta.x,v+y*t):i.instance.delta.y=v+y*t};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var x=Date.now(),b=function w(){var t=(Date.now()-x)/r;t>1?(_(1),i.animatingScroll=!1,0==r&&i.update(),s&&s()):(i.scrollToRaf=requestAnimationFrame(w),_(a(t)))};b()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=o({},this.instance,{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){p(u(n.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),n}(R),lt=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,Object.assign(this,D,n),this.init()}return i(t,[{key:"init",value:function(){if(this.smoothMobile||(this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),this.smooth!==!0||this.isMobile?this.scroll=new U(this.options):this.scroll=new ct(this.options),this.scroll.init(),window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length),e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e,n,i,r,a){this.scroll.scrollTo(t,e,n,i,r,a)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),t}();return lt})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}var r=t("./_baseCreate"),a=t("./_baseLodash"),o=4294967295;i.prototype=r(a.prototype),i.prototype.constructor=i,e.exports=i},{"./_baseCreate":16,"./_baseLodash":22}],10:[function(t,e,n){function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var r=t("./_baseCreate"),a=t("./_baseLodash");i.prototype=r(a.prototype),i.prototype.constructor=i,e.exports=i},{"./_baseCreate":16,"./_baseLodash":22}],11:[function(t,e,n){var i=t("./_root"),r=i.Symbol;e.exports=r},{"./_root":58}],12:[function(t,e,n){var i=t("./_getNative"),r=t("./_root"),a=i(r,"WeakMap");e.exports=a},{"./_getNative":43,"./_root":58}],13:[function(t,e,n){function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}e.exports=i},{}],14:[function(t,e,n){function i(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}e.exports=i},{}],15:[function(t,e,n){function i(t,e){var n=null==t?0:t.length;return!!n&&r(t,e,0)>-1}var r=t("./_baseIndexOf");e.exports=i},{"./_baseIndexOf":19}],16:[function(t,e,n){var i=t("./isObject"),r=Object.create,a=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.exports=a},{"./isObject":73}],17:[function(t,e,n){function i(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}e.exports=i},{}],18:[function(t,e,n){function i(t){return null==t?void 0===t?u:s:c&&c in Object(t)?a(t):o(t)}var r=t("./_Symbol"),a=t("./_getRawTag"),o=t("./_objectToString"),s="[object Null]",u="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=i},{"./_Symbol":11,"./_getRawTag":44,"./_objectToString":53}],19:[function(t,e,n){function i(t,e,n){return e===e?o(t,e,n):r(t,a,n)}var r=t("./_baseFindIndex"),a=t("./_baseIsNaN"),o=t("./_strictIndexOf");e.exports=i},{"./_baseFindIndex":17,"./_baseIsNaN":20,"./_strictIndexOf":63}],20:[function(t,e,n){function i(t){return t!==t}e.exports=i},{}],21:[function(t,e,n){function i(t){if(!o(t)||a(t))return!1;var e=r(t)?d:c;return e.test(s(t))}var r=t("./isFunction"),a=t("./_isMasked"),o=t("./isObject"),s=t("./_toSource"),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,h=Object.prototype,f=l.toString,p=h.hasOwnProperty,d=RegExp("^"+f.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{"./_isMasked":50,"./_toSource":64,"./isFunction":72,"./isObject":73}],22:[function(t,e,n){function i(){}e.exports=i},{}],23:[function(t,e,n){function i(t,e){return o(a(t,e,r),t+"")}var r=t("./identity"),a=t("./_overRest"),o=t("./_setToString");e.exports=i},{"./_overRest":54,"./_setToString":60,"./identity":70}],24:[function(t,e,n){var i=t("./identity"),r=t("./_metaMap"),a=r?function(t,e){return r.set(t,e),t}:i;e.exports=a},{"./_metaMap":52,"./identity":70}],25:[function(t,e,n){var i=t("./constant"),r=t("./_defineProperty"),a=t("./identity"),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;e.exports=o},{"./_defineProperty":38,"./constant":68,"./identity":70}],26:[function(t,e,n){function i(t,e,n,i){for(var a=-1,o=t.length,s=n.length,u=-1,c=e.length,l=r(o-s,0),h=Array(c+l),f=!i;++u<c;)h[u]=e[u];for(;++a<s;)(f||a<o)&&(h[n[a]]=t[a]);for(;l--;)h[u++]=t[a++];return h}var r=Math.max;e.exports=i},{}],27:[function(t,e,n){function i(t,e,n,i){for(var a=-1,o=t.length,s=-1,u=n.length,c=-1,l=e.length,h=r(o-u,0),f=Array(h+l),p=!i;++a<h;)f[a]=t[a];for(var d=a;++c<l;)f[d+c]=e[c];for(;++s<u;)(p||a<o)&&(f[d+n[s]]=t[a++]);return f}var r=Math.max;e.exports=i},{}],28:[function(t,e,n){function i(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}e.exports=i},{}],29:[function(t,e,n){var i=t("./_root"),r=i["__core-js_shared__"];e.exports=r},{"./_root":58}],30:[function(t,e,n){function i(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}e.exports=i},{}],31:[function(t,e,n){function i(t,e,n){function i(){var e=this&&this!==a&&this instanceof i?u:t;return e.apply(s?n:this,arguments)}var s=e&o,u=r(t);return i}var r=t("./_createCtor"),a=t("./_root"),o=1;e.exports=i},{"./_createCtor":32,"./_root":58}],32:[function(t,e,n){function i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),i=t.apply(n,e);return a(i)?i:n}}var r=t("./_baseCreate"),a=t("./isObject");e.exports=i},{"./_baseCreate":16,"./isObject":73}],33:[function(t,e,n){function i(t,e,n){function i(){for(var a=arguments.length,f=Array(a),p=a,d=u(i);p--;)f[p]=arguments[p];var m=a<3&&f[0]!==d&&f[a-1]!==d?[]:c(f,d);if(a-=m.length,a<n)return s(t,e,o,i.placeholder,void 0,f,m,void 0,void 0,n-a);var v=this&&this!==l&&this instanceof i?h:t;return r(v,this,f)}var h=a(t);return i}var r=t("./_apply"),a=t("./_createCtor"),o=t("./_createHybrid"),s=t("./_createRecurry"),u=t("./_getHolder"),c=t("./_replaceHolders"),l=t("./_root");e.exports=i},{"./_apply":13,"./_createCtor":32,"./_createHybrid":34,"./_createRecurry":36,"./_getHolder":42,"./_replaceHolders":57,"./_root":58}],34:[function(t,e,n){function i(t,e,n,_,x,b,w,M,S,A){function T(){for(var p=arguments.length,d=Array(p),m=p;m--;)d[m]=arguments[m];if(O)var v=c(T),g=o(d,v);if(_&&(d=r(d,_,x,O)),b&&(d=a(d,b,w,O)),p-=g,O&&p<A){var y=h(d,v);return u(t,e,i,T.placeholder,n,d,y,M,S,A-p)}var I=L?n:this,N=E?I[t]:t;return p=d.length,M?d=l(d,M):C&&p>1&&d.reverse(),P&&S<p&&(d.length=S),this&&this!==f&&this instanceof T&&(N=F||s(N)),N.apply(I,d)}var P=e&g,L=e&p,E=e&d,O=e&(m|v),C=e&y,F=E?void 0:s(t);return T}var r=t("./_composeArgs"),a=t("./_composeArgsRight"),o=t("./_countHolders"),s=t("./_createCtor"),u=t("./_createRecurry"),c=t("./_getHolder"),l=t("./_reorder"),h=t("./_replaceHolders"),f=t("./_root"),p=1,d=2,m=8,v=16,g=128,y=512;e.exports=i},{"./_composeArgs":26,"./_composeArgsRight":27,"./_countHolders":30,"./_createCtor":32,"./_createRecurry":36,"./_getHolder":42,"./_reorder":56,"./_replaceHolders":57,"./_root":58}],35:[function(t,e,n){function i(t,e,n,i){function u(){for(var e=-1,a=arguments.length,s=-1,h=i.length,f=Array(h+a),p=this&&this!==o&&this instanceof u?l:t;++s<h;)f[s]=i[s];for(;a--;)f[s++]=arguments[++e];return r(p,c?n:this,f)}var c=e&s,l=a(t);return u}var r=t("./_apply"),a=t("./_createCtor"),o=t("./_root"),s=1;e.exports=i},{"./_apply":13,"./_createCtor":32,"./_root":58}],36:[function(t,e,n){function i(t,e,n,i,p,d,m,v,g,y){var _=e&l,x=_?m:void 0,b=_?void 0:m,w=_?d:void 0,M=_?void 0:d;e|=_?h:f,e&=~(_?f:h),e&c||(e&=~(s|u));var S=[t,e,p,w,x,M,b,v,g,y],A=n.apply(void 0,S);return r(t)&&a(A,S),A.placeholder=i,o(A,t,e)}var r=t("./_isLaziable"),a=t("./_setData"),o=t("./_setWrapToString"),s=1,u=2,c=4,l=8,h=32,f=64;e.exports=i},{"./_isLaziable":49,"./_setData":59,"./_setWrapToString":61}],37:[function(t,e,n){function i(t,e,n,i,w,M,S,A){var T=e&v;if(!T&&"function"!=typeof t)throw new TypeError(d);var P=i?i.length:0;if(P||(e&=~(_|x),i=w=void 0),S=void 0===S?S:b(p(S),0),A=void 0===A?A:p(A),P-=w?w.length:0,e&x){var L=i,E=w;i=w=void 0}var O=T?void 0:c(t),C=[t,e,n,i,w,L,E,M,S,A];if(O&&l(C,O),t=C[0],e=C[1],n=C[2],i=C[3],w=C[4],A=C[9]=void 0===C[9]?T?0:t.length:b(C[9]-P,0),!A&&e&(g|y)&&(e&=~(g|y)),e&&e!=m)F=e==g||e==y?o(t,e,A):e!=_&&e!=(m|_)||w.length?s.apply(void 0,C):u(t,e,n,i);else var F=a(t,e,n);var I=O?r:h;return f(I(F,C),t,e)}var r=t("./_baseSetData"),a=t("./_createBind"),o=t("./_createCurry"),s=t("./_createHybrid"),u=t("./_createPartial"),c=t("./_getData"),l=t("./_mergeData"),h=t("./_setData"),f=t("./_setWrapToString"),p=t("./toInteger"),d="Expected a function",m=1,v=2,g=8,y=16,_=32,x=64,b=Math.max;e.exports=i},{"./_baseSetData":24,"./_createBind":31,"./_createCurry":33,"./_createHybrid":34,"./_createPartial":35,"./_getData":40,"./_mergeData":51,"./_setData":59,"./_setWrapToString":61,"./toInteger":81}],38:[function(t,e,n){var i=t("./_getNative"),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();e.exports=r},{"./_getNative":43}],39:[function(t,e,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,n){var i=t("./_metaMap"),r=t("./noop"),a=i?function(t){return i.get(t)}:r;e.exports=a},{"./_metaMap":52,"./noop":77}],41:[function(t,e,n){function i(t){for(var e=t.name+"",n=r[e],i=o.call(r,e)?n.length:0;i--;){var a=n[i],s=a.func;if(null==s||s==t)return a.name}return e}var r=t("./_realNames"),a=Object.prototype,o=a.hasOwnProperty;e.exports=i},{"./_realNames":55}],42:[function(t,e,n){function i(t){var e=t;return e.placeholder}e.exports=i},{}],43:[function(t,e,n){function i(t,e){var n=a(t,e);return r(n)?n:void 0}var r=t("./_baseIsNative"),a=t("./_getValue");e.exports=i},{"./_baseIsNative":21,"./_getValue":45}],44:[function(t,e,n){function i(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var i=!0}catch(r){}var a=s.call(t);return i&&(e?t[u]=n:delete t[u]),a}var r=t("./_Symbol"),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,u=r?r.toStringTag:void 0;e.exports=i},{"./_Symbol":11}],45:[function(t,e,n){function i(t,e){return null==t?void 0:t[e]}e.exports=i},{}],46:[function(t,e,n){function i(t){var e=t.match(r);return e?e[1].split(a):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,a=/,? & /;e.exports=i},{}],47:[function(t,e,n){function i(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(r,"{\n/* [wrapped with "+e+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=i},{}],48:[function(t,e,n){function i(t,e){var n=typeof t;return e=null==e?r:e,!!e&&("number"==n||"symbol"!=n&&a.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=i},{}],49:[function(t,e,n){function i(t){var e=o(t),n=s[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var i=a(n);return!!i&&t===i[0]}var r=t("./_LazyWrapper"),a=t("./_getData"),o=t("./_getFuncName"),s=t("./wrapperLodash");e.exports=i},{"./_LazyWrapper":9,
"./_getData":40,"./_getFuncName":41,"./wrapperLodash":83}],50:[function(t,e,n){function i(t){return!!a&&a in t}var r=t("./_coreJsData"),a=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=i},{"./_coreJsData":29}],51:[function(t,e,n){function i(t,e){var n=t[1],i=e[1],m=n|i,v=m<(u|c|f),g=i==f&&n==h||i==f&&n==p&&t[7].length<=e[8]||i==(f|p)&&e[7].length<=e[8]&&n==h;if(!v&&!g)return t;i&u&&(t[2]=e[2],m|=n&u?0:l);var y=e[3];if(y){var _=t[3];t[3]=_?r(_,y,e[4]):y,t[4]=_?o(t[3],s):e[4]}return y=e[5],y&&(_=t[5],t[5]=_?a(_,y,e[6]):y,t[6]=_?o(t[5],s):e[6]),y=e[7],y&&(t[7]=y),i&f&&(t[8]=null==t[8]?e[8]:d(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=m,t}var r=t("./_composeArgs"),a=t("./_composeArgsRight"),o=t("./_replaceHolders"),s="__lodash_placeholder__",u=1,c=2,l=4,h=8,f=128,p=256,d=Math.min;e.exports=i},{"./_composeArgs":26,"./_composeArgsRight":27,"./_replaceHolders":57}],52:[function(t,e,n){var i=t("./_WeakMap"),r=i&&new i;e.exports=r},{"./_WeakMap":12}],53:[function(t,e,n){function i(t){return a.call(t)}var r=Object.prototype,a=r.toString;e.exports=i},{}],54:[function(t,e,n){function i(t,e,n){return e=a(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=a(i.length-e,0),u=Array(s);++o<s;)u[o]=i[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=i[o];return c[e]=n(u),r(t,this,c)}}var r=t("./_apply"),a=Math.max;e.exports=i},{"./_apply":13}],55:[function(t,e,n){var i={};e.exports=i},{}],56:[function(t,e,n){function i(t,e){for(var n=t.length,i=o(e.length,n),s=r(t);i--;){var u=e[i];t[i]=a(u,n)?s[u]:void 0}return t}var r=t("./_copyArray"),a=t("./_isIndex"),o=Math.min;e.exports=i},{"./_copyArray":28,"./_isIndex":48}],57:[function(t,e,n){function i(t,e){for(var n=-1,i=t.length,a=0,o=[];++n<i;){var s=t[n];s!==e&&s!==r||(t[n]=r,o[a++]=n)}return o}var r="__lodash_placeholder__";e.exports=i},{}],58:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},{"./_freeGlobal":39}],59:[function(t,e,n){var i=t("./_baseSetData"),r=t("./_shortOut"),a=r(i);e.exports=a},{"./_baseSetData":24,"./_shortOut":62}],60:[function(t,e,n){var i=t("./_baseSetToString"),r=t("./_shortOut"),a=r(i);e.exports=a},{"./_baseSetToString":25,"./_shortOut":62}],61:[function(t,e,n){function i(t,e,n){var i=e+"";return o(t,a(i,s(r(i),n)))}var r=t("./_getWrapDetails"),a=t("./_insertWrapDetails"),o=t("./_setToString"),s=t("./_updateWrapDetails");e.exports=i},{"./_getWrapDetails":46,"./_insertWrapDetails":47,"./_setToString":60,"./_updateWrapDetails":65}],62:[function(t,e,n){function i(t){var e=0,n=0;return function(){var i=o(),s=a-(i-n);if(n=i,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,a=16,o=Date.now;e.exports=i},{}],63:[function(t,e,n){function i(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}e.exports=i},{}],64:[function(t,e,n){function i(t){if(null!=t){try{return a.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var r=Function.prototype,a=r.toString;e.exports=i},{}],65:[function(t,e,n){function i(t,e){return r(m,function(n){var i="_."+n[0];e&n[1]&&!a(t,i)&&t.push(i)}),t.sort()}var r=t("./_arrayEach"),a=t("./_arrayIncludes"),o=1,s=2,u=8,c=16,l=32,h=64,f=128,p=256,d=512,m=[["ary",f],["bind",o],["bindKey",s],["curry",u],["curryRight",c],["flip",d],["partial",l],["partialRight",h],["rearg",p]];e.exports=i},{"./_arrayEach":14,"./_arrayIncludes":15}],66:[function(t,e,n){function i(t){if(t instanceof r)return t.clone();var e=new a(t.__wrapped__,t.__chain__);return e.__actions__=o(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var r=t("./_LazyWrapper"),a=t("./_LodashWrapper"),o=t("./_copyArray");e.exports=i},{"./_LazyWrapper":9,"./_LodashWrapper":10,"./_copyArray":28}],67:[function(t,e,n){var i=t("./_baseRest"),r=t("./_createWrap"),a=t("./_getHolder"),o=t("./_replaceHolders"),s=1,u=32,c=i(function(t,e,n){var i=s;if(n.length){var l=o(n,a(c));i|=u}return r(t,i,e,n,l)});c.placeholder={},e.exports=c},{"./_baseRest":23,"./_createWrap":37,"./_getHolder":42,"./_replaceHolders":57}],68:[function(t,e,n){function i(t){return function(){return t}}e.exports=i},{}],69:[function(t,e,n){function i(t,e,n){function i(e){var n=y,i=_;return y=_=void 0,S=e,b=t.apply(i,n)}function l(t){return S=t,w=setTimeout(p,e),A?i(t):b}function h(t){var n=t-M,i=t-S,r=e-n;return T?c(r,x-i):r}function f(t){var n=t-M,i=t-S;return void 0===M||n>=e||n<0||T&&i>=x}function p(){var t=a();return f(t)?d(t):void(w=setTimeout(p,h(t)))}function d(t){return w=void 0,P&&y?i(t):(y=_=void 0,b)}function m(){void 0!==w&&clearTimeout(w),S=0,y=M=_=w=void 0}function v(){return void 0===w?b:d(a())}function g(){var t=a(),n=f(t);if(y=arguments,_=this,M=t,n){if(void 0===w)return l(M);if(T)return clearTimeout(w),w=setTimeout(p,e),i(M)}return void 0===w&&(w=setTimeout(p,e)),b}var y,_,x,b,w,M,S=0,A=!1,T=!1,P=!0;if("function"!=typeof t)throw new TypeError(s);return e=o(e)||0,r(n)&&(A=!!n.leading,T="maxWait"in n,x=T?u(o(n.maxWait)||0,e):x,P="trailing"in n?!!n.trailing:P),g.cancel=m,g.flush=v,g}var r=t("./isObject"),a=t("./now"),o=t("./toNumber"),s="Expected a function",u=Math.max,c=Math.min;e.exports=i},{"./isObject":73,"./now":78,"./toNumber":82}],70:[function(t,e,n){function i(t){return t}e.exports=i},{}],71:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],72:[function(t,e,n){function i(t){if(!a(t))return!1;var e=r(t);return e==s||e==u||e==o||e==c}var r=t("./_baseGetTag"),a=t("./isObject"),o="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=i},{"./_baseGetTag":18,"./isObject":73}],73:[function(t,e,n){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}e.exports=i},{}],74:[function(t,e,n){function i(t){return null!=t&&"object"==typeof t}e.exports=i},{}],75:[function(t,e,n){function i(t){return"symbol"==typeof t||a(t)&&r(t)==o}var r=t("./_baseGetTag"),a=t("./isObjectLike"),o="[object Symbol]";e.exports=i},{"./_baseGetTag":18,"./isObjectLike":74}],76:[function(t,e,n){(function(t){(function(){function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function a(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function o(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function s(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function u(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function c(t,e){var n=null==t?0:t.length;return!!n&&x(t,e,0)>-1}function l(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function h(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function f(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function p(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function d(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function m(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function v(t){return t.split("")}function g(t){return t.match(ze)||[]}function y(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function _(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function x(t,e,n){return e===e?Y(t,e,n):_(t,w,n)}function b(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function w(t){return t!==t}function M(t,e){var n=null==t?0:t.length;return n?L(t,e)/n:It}function S(t){return function(e){return null==e?tt:e[t]}}function A(t){return function(e){return null==t?tt:t[e]}}function T(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function P(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==tt&&(n=n===tt?a:n+a)}return n}function E(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function O(t,e){return h(e,function(e){return[e,t[e]]})}function C(t){return function(e){return t(e)}}function F(t,e){return h(e,function(e){return t[e]})}function I(t,e){return t.has(e)}function N(t,e){for(var n=-1,i=t.length;++n<i&&x(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length;n--&&x(e,t[n],0)>-1;);return n}function R(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function k(t){return"\\"+Jn[t]}function z(t,e){return null==t?tt:t[e]}function U(t){return Gn.test(t)}function B(t){return Vn.test(t)}function j(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function V(t,e){return function(n){return t(e(n))}}function W(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==st||(t[n]=st,a[r++]=n)}return a}function H(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Y(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function q(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function Q(t){return U(t)?J(t):di(t)}function Z(t){return U(t)?$(t):v(t)}function J(t){for(var e=Bn.lastIndex=0;Bn.test(t);)++e;return e}function $(t){return t.match(Bn)||[]}function K(t){return t.match(jn)||[]}var tt,et="4.17.19",nt=200,it="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",rt="Expected a function",at="__lodash_hash_undefined__",ot=500,st="__lodash_placeholder__",ut=1,ct=2,lt=4,ht=1,ft=2,pt=1,dt=2,mt=4,vt=8,gt=16,yt=32,_t=64,xt=128,bt=256,wt=512,Mt=30,St="...",At=800,Tt=16,Pt=1,Lt=2,Et=3,Ot=1/0,Ct=9007199254740991,Ft=1.7976931348623157e308,It=NaN,Nt=4294967295,Dt=Nt-1,Rt=Nt>>>1,kt=[["ary",xt],["bind",pt],["bindKey",dt],["curry",vt],["curryRight",gt],["flip",wt],["partial",yt],["partialRight",_t],["rearg",bt]],zt="[object Arguments]",Ut="[object Array]",Bt="[object AsyncFunction]",jt="[object Boolean]",Gt="[object Date]",Vt="[object DOMException]",Wt="[object Error]",Ht="[object Function]",Xt="[object GeneratorFunction]",Yt="[object Map]",qt="[object Number]",Qt="[object Null]",Zt="[object Object]",Jt="[object Promise]",$t="[object Proxy]",Kt="[object RegExp]",te="[object Set]",ee="[object String]",ne="[object Symbol]",ie="[object Undefined]",re="[object WeakMap]",ae="[object WeakSet]",oe="[object ArrayBuffer]",se="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",he="[object Int16Array]",fe="[object Int32Array]",pe="[object Uint8Array]",de="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]",ge=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,be=/[&<>"']/g,we=RegExp(xe.source),Me=RegExp(be.source),Se=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,Ce=RegExp(Oe.source),Fe=/^\s+|\s+$/g,Ie=/^\s+/,Ne=/\s+$/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Re=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /,ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/\\(\\)?/g,Be=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,Ge=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qe=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ze="\\ud800-\\udfff",Je="\\u0300-\\u036f",$e="\\ufe20-\\ufe2f",Ke="\\u20d0-\\u20ff",tn=Je+$e+Ke,en="\\u2700-\\u27bf",nn="a-z\\xdf-\\xf6\\xf8-\\xff",rn="\\xac\\xb1\\xd7\\xf7",an="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",on="\\u2000-\\u206f",sn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",un="A-Z\\xc0-\\xd6\\xd8-\\xde",cn="\\ufe0e\\ufe0f",ln=rn+an+on+sn,hn="['’]",fn="["+Ze+"]",pn="["+ln+"]",dn="["+tn+"]",mn="\\d+",vn="["+en+"]",gn="["+nn+"]",yn="[^"+Ze+ln+mn+en+nn+un+"]",_n="\\ud83c[\\udffb-\\udfff]",xn="(?:"+dn+"|"+_n+")",bn="[^"+Ze+"]",wn="(?:\\ud83c[\\udde6-\\uddff]){2}",Mn="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+un+"]",An="\\u200d",Tn="(?:"+gn+"|"+yn+")",Pn="(?:"+Sn+"|"+yn+")",Ln="(?:"+hn+"(?:d|ll|m|re|s|t|ve))?",En="(?:"+hn+"(?:D|LL|M|RE|S|T|VE))?",On=xn+"?",Cn="["+cn+"]?",Fn="(?:"+An+"(?:"+[bn,wn,Mn].join("|")+")"+Cn+On+")*",In="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dn=Cn+On+Fn,Rn="(?:"+[vn,wn,Mn].join("|")+")"+Dn,kn="(?:"+[bn+dn+"?",dn,wn,Mn,fn].join("|")+")",zn=RegExp(hn,"g"),Un=RegExp(dn,"g"),Bn=RegExp(_n+"(?="+_n+")|"+kn+Dn,"g"),jn=RegExp([Sn+"?"+gn+"+"+Ln+"(?="+[pn,Sn,"$"].join("|")+")",Pn+"+"+En+"(?="+[pn,Sn+Tn,"$"].join("|")+")",Sn+"?"+Tn+"+"+Ln,Sn+"+"+En,Nn,In,mn,Rn].join("|"),"g"),Gn=RegExp("["+An+Ze+tn+cn+"]"),Vn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hn=-1,Xn={};Xn[ue]=Xn[ce]=Xn[le]=Xn[he]=Xn[fe]=Xn[pe]=Xn[de]=Xn[me]=Xn[ve]=!0,Xn[zt]=Xn[Ut]=Xn[oe]=Xn[jt]=Xn[se]=Xn[Gt]=Xn[Wt]=Xn[Ht]=Xn[Yt]=Xn[qt]=Xn[Zt]=Xn[Kt]=Xn[te]=Xn[ee]=Xn[re]=!1;var Yn={};Yn[zt]=Yn[Ut]=Yn[oe]=Yn[se]=Yn[jt]=Yn[Gt]=Yn[ue]=Yn[ce]=Yn[le]=Yn[he]=Yn[fe]=Yn[Yt]=Yn[qt]=Yn[Zt]=Yn[Kt]=Yn[te]=Yn[ee]=Yn[ne]=Yn[pe]=Yn[de]=Yn[me]=Yn[ve]=!0,Yn[Wt]=Yn[Ht]=Yn[re]=!1;var qn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$n=parseFloat,Kn=parseInt,ti="object"==typeof t&&t&&t.Object===Object&&t,ei="object"==typeof self&&self&&self.Object===Object&&self,ni=ti||ei||Function("return this")(),ii="object"==typeof n&&n&&!n.nodeType&&n,ri=ii&&"object"==typeof e&&e&&!e.nodeType&&e,ai=ri&&ri.exports===ii,oi=ai&&ti.process,si=function(){try{var t=ri&&ri.require&&ri.require("util").types;return t?t:oi&&oi.binding&&oi.binding("util")}catch(e){}}(),ui=si&&si.isArrayBuffer,ci=si&&si.isDate,li=si&&si.isMap,hi=si&&si.isRegExp,fi=si&&si.isSet,pi=si&&si.isTypedArray,di=S("length"),mi=A(qn),vi=A(Qn),gi=A(Zn),yi=function xi(t){function e(t){if(au(t)&&!gf(t)&&!(t instanceof A)){if(t instanceof v)return t;if(vl.call(t,"__wrapped__"))return eo(t)}return new v(t)}function n(){}function v(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=tt}function A(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function Y(){var t=new A(this.__wrapped__);return t.__actions__=Dr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Dr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Dr(this.__views__),t}function J(){if(this.__filtered__){var t=new A(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function $(){var t=this.__wrapped__.value(),e=this.__dir__,n=gf(t),i=e<0,r=n?t.length:0,a=Sa(0,r,this.__views__),o=a.start,s=a.end,u=s-o,c=i?s:o-1,l=this.__iteratees__,h=l.length,f=0,p=Xl(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return yr(t,this.__actions__);var d=[];t:for(;u--&&f<p;){c+=e;for(var m=-1,v=t[c];++m<h;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(_==Lt)v=x;else if(!x){if(_==Pt)continue t;break t}}d[f++]=v}return d}function ze(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ze(){this.__data__=nh?nh(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function $e(t){var e=this.__data__;if(nh){var n=e[t];return n===at?tt:n}return vl.call(e,t)?e[t]:tt}function Ke(t){var e=this.__data__;return nh?e[t]!==tt:vl.call(e,t)}function tn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nh&&e===tt?at:e,this}function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function nn(){this.__data__=[],this.size=0}function rn(t){var e=this.__data__,n=En(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Ol.call(e,n,1),--this.size,!0}function an(t){var e=this.__data__,n=En(e,t);return n<0?tt:e[n][1]}function on(t){return En(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,i=En(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function cn(){this.size=0,this.__data__={hash:new ze,map:new($l||en),string:new ze}}function ln(t){var e=xa(this,t)["delete"](t);return this.size-=e?1:0,e}function hn(t){return xa(this,t).get(t)}function fn(t){return xa(this,t).has(t)}function pn(t,e){var n=xa(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new un;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,at),this}function vn(t){return this.__data__.has(t)}function gn(t){var e=this.__data__=new en(t);this.size=e.size}function yn(){this.__data__=new en,this.size=0}function _n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function xn(t){return this.__data__.get(t)}function bn(t){return this.__data__.has(t)}function wn(t,e){var n=this.__data__;if(n instanceof en){var i=n.__data__;if(!$l||i.length<nt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new un(i)}return n.set(t,e),this.size=n.size,this}function Mn(t,e){var n=gf(t),i=!n&&vf(t),r=!n&&!i&&_f(t),a=!n&&!i&&!r&&Sf(t),o=n||i||r||a,s=o?E(t.length,cl):[],u=s.length;for(var c in t)!e&&!vl.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fa(c,u))||s.push(c);return s}function Sn(t){var e=t.length;return e?t[Ki(0,e-1)]:tt}function An(t,e){return Ja(Dr(t),Dn(e,0,t.length))}function Tn(t){return Ja(Dr(t))}function Pn(t,e,n){(n===tt||Hs(t[e],n))&&(n!==tt||e in t)||In(t,e,n)}function Ln(t,e,n){var i=t[e];vl.call(t,e)&&Hs(i,n)&&(n!==tt||e in t)||In(t,e,n)}function En(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function On(t,e,n,i){return dh(t,function(t,r,a){e(i,t,n(t),a)}),i}function Cn(t,e){return t&&Rr(e,Bu(e),t)}function Fn(t,e){return t&&Rr(e,ju(e),t)}function In(t,e,n){"__proto__"==e&&Nl?Nl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Nn(t,e){for(var n=-1,i=e.length,r=nl(i),a=null==t;++n<i;)r[n]=a?tt:ku(t,e[n]);return r}function Dn(t,e,n){return t===t&&(n!==tt&&(t=t<=n?t:n),e!==tt&&(t=t>=e?t:e)),t}function Rn(t,e,n,i,r,o){var s,u=e&ut,c=e&ct,l=e&lt;if(n&&(s=r?n(t,i,r,o):n(t)),s!==tt)return s;if(!ru(t))return t;var h=gf(t);if(h){if(s=Pa(t),!u)return Dr(t,s)}else{var f=Th(t),p=f==Ht||f==Xt;if(_f(t))return Ar(t,u);if(f==Zt||f==zt||p&&!r){if(s=c||p?{}:La(t),!u)return c?zr(t,Fn(s,t)):kr(t,Cn(s,t))}else{if(!Yn[f])return r?t:{};s=Ea(t,f,u)}}o||(o=new gn);var d=o.get(t);if(d)return d;o.set(t,s),Mf(t)?t.forEach(function(i){s.add(Rn(i,e,n,i,t,o))}):bf(t)&&t.forEach(function(i,r){s.set(r,Rn(i,e,n,r,t,o))});var m=l?c?va:ma:c?ju:Bu,v=h?tt:m(t);return a(v||t,function(i,r){v&&(r=i,i=t[r]),Ln(s,r,Rn(i,e,n,r,t,o))}),s}function kn(t){var e=Bu(t);return function(n){return Bn(n,t,e)}}function Bn(t,e,n){var i=n.length;if(null==t)return!i;for(t=sl(t);i--;){var r=n[i],a=e[r],o=t[r];if(o===tt&&!(r in t)||!a(o))return!1}return!0}function jn(t,e,n){if("function"!=typeof t)throw new ll(rt);return Eh(function(){t.apply(tt,n)},e)}function Gn(t,e,n,i){var r=-1,a=c,o=!0,s=t.length,u=[],f=e.length;if(!s)return u;n&&(e=h(e,C(n))),i?(a=l,o=!1):e.length>=nt&&(a=I,o=!1,e=new dn(e));t:for(;++r<s;){var p=t[r],d=null==n?p:n(p);if(p=i||0!==p?p:0,o&&d===d){for(var m=f;m--;)if(e[m]===d)continue t;u.push(p)}else a(e,d,i)||u.push(p)}return u}function Vn(t,e){var n=!0;return dh(t,function(t,i,r){return n=!!e(t,i,r)}),n}function qn(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(s===tt?o===o&&!vu(o):n(o,s)))var s=o,u=a}return u}function Qn(t,e,n,i){var r=t.length;for(n=wu(n),n<0&&(n=-n>r?0:r+n),i=i===tt||i>r?r:wu(i),i<0&&(i+=r),i=n>i?0:Mu(i);n<i;)t[n++]=e;return t}function Zn(t,e){var n=[];return dh(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Jn(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=Ca),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Jn(s,e-1,n,i,r):f(r,s):i||(r[r.length]=s)}return r}function ti(t,e){return t&&vh(t,e,Bu)}function ei(t,e){return t&&gh(t,e,Bu)}function ii(t,e){return u(e,function(e){return eu(t[e])})}function ri(t,e){e=Mr(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[$a(e[n++])];return n&&n==i?t:tt}function oi(t,e,n){var i=e(t);return gf(t)?i:f(i,n(t))}function si(t){return null==t?t===tt?ie:Qt:Il&&Il in sl(t)?Ma(t):Wa(t)}function di(t,e){return t>e}function yi(t,e){return null!=t&&vl.call(t,e)}function bi(t,e){return null!=t&&e in sl(t)}function wi(t,e,n){return t>=Xl(e,n)&&t<Hl(e,n)}function Mi(t,e,n){for(var i=n?l:c,r=t[0].length,a=t.length,o=a,s=nl(a),u=1/0,f=[];o--;){var p=t[o];o&&e&&(p=h(p,C(e))),u=Xl(p.length,u),s[o]=!n&&(e||r>=120&&p.length>=120)?new dn(o&&p):tt}p=t[0];var d=-1,m=s[0];t:for(;++d<r&&f.length<u;){var v=p[d],g=e?e(v):v;if(v=n||0!==v?v:0,!(m?I(m,g):i(f,g,n))){for(o=a;--o;){var y=s[o];if(!(y?I(y,g):i(t[o],g,n)))continue t}m&&m.push(g),f.push(v)}}return f}function Si(t,e,n,i){return ti(t,function(t,r,a){e(i,n(t),r,a)}),i}function Ai(t,e,n){e=Mr(e,t),t=Xa(t,e);var r=null==t?t:t[$a(bo(e))];return null==r?tt:i(r,t,n)}function Ti(t){return au(t)&&si(t)==zt}function Pi(t){return au(t)&&si(t)==oe}function Li(t){return au(t)&&si(t)==Gt}function Ei(t,e,n,i,r){return t===e||(null==t||null==e||!au(t)&&!au(e)?t!==t&&e!==e:Oi(t,e,n,i,Ei,r))}function Oi(t,e,n,i,r,a){var o=gf(t),s=gf(e),u=o?Ut:Th(t),c=s?Ut:Th(e);u=u==zt?Zt:u,c=c==zt?Zt:c;var l=u==Zt,h=c==Zt,f=u==c;if(f&&_f(t)){if(!_f(e))return!1;o=!0,l=!1}if(f&&!l)return a||(a=new gn),o||Sf(t)?ha(t,e,n,i,r,a):fa(t,e,u,n,i,r,a);if(!(n&ht)){var p=l&&vl.call(t,"__wrapped__"),d=h&&vl.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return a||(a=new gn),r(m,v,n,i,a)}}return!!f&&(a||(a=new gn),pa(t,e,n,i,r,a))}function Ci(t){return au(t)&&Th(t)==Yt}function Fi(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=sl(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){s=n[r];var u=s[0],c=t[u],l=s[1];if(o&&s[2]){if(c===tt&&!(u in t))return!1}else{var h=new gn;if(i)var f=i(c,l,u,t,e,h);if(!(f===tt?Ei(l,c,ht|ft,i,h):f))return!1}}return!0}function Ii(t){if(!ru(t)||ka(t))return!1;var e=eu(t)?wl:We;return e.test(Ka(t))}function Ni(t){return au(t)&&si(t)==Kt}function Di(t){return au(t)&&Th(t)==te}function Ri(t){return au(t)&&iu(t.length)&&!!Xn[si(t)]}function ki(t){return"function"==typeof t?t:null==t?Oc:"object"==typeof t?gf(t)?Vi(t[0],t[1]):Gi(t):zc(t)}function zi(t){if(!za(t))return Wl(t);var e=[];for(var n in sl(t))vl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ui(t){if(!ru(t))return Va(t);var e=za(t),n=[];for(var i in t)("constructor"!=i||!e&&vl.call(t,i))&&n.push(i);return n}function Bi(t,e){return t<e}function ji(t,e){var n=-1,i=Xs(t)?nl(t.length):[];return dh(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Gi(t){var e=ba(t);return 1==e.length&&e[0][2]?Ba(e[0][0],e[0][1]):function(n){return n===t||Fi(n,t,e)}}function Vi(t,e){return Na(t)&&Ua(e)?Ba($a(t),e):function(n){var i=ku(n,t);return i===tt&&i===e?Uu(n,t):Ei(e,i,ht|ft)}}function Wi(t,e,n,i,r){t!==e&&vh(e,function(a,o){if(r||(r=new gn),ru(a))Hi(t,e,o,n,Wi,i,r);else{var s=i?i(qa(t,o),a,o+"",t,e,r):tt;s===tt&&(s=a),Pn(t,o,s)}},ju)}function Hi(t,e,n,i,r,a,o){var s=qa(t,n),u=qa(e,n),c=o.get(u);if(c)return void Pn(t,n,c);var l=a?a(s,u,n+"",t,e,o):tt,h=l===tt;if(h){var f=gf(u),p=!f&&_f(u),d=!f&&!p&&Sf(u);l=u,f||p||d?gf(s)?l=s:Ys(s)?l=Dr(s):p?(h=!1,l=Ar(u,!0)):d?(h=!1,l=Or(u,!0)):l=[]:pu(u)||vf(u)?(l=s,vf(s)?l=Au(s):ru(s)&&!eu(s)||(l=La(u))):h=!1}h&&(o.set(u,l),r(l,u,i,a,o),o["delete"](u)),Pn(t,n,l)}function Xi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Fa(e,n)?t[e]:tt}function Yi(t,e,n){e=e.length?h(e,function(t){return gf(t)?function(e){return ri(e,1===t.length?t[0]:t)}:t}):[Oc];var i=-1;e=h(e,C(_a()));var r=ji(t,function(t,n,r){var a=h(e,function(e){return e(t)});return{criteria:a,index:++i,value:t}});return P(r,function(t,e){return Fr(t,e,n)})}function qi(t,e){return Qi(t,e,function(e,n){return Uu(t,n)})}function Qi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=ri(t,o);n(s,o)&&ar(a,Mr(o,t),s)}return a}function Zi(t){return function(e){return ri(e,t)}}function Ji(t,e,n,i){var r=i?b:x,a=-1,o=e.length,s=t;for(t===e&&(e=Dr(e)),n&&(s=h(t,C(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=r(s,l,u,i))>-1;)s!==t&&Ol.call(s,u,1),Ol.call(t,u,1);return t}function $i(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Fa(r)?Ol.call(t,r,1):mr(t,r)}}return t}function Ki(t,e){return t+Ul(Ql()*(e-t+1))}function tr(t,e,n,i){for(var r=-1,a=Hl(zl((e-t)/(n||1)),0),o=nl(a);a--;)o[i?a:++r]=t,t+=n;return o}function er(t,e){var n="";if(!t||e<1||e>Ct)return n;do e%2&&(n+=t),e=Ul(e/2),e&&(t+=t);while(e);return n}function nr(t,e){return Oh(Ha(t,e,Oc),t+"")}function ir(t){return Sn(Ku(t))}function rr(t,e){var n=Ku(t);return Ja(n,Dn(e,0,n.length))}function ar(t,e,n,i){if(!ru(t))return t;e=Mr(e,t);for(var r=-1,a=e.length,o=a-1,s=t;null!=s&&++r<a;){var u=$a(e[r]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(r!=o){var l=s[u];c=i?i(l,u,s):tt,c===tt&&(c=ru(l)?l:Fa(e[r+1])?[]:{})}Ln(s,u,c),s=s[u]}return t}function or(t){return Ja(Ku(t))}function sr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=nl(r);++i<r;)a[i]=t[i+e];return a}function ur(t,e){var n;return dh(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function cr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=Rt){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!vu(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return lr(t,e,Oc,n)}function lr(t,e,n,i){var r=0,a=null==t?0:t.length;if(0===a)return 0;e=n(e);for(var o=e!==e,s=null===e,u=vu(e),c=e===tt;r<a;){var l=Ul((r+a)/2),h=n(t[l]),f=h!==tt,p=null===h,d=h===h,m=vu(h);if(o)var v=i||d;else v=c?d&&(i||f):s?d&&f&&(i||!p):u?d&&f&&!p&&(i||!m):!p&&!m&&(i?h<=e:h<e);v?r=l+1:a=l}return Xl(a,Dt)}function hr(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Hs(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function fr(t){return"number"==typeof t?t:vu(t)?It:+t}function pr(t){if("string"==typeof t)return t;if(gf(t))return h(t,pr)+"";if(vu(t))return fh?fh.call(t):"";var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function dr(t,e,n){var i=-1,r=c,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=l;else if(a>=nt){var h=e?null:wh(t);if(h)return H(h);o=!1,r=I,u=new dn}else u=e?[]:s;t:for(;++i<a;){var f=t[i],p=e?e(f):f;if(f=n||0!==f?f:0,o&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(f)}else r(u,p,n)||(u!==s&&u.push(p),s.push(f))}return s}function mr(t,e){return e=Mr(e,t),t=Xa(t,e),null==t||delete t[$a(bo(e))]}function vr(t,e,n,i){return ar(t,e,n(ri(t,e)),i)}function gr(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?sr(t,i?0:a,i?a+1:r):sr(t,i?a+1:0,i?r:a)}function yr(t,e){var n=t;return n instanceof A&&(n=n.value()),p(e,function(t,e){return e.func.apply(e.thisArg,f([t],e.args))},n)}function _r(t,e,n){var i=t.length;if(i<2)return i?dr(t[0]):[];for(var r=-1,a=nl(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=Gn(a[r]||o,t[s],e,n));return dr(Jn(a,1),e,n)}function xr(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:tt;n(o,t[i],s)}return o}function br(t){return Ys(t)?t:[]}function wr(t){return"function"==typeof t?t:Oc}function Mr(t,e){return gf(t)?t:Na(t,e)?[t]:Ch(Pu(t))}function Sr(t,e,n){var i=t.length;return n=n===tt?i:n,!e&&n>=i?t:sr(t,e,n)}function Ar(t,e){if(e)return t.slice();var n=t.length,i=Tl?Tl(n):new t.constructor(n);return t.copy(i),i}function Tr(t){var e=new t.constructor(t.byteLength);return new Al(e).set(new Al(t)),e}function Pr(t,e){var n=e?Tr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Lr(t){var e=new t.constructor(t.source,je.exec(t));return e.lastIndex=t.lastIndex,e}function Er(t){return hh?sl(hh.call(t)):{}}function Or(t,e){var n=e?Tr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Cr(t,e){if(t!==e){var n=t!==tt,i=null===t,r=t===t,a=vu(t),o=e!==tt,s=null===e,u=e===e,c=vu(e);if(!s&&!c&&!a&&t>e||a&&o&&u&&!s&&!c||i&&o&&u||!n&&u||!r)return 1;if(!i&&!a&&!c&&t<e||c&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!u)return-1}return 0}function Fr(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=Cr(r[i],a[i]);if(u){if(i>=s)return u;var c=n[i];return u*("desc"==c?-1:1)}}return t.index-e.index}function Ir(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,c=Hl(a-o,0),l=nl(u+c),h=!i;++s<u;)l[s]=e[s];for(;++r<o;)(h||r<a)&&(l[n[r]]=t[r]);for(;c--;)l[s++]=t[r++];return l}function Nr(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,c=e.length,l=Hl(a-s,0),h=nl(l+c),f=!i;++r<l;)h[r]=t[r];for(var p=r;++u<c;)h[p+u]=e[u];for(;++o<s;)(f||r<a)&&(h[p+n[o]]=t[r++]);return h}function Dr(t,e){var n=-1,i=t.length;for(e||(e=nl(i));++n<i;)e[n]=t[n];return e}function Rr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(n[s],t[s],s,n,t):tt;u===tt&&(u=t[s]),r?In(n,s,u):Ln(n,s,u)}return n}function kr(t,e){return Rr(t,Sh(t),e)}function zr(t,e){return Rr(t,Ah(t),e)}function Ur(t,e){return function(n,i){var a=gf(n)?r:On,o=e?e():{};return a(n,t,_a(i,2),o)}}function Br(t){return nr(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:tt,o=r>2?n[2]:tt;for(a=t.length>3&&"function"==typeof a?(r--,a):tt,o&&Ia(n[0],n[1],o)&&(a=r<3?tt:a,r=1),e=sl(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e})}function jr(t,e){return function(n,i){
if(null==n)return n;if(!Xs(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=sl(n);(e?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function Gr(t){return function(e,n,i){for(var r=-1,a=sl(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(n(a[u],u,a)===!1)break}return e}}function Vr(t,e,n){function i(){var e=this&&this!==ni&&this instanceof i?a:t;return e.apply(r?n:this,arguments)}var r=e&pt,a=Xr(t);return i}function Wr(t){return function(e){e=Pu(e);var n=U(e)?Z(e):tt,i=n?n[0]:e.charAt(0),r=n?Sr(n,1).join(""):e.slice(1);return i[t]()+r}}function Hr(t){return function(e){return p(Ac(ac(e).replace(zn,"")),t,"")}}function Xr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ph(t.prototype),i=t.apply(n,e);return ru(i)?i:n}}function Yr(t,e,n){function r(){for(var o=arguments.length,s=nl(o),u=o,c=ya(r);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:W(s,c);if(o-=l.length,o<n)return ra(t,e,Zr,r.placeholder,tt,s,l,tt,tt,n-o);var h=this&&this!==ni&&this instanceof r?a:t;return i(h,this,s)}var a=Xr(t);return r}function qr(t){return function(e,n,i){var r=sl(e);if(!Xs(e)){var a=_a(n,3);e=Bu(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:tt}}function Qr(t){return da(function(e){var n=e.length,i=n,r=v.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new ll(rt);if(r&&!o&&"wrapper"==ga(a))var o=new v([],(!0))}for(i=o?i:n;++i<n;){a=e[i];var s=ga(a),u="wrapper"==s?Mh(a):tt;o=u&&Ra(u[0])&&u[1]==(xt|vt|yt|bt)&&!u[4].length&&1==u[9]?o[ga(u[0])].apply(o,u[3]):1==a.length&&Ra(a)?o[s]():o.thru(a)}return function(){var t=arguments,i=t[0];if(o&&1==t.length&&gf(i))return o.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}})}function Zr(t,e,n,i,r,a,o,s,u,c){function l(){for(var g=arguments.length,y=nl(g),_=g;_--;)y[_]=arguments[_];if(d)var x=ya(l),b=R(y,x);if(i&&(y=Ir(y,i,r,d)),a&&(y=Nr(y,a,o,d)),g-=b,d&&g<c){var w=W(y,x);return ra(t,e,Zr,l.placeholder,n,y,w,s,u,c-g)}var M=f?n:this,S=p?M[t]:t;return g=y.length,s?y=Ya(y,s):m&&g>1&&y.reverse(),h&&u<g&&(y.length=u),this&&this!==ni&&this instanceof l&&(S=v||Xr(S)),S.apply(M,y)}var h=e&xt,f=e&pt,p=e&dt,d=e&(vt|gt),m=e&wt,v=p?tt:Xr(t);return l}function Jr(t,e){return function(n,i){return Si(n,t,e(i),{})}}function $r(t,e){return function(n,i){var r;if(n===tt&&i===tt)return e;if(n!==tt&&(r=n),i!==tt){if(r===tt)return i;"string"==typeof n||"string"==typeof i?(n=pr(n),i=pr(i)):(n=fr(n),i=fr(i)),r=t(n,i)}return r}}function Kr(t){return da(function(e){return e=h(e,C(_a())),nr(function(n){var r=this;return t(e,function(t){return i(t,r,n)})})})}function ta(t,e){e=e===tt?" ":pr(e);var n=e.length;if(n<2)return n?er(e,t):e;var i=er(e,zl(t/Q(e)));return U(e)?Sr(Z(i),0,t).join(""):i.slice(0,t)}function ea(t,e,n,r){function a(){for(var e=-1,u=arguments.length,c=-1,l=r.length,h=nl(l+u),f=this&&this!==ni&&this instanceof a?s:t;++c<l;)h[c]=r[c];for(;u--;)h[c++]=arguments[++e];return i(f,o?n:this,h)}var o=e&pt,s=Xr(t);return a}function na(t){return function(e,n,i){return i&&"number"!=typeof i&&Ia(e,n,i)&&(n=i=tt),e=bu(e),n===tt?(n=e,e=0):n=bu(n),i=i===tt?e<n?1:-1:bu(i),tr(e,n,i,t)}}function ia(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Su(e),n=Su(n)),t(e,n)}}function ra(t,e,n,i,r,a,o,s,u,c){var l=e&vt,h=l?o:tt,f=l?tt:o,p=l?a:tt,d=l?tt:a;e|=l?yt:_t,e&=~(l?_t:yt),e&mt||(e&=~(pt|dt));var m=[t,e,r,p,h,d,f,s,u,c],v=n.apply(tt,m);return Ra(t)&&Lh(v,m),v.placeholder=i,Qa(v,t,e)}function aa(t){var e=ol[t];return function(t,n){if(t=Su(t),n=null==n?0:Xl(wu(n),292),n&&Gl(t)){var i=(Pu(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Pu(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function oa(t){return function(e){var n=Th(e);return n==Yt?G(e):n==te?X(e):O(e,t(e))}}function sa(t,e,n,i,r,a,o,s){var u=e&dt;if(!u&&"function"!=typeof t)throw new ll(rt);var c=i?i.length:0;if(c||(e&=~(yt|_t),i=r=tt),o=o===tt?o:Hl(wu(o),0),s=s===tt?s:wu(s),c-=r?r.length:0,e&_t){var l=i,h=r;i=r=tt}var f=u?tt:Mh(t),p=[t,e,n,i,r,l,h,a,o,s];if(f&&Ga(p,f),t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],s=p[9]=p[9]===tt?u?0:t.length:Hl(p[9]-c,0),!s&&e&(vt|gt)&&(e&=~(vt|gt)),e&&e!=pt)d=e==vt||e==gt?Yr(t,e,s):e!=yt&&e!=(pt|yt)||r.length?Zr.apply(tt,p):ea(t,e,n,i);else var d=Vr(t,e,n);var m=f?yh:Lh;return Qa(m(d,p),t,e)}function ua(t,e,n,i){return t===tt||Hs(t,pl[n])&&!vl.call(i,n)?e:t}function ca(t,e,n,i,r,a){return ru(t)&&ru(e)&&(a.set(e,t),Wi(t,e,tt,ca,a),a["delete"](e)),t}function la(t){return pu(t)?tt:t}function ha(t,e,n,i,r,a){var o=n&ht,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var h=-1,f=!0,p=n&ft?new dn:tt;for(a.set(t,e),a.set(e,t);++h<s;){var d=t[h],v=e[h];if(i)var g=o?i(v,d,h,e,t,a):i(d,v,h,t,e,a);if(g!==tt){if(g)continue;f=!1;break}if(p){if(!m(e,function(t,e){if(!I(p,e)&&(d===t||r(d,t,n,i,a)))return p.push(e)})){f=!1;break}}else if(d!==v&&!r(d,v,n,i,a)){f=!1;break}}return a["delete"](t),a["delete"](e),f}function fa(t,e,n,i,r,a,o){switch(n){case se:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oe:return!(t.byteLength!=e.byteLength||!a(new Al(t),new Al(e)));case jt:case Gt:case qt:return Hs(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case Kt:case ee:return t==e+"";case Yt:var s=G;case te:var u=i&ht;if(s||(s=H),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;i|=ft,o.set(t,e);var l=ha(s(t),s(e),i,r,a,o);return o["delete"](t),l;case ne:if(hh)return hh.call(t)==hh.call(e)}return!1}function pa(t,e,n,i,r,a){var o=n&ht,s=ma(t),u=s.length,c=ma(e),l=c.length;if(u!=l&&!o)return!1;for(var h=u;h--;){var f=s[h];if(!(o?f in e:vl.call(e,f)))return!1}var p=a.get(t),d=a.get(e);if(p&&d)return p==e&&d==t;var m=!0;a.set(t,e),a.set(e,t);for(var v=o;++h<u;){f=s[h];var g=t[f],y=e[f];if(i)var _=o?i(y,g,f,e,t,a):i(g,y,f,t,e,a);if(!(_===tt?g===y||r(g,y,n,i,a):_)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(m=!1)}return a["delete"](t),a["delete"](e),m}function da(t){return Oh(Ha(t,tt,fo),t+"")}function ma(t){return oi(t,Bu,Sh)}function va(t){return oi(t,ju,Ah)}function ga(t){for(var e=t.name+"",n=rh[e],i=vl.call(rh,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function ya(t){var n=vl.call(e,"placeholder")?e:t;return n.placeholder}function _a(){var t=e.iteratee||Cc;return t=t===Cc?ki:t,arguments.length?t(arguments[0],arguments[1]):t}function xa(t,e){var n=t.__data__;return Da(e)?n["string"==typeof e?"string":"hash"]:n.map}function ba(t){for(var e=Bu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Ua(r)]}return e}function wa(t,e){var n=z(t,e);return Ii(n)?n:tt}function Ma(t){var e=vl.call(t,Il),n=t[Il];try{t[Il]=tt;var i=!0}catch(r){}var a=_l.call(t);return i&&(e?t[Il]=n:delete t[Il]),a}function Sa(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Xl(e,t+o);break;case"takeRight":t=Hl(t,e-o)}}return{start:t,end:e}}function Aa(t){var e=t.match(Re);return e?e[1].split(ke):[]}function Ta(t,e,n){e=Mr(e,t);for(var i=-1,r=e.length,a=!1;++i<r;){var o=$a(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:(r=null==t?0:t.length,!!r&&iu(r)&&Fa(o,r)&&(gf(t)||vf(t)))}function Pa(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&vl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function La(t){return"function"!=typeof t.constructor||za(t)?{}:ph(Pl(t))}function Ea(t,e,n){var i=t.constructor;switch(e){case oe:return Tr(t);case jt:case Gt:return new i((+t));case se:return Pr(t,n);case ue:case ce:case le:case he:case fe:case pe:case de:case me:case ve:return Or(t,n);case Yt:return new i;case qt:case ee:return new i(t);case Kt:return Lr(t);case te:return new i;case ne:return Er(t)}}function Oa(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(De,"{\n/* [wrapped with "+e+"] */\n")}function Ca(t){return gf(t)||vf(t)||!!(Cl&&t&&t[Cl])}function Fa(t,e){var n=typeof t;return e=null==e?Ct:e,!!e&&("number"==n||"symbol"!=n&&Xe.test(t))&&t>-1&&t%1==0&&t<e}function Ia(t,e,n){if(!ru(n))return!1;var i=typeof e;return!!("number"==i?Xs(n)&&Fa(e,n.length):"string"==i&&e in n)&&Hs(n[e],t)}function Na(t,e){if(gf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!vu(t))||(Le.test(t)||!Pe.test(t)||null!=e&&t in sl(e))}function Da(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ra(t){var n=ga(t),i=e[n];if("function"!=typeof i||!(n in A.prototype))return!1;if(t===i)return!0;var r=Mh(i);return!!r&&t===r[0]}function ka(t){return!!yl&&yl in t}function za(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||pl;return t===n}function Ua(t){return t===t&&!ru(t)}function Ba(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==tt||t in sl(n)))}}function ja(t){var e=Cs(t,function(t){return n.size===ot&&n.clear(),t}),n=e.cache;return e}function Ga(t,e){var n=t[1],i=e[1],r=n|i,a=r<(pt|dt|xt),o=i==xt&&n==vt||i==xt&&n==bt&&t[7].length<=e[8]||i==(xt|bt)&&e[7].length<=e[8]&&n==vt;if(!a&&!o)return t;i&pt&&(t[2]=e[2],r|=n&pt?0:mt);var s=e[3];if(s){var u=t[3];t[3]=u?Ir(u,s,e[4]):s,t[4]=u?W(t[3],st):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Nr(u,s,e[6]):s,t[6]=u?W(t[5],st):e[6]),s=e[7],s&&(t[7]=s),i&xt&&(t[8]=null==t[8]?e[8]:Xl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Va(t){var e=[];if(null!=t)for(var n in sl(t))e.push(n);return e}function Wa(t){return _l.call(t)}function Ha(t,e,n){return e=Hl(e===tt?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=Hl(r.length-e,0),s=nl(o);++a<o;)s[a]=r[e+a];a=-1;for(var u=nl(e+1);++a<e;)u[a]=r[a];return u[e]=n(s),i(t,this,u)}}function Xa(t,e){return e.length<2?t:ri(t,sr(e,0,-1))}function Ya(t,e){for(var n=t.length,i=Xl(e.length,n),r=Dr(t);i--;){var a=e[i];t[i]=Fa(a,n)?r[a]:tt}return t}function qa(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Qa(t,e,n){var i=e+"";return Oh(t,Oa(i,to(Aa(i),n)))}function Za(t){var e=0,n=0;return function(){var i=Yl(),r=Tt-(i-n);if(n=i,r>0){if(++e>=At)return arguments[0]}else e=0;return t.apply(tt,arguments)}}function Ja(t,e){var n=-1,i=t.length,r=i-1;for(e=e===tt?i:e;++n<e;){var a=Ki(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function $a(t){if("string"==typeof t||vu(t))return t;var e=t+"";return"0"==e&&1/t==-Ot?"-0":e}function Ka(t){if(null!=t){try{return ml.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function to(t,e){return a(kt,function(n){var i="_."+n[0];e&n[1]&&!c(t,i)&&t.push(i)}),t.sort()}function eo(t){if(t instanceof A)return t.clone();var e=new v(t.__wrapped__,t.__chain__);return e.__actions__=Dr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function no(t,e,n){e=(n?Ia(t,e,n):e===tt)?1:Hl(wu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,o=nl(zl(i/e));r<i;)o[a++]=sr(t,r,r+=e);return o}function io(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r}function ro(){var t=arguments.length;if(!t)return[];for(var e=nl(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return f(gf(n)?Dr(n):[n],Jn(e,1))}function ao(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===tt?1:wu(e),sr(t,e<0?0:e,i)):[]}function oo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===tt?1:wu(e),e=i-e,sr(t,0,e<0?0:e)):[]}function so(t,e){return t&&t.length?gr(t,_a(e,3),!0,!0):[]}function uo(t,e){return t&&t.length?gr(t,_a(e,3),!0):[]}function co(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ia(t,e,n)&&(n=0,i=r),Qn(t,e,n,i)):[]}function lo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:wu(n);return r<0&&(r=Hl(i+r,0)),_(t,_a(e,3),r)}function ho(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==tt&&(r=wu(n),r=n<0?Hl(i+r,0):Xl(r,i-1)),_(t,_a(e,3),r,!0)}function fo(t){var e=null==t?0:t.length;return e?Jn(t,1):[]}function po(t){var e=null==t?0:t.length;return e?Jn(t,Ot):[]}function mo(t,e){var n=null==t?0:t.length;return n?(e=e===tt?1:wu(e),Jn(t,e)):[]}function vo(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function go(t){return t&&t.length?t[0]:tt}function yo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:wu(n);return r<0&&(r=Hl(i+r,0)),x(t,e,r)}function _o(t){var e=null==t?0:t.length;return e?sr(t,0,-1):[]}function xo(t,e){return null==t?"":Vl.call(t,e)}function bo(t){var e=null==t?0:t.length;return e?t[e-1]:tt}function wo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==tt&&(r=wu(n),r=r<0?Hl(i+r,0):Xl(r,i-1)),e===e?q(t,e,r):_(t,w,r,!0)}function Mo(t,e){return t&&t.length?Xi(t,wu(e)):tt}function So(t,e){return t&&t.length&&e&&e.length?Ji(t,e):t}function Ao(t,e,n){return t&&t.length&&e&&e.length?Ji(t,e,_a(n,2)):t}function To(t,e,n){return t&&t.length&&e&&e.length?Ji(t,e,tt,n):t}function Po(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=_a(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return $i(t,r),n}function Lo(t){return null==t?t:Zl.call(t)}function Eo(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ia(t,e,n)?(e=0,n=i):(e=null==e?0:wu(e),n=n===tt?i:wu(n)),sr(t,e,n)):[]}function Oo(t,e){return cr(t,e)}function Co(t,e,n){return lr(t,e,_a(n,2))}function Fo(t,e){var n=null==t?0:t.length;if(n){var i=cr(t,e);if(i<n&&Hs(t[i],e))return i}return-1}function Io(t,e){return cr(t,e,!0)}function No(t,e,n){return lr(t,e,_a(n,2),!0)}function Do(t,e){var n=null==t?0:t.length;if(n){var i=cr(t,e,!0)-1;if(Hs(t[i],e))return i}return-1}function Ro(t){return t&&t.length?hr(t):[]}function ko(t,e){return t&&t.length?hr(t,_a(e,2)):[]}function zo(t){var e=null==t?0:t.length;return e?sr(t,1,e):[]}function Uo(t,e,n){return t&&t.length?(e=n||e===tt?1:wu(e),sr(t,0,e<0?0:e)):[]}function Bo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===tt?1:wu(e),e=i-e,sr(t,e<0?0:e,i)):[]}function jo(t,e){return t&&t.length?gr(t,_a(e,3),!1,!0):[]}function Go(t,e){return t&&t.length?gr(t,_a(e,3)):[]}function Vo(t){return t&&t.length?dr(t):[]}function Wo(t,e){return t&&t.length?dr(t,_a(e,2)):[]}function Ho(t,e){return e="function"==typeof e?e:tt,t&&t.length?dr(t,tt,e):[]}function Xo(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Ys(t))return e=Hl(t.length,e),!0}),E(e,function(e){return h(t,S(e))})}function Yo(t,e){if(!t||!t.length)return[];var n=Xo(t);return null==e?n:h(n,function(t){return i(e,tt,t)})}function qo(t,e){return xr(t||[],e||[],Ln)}function Qo(t,e){return xr(t||[],e||[],ar)}function Zo(t){var n=e(t);return n.__chain__=!0,n}function Jo(t,e){return e(t),t}function $o(t,e){return e(t)}function Ko(){return Zo(this)}function ts(){return new v(this.value(),this.__chain__)}function es(){this.__values__===tt&&(this.__values__=xu(this.value()));var t=this.__index__>=this.__values__.length,e=t?tt:this.__values__[this.__index__++];return{done:t,value:e}}function ns(){return this}function is(t){for(var e,i=this;i instanceof n;){var r=eo(i);r.__index__=0,r.__values__=tt,e?a.__wrapped__=r:e=r;var a=r;i=i.__wrapped__}return a.__wrapped__=t,e}function rs(){var t=this.__wrapped__;if(t instanceof A){var e=t;return this.__actions__.length&&(e=new A(this)),e=e.reverse(),e.__actions__.push({func:$o,args:[Lo],thisArg:tt}),new v(e,this.__chain__)}return this.thru(Lo)}function as(){return yr(this.__wrapped__,this.__actions__)}function os(t,e,n){var i=gf(t)?s:Vn;return n&&Ia(t,e,n)&&(e=tt),i(t,_a(e,3))}function ss(t,e){var n=gf(t)?u:Zn;return n(t,_a(e,3))}function us(t,e){return Jn(ds(t,e),1)}function cs(t,e){return Jn(ds(t,e),Ot)}function ls(t,e,n){return n=n===tt?1:wu(n),Jn(ds(t,e),n)}function hs(t,e){var n=gf(t)?a:dh;return n(t,_a(e,3))}function fs(t,e){var n=gf(t)?o:mh;return n(t,_a(e,3))}function ps(t,e,n,i){t=Xs(t)?t:Ku(t),n=n&&!i?wu(n):0;var r=t.length;return n<0&&(n=Hl(r+n,0)),mu(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&x(t,e,n)>-1}function ds(t,e){var n=gf(t)?h:ji;return n(t,_a(e,3))}function ms(t,e,n,i){return null==t?[]:(gf(e)||(e=null==e?[]:[e]),n=i?tt:n,gf(n)||(n=null==n?[]:[n]),Yi(t,e,n))}function vs(t,e,n){var i=gf(t)?p:T,r=arguments.length<3;return i(t,_a(e,4),n,r,dh)}function gs(t,e,n){var i=gf(t)?d:T,r=arguments.length<3;return i(t,_a(e,4),n,r,mh)}function ys(t,e){var n=gf(t)?u:Zn;return n(t,Fs(_a(e,3)))}function _s(t){var e=gf(t)?Sn:ir;return e(t)}function xs(t,e,n){e=(n?Ia(t,e,n):e===tt)?1:wu(e);var i=gf(t)?An:rr;return i(t,e)}function bs(t){var e=gf(t)?Tn:or;return e(t)}function ws(t){if(null==t)return 0;if(Xs(t))return mu(t)?Q(t):t.length;var e=Th(t);return e==Yt||e==te?t.size:zi(t).length}function Ms(t,e,n){var i=gf(t)?m:ur;return n&&Ia(t,e,n)&&(e=tt),i(t,_a(e,3))}function Ss(t,e){if("function"!=typeof e)throw new ll(rt);return t=wu(t),function(){if(--t<1)return e.apply(this,arguments)}}function As(t,e,n){return e=n?tt:e,e=t&&null==e?t.length:e,sa(t,xt,tt,tt,tt,tt,e)}function Ts(t,e){var n;if("function"!=typeof e)throw new ll(rt);return t=wu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=tt),n}}function Ps(t,e,n){e=n?tt:e;var i=sa(t,vt,tt,tt,tt,tt,tt,e);return i.placeholder=Ps.placeholder,i}function Ls(t,e,n){e=n?tt:e;var i=sa(t,gt,tt,tt,tt,tt,tt,e);return i.placeholder=Ls.placeholder,i}function Es(t,e,n){function i(e){var n=f,i=p;return f=p=tt,y=e,m=t.apply(i,n)}function r(t){return y=t,v=Eh(s,e),_?i(t):m}function a(t){var n=t-g,i=t-y,r=e-n;return x?Xl(r,d-i):r}function o(t){var n=t-g,i=t-y;return g===tt||n>=e||n<0||x&&i>=d}function s(){var t=af();return o(t)?u(t):void(v=Eh(s,a(t)))}function u(t){return v=tt,b&&f?i(t):(f=p=tt,m)}function c(){v!==tt&&bh(v),y=0,f=g=p=v=tt}function l(){return v===tt?m:u(af())}function h(){var t=af(),n=o(t);if(f=arguments,p=this,g=t,n){if(v===tt)return r(g);if(x)return bh(v),v=Eh(s,e),i(g)}return v===tt&&(v=Eh(s,e)),m}var f,p,d,m,v,g,y=0,_=!1,x=!1,b=!0;if("function"!=typeof t)throw new ll(rt);return e=Su(e)||0,ru(n)&&(_=!!n.leading,x="maxWait"in n,d=x?Hl(Su(n.maxWait)||0,e):d,b="trailing"in n?!!n.trailing:b),h.cancel=c,h.flush=l,h}function Os(t){return sa(t,wt)}function Cs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ll(rt);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Cs.Cache||un),n}function Fs(t){if("function"!=typeof t)throw new ll(rt);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Is(t){return Ts(2,t)}function Ns(t,e){if("function"!=typeof t)throw new ll(rt);return e=e===tt?e:wu(e),nr(t,e)}function Ds(t,e){if("function"!=typeof t)throw new ll(rt);return e=null==e?0:Hl(wu(e),0),nr(function(n){var r=n[e],a=Sr(n,0,e);return r&&f(a,r),i(t,this,a)})}function Rs(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new ll(rt);return ru(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Es(t,e,{leading:i,maxWait:e,trailing:r})}function ks(t){return As(t,1)}function zs(t,e){return hf(wr(e),t)}function Us(){if(!arguments.length)return[];var t=arguments[0];return gf(t)?t:[t]}function Bs(t){return Rn(t,lt)}function js(t,e){return e="function"==typeof e?e:tt,Rn(t,lt,e)}function Gs(t){return Rn(t,ut|lt)}function Vs(t,e){return e="function"==typeof e?e:tt,Rn(t,ut|lt,e)}function Ws(t,e){return null==e||Bn(t,e,Bu(e))}function Hs(t,e){return t===e||t!==t&&e!==e}function Xs(t){return null!=t&&iu(t.length)&&!eu(t)}function Ys(t){return au(t)&&Xs(t)}function qs(t){return t===!0||t===!1||au(t)&&si(t)==jt}function Qs(t){return au(t)&&1===t.nodeType&&!pu(t)}function Zs(t){if(null==t)return!0;if(Xs(t)&&(gf(t)||"string"==typeof t||"function"==typeof t.splice||_f(t)||Sf(t)||vf(t)))return!t.length;var e=Th(t);if(e==Yt||e==te)return!t.size;if(za(t))return!zi(t).length;for(var n in t)if(vl.call(t,n))return!1;return!0}function Js(t,e){return Ei(t,e)}function $s(t,e,n){n="function"==typeof n?n:tt;var i=n?n(t,e):tt;return i===tt?Ei(t,e,tt,n):!!i}function Ks(t){if(!au(t))return!1;var e=si(t);return e==Wt||e==Vt||"string"==typeof t.message&&"string"==typeof t.name&&!pu(t)}function tu(t){return"number"==typeof t&&Gl(t)}function eu(t){if(!ru(t))return!1;var e=si(t);return e==Ht||e==Xt||e==Bt||e==$t}function nu(t){return"number"==typeof t&&t==wu(t)}function iu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ct}function ru(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function au(t){return null!=t&&"object"==typeof t}function ou(t,e){return t===e||Fi(t,e,ba(e))}function su(t,e,n){return n="function"==typeof n?n:tt,Fi(t,e,ba(e),n)}function uu(t){return fu(t)&&t!=+t}function cu(t){if(Ph(t))throw new rl(it);return Ii(t)}function lu(t){return null===t}function hu(t){return null==t}function fu(t){return"number"==typeof t||au(t)&&si(t)==qt}function pu(t){if(!au(t)||si(t)!=Zt)return!1;var e=Pl(t);if(null===e)return!0;var n=vl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ml.call(n)==xl}function du(t){return nu(t)&&t>=-Ct&&t<=Ct}function mu(t){return"string"==typeof t||!gf(t)&&au(t)&&si(t)==ee}function vu(t){return"symbol"==typeof t||au(t)&&si(t)==ne}function gu(t){return t===tt}function yu(t){return au(t)&&Th(t)==re}function _u(t){return au(t)&&si(t)==ae}function xu(t){if(!t)return[];if(Xs(t))return mu(t)?Z(t):Dr(t);if(Fl&&t[Fl])return j(t[Fl]());var e=Th(t),n=e==Yt?G:e==te?H:Ku;return n(t)}function bu(t){if(!t)return 0===t?t:0;if(t=Su(t),t===Ot||t===-Ot){var e=t<0?-1:1;return e*Ft}return t===t?t:0}function wu(t){var e=bu(t),n=e%1;return e===e?n?e-n:e:0}function Mu(t){return t?Dn(wu(t),0,Nt):0}function Su(t){if("number"==typeof t)return t;if(vu(t))return It;if(ru(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ru(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Fe,"");var n=Ve.test(t);return n||He.test(t)?Kn(t.slice(2),n?2:8):Ge.test(t)?It:+t}function Au(t){return Rr(t,ju(t))}function Tu(t){return t?Dn(wu(t),-Ct,Ct):0===t?t:0}function Pu(t){return null==t?"":pr(t)}function Lu(t,e){var n=ph(t);return null==e?n:Cn(n,e)}function Eu(t,e){return y(t,_a(e,3),ti)}function Ou(t,e){return y(t,_a(e,3),ei)}function Cu(t,e){return null==t?t:vh(t,_a(e,3),ju)}function Fu(t,e){return null==t?t:gh(t,_a(e,3),ju)}function Iu(t,e){return t&&ti(t,_a(e,3))}function Nu(t,e){return t&&ei(t,_a(e,3))}function Du(t){return null==t?[]:ii(t,Bu(t))}function Ru(t){return null==t?[]:ii(t,ju(t))}function ku(t,e,n){var i=null==t?tt:ri(t,e);return i===tt?n:i}function zu(t,e){return null!=t&&Ta(t,e,yi)}function Uu(t,e){return null!=t&&Ta(t,e,bi)}function Bu(t){return Xs(t)?Mn(t):zi(t)}function ju(t){return Xs(t)?Mn(t,!0):Ui(t)}function Gu(t,e){var n={};return e=_a(e,3),ti(t,function(t,i,r){In(n,e(t,i,r),t)}),n}function Vu(t,e){var n={};return e=_a(e,3),ti(t,function(t,i,r){In(n,i,e(t,i,r))}),n}function Wu(t,e){return Hu(t,Fs(_a(e)))}function Hu(t,e){if(null==t)return{};var n=h(va(t),function(t){return[t]});return e=_a(e),Qi(t,n,function(t,n){return e(t,n[0])})}function Xu(t,e,n){e=Mr(e,t);var i=-1,r=e.length;for(r||(r=1,t=tt);++i<r;){var a=null==t?tt:t[$a(e[i])];a===tt&&(i=r,a=n),t=eu(a)?a.call(t):a}return t}function Yu(t,e,n){return null==t?t:ar(t,e,n)}function qu(t,e,n,i){return i="function"==typeof i?i:tt,null==t?t:ar(t,e,n,i)}function Qu(t,e,n){var i=gf(t),r=i||_f(t)||Sf(t);if(e=_a(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ru(t)&&eu(o)?ph(Pl(t)):{}}return(r?a:ti)(t,function(t,i,r){return e(n,t,i,r)}),n}function Zu(t,e){return null==t||mr(t,e)}function Ju(t,e,n){return null==t?t:vr(t,e,wr(n))}function $u(t,e,n,i){return i="function"==typeof i?i:tt,null==t?t:vr(t,e,wr(n),i)}function Ku(t){return null==t?[]:F(t,Bu(t))}function tc(t){return null==t?[]:F(t,ju(t))}function ec(t,e,n){return n===tt&&(n=e,e=tt),n!==tt&&(n=Su(n),n=n===n?n:0),e!==tt&&(e=Su(e),e=e===e?e:0),Dn(Su(t),e,n)}function nc(t,e,n){return e=bu(e),n===tt?(n=e,e=0):n=bu(n),t=Su(t),wi(t,e,n)}function ic(t,e,n){if(n&&"boolean"!=typeof n&&Ia(t,e,n)&&(e=n=tt),n===tt&&("boolean"==typeof e?(n=e,e=tt):"boolean"==typeof t&&(n=t,t=tt)),t===tt&&e===tt?(t=0,e=1):(t=bu(t),e===tt?(e=t,t=0):e=bu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Ql();return Xl(t+r*(e-t+$n("1e-"+((r+"").length-1))),e)}return Ki(t,e)}function rc(t){return Zf(Pu(t).toLowerCase())}function ac(t){return t=Pu(t),t&&t.replace(Ye,mi).replace(Un,"")}function oc(t,e,n){t=Pu(t),e=pr(e);var i=t.length;n=n===tt?i:Dn(wu(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function sc(t){return t=Pu(t),t&&Me.test(t)?t.replace(be,vi):t}function uc(t){return t=Pu(t),t&&Ce.test(t)?t.replace(Oe,"\\$&"):t}function cc(t,e,n){t=Pu(t),e=wu(e);var i=e?Q(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return ta(Ul(r),n)+t+ta(zl(r),n)}function lc(t,e,n){t=Pu(t),e=wu(e);var i=e?Q(t):0;return e&&i<e?t+ta(e-i,n):t}function hc(t,e,n){t=Pu(t),e=wu(e);var i=e?Q(t):0;return e&&i<e?ta(e-i,n)+t:t}function fc(t,e,n){return n||null==e?e=0:e&&(e=+e),ql(Pu(t).replace(Ie,""),e||0)}function pc(t,e,n){return e=(n?Ia(t,e,n):e===tt)?1:wu(e),er(Pu(t),e)}function dc(){var t=arguments,e=Pu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function mc(t,e,n){return n&&"number"!=typeof n&&Ia(t,e,n)&&(e=n=tt),(n=n===tt?Nt:n>>>0)?(t=Pu(t),t&&("string"==typeof e||null!=e&&!wf(e))&&(e=pr(e),!e&&U(t))?Sr(Z(t),0,n):t.split(e,n)):[]}function vc(t,e,n){return t=Pu(t),n=null==n?0:Dn(wu(n),0,t.length),e=pr(e),t.slice(n,n+e.length)==e}function gc(t,n,i){var r=e.templateSettings;i&&Ia(t,n,i)&&(n=tt),t=Pu(t),n=Ef({},n,r,ua);var a,o,s=Ef({},n.imports,r.imports,ua),u=Bu(s),c=F(s,u),l=0,h=n.interpolate||qe,f="__p += '",p=ul((n.escape||qe).source+"|"+h.source+"|"+(h===Te?Be:qe).source+"|"+(n.evaluate||qe).source+"|$","g"),d="//# sourceURL="+(vl.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hn+"]")+"\n";t.replace(p,function(e,n,i,r,s,u){return i||(i=r),f+=t.slice(l,u).replace(Qe,k),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var m=vl.call(n,"variable")&&n.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(ge,""):f).replace(ye,"$1").replace(_e,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Jf(function(){return al(u,d+"return "+f).apply(tt,c)});if(v.source=f,Ks(v))throw v;return v}function yc(t){return Pu(t).toLowerCase()}function _c(t){return Pu(t).toUpperCase()}function xc(t,e,n){if(t=Pu(t),t&&(n||e===tt))return t.replace(Fe,"");if(!t||!(e=pr(e)))return t;var i=Z(t),r=Z(e),a=N(i,r),o=D(i,r)+1;return Sr(i,a,o).join("")}function bc(t,e,n){if(t=Pu(t),t&&(n||e===tt))return t.replace(Ne,"");if(!t||!(e=pr(e)))return t;var i=Z(t),r=D(i,Z(e))+1;return Sr(i,0,r).join("")}function wc(t,e,n){if(t=Pu(t),t&&(n||e===tt))return t.replace(Ie,"");if(!t||!(e=pr(e)))return t;var i=Z(t),r=N(i,Z(e));return Sr(i,r).join("")}function Mc(t,e){var n=Mt,i=St;if(ru(e)){var r="separator"in e?e.separator:r;n="length"in e?wu(e.length):n,i="omission"in e?pr(e.omission):i}t=Pu(t);var a=t.length;if(U(t)){var o=Z(t);a=o.length}if(n>=a)return t;var s=n-Q(i);if(s<1)return i;var u=o?Sr(o,0,s).join(""):t.slice(0,s);if(r===tt)return u+i;if(o&&(s+=u.length-s),wf(r)){if(t.slice(s).search(r)){var c,l=u;for(r.global||(r=ul(r.source,Pu(je.exec(r))+"g")),r.lastIndex=0;c=r.exec(l);)var h=c.index;u=u.slice(0,h===tt?s:h)}}else if(t.indexOf(pr(r),s)!=s){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i}function Sc(t){return t=Pu(t),t&&we.test(t)?t.replace(xe,gi):t}function Ac(t,e,n){return t=Pu(t),e=n?tt:e,e===tt?B(t)?K(t):g(t):t.match(e)||[]}function Tc(t){var e=null==t?0:t.length,n=_a();return t=e?h(t,function(t){if("function"!=typeof t[1])throw new ll(rt);return[n(t[0]),t[1]]}):[],nr(function(n){for(var r=-1;++r<e;){var a=t[r];if(i(a[0],this,n))return i(a[1],this,n)}})}function Pc(t){return kn(Rn(t,ut))}function Lc(t){return function(){return t}}function Ec(t,e){return null==t||t!==t?e:t}function Oc(t){return t}function Cc(t){return ki("function"==typeof t?t:Rn(t,ut))}function Fc(t){return Gi(Rn(t,ut))}function Ic(t,e){return Vi(t,Rn(e,ut))}function Nc(t,e,n){var i=Bu(e),r=ii(e,i);null!=n||ru(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ii(e,Bu(e)));var o=!(ru(n)&&"chain"in n&&!n.chain),s=eu(t);return a(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Dr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,f([this.value()],arguments))})}),t}function Dc(){return ni._===this&&(ni._=bl),this}function Rc(){}function kc(t){return t=wu(t),nr(function(e){return Xi(e,t)})}function zc(t){return Na(t)?S($a(t)):Zi(t)}function Uc(t){return function(e){return null==t?tt:ri(t,e)}}function Bc(){return[]}function jc(){return!1}function Gc(){return{}}function Vc(){return""}function Wc(){return!0}function Hc(t,e){if(t=wu(t),t<1||t>Ct)return[];var n=Nt,i=Xl(t,Nt);e=_a(e),t-=Nt;for(var r=E(i,e);++n<t;)e(n);return r}function Xc(t){return gf(t)?h(t,$a):vu(t)?[t]:Dr(Ch(Pu(t)))}function Yc(t){var e=++gl;return Pu(t)+e}function qc(t){return t&&t.length?qn(t,Oc,di):tt}function Qc(t,e){return t&&t.length?qn(t,_a(e,2),di):tt}function Zc(t){return M(t,Oc)}function Jc(t,e){return M(t,_a(e,2))}function $c(t){return t&&t.length?qn(t,Oc,Bi):tt}function Kc(t,e){return t&&t.length?qn(t,_a(e,2),Bi):tt}function tl(t){return t&&t.length?L(t,Oc):0}function el(t,e){return t&&t.length?L(t,_a(e,2)):0}t=null==t?ni:_i.defaults(ni.Object(),t,_i.pick(ni,Wn));var nl=t.Array,il=t.Date,rl=t.Error,al=t.Function,ol=t.Math,sl=t.Object,ul=t.RegExp,cl=t.String,ll=t.TypeError,hl=nl.prototype,fl=al.prototype,pl=sl.prototype,dl=t["__core-js_shared__"],ml=fl.toString,vl=pl.hasOwnProperty,gl=0,yl=function(){var t=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_l=pl.toString,xl=ml.call(sl),bl=ni._,wl=ul("^"+ml.call(vl).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ml=ai?t.Buffer:tt,Sl=t.Symbol,Al=t.Uint8Array,Tl=Ml?Ml.allocUnsafe:tt,Pl=V(sl.getPrototypeOf,sl),Ll=sl.create,El=pl.propertyIsEnumerable,Ol=hl.splice,Cl=Sl?Sl.isConcatSpreadable:tt,Fl=Sl?Sl.iterator:tt,Il=Sl?Sl.toStringTag:tt,Nl=function(){try{var t=wa(sl,"defineProperty");return t({},"",{}),t}catch(e){}}(),Dl=t.clearTimeout!==ni.clearTimeout&&t.clearTimeout,Rl=il&&il.now!==ni.Date.now&&il.now,kl=t.setTimeout!==ni.setTimeout&&t.setTimeout,zl=ol.ceil,Ul=ol.floor,Bl=sl.getOwnPropertySymbols,jl=Ml?Ml.isBuffer:tt,Gl=t.isFinite,Vl=hl.join,Wl=V(sl.keys,sl),Hl=ol.max,Xl=ol.min,Yl=il.now,ql=t.parseInt,Ql=ol.random,Zl=hl.reverse,Jl=wa(t,"DataView"),$l=wa(t,"Map"),Kl=wa(t,"Promise"),th=wa(t,"Set"),eh=wa(t,"WeakMap"),nh=wa(sl,"create"),ih=eh&&new eh,rh={},ah=Ka(Jl),oh=Ka($l),sh=Ka(Kl),uh=Ka(th),ch=Ka(eh),lh=Sl?Sl.prototype:tt,hh=lh?lh.valueOf:tt,fh=lh?lh.toString:tt,ph=function(){function t(){}return function(e){if(!ru(e))return{};if(Ll)return Ll(e);t.prototype=e;var n=new t;return t.prototype=tt,n}}();e.templateSettings={escape:Se,evaluate:Ae,interpolate:Te,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,v.prototype=ph(n.prototype),v.prototype.constructor=v,A.prototype=ph(n.prototype),A.prototype.constructor=A,ze.prototype.clear=Ze,ze.prototype["delete"]=Je,
ze.prototype.get=$e,ze.prototype.has=Ke,ze.prototype.set=tn,en.prototype.clear=nn,en.prototype["delete"]=rn,en.prototype.get=an,en.prototype.has=on,en.prototype.set=sn,un.prototype.clear=cn,un.prototype["delete"]=ln,un.prototype.get=hn,un.prototype.has=fn,un.prototype.set=pn,dn.prototype.add=dn.prototype.push=mn,dn.prototype.has=vn,gn.prototype.clear=yn,gn.prototype["delete"]=_n,gn.prototype.get=xn,gn.prototype.has=bn,gn.prototype.set=wn;var dh=jr(ti),mh=jr(ei,!0),vh=Gr(),gh=Gr(!0),yh=ih?function(t,e){return ih.set(t,e),t}:Oc,_h=Nl?function(t,e){return Nl(t,"toString",{configurable:!0,enumerable:!1,value:Lc(e),writable:!0})}:Oc,xh=nr,bh=Dl||function(t){return ni.clearTimeout(t)},wh=th&&1/H(new th([,-0]))[1]==Ot?function(t){return new th(t)}:Rc,Mh=ih?function(t){return ih.get(t)}:Rc,Sh=Bl?function(t){return null==t?[]:(t=sl(t),u(Bl(t),function(e){return El.call(t,e)}))}:Bc,Ah=Bl?function(t){for(var e=[];t;)f(e,Sh(t)),t=Pl(t);return e}:Bc,Th=si;(Jl&&Th(new Jl(new ArrayBuffer(1)))!=se||$l&&Th(new $l)!=Yt||Kl&&Th(Kl.resolve())!=Jt||th&&Th(new th)!=te||eh&&Th(new eh)!=re)&&(Th=function(t){var e=si(t),n=e==Zt?t.constructor:tt,i=n?Ka(n):"";if(i)switch(i){case ah:return se;case oh:return Yt;case sh:return Jt;case uh:return te;case ch:return re}return e});var Ph=dl?eu:jc,Lh=Za(yh),Eh=kl||function(t,e){return ni.setTimeout(t,e)},Oh=Za(_h),Ch=ja(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ee,function(t,n,i,r){e.push(i?r.replace(Ue,"$1"):n||t)}),e}),Fh=nr(function(t,e){return Ys(t)?Gn(t,Jn(e,1,Ys,!0)):[]}),Ih=nr(function(t,e){var n=bo(e);return Ys(n)&&(n=tt),Ys(t)?Gn(t,Jn(e,1,Ys,!0),_a(n,2)):[]}),Nh=nr(function(t,e){var n=bo(e);return Ys(n)&&(n=tt),Ys(t)?Gn(t,Jn(e,1,Ys,!0),tt,n):[]}),Dh=nr(function(t){var e=h(t,br);return e.length&&e[0]===t[0]?Mi(e):[]}),Rh=nr(function(t){var e=bo(t),n=h(t,br);return e===bo(n)?e=tt:n.pop(),n.length&&n[0]===t[0]?Mi(n,_a(e,2)):[]}),kh=nr(function(t){var e=bo(t),n=h(t,br);return e="function"==typeof e?e:tt,e&&n.pop(),n.length&&n[0]===t[0]?Mi(n,tt,e):[]}),zh=nr(So),Uh=da(function(t,e){var n=null==t?0:t.length,i=Nn(t,e);return $i(t,h(e,function(t){return Fa(t,n)?+t:t}).sort(Cr)),i}),Bh=nr(function(t){return dr(Jn(t,1,Ys,!0))}),jh=nr(function(t){var e=bo(t);return Ys(e)&&(e=tt),dr(Jn(t,1,Ys,!0),_a(e,2))}),Gh=nr(function(t){var e=bo(t);return e="function"==typeof e?e:tt,dr(Jn(t,1,Ys,!0),tt,e)}),Vh=nr(function(t,e){return Ys(t)?Gn(t,e):[]}),Wh=nr(function(t){return _r(u(t,Ys))}),Hh=nr(function(t){var e=bo(t);return Ys(e)&&(e=tt),_r(u(t,Ys),_a(e,2))}),Xh=nr(function(t){var e=bo(t);return e="function"==typeof e?e:tt,_r(u(t,Ys),tt,e)}),Yh=nr(Xo),qh=nr(function(t){var e=t.length,n=e>1?t[e-1]:tt;return n="function"==typeof n?(t.pop(),n):tt,Yo(t,n)}),Qh=da(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Nn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof A&&Fa(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:$o,args:[r],thisArg:tt}),new v(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(tt),t})):this.thru(r)}),Zh=Ur(function(t,e,n){vl.call(t,n)?++t[n]:In(t,n,1)}),Jh=qr(lo),$h=qr(ho),Kh=Ur(function(t,e,n){vl.call(t,n)?t[n].push(e):In(t,n,[e])}),tf=nr(function(t,e,n){var r=-1,a="function"==typeof e,o=Xs(t)?nl(t.length):[];return dh(t,function(t){o[++r]=a?i(e,t,n):Ai(t,e,n)}),o}),ef=Ur(function(t,e,n){In(t,n,e)}),nf=Ur(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),rf=nr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ia(t,e[0],e[1])?e=[]:n>2&&Ia(e[0],e[1],e[2])&&(e=[e[0]]),Yi(t,Jn(e,1),[])}),af=Rl||function(){return ni.Date.now()},of=nr(function(t,e,n){var i=pt;if(n.length){var r=W(n,ya(of));i|=yt}return sa(t,i,e,n,r)}),sf=nr(function(t,e,n){var i=pt|dt;if(n.length){var r=W(n,ya(sf));i|=yt}return sa(e,i,t,n,r)}),uf=nr(function(t,e){return jn(t,1,e)}),cf=nr(function(t,e,n){return jn(t,Su(e)||0,n)});Cs.Cache=un;var lf=xh(function(t,e){e=1==e.length&&gf(e[0])?h(e[0],C(_a())):h(Jn(e,1),C(_a()));var n=e.length;return nr(function(r){for(var a=-1,o=Xl(r.length,n);++a<o;)r[a]=e[a].call(this,r[a]);return i(t,this,r)})}),hf=nr(function(t,e){var n=W(e,ya(hf));return sa(t,yt,tt,e,n)}),ff=nr(function(t,e){var n=W(e,ya(ff));return sa(t,_t,tt,e,n)}),pf=da(function(t,e){return sa(t,bt,tt,tt,tt,e)}),df=ia(di),mf=ia(function(t,e){return t>=e}),vf=Ti(function(){return arguments}())?Ti:function(t){return au(t)&&vl.call(t,"callee")&&!El.call(t,"callee")},gf=nl.isArray,yf=ui?C(ui):Pi,_f=jl||jc,xf=ci?C(ci):Li,bf=li?C(li):Ci,wf=hi?C(hi):Ni,Mf=fi?C(fi):Di,Sf=pi?C(pi):Ri,Af=ia(Bi),Tf=ia(function(t,e){return t<=e}),Pf=Br(function(t,e){if(za(e)||Xs(e))return void Rr(e,Bu(e),t);for(var n in e)vl.call(e,n)&&Ln(t,n,e[n])}),Lf=Br(function(t,e){Rr(e,ju(e),t)}),Ef=Br(function(t,e,n,i){Rr(e,ju(e),t,i)}),Of=Br(function(t,e,n,i){Rr(e,Bu(e),t,i)}),Cf=da(Nn),Ff=nr(function(t,e){t=sl(t);var n=-1,i=e.length,r=i>2?e[2]:tt;for(r&&Ia(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=ju(a),s=-1,u=o.length;++s<u;){var c=o[s],l=t[c];(l===tt||Hs(l,pl[c])&&!vl.call(t,c))&&(t[c]=a[c])}return t}),If=nr(function(t){return t.push(tt,ca),i(zf,tt,t)}),Nf=Jr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_l.call(e)),t[e]=n},Lc(Oc)),Df=Jr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_l.call(e)),vl.call(t,e)?t[e].push(n):t[e]=[n]},_a),Rf=nr(Ai),kf=Br(function(t,e,n){Wi(t,e,n)}),zf=Br(function(t,e,n,i){Wi(t,e,n,i)}),Uf=da(function(t,e){var n={};if(null==t)return n;var i=!1;e=h(e,function(e){return e=Mr(e,t),i||(i=e.length>1),e}),Rr(t,va(t),n),i&&(n=Rn(n,ut|ct|lt,la));for(var r=e.length;r--;)mr(n,e[r]);return n}),Bf=da(function(t,e){return null==t?{}:qi(t,e)}),jf=oa(Bu),Gf=oa(ju),Vf=Hr(function(t,e,n){return e=e.toLowerCase(),t+(n?rc(e):e)}),Wf=Hr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hf=Hr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xf=Wr("toLowerCase"),Yf=Hr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),qf=Hr(function(t,e,n){return t+(n?" ":"")+Zf(e)}),Qf=Hr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Zf=Wr("toUpperCase"),Jf=nr(function(t,e){try{return i(t,tt,e)}catch(n){return Ks(n)?n:new rl(n)}}),$f=da(function(t,e){return a(e,function(e){e=$a(e),In(t,e,of(t[e],t))}),t}),Kf=Qr(),tp=Qr(!0),ep=nr(function(t,e){return function(n){return Ai(n,t,e)}}),np=nr(function(t,e){return function(n){return Ai(t,n,e)}}),ip=Kr(h),rp=Kr(s),ap=Kr(m),op=na(),sp=na(!0),up=$r(function(t,e){return t+e},0),cp=aa("ceil"),lp=$r(function(t,e){return t/e},1),hp=aa("floor"),fp=$r(function(t,e){return t*e},1),pp=aa("round"),dp=$r(function(t,e){return t-e},0);return e.after=Ss,e.ary=As,e.assign=Pf,e.assignIn=Lf,e.assignInWith=Ef,e.assignWith=Of,e.at=Cf,e.before=Ts,e.bind=of,e.bindAll=$f,e.bindKey=sf,e.castArray=Us,e.chain=Zo,e.chunk=no,e.compact=io,e.concat=ro,e.cond=Tc,e.conforms=Pc,e.constant=Lc,e.countBy=Zh,e.create=Lu,e.curry=Ps,e.curryRight=Ls,e.debounce=Es,e.defaults=Ff,e.defaultsDeep=If,e.defer=uf,e.delay=cf,e.difference=Fh,e.differenceBy=Ih,e.differenceWith=Nh,e.drop=ao,e.dropRight=oo,e.dropRightWhile=so,e.dropWhile=uo,e.fill=co,e.filter=ss,e.flatMap=us,e.flatMapDeep=cs,e.flatMapDepth=ls,e.flatten=fo,e.flattenDeep=po,e.flattenDepth=mo,e.flip=Os,e.flow=Kf,e.flowRight=tp,e.fromPairs=vo,e.functions=Du,e.functionsIn=Ru,e.groupBy=Kh,e.initial=_o,e.intersection=Dh,e.intersectionBy=Rh,e.intersectionWith=kh,e.invert=Nf,e.invertBy=Df,e.invokeMap=tf,e.iteratee=Cc,e.keyBy=ef,e.keys=Bu,e.keysIn=ju,e.map=ds,e.mapKeys=Gu,e.mapValues=Vu,e.matches=Fc,e.matchesProperty=Ic,e.memoize=Cs,e.merge=kf,e.mergeWith=zf,e.method=ep,e.methodOf=np,e.mixin=Nc,e.negate=Fs,e.nthArg=kc,e.omit=Uf,e.omitBy=Wu,e.once=Is,e.orderBy=ms,e.over=ip,e.overArgs=lf,e.overEvery=rp,e.overSome=ap,e.partial=hf,e.partialRight=ff,e.partition=nf,e.pick=Bf,e.pickBy=Hu,e.property=zc,e.propertyOf=Uc,e.pull=zh,e.pullAll=So,e.pullAllBy=Ao,e.pullAllWith=To,e.pullAt=Uh,e.range=op,e.rangeRight=sp,e.rearg=pf,e.reject=ys,e.remove=Po,e.rest=Ns,e.reverse=Lo,e.sampleSize=xs,e.set=Yu,e.setWith=qu,e.shuffle=bs,e.slice=Eo,e.sortBy=rf,e.sortedUniq=Ro,e.sortedUniqBy=ko,e.split=mc,e.spread=Ds,e.tail=zo,e.take=Uo,e.takeRight=Bo,e.takeRightWhile=jo,e.takeWhile=Go,e.tap=Jo,e.throttle=Rs,e.thru=$o,e.toArray=xu,e.toPairs=jf,e.toPairsIn=Gf,e.toPath=Xc,e.toPlainObject=Au,e.transform=Qu,e.unary=ks,e.union=Bh,e.unionBy=jh,e.unionWith=Gh,e.uniq=Vo,e.uniqBy=Wo,e.uniqWith=Ho,e.unset=Zu,e.unzip=Xo,e.unzipWith=Yo,e.update=Ju,e.updateWith=$u,e.values=Ku,e.valuesIn=tc,e.without=Vh,e.words=Ac,e.wrap=zs,e.xor=Wh,e.xorBy=Hh,e.xorWith=Xh,e.zip=Yh,e.zipObject=qo,e.zipObjectDeep=Qo,e.zipWith=qh,e.entries=jf,e.entriesIn=Gf,e.extend=Lf,e.extendWith=Ef,Nc(e,e),e.add=up,e.attempt=Jf,e.camelCase=Vf,e.capitalize=rc,e.ceil=cp,e.clamp=ec,e.clone=Bs,e.cloneDeep=Gs,e.cloneDeepWith=Vs,e.cloneWith=js,e.conformsTo=Ws,e.deburr=ac,e.defaultTo=Ec,e.divide=lp,e.endsWith=oc,e.eq=Hs,e.escape=sc,e.escapeRegExp=uc,e.every=os,e.find=Jh,e.findIndex=lo,e.findKey=Eu,e.findLast=$h,e.findLastIndex=ho,e.findLastKey=Ou,e.floor=hp,e.forEach=hs,e.forEachRight=fs,e.forIn=Cu,e.forInRight=Fu,e.forOwn=Iu,e.forOwnRight=Nu,e.get=ku,e.gt=df,e.gte=mf,e.has=zu,e.hasIn=Uu,e.head=go,e.identity=Oc,e.includes=ps,e.indexOf=yo,e.inRange=nc,e.invoke=Rf,e.isArguments=vf,e.isArray=gf,e.isArrayBuffer=yf,e.isArrayLike=Xs,e.isArrayLikeObject=Ys,e.isBoolean=qs,e.isBuffer=_f,e.isDate=xf,e.isElement=Qs,e.isEmpty=Zs,e.isEqual=Js,e.isEqualWith=$s,e.isError=Ks,e.isFinite=tu,e.isFunction=eu,e.isInteger=nu,e.isLength=iu,e.isMap=bf,e.isMatch=ou,e.isMatchWith=su,e.isNaN=uu,e.isNative=cu,e.isNil=hu,e.isNull=lu,e.isNumber=fu,e.isObject=ru,e.isObjectLike=au,e.isPlainObject=pu,e.isRegExp=wf,e.isSafeInteger=du,e.isSet=Mf,e.isString=mu,e.isSymbol=vu,e.isTypedArray=Sf,e.isUndefined=gu,e.isWeakMap=yu,e.isWeakSet=_u,e.join=xo,e.kebabCase=Wf,e.last=bo,e.lastIndexOf=wo,e.lowerCase=Hf,e.lowerFirst=Xf,e.lt=Af,e.lte=Tf,e.max=qc,e.maxBy=Qc,e.mean=Zc,e.meanBy=Jc,e.min=$c,e.minBy=Kc,e.stubArray=Bc,e.stubFalse=jc,e.stubObject=Gc,e.stubString=Vc,e.stubTrue=Wc,e.multiply=fp,e.nth=Mo,e.noConflict=Dc,e.noop=Rc,e.now=af,e.pad=cc,e.padEnd=lc,e.padStart=hc,e.parseInt=fc,e.random=ic,e.reduce=vs,e.reduceRight=gs,e.repeat=pc,e.replace=dc,e.result=Xu,e.round=pp,e.runInContext=xi,e.sample=_s,e.size=ws,e.snakeCase=Yf,e.some=Ms,e.sortedIndex=Oo,e.sortedIndexBy=Co,e.sortedIndexOf=Fo,e.sortedLastIndex=Io,e.sortedLastIndexBy=No,e.sortedLastIndexOf=Do,e.startCase=qf,e.startsWith=vc,e.subtract=dp,e.sum=tl,e.sumBy=el,e.template=gc,e.times=Hc,e.toFinite=bu,e.toInteger=wu,e.toLength=Mu,e.toLower=yc,e.toNumber=Su,e.toSafeInteger=Tu,e.toString=Pu,e.toUpper=_c,e.trim=xc,e.trimEnd=bc,e.trimStart=wc,e.truncate=Mc,e.unescape=Sc,e.uniqueId=Yc,e.upperCase=Qf,e.upperFirst=Zf,e.each=hs,e.eachRight=fs,e.first=go,Nc(e,function(){var t={};return ti(e,function(n,i){vl.call(e.prototype,i)||(t[i]=n)}),t}(),{chain:!1}),e.VERSION=et,a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),a(["drop","take"],function(t,e){A.prototype[t]=function(n){n=n===tt?1:Hl(wu(n),0);var i=this.__filtered__&&!e?new A(this):this.clone();return i.__filtered__?i.__takeCount__=Xl(n,i.__takeCount__):i.__views__.push({size:Xl(n,Nt),type:t+(i.__dir__<0?"Right":"")}),i},A.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Pt||n==Et;A.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_a(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");A.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");A.prototype[t]=function(){return this.__filtered__?new A(this):this[n](1)}}),A.prototype.compact=function(){return this.filter(Oc)},A.prototype.find=function(t){return this.filter(t).head()},A.prototype.findLast=function(t){return this.reverse().find(t)},A.prototype.invokeMap=nr(function(t,e){return"function"==typeof t?new A(this):this.map(function(n){return Ai(n,t,e)})}),A.prototype.reject=function(t){return this.filter(Fs(_a(t)))},A.prototype.slice=function(t,e){t=wu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new A(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==tt&&(e=wu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},A.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},A.prototype.toArray=function(){return this.take(Nt)},ti(A.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),a=e[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);a&&(e.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,u=n instanceof A,c=s[0],l=u||gf(n),h=function(t){var n=a.apply(e,f([t],s));return r&&p?n[0]:n};l&&i&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,d=!!this.__actions__.length,m=o&&!p,g=u&&!d;if(!o&&l){n=g?n:new A(this);var y=t.apply(n,s);return y.__actions__.push({func:$o,args:[h],thisArg:tt}),new v(y,p)}return m&&g?t.apply(this,s):(y=this.thru(h),m?r?y.value()[0]:y.value():y)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var n=hl[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var e=this.value();return n.apply(gf(e)?e:[],t)}return this[i](function(e){return n.apply(gf(e)?e:[],t)})}}),ti(A.prototype,function(t,n){var i=e[n];if(i){var r=i.name+"";vl.call(rh,r)||(rh[r]=[]),rh[r].push({name:n,func:i})}}),rh[Zr(tt,dt).name]=[{name:"wrapper",func:tt}],A.prototype.clone=Y,A.prototype.reverse=J,A.prototype.value=$,e.prototype.at=Qh,e.prototype.chain=Ko,e.prototype.commit=ts,e.prototype.next=es,e.prototype.plant=is,e.prototype.reverse=rs,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=as,e.prototype.first=e.prototype.head,Fl&&(e.prototype[Fl]=ns),e},_i=yi();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ni._=_i,define(function(){return _i})):ri?((ri.exports=_i)._=_i,ii._=_i):ni._=_i}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],77:[function(t,e,n){function i(){}e.exports=i},{}],78:[function(t,e,n){var i=t("./_root"),r=function(){return i.Date.now()};e.exports=r},{"./_root":58}],79:[function(t,e,n){function i(t,e,n){var i=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return a(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:i,maxWait:e,trailing:s})}var r=t("./debounce"),a=t("./isObject"),o="Expected a function";e.exports=i},{"./debounce":69,"./isObject":73}],80:[function(t,e,n){function i(t){if(!t)return 0===t?t:0;if(t=r(t),t===a||t===-a){var e=t<0?-1:1;return e*o}return t===t?t:0}var r=t("./toNumber"),a=1/0,o=1.7976931348623157e308;e.exports=i},{"./toNumber":82}],81:[function(t,e,n){function i(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}var r=t("./toFinite");e.exports=i},{"./toFinite":80}],82:[function(t,e,n){function i(t){if("number"==typeof t)return t;if(a(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||l.test(t)?h(t.slice(2),n?2:8):u.test(t)?o:+t}var r=t("./isObject"),a=t("./isSymbol"),o=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,h=parseInt;e.exports=i},{"./isObject":73,"./isSymbol":75}],83:[function(t,e,n){function i(t){if(u(t)&&!s(t)&&!(t instanceof r)){if(t instanceof a)return t;if(h.call(t,"__wrapped__"))return c(t)}return new a(t)}var r=t("./_LazyWrapper"),a=t("./_LodashWrapper"),o=t("./_baseLodash"),s=t("./isArray"),u=t("./isObjectLike"),c=t("./_wrapperClone"),l=Object.prototype,h=l.hasOwnProperty;i.prototype=o.prototype,i.prototype.constructor=i,e.exports=i},{"./_LazyWrapper":9,"./_LodashWrapper":10,"./_baseLodash":22,"./_wrapperClone":66,"./isArray":71,"./isObjectLike":74}],84:[function(t,e,n){(function(n){var i,r=t("sister");i=function a(t){var e,i,o;return this instanceof a?(o=r(),e=this,e.on=o.on,t=t||{},t.noChangeCountToEnd=t.noChangeCountToEnd||100,t.noEndTimeout=1e3,t.debug=t.debug||!1,void n.addEventListener("orientationchange",function(){var e,r,a,s,u,c;a=function(t){clearInterval(e),clearTimeout(r),e=null,r=null,t&&o.trigger("orientationchangeend")},i&&i(!1),i=a,e=setInterval(function(){n.innerWidth===s&&n.innerHeight===u?(c++,c===t.noChangeCountToEnd&&(t.debug,a(!0))):(s=n.innerWidth,u=n.innerHeight,c=0)}),r=setTimeout(function(){t.debug,a(!0)},t.noEndTimeout)})):new a(t)},n.gajus=n.gajus||{},n.gajus.orientationchangeend=i,e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{sister:87}],85:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(h===setTimeout)return setTimeout(t,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&u())}function u(){if(!v){var t=a(s);v=!0;for(var e=m.length;e;){for(d=m,m=[];++g<e;)d&&d[g].run();g=-1,e=m.length}d=null,v=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var h,f,p=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,m=[],v=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||v||a(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],86:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var r=t("sister"),a=i(r),o=t("orientationchangeend"),s=i(o),u=(0,s["default"])();n["default"]=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={},n=(0,a["default"])();t.width=t.width||{},t.width.portrait||(t.width.portrait=window.screen.width),t.width.landscape||(t.width.landscape=window.screen.width),void 0===t.viewport&&(t.viewport=!0),e.isIOS13=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 13===parseInt(t[1])}return!1},e.manageViewport=function(){return t.viewport},e.getViewportWidth=function(){return t.width[e.getOrientation()]},e.getViewportHeight=function(){return Math.round(e.getScreenHeight()/e.getScale())},e.getScale=function(){return e.getScreenWidth()/e.getViewportWidth()};return e.getOrientation=function(){return 0===window.orientation||180===window.orientation?"portrait":"landscape"},e.getScreenWidth=function(){return window.screen["portrait"===e.getOrientation()?"width":"height"]},e.getScreenHeight=function(){return window.screen["portrait"===e.getOrientation()?"height":"width"]},e.updateViewport=function(){if(e.manageViewport()){var t=e.getViewportWidth(),n=e.getScale(),i=e.getNotchPadding(),r="width="+t+", initial-scale="+n+", minimum-scale="+n+", maximum-scale="+n+", user-scalable=0, viewport-fit=cover";i>0&&(r="width="+(t-i)+", initial-scale="+n+", minimum-scale="+n+", maximum-scale="+n+", user-scalable=0");var a=document.createElement("meta");a.name="viewport",a.content=r;var o=window.document.head.querySelector('meta[name="viewport"]');o?(setTimeout(function(t,n){e.getNotchPadding()>0&&t!==n&&e.updateViewport()},2e3,r,o.getAttribute("content")),o.parentNode.removeChild(o)):setTimeout(function(){e.updateViewport()},1e3),window.document.head.appendChild(a)}},e.deviceSpec=function(){var t=void 0,n=void 0,i=[[1280,1762,1920,1280,320,480,2,"iPhone 4/4s"],[1280,2114,2272,1280,320,568,2,"iPhone 5/5c/5s/SE and 6/6s (Zoomed)"],[1500,2510,2668,1500,375,667,2,"iPhone 6/6s/7/8"],[1656,2785,2944,1656,414,736,3,"iPhone 6+/6s+/7+/8+"],[1500,2509,2668,1500,375,667,3,"iPhone 6+/6s+/7+/8+ (Zoomed)"],[3072,3936,4096,2912,768,1024,1,"iPad 2"],[3072,3938,4096,2914,768,1024,2,"iPad Air/Retina/Pro (9.7-inch)"],[3336,4290,4448,3178,834,1112,2,"iPad Pro (10.5-inch)"],[3336,4602,4776,3162,834,1194,2,"iPad Pro (11-inch)"],[4096,5306,5464,3938,1024,1366,2,"iPad Pro (12.9-inch)"],[4096,5290,5464,3922,1024,1366,2,"iPad Pro (12.9-inch) 3rd generation"],[1656,3330,3584,1656,414,896,2,"iPhone XR"],[1500,2993,3248,1500,375,812,3,"iPhone X/XS"],[1656,3329,3584,1656,414,896,3,"iPhone XS Max"]],r=[[1280,1764,1920,1280,320,480,2,"iPhone 4/4s (iOS 13)"],[1280,2116,2272,1280,320,568,2,"iPhone 5/5c/5s/SE and 6/6s (Zoomed) (iOS 13)"],[1500,2512,2668,1500,375,667,2,"iPhone 6/6s/7/8 (iOS 13)"],[1656,2788,2944,1656,414,736,3,"iPhone 6+/6s+/7+/8+ (iOS 13)"],[1500,2512,2668,1500,375,667,3,"iPhone 6+/6s+/7+/8+ (Zoomed) (iOS 13)"],[3072,3940,4096,3166,768,1024,2,"iPad Air/Retina/Pro (9.7-inch) (iOS 13)"],[3336,4276,4448,3164,834,1112,2,"iPad Pro (10.5-inch) (iOS 13)"],[3336,4604,4776,3164,834,1194,2,"iPad Pro (11-inch) (iOS 13)"],[4096,5308,5464,3940,1024,1366,2,"iPad Pro (12.9-inch) (iOS 13)"],[4096,5292,5464,3924,1024,1366,2,"iPad Pro (12.9-inch) 3rd generation (iOS 13)"],[1656,3332,3584,1656,414,896,2,"iPhone XR (iOS 13)"],[1500,2996,3248,1500,375,812,3,"iPhone X/XS (iOS 13)"],[1656,3332,3584,1656,414,896,3,"iPhone XS Max (iOS 13)"]],a=e.isIOS13()?r:i;for(t=a.length;t--;)if(window.screen.width===a[t][4]&&window.screen.height===a[t][5]&&window.devicePixelRatio===a[t][6]){n=a[t];break}return n},e.getMinimalViewHeight=function(){var t=void 0,n=e.getOrientation(),i=e.deviceSpec();if(!i)throw new Error("Not a known iOS device. If you are using an iOS device, report it to https://github.com/gajus/scream/issues/1.");return t="portrait"===n?Math.round(e.getViewportWidth()*i[1]/i[0]):Math.round(e.getViewportWidth()*i[3]/i[2])},e.getMinimalViewSize=function(){var t=e.getViewportWidth(),n=e.getMinimalViewHeight();return{height:n,width:t}},e.getNotchPadding=function(){var t=!1,e=document.createElement("div");if(CSS.supports("padding-left: env(safe-area-inset-left)")&&CSS.supports("padding-left: env(safe-area-inset-right)")?(e.style.paddingLeft="env(safe-area-inset-left)",e.style.paddingRight="env(safe-area-inset-right)",t=!0):CSS.supports("padding-left: constant(safe-area-inset-left)")&&CSS.supports("padding-left: constant(safe-area-inset-right)")&&(e.style.paddingLeft="constant(safe-area-inset-left)",e.style.paddingRight="constant(safe-area-inset-right)",t=!0),t){document.body.appendChild(e);var n=parseInt(window.getComputedStyle(e).paddingLeft),i=parseInt(window.getComputedStyle(e).paddingRight);return document.body.removeChild(e),n+i}return 0},e.isMinimalView=function(){return window.innerHeight===e.getMinimalViewSize().height},e.detectViewChange=function(){var t=void 0;return e.deviceSpec()?function(){var i=e.isMinimalView()?"minimal":"full";t!==i&&(n.trigger("viewchange",{viewName:i}),t=i)}:function(){}},e.detectViewChange=e.detectViewChange(),e.setupDOMEventListeners=function(){var t=void 0;window.matchMedia("(orientation: portrait)").addListener(function(){t=!0}),u.on("orientationchangeend",function(){t=!1,e.updateViewport(),e.detectViewChange(),n.trigger("orientationchangeend")}),window.addEventListener("orientationchange",function(){e.updateViewport()}),window.addEventListener("resize",function(){t||e.detectViewChange()}),window.addEventListener("scroll",function(){t||e.detectViewChange()}),setTimeout(function(){e.detectViewChange()})},e.updateViewport(),e.setupDOMEventListeners(),e.on=n.on,e.off=n.off,e},e.exports=n["default"]},{orientationchangeend:84,sister:87}],87:[function(t,e,n){"use strict";var i;i=function(){var t={},e={};return t.on=function(t,n){var i={name:t,handler:n};return e[t]=e[t]||[],e[t].unshift(i),i},t.off=function(t){var n=e[t.name].indexOf(t);n!==-1&&e[t.name].splice(n,1)},t.trigger=function(t,n){var i,r=e[t];if(r)for(i=r.length;i--;)r[i].handler(n)},t},e.exports=i},{}],88:[function(t,e,n){(function(){"use strict";function i(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new u.BufferGeometry,this.widthCallback=null,this.matrixWorld=new u.Matrix4}function r(t,e,n,i,r){var a;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(a=0;a<t.length;a++)n[a+i]=t[a];return n}function a(t){u.ShaderMaterial.call(this,{uniforms:Object.assign({},u.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new u.Color(16777215)},opacity:{value:1},resolution:{value:new u.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new u.Vector2(1,1)}}),vertexShader:u.ShaderChunk.meshline_vert,fragmentShader:u.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(t){this.uniforms.near.value=t}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(t){this.uniforms.far.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}var o=this,s="undefined"!=typeof t,u=o.THREE||s&&t("three");if(!u)throw new Error("MeshLine requires three.js");i.prototype.setMatrixWorld=function(t){this.matrixWorld=t},i.prototype.setGeometry=function(t,e){if(this.widthCallback=e,this.positions=[],this.counters=[],t instanceof u.Geometry)for(var n=0;n<t.vertices.length;n++){var i=t.vertices[n],e=n/t.vertices.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(e),this.counters.push(e)}if(t instanceof u.BufferGeometry,t instanceof Float32Array||t instanceof Array)for(var n=0;n<t.length;n+=3){var e=n/t.length;this.positions.push(t[n],t[n+1],t[n+2]),this.positions.push(t[n],t[n+1],t[n+2]),this.counters.push(e),this.counters.push(e)}this.process()},i.prototype.raycast=function(){var t=new u.Matrix4,e=new u.Ray,n=new u.Sphere;return function(i,r){var a=i.linePrecision,o=a*a,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(this.matrixWorld),i.ray.intersectSphere(n)!==!1){t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t);var c=new u.Vector3,l=new u.Vector3,h=new u.Vector3,f=new u.Vector3,p=this instanceof u.LineSegments?2:1;if(s instanceof u.BufferGeometry){var d=s.index,m=s.attributes;if(null!==d)for(var v=d.array,g=m.position.array,y=0,_=v.length-1;y<_;y+=p){var x=v[y],b=v[y+1];c.fromArray(g,3*x),l.fromArray(g,3*b);var w=e.distanceSqToSegment(c,l,f,h);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(f);M<i.near||M>i.far||r.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var g=m.position.array,y=0,_=g.length/3-1;y<_;y+=p){c.fromArray(g,3*y),l.fromArray(g,3*y+3);var w=e.distanceSqToSegment(c,l,f,h);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(f);M<i.near||M>i.far||r.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(s instanceof u.Geometry)for(var S=s.vertices,A=S.length,y=0;y<A-1;y+=p){var w=e.distanceSqToSegment(S[y],S[y+1],f,h);if(!(w>o)){f.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(f);M<i.near||M>i.far||r.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),i.prototype.compareV3=function(t,e){var n=6*t,i=6*e;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},i.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},i.prototype.process=function(){var t=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var e=0;e<t;e++)this.side.push(1),this.side.push(-1);for(var n,e=0;e<t;e++)n=this.widthCallback?this.widthCallback(e/(t-1)):1,this.width.push(n),this.width.push(n);for(var e=0;e<t;e++)this.uvs.push(e/(t-1),0),this.uvs.push(e/(t-1),1);var i;i=this.compareV3(0,t-1)?this.copyV3(t-2):this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(var e=0;e<t-1;e++)i=this.copyV3(e),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(var e=1;e<t;e++)i=this.copyV3(e),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]);i=this.compareV3(t-1,0)?this.copyV3(1):this.copyV3(t-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]);for(var e=0;e<t-1;e++){var r=2*e;this.indices_array.push(r,r+1,r+2),this.indices_array.push(r+2,r+1,r+3)}this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),
this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new u.BufferAttribute(new Float32Array(this.positions),3),previous:new u.BufferAttribute(new Float32Array(this.previous),3),next:new u.BufferAttribute(new Float32Array(this.next),3),side:new u.BufferAttribute(new Float32Array(this.side),1),width:new u.BufferAttribute(new Float32Array(this.width),1),uv:new u.BufferAttribute(new Float32Array(this.uvs),2),index:new u.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new u.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.addAttribute("position",this.attributes.position),this.geometry.addAttribute("previous",this.attributes.previous),this.geometry.addAttribute("next",this.attributes.next),this.geometry.addAttribute("side",this.attributes.side),this.geometry.addAttribute("width",this.attributes.width),this.geometry.addAttribute("uv",this.attributes.uv),this.geometry.addAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},i.prototype.advance=function(t){var e=this.attributes.position.array,n=this.attributes.previous.array,i=this.attributes.next.array,a=e.length;r(e,0,n,0,a),r(e,6,e,0,a-6),e[a-6]=t.x,e[a-5]=t.y,e[a-4]=t.z,e[a-3]=t.x,e[a-2]=t.y,e[a-1]=t.z,r(e,6,i,0,a-6),i[a-6]=t.x,i[a-5]=t.y,i[a-4]=t.z,i[a-3]=t.x,i[a-2]=t.y,i[a-1]=t.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},u.ShaderChunk.meshline_vert=["",u.ShaderChunk.logdepthbuf_pars_vertex,u.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","",u.ShaderChunk.logdepthbuf_vertex,u.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",u.ShaderChunk.fog_vertex,"}"].join("\r\n"),u.ShaderChunk.meshline_frag=["",u.ShaderChunk.fog_pars_fragment,u.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",u.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",u.ShaderChunk.fog_fragment,"}"].join("\r\n"),a.prototype=Object.create(u.ShaderMaterial.prototype),a.prototype.constructor=a,a.prototype.isMeshLineMaterial=!0,a.prototype.copy=function(t){return u.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.near=t.near,this.far=t.far,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports={MeshLine:i,MeshLineMaterial:a}),n.MeshLine=i,n.MeshLineMaterial=a):(o.MeshLine=i,o.MeshLineMaterial=a)}).call(this)},{three:89}],89:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],90:[function(t,e,n){(function(e,i){function r(t,e){this._id=t,this._clearFn=e}var a=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;n.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,i=!(arguments.length<2)&&s.call(arguments,1);return u[e]=!0,a(function(){u[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":85,timers:90}],91:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(){new o["default"],new a["default"];var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),void 0===document.ontouchstart&&document.body.classList.add("noTouchEvent")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var a=i(t("./common/Header")),o=i(t("./common/Transition"))},{"./common/Header":94,"./common/Transition":98}],92:[function(t,e,n){"use strict";var i=t("three"),r=t("gsap"),a=t("./util/UA")();e.exports={assetPath:"/lionsnews/assets/",base3D:null,currentScene:"",currentLang:"",isTransition:!0,PI:Math.PI/180,backgroundColors:{"default":new i.Color(15856370),article:new i.Color(2236962)},color:{home:"#fff",about:"#ddd"},lionScale:a.isSmartPhone?.35:.6,mouseDownUpThresholdTime:200,debugDisplay:{papers:!1},naviColors:[],stageSize:{width:100,height:100},paperOption:{pc:{size:{width:360,height:500},margin:{x:150,y:0},bend:4e3},sp:{size:{width:460,height:650},margin:{x:90,y:0},bend:2e3}},scenePosition:{intro:{height:1080,position:new i.Vector3(0,0,0),camera:new i.Vector3(0,0,0)},home:{height:a.isPC?768:1132,position:new i.Vector3(0,0,3e3),camera:new i.Vector3(0,0,0)},history:{height:a.isPC?768:1132,position:new i.Vector3(0,0,2500),camera:new i.Vector3(0,0,0)},navi:{height:a.isPC?768:616,position:new i.Vector3(0,0,a.isPC?3500:4500),camera:new i.Vector3(0,0,0)},article:{height:a.isPC?768:1132,position:new i.Vector3(0,0,3e3),camera:new i.Vector3(0,0,0)},about:{height:768,position:new i.Vector3(0,0,(-1e3)),camera:new i.Vector3(0,0,0)}},sceneCameraPosition:{intro:new i.Vector3(0,0,0),home:new i.Vector3(0,0,0),history:new i.Vector3(0,0,0),navi:new i.Vector3(0,0,0),article:new i.Vector3(0,0,0),about:new i.Vector3(0,0,0)},sceneOffset:{intro:{papers:28},history:{depthZ:900,opacity:0}},animation:{intro:{spreadTime:3},navi:{cycle:4,duration:4,fromY:2e3},paper:{zoomOption:{delay:0,duration:1.5,ease:r.Power4.easeInOut},textureChange:{delay:0,duration:1.5,ease:r.Power4.easeInOut,ampY:30},jump:{delay:0,duration:1.5,ease:r.Power4.easeInOut}}}}},{"./util/UA":132,gsap:7,three:89}],93:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=(i(t("../util/Easing")),t("../util/SvgPathDraw")),u=function(){function t(e){var n=this;return r(this,t),t.instance?t.instance:(this.closed=!1,this.mode="loading",this.delaySpeed=.1,this.loadingSpeed=.5/60,this.loadingProgress=0,this.$cursor=document.querySelector(".cursor"),this.$cursor1=this.$cursor.querySelector(".cursor-graphic1"),this.$cursorCircle=this.$cursor.querySelector(".cursor-graphic1 .circlePath"),this.$cursorLoading=this.$cursor.querySelector(".cursor-graphic1 .loadingPath"),this.$cursor.classList.add("ready"),this.modeOld="",this.mouse={x:.5*window.innerWidth,y:.5*window.innerHeight},this.mouseDealy={x:.5*window.innerWidth,y:.5*window.innerHeight},this.drawPath_circle=new s(this.$cursorCircle),this.drawPath_loading=new s(this.$cursorLoading),this.drawPath_circle.update(-1),this.drawPath_loading.update(-1),this.update(),document.body.addEventListener("mousemove",function(t){var e=t.clientX,i=t.clientY;n.mouse.x=e,n.mouse.y=i}),void(t.instance=this))}return o(t,[{key:"close",value:function(){this.closed=!0,this.$cursor.setAttribute("data-close",this.closed),this.drawPath_circle.to(1,1),this.drawPath_loading.to(1,1)}},{key:"loading",value:function(t){this.drawPath_circle.update(t-1)}},{key:"changeColor",value:function(t){this.$cursorLoading.style.stroke=t}},{key:"changeMode",value:function(t){this.closed||(this.mode=t,this.modeOld=t,"loading"==t?(this.drawPath_loading.update(-1),this.drawPath_loading.fromTo(-1,-.5,.5)):this.drawPath_loading.to(0,1),this.$cursor.setAttribute("data-mode",t))}},{key:"changeScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"big";this.$cursor.setAttribute("data-scale",t)}},{key:"hoverIn",value:function(){this.$cursor.setAttribute("data-scale","hover")}},{key:"hoverOut",value:function(){this.$cursor.setAttribute("data-scale",this.modeOld)}},{key:"update",value:function(){this.mouseDealy.x+=(this.mouse.x-this.mouseDealy.x)*this.delaySpeed,this.mouseDealy.y+=(this.mouse.y-this.mouseDealy.y)*this.delaySpeed,this.mouseDealy.x=Math.round(100*this.mouseDealy.x)/100,this.mouseDealy.y=Math.round(100*this.mouseDealy.y)/100,this.loadingProgress+=this.loadingSpeed,this.loadingProgress>1&&(this.loadingProgress=0),this.$cursor1.style.transform="translate3d(-50%,-50%,0) rotate(".concat(360*this.loadingProgress,"deg)"),this.$cursor.style.transform="translate3d(".concat(this.mouseDealy.x,"px,").concat(this.mouseDealy.y,"px,0)")}}]),t}();n["default"]=u},{"../util/Easing":126,"../util/SvgPathDraw":131}],94:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var m=i(t("events")),v=i(t("./Cursor")),g=t("../util/UA")(),y=function(t){function e(){var t;if(a(this,e),e.instance)return h(t,e.instance);var i=new v["default"];return t=n.call(this),e.instance=f(t),t.isDown=!1,t.$header=document.querySelector("header"),t.$message=t.$header.querySelector(".message"),t.$langJa=t.$header.querySelector(".lang-ja"),t.$langEn=t.$header.querySelector(".lang-en"),t.$about=t.$header.querySelector(".header-about-link"),t.$headerLogo=t.$header.querySelector(".header-logo-link"),t.$btnNaviOpen=t.$header.querySelector(".btn-naviOpen"),t.$btnNaviClose=t.$header.querySelector(".btn-naviClose"),t.$btnBackToTop=t.$header.querySelector(".btn-backToTop"),t.$headerLine=t.$header.querySelector(".border-line"),t.$indicator=t.$header.querySelector(".indicator"),t.btns=[t.$langJa,t.$langEn,t.$about,t.$headerLogo,t.$btnNaviOpen,t.$btnNaviClose,t.$btnBackToTop],g.isPC&&t.btns.forEach(function(t){t.addEventListener("mouseenter",function(){i.hoverIn()}),t.addEventListener("mouseleave",function(){i.hoverOut()})}),t.$btnNaviOpen.addEventListener("click",function(){t.emit("naviOpen")}),t.$btnNaviClose.addEventListener("click",function(){t.emit("naviClose")}),h(t,f(t))}u(e,t);var n=l(e);return s(e,[{key:"moveIndication",value:function(t){window.innerWidth<=720&&(this.$indicator.style.transform="translate3d(".concat(100*-t,"%,0,0)"))}},{key:"show",value:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$headerLine.classList.remove("-hide"),setTimeout(function(){t.$headerLogo.classList.remove("-hide"),t.$langJa.classList.remove("-hide"),t.$langEn.classList.remove("-hide"),t.$about.classList.remove("-hide"),t.$indicator.classList.remove("-hide")},300)}},{key:"hide",value:function(){this.$message.classList.add("-hide"),this.$headerLogo.classList.add("-hide"),this.$langJa.classList.add("-hide"),this.$langEn.classList.add("-hide"),this.$about.classList.add("-hide"),this.$headerLine.classList.add("-hide"),this.$indicator.classList.add("-hide"),this.$btnBackToTop.classList.add("-hide")}},{key:"hideElement",value:function(t){switch(t){case"message":this.$message.classList.add("-hide");break;case"naviOpen":this.$btnNaviOpen.classList.add("-hide");break;case"naviClose":this.$btnNaviClose.classList.add("-hide");break;case"backToTop":this.$btnBackToTop.classList.add("-hide")}}},{key:"showElement",value:function(t){switch(t){case"message":this.$message.classList.remove("-hide");break;case"naviOpen":this.$btnNaviOpen.classList.remove("-hide");break;case"naviClose":this.$btnNaviClose.classList.remove("-hide");break;case"backToTop":this.$btnBackToTop.classList.remove("-hide")}}},{key:"hideCenterCotents",value:function(){this.hideElement("message"),this.hideElement("naviOpen"),this.hideElement("naviClose"),this.hideElement("backToTop")}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"navi";"navi"==e?(this.$message.classList.add("-hide"),setTimeout(function(){t.$btnNaviOpen.classList.remove("-hide")},500)):(setTimeout(function(){t.$message.classList.remove("-hide")},500),this.$btnNaviOpen.classList.add("-hide"))}},{key:"onScroll",value:function(t){var e=this;window.innerWidth<768&&(this.scrollTicking||(requestAnimationFrame(function(){e.scrollTicking=!1,e.scrollY=window.scrollY||window.pageYOffset,e.scrollDirection=e.scrollY-e.scrollYOld<0?-1:1,e.scrollYOld=e.scrollY,e.scrollDirection>0&&e.scrollY>60?(e.isHeadHide||e.$header.classList.add("hide"),e.isHeadHide=!0):(e.isHeadHide&&e.$header.classList.remove("hide"),e.isHeadHide=!1)}),this.scrollTicking=!0))}},{key:"_checkDirection",value:function(t,e){t<e?this.isDown||(this.isUp=!1,this.isDown=!0,this.$header.classList.add("is-hide")):this.isUp||(this.isDown=!1,this.isUp=!0,this.$header.classList.remove("is-hide"))}},{key:"changeColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white";"white"==t?document.body.setAttribute("data-color-theme","white"):document.body.setAttribute("data-color-theme","black")}}]),e}(m["default"]);n["default"]=y},{"../util/UA":132,"./Cursor":93,events:6}],95:[function(t,e,n){"use strict";function i(t,e){var n=e.replace("en/",""),i=n,r="/en"+("/"==n?n+"lionsnews/":n);document.querySelector(".header-logo-link").setAttribute("href","ja"==t?"/lionsnews/":"/en/lionsnews/"),document.querySelector(".header-about-link").setAttribute("href","ja"==t?"/lionsnews/about/":"/en/lionsnews/about/"),document.querySelector(".btn-backToTop").setAttribute("href","ja"==t?"/lionsnews/":"/en/lionsnews/"),document.querySelector(".lang-en").setAttribute("href",r),document.querySelector(".lang-ja").setAttribute("href",i)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],96:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=t.querySelector(".slogan");return e.classList.add("-in"),{destroy:function(){return new Promise(function(t){e.classList.add("-out"),setTimeout(function(){t()},500)})}}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;i(t("../Config"))},{"../Config":92}],97:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){function i(){A.forEach(function(t){switch(t.type){case"bbc":t.videoCon.innerHTML="";break;case"youtube":t.api&&(t.api.destroy(),t.api=null);break;case"vimeo":t.api&&(t.api.destroy(),t.api=null)}})}function r(t){if(T){var e=1,n=0;if(T.classList.contains("is-inview")){var i=T.getBoundingClientRect(),r=i.top,a=i.height;e=1-(.5*window.innerHeight-r)/a,L=e,e>=1&&C.classList.add("-white")}else 0==e&&C.classList.remove("-white");if(P.classList.contains("is-inview")){var o=P.getBoundingClientRect(),s=o.top,u=o.height;n=(.5*window.innerHeight-s)/u,L=n}L<0&&(L=0),L>1&&(L=1),1==L?y.inHistory=!1:y.inHistory=!0,y.historyProgress=L,0!=L||C.classList.contains("-white")||(C.classList.add("-white"),d.changeColor("white"),p.changeNoise({duration:1,noise:.1})),1==L&&C.classList.contains("-white")&&(p.changeNoise({duration:1,noise:.05}),C.classList.remove("-white"),d.changeColor("black")),v.setOpacity(c["default"].sceneOffset.history.opacity+(1-c["default"].sceneOffset.history.opacity)*L)}}var p=new o["default"],d=new l["default"],m=p.papers,v=m.getPaperByName(t),g=e.getAttribute("page_isInterview"),y={inHistory:!1,historyProgress:1},_=e.querySelector(".article-next a"),x=e.querySelector(".simlilarCaseLink"),b=new h["default"],w=e.querySelectorAll(".scroll-anim"),M=[];w.forEach(function(t,e){var n=t.querySelector(".scroll-anim__inner"),i=new a["default"](t,n,{nonestop:1==e});0==e&&i.show(),i.start(),M.push(i)}),f.isPC&&(_.addEventListener("mouseenter",function(){M[2].speedUp(),b.hoverIn()}),_.addEventListener("mouseleave",function(){M[2].speedDown(),b.hoverOut()}),x&&(x.addEventListener("mouseenter",function(){b.hoverIn()}),x.addEventListener("mouseleave",function(){b.hoverOut()})));var S=e.querySelectorAll(".__video"),A=[];S.forEach(function(t,e){var n=t.getAttribute("data-video-type"),r=t.getAttribute("data-video-id"),a=t.querySelector("button"),o=t.querySelector("._videoContainer"),c={type:n,api:null,videoCon:o};A[e]=c,a.addEventListener("click",function(){switch(t.classList.add("video-loading"),i(),n){case"youtube":if(c.api)return;o.id="yt_"+r,c.api=new u["default"]({videoId:r,containerId:o.id,width:"100%",height:"100%",playerVars:{autoplay:!0}});break;case"vimeo":if(c.api)return;o.id="vm_"+r,c.api=new s["default"](o.id,{id:r,title:!1,byline:!1,portrait:!1,autoplay:!0});break;case"bbc":var e='<iframe width="400" height="500" frameborder="0" scrolling="no" src='.concat(r,"></iframe>");o.innerHTML=e}}),f.isPC&&(t.addEventListener("mouseenter",function(){b.hoverIn()}),t.addEventListener("mouseleave",function(){b.hoverOut()}))});var T=e.querySelector(".history-trigger-top"),P=e.querySelector(".history-trigger-bottom"),L=1,E=0,O=0;n.on("scroll",function(t){E=O-t.scroll.y<0?1:-1,g||r(t),O=t.scroll.y});var C=w[1];return p.addRenderObject("pageAnim",function(){M.forEach(function(t){t.update()})}),{status:y,setOpacity:function(){v.setOpacity(c["default"].sceneOffset.history.opacity+(1-c["default"].sceneOffset.history.opacity)*L)},destroy:function(){return new Promise(function(t){p.removeRenderObject("pageAnim"),M.forEach(function(t){t.destroy()}),i(),t()})}}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var a=i(t("../util/ScrollText")),o=i(t("../common/navi/Navi")),s=i(t("@vimeo/player")),u=(t("lodash"),i(t("../util/YoutubePlayer"))),c=i(t("../Config")),l=i(t("./Header")),h=i(t("./Cursor")),f=t("../util/UA")()},{"../Config":92,"../common/navi/Navi":108,"../util/ScrollText":129,"../util/UA":132,"../util/YoutubePlayer":133,"./Cursor":93,"./Header":94,"@vimeo/player":4,lodash:76}],98:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var a=i(t("@barba/core")),o=(i(t("@barba/css")),i(t("@barba/prefetch"))),s=i(t("../util/ReplaceHeadTags")),u=i(t("../util/SmoothScroll")),c=i(t("../common/navi/Navi")),l=i(t("../Config")),h=i(t("./LangLink")),f=i(t("./Header")),p=i(t("./PageArticleAnim")),d=i(t("./PageAboutAnim")),m=(i(t("./navi/util/Dat")),i(t("./Cursor"))),v=function g(){function t(){a["default"].use(o["default"]),a["default"].init({timeout:5e3,debug:!1,views:[{namespace:"home",beforeLeave:function(t){}},{namespace:"article",beforeLeave:function(t){}},{namespace:"about",beforeLeave:function(t){},beforeEnter:function(){v.lineAnimation.active()},afterLeave:function(){}}],transitions:[{name:"default-transition",once:function(t){var e=(t.current,t.next);switch(e.namespace){case"home":v.viewTop().then(function(){N(e)});break;case"article":S=e.container.getAttribute("data-page-namespace"),v.sceneMoveSmooth("article"),v.viewNavi(S).then(function(){N(e)});break;case"about":v.sceneMoveSmooth("about"),v.viewAbout().then(function(){N(e)})}(0,h["default"])(document.querySelector("html").getAttribute("lang"),e.url.path)},beforeLeave:function(t){var e=t.current;t.next;y.bendOn(),k(!0),l["default"].isTransition=!0;var n=y.active(-1);switch(_.active(n),i.hideCenterCotents(),y.articleHeaderToggle(!1),D(e.container,!1),T=null,e.namespace){case"home":break;case"article":var r=(e.container.getAttribute("data-page-namespace"),y.getPaperByName(S));return new Promise(function(t){r.zoomOut({delay:0,duration:C?2:1.5}),setTimeout(function(){t()},500)});case"about":}},leave:function(t){t.current,t.next;return v.changeBgColor("default"),R()},beforeEnter:function(t){var e=(t.current,t.next);switch("about"==e.namespace&&v.lineAnimation.active(),F=(0,s["default"])(e),S=e.container.getAttribute("data-page-namespace"),e.namespace){case"article":P=y.getPaperColor(S);break;default:P=l["default"].color[e.namespace]}return(0,h["default"])(F.lang,e.url.path),b.changeColor(P),new Promise(function(t){if("article"==e.namespace){y.getPaperByName(S);y.jump(S,{delay:.5,duration:1.5}),setTimeout(function(){t()},C?0:1e3)}else t()})},enter:function(t){var e=(t.current,t.next);return new Promise(function(t){v.sceneMoveSmooth(e.namespace,{duration:1.5}).then(function(){switch(e.namespace){case"home":F.changed&&y.changeTxuture(F.lang),N(e),t();break;case"article":var n=e.container.getAttribute("data-page-namespace"),i=y.getPaperByName(n);F.changed&&y.changeTxuture(F.lang),i.zoomIn({delay:F.changed?1:0}).then(function(){N(e),t(),C&&(C=!1)});break;case"about":F.changed&&y.changeTxuture(F.lang),N(e),t()}})})},afterEnter:function(t){var e=t.current,n=t.next;"about"==e.namespace&&"about"!=n.namespace&&v.lineAnimation.inActive(),l["default"].isTransition=!1,w.update(),window.dispatchEvent(new Event("resize"))}}]})}function e(){C||(C=!0,D(T,!1),document.body.classList.add("-inNaviMode"),b.changeMode("loading"),E&&E.zoomOut(),v.changeBgColor("default",{duration:.5}),v.sceneMoveSmooth("navi"),y.active(-1),_.active(-1),i.hideElement("naviOpen"),y.articleHeaderToggle(!0),i.changeColor("black"),y.bendOff().then(function(){b.changeMode("home"),setTimeout(function(){i.showElement("naviClose")},500)}))}function n(){C=!1,v.sceneMoveSmooth("article",{duration:1.5}),y.bendOn(),i.hideElement("naviClose"),y.articleHeaderToggle(!1),y.jump(S,{delay:0,duration:1}),E.zoomIn({delay:1}).then(function(){y.active(S),D(T,!0),b.changeMode("article"),setTimeout(function(){i.showElement("naviOpen")},500),v.changeBgColor("article",{duration:.5}),_.active(L),A.status.inHistory&&(i.changeColor("white"),A.setOpacity())}),document.body.classList.remove("-inNaviMode")}if(r(this,g),g.instance)return g.instance;g.instance=this,l["default"].currentLang=document.querySelector("html").getAttribute("lang");var i=new f["default"],v=new c["default"],y=v.papers,_=v.histories,x=document.body,b=new m["default"],w=new u["default"],M="",S="",A=null,T=null,P="#ddd",L=-1,E=null,O=!1,C=!1,F={lang:l["default"].currentLang,changed:!1};v.ready().then(function(){return v.load()}).then(function(){t()}),v.renderStart();var I=document.querySelectorAll("a[href]");I.forEach(function(t){t.addEventListener("click",function(t){t.currentTarget.href===window.location.href&&(t.preventDefault(),t.stopPropagation())})}),i.on("naviOpen",function(){O||C||(e(),O=!0,setTimeout(function(){O=!1},2e3))}),i.on("naviClose",function(){!O&&C&&(n(),O=!0,setTimeout(function(){O=!1},2e3))});var N=function(t){switch(M=t.namespace,document.body.classList.remove("-inNaviMode"),w.destroy(),w.set(t.container.querySelector("[data-scroll-container]")),window.scrollTo(0,0),i.changeColor("black"),i.show(),t.namespace){case"home":i.showElement("message"),y.articleHeaderToggle(!0);break;case"article":i.showElement("naviOpen"),D(t.container,!0),A=(0,p["default"])(S,t.container,w._scroll);break;case"about":i.showElement("backToTop"),D(t.container,!0),A=(0,d["default"])(t.container)}if("article"==t.namespace){v.changeBgColor("article",{duration:.5}),T=t.container;var e=t.container.getAttribute("data-page-namespace"),n=y.active(e);E=y.getPaperByName(e),_.active(n),L=n}else v.changeBgColor("default",{duration:.5});l["default"].isTransition=!1,k(!1,t.namespace)},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?t.classList.remove("-hide"):t.classList.add("-hide")},R=function(){if(A)return A.destroy()},k=function(t,e){t?(x.classList.add("-inLoading"),b.changeMode("loading")):(x.classList.remove("-inLoading"),b.changeMode(e))};return g.instance=this,g.instance};n["default"]=v},{"../Config":92,"../common/navi/Navi":108,"../util/ReplaceHeadTags":128,"../util/SmoothScroll":130,"./Cursor":93,"./Header":94,"./LangLink":95,"./PageAboutAnim":96,"./PageArticleAnim":97,"./navi/util/Dat":120,"@barba/core":1,"@barba/css":2,"@barba/prefetch":3}],99:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=(i(t("./objects/LineGenerator")),i(t("./objects/AnimatedMeshLine"))),c=i(t("../../Config")),l=(i(t("../navi/util/Dat")),i(t("./utils/getRandomFloat"))),h=function(){function t(){if(r(this,t),t.instance)return t.instance;this.container=new s.Object3D,this.line=null,this.lines=[];for(var e=c["default"].naviColors.map(function(t){return new s.Color(t)}),n=20,i=0;i<n;i++){var a=e[i%e.length],o=new u["default"]({nbrOfPoints:5,length:(0,l["default"])(50,70),visibleLength:(0,l["default"])(.05,.15),color:a,opacity:.5,lineWidth:(0,l["default"])(.5,1.5),position:new s.Vector3((0,l["default"])(-5,-2),(0,l["default"])(-2,-2),0).multiplyScalar((0,l["default"])(10,10)),turbulence:new s.Vector3((0,l["default"])(-4,2),(0,l["default"])(-1,1),(0,l["default"])(-10,10)),orientation:new s.Vector3((0,l["default"])(-.2,2.8),(0,l["default"])(1,2.8),(0,l["default"])(-.8,.8)),speed:(0,l["default"])(.001,.004)});this.lines[i]=o,this.container.add(o),o.position.z=480}return this.container.visible=!1,t.instance=this,this}return o(t,[{key:"active",value:function(){this.container.visible=!0}},{key:"inActive",value:function(){this.container.visible=!1}},{key:"update",value:function(){"about"==c["default"].currentScene&&this.lines.forEach(function(t,e){t.update()})}}]),t}();n["default"]=h},{"../../Config":92,"../navi/util/Dat":120,"./objects/AnimatedMeshLine":100,"./objects/LineGenerator":101,"./utils/getRandomFloat":102,three:89}],100:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r);
}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var m=t("three"),v=t("three.meshline"),g=i(t("../utils/getRandomFloat")),y=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.width,o=void 0===r?.1:r,s=i.speed,u=void 0===s?.01:s,c=i.visibleLength,l=void 0===c?.5:c,h=i.color,p=void 0===h?new m.Color("#000000"):h,d=i.opacity,y=void 0===d?1:d,_=i.position,x=void 0===_?new m.Vector3(0,0,0):_,b=i.points,w=void 0!==b&&b,M=i.length,S=void 0===M?2:M,A=i.nbrOfPoints,T=void 0===A?3:A,P=i.orientation,L=void 0===P?new m.Vector3(1,0,0):P,E=i.turbulence,O=void 0===E?new m.Vector3(0,0,0):E,C=i.transformLineMethod,F=void 0!==C&&C;a(this,e);var I=[];if(w)I=w;else{var N=new m.Vector3,D=L.normalize().multiplyScalar(S/T);I.push(N.clone());for(var R=0;R<T-1;R++)N.add(D),I.push(N.clone().set(N.x+(0,g["default"])(-O.x,O.x),N.y+(0,g["default"])(-O.y,O.y),N.z+(0,g["default"])(-O.z,O.z)));I.push(N.add(D).clone());var k=new m.SplineCurve(I);I=(new m.Geometry).setFromPoints(k.getPoints(100))}var z=new v.MeshLine;z.setGeometry(I,F);var U=z.geometry,B=2,j=0,G=1-.5*l,V=new v.MeshLineMaterial({lineWidth:o,dashArray:B,dashOffset:j,dashRatio:G,opacity:y,transparent:!0,depthWrite:!1,color:p});return t=n.call(this,U,V),t.position.copy(x),t.speed=u,t.voidLength=B*G,t.dashLength=B-t.voidLength,t.dyingAt=1,t.diedAt=t.dyingAt+t.dashLength,t.update=t.update.bind(f(t)),t}u(e,t);var n=l(e);return s(e,[{key:"update",value:function(){this.material.uniforms.dashOffset.value-=this.speed,this.isDied()&&(this.material.uniforms.dashOffset.value=0),this.isDying()}},{key:"isDied",value:function(){return this.material.uniforms.dashOffset.value<-this.diedAt}},{key:"isDying",value:function(){return this.material.uniforms.dashOffset.value<-this.dyingAt}}]),e}(m.Mesh);n["default"]=y},{"../utils/getRandomFloat":102,three:89,"three.meshline":88}],101:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var m=t("three"),v=i(t("./AnimatedMeshLine")),g=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.frequency,o=void 0===r?.1:r,s=arguments.length>1?arguments[1]:void 0;return a(this,e),t=n.call(this),t.frequency=o,t.lineStaticProps=s,t.isStarted=!1,t.i=0,t.lines=[],t.nbrOfLines=-1,t.update=t.update.bind(f(t)),t.start=t.start.bind(f(t)),t.start=t.start.bind(f(t)),t.stop=t.stop.bind(f(t)),t}u(e,t);var n=l(e);return s(e,[{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(t){this.isStarted=!1}},{key:"addLine",value:function(t){var e=new v["default"](Object.assign({},this.lineStaticProps,t));return this.lines.push(e),this.add(e),this.nbrOfLines++,e}},{key:"removeLine",value:function(t){this.remove(t),this.nbrOfLines--}},{key:"update",value:function(){for(this.isStarted&&Math.random()<this.frequency&&this.addLine(),this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].update();var t=[];for(this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].isDied()?this.removeLine(this.lines[this.i]):t.push(this.lines[this.i]);this.lines=t}}]),e}(m.Object3D);n["default"]=g},{"./AnimatedMeshLine":100,three:89}],102:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var i=function(t,e){return Math.random()*(e-t)+t};n["default"]=i},{}],103:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var m=t("three"),v=i(t("events")),g=i(t("lodash/debounce")),y=(t("./util/OrbitControls"),i(t("./util/Dat")),i(t("scream"))),_=t("../../util/UA")(),x=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,e),i=n.call(this),i.scream=(0,y["default"])({viewport:!1,width:{portrait:screen.width,landscape:screen.height}}),i.stage={width:window.innerWidth,height:_.isIOS?i.scream.getScreenHeight():window.innerHeight},i.stage.aspect=i.stage.width/i.stage.height,i.stage.distHeight=i.stage.height-window.innerHeight,i.config={camera_fov:75,camera_near:1,camera_far:1e3,camera_rot_x:0,camera_rot_y:0,camera_rot_z:0,gui:!0,render_antialias:!1,render_alpha:!0,render_pixelRatio:window.devicePixelRatio>1?1.5:1,render_clearColor:16777215,render_clearColorAlpha:1,render_renderAuto:!0,render_shadowMap_enabled:!1,helper:!0,cameraControl:!1,cameraControlType:0,cameraControlTarget:null,cameraHelper:!1,shadowMap_Enabled:!1,stats:!0,debugMode:!1,option:null},i.isRender=!1,i.renderObjects={},i.resizeObject=[],i.helpers={},i.lookAt=!1,i.lookAtTarget=new m.Vector3(0,0,0),i.config=Object.assign(i.config,r),i.scene=new m.Scene,i.camera=new m.PerspectiveCamera(i.config.camera_fov,i.stage.aspect,i.config.camera_near,i.config.camera_far),i.camera.rotation.set(i.config.camera_rot_x,i.config.camera_rot_y,i.config.camera_rot_z),i.renderer=new m.WebGLRenderer({antialias:i.config.render_antialias,alpha:i.config.render_alpha}),i.renderer.setPixelRatio(i.config.render_pixelRatio),i.renderer.setClearColor(i.config.render_clearColor,i.config.render_clearColorAlpha),i.renderer.setSize(i.stage.width,i.stage.height),i.renderer.shadowMap.enabled=i.config.render_shadowMap_enabled,i.$container=document.querySelector(t),i.$container&&i.$container.append(i.renderer.domElement),i.resize=(0,g["default"])(i.resize.bind(f(i)),30),window.addEventListener("resize",i.resize),i.config.stats,i}u(e,t);var n=l(e);return s(e,[{key:"addRenderObject",value:function(t,e){this.renderObjects.hasOwnProperty(t)||(this.renderObjects[t]=e)}},{key:"removeRenderObject",value:function(t){this.renderObjects.hasOwnProperty(t)&&delete this.renderObjects[t]}},{key:"resize",value:function(){var t=this;_.isIOS&&window.innerWidth==this.stage.width||(this.stage.width=window.innerWidth,this.stage.height=window.innerHeight,this.stage.distHeight=0,_.isIOS&&(this.stage.height=this.scream.getScreenHeight(),this.stage.distHeight=this.stage.height-window.innerHeight),this.stage.aspect=this.stage.width/this.stage.height,this.camera.aspect=this.stage.aspect,this.camera.updateProjectionMatrix(),this.resizeObject.forEach(function(e){e.resize(t.stage.width,t.stage.height)}),this.renderer.setSize(this.stage.width,this.stage.height))}},{key:"renderStart",value:function(){this.isRender||(this.isRender=!0,requestAnimationFrame(this.render.bind(this)))}},{key:"rednerStop",value:function(){this.isRender=!1}},{key:"render",value:function(){for(var t in this.renderObjects)this.renderObjects[t]();this.isRender&&requestAnimationFrame(this.render.bind(this))}}]),e}(v["default"]);n["default"]=x},{"../../util/UA":132,"./util/Dat":120,"./util/OrbitControls":121,events:6,"lodash/debounce":69,scream:86,three:89}],104:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=i(t("./History")),c=(i(t("./util/Dat")),function(){function t(e,n){r(this,t),this.container=new s.Object3D,this.container.name="Histories",this.naviList=e,this.list=[],this.loaders=[],this.setGui(),this.activeID=-1}return o(t,[{key:"load",value:function(){var t=this;return this.naviList.forEach(function(e,n){var i=new u["default"](n,e);t.list[n]=i,t.container.add(i.container),t.loaders=t.loaders.concat(i.load())}),this.loaders}},{key:"setGui",value:function(){}},{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.list.forEach(function(t){t.update()})}},{key:"active",value:function(t){this.activeID=t,this.list.forEach(function(e,n){t==-1?(e.container.visible=!0,e.setMonochrome(1),e.setScale(1),e.setOpacity(1)):t==n?(e.container.visible=!0,e.setMonochrome(0),e.setScale(2),e.setOpacity(.2)):(e.container.visible=!1,e.setOpacity(1))})}}]),t}());n["default"]=c},{"./History":105,"./util/Dat":120,three:89}],105:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=i(t("./Plane")),c=i(t("../../Config")),l=t("gsap"),h=function(){function t(e,n){r(this,t),this.id=e,this.naviIndex=n.getAttribute("data-navi-index"),this.monochrome=1,this.opacity=1,this.container=new s.Object3D,this.planes=[],this.loaders=[],this.dataDom=n}return o(t,[{key:"load",value:function(){for(var t=this,e=this.dataDom.getAttribute("data-page-assets-path"),n=this.dataDom.getAttribute("data-page-history-legnth"),i=(this.dataDom.getAttribute("data-page-color"),function(i){var r=new u["default"]({transparent:!0,color:new s.Color(13421772)}),a=i+1<10?"0"+(i+1):i+1;t.loaders[i]=r.load(e+"history_".concat(a,".png")).then(function(){r.resizeGeomery(),r.resetViewPort(c["default"].scenePosition.history.position.z),r.container.position.z=-i*(200+100*Math.random()),r.container.position.x=window.innerWidth*Math.random()-.5*window.innerWidth,r.container.position.y=-(r.viewArea.height/n+1.5*r.size.height)*i+r.viewArea.height*Math.random()}),t.planes[i]=r,t.container.add(r.container)}),r=0;r<n;r++)i(r);return this.loaders}},{key:"resize",value:function(){}},{key:"update",value:function(t){var e=this;("about"!=c["default"].currentScene||c["default"].isTransition)&&this.planes.forEach(function(n,i){var r=n.container.position,a=n.mesh.material.uniforms;n.resetViewPort(),r.y+=2,r.y>n.viewArea.height&&(r.y=-n.viewArea.height),a.opacity.value=t,a.opacity2.value=e.opacity,a.monochrome.value=e.monochrome})}},{key:"setMonochrome",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l.TweenLite.to(this,e,{monochrome:t,ease:l.Power2.easeOut})}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.container.scale.set(t,t,t)}},{key:"setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l.TweenLite.to(this,e,{opacity:t,ease:l.Power2.easeOut})}}]),t}();n["default"]=h},{"../../Config":92,"./Plane":111,gsap:7,three:89}],106:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=i(t("../../Config")),c=(i(t("./Intro_Lion")),i(t("./util/Dat")),i(t("./Paper"))),l=(t("lodash"),t("gsap")),h=t("../../util/UA")(),f=function(){function t(e){r(this,t);u["default"].stageSize;this.container=new s.Object3D,this.textContainer=new s.Object3D,this.paperContainer=new s.Object3D,this.container.name="Intro",this.container.add(this.paperContainer),this.isKilled=!1,this.$introContents=document.querySelector(".introContents"),this.naviList=e,this.mouse={x:0,y:0},this.mouseAcc={x:0,y:0};this.paperTotal=u["default"].sceneOffset.intro.papers,this.papers=[],this.loaders=[],this.paperCenter=new s.Vector3(0,0,0),this.paperOption={spreadTime:u["default"].animation.intro.spreadTime,width:360,height:500,segments:10,shaderMaterial:!0,side:s.DoubleSide},this.count=0,this.toRad=Math.PI/180,this.paperMargin=.4,this.animOffset={centerX:1e4,centerY:-1e4,centerZ:-1e4,rotX:500,rotY:273,rotZ:1440,disX:7e3,disY:3300,disZ:3500,amp:8.5,ampFriction:.9,timeSpeed:.003,delay:50},h.isSmartPhone?this.paperContainer.position.set(0,-400,-800):this.paperContainer.position.set(0,-300,-500),this.paperContainer.rotation.set(-1.256,0,.8203),this.paperContainer.scale.set(1.5,1.5,1.5),this.paperCenter.set(0,0,1e4),window.addEventListener("mousemove",this.onMoseMove.bind(this))}return o(t,[{key:"onMoseMove",value:function(t){var e=t.clientX,n=t.clientY;this.mouse.x=e/window.innerWidth*2-1,this.mouse.y=2*-(n/window.innerHeight)+1}},{key:"load",value:function(){for(var t=this,e=(new s.Vector3,360/u["default"].sceneOffset.intro.papers,(Math.sqrt(5)+1)/2-1),n=(2*e*Math.PI,function(e){var n=e%t.naviList.length,i=t.naviList[n],o=i.getAttribute("data-page-assets-path"),u=(i.getAttribute("data-page-thumb"),i.getAttribute("data-page-name"),i.getAttribute("data-page-color"));t.paperOption.isBackFaceColor=!0,t.paperOption.backFaceColor=new s.Color(u);var l=new c["default"](t.paperOption);l.container.position,l.container.rotation;l.lookTarget=new s.Vector3(0,0,0);l.mesh.geometry.attributes.position.array;r=Math.acos(-1+2*e/t.paperTotal),a=Math.sqrt(t.paperTotal*Math.PI)*r,l.container.position.setFromSphericalCoords(200,r,a),l.container.position.copy(l.container.position).multiplyScalar(2),l.phi=r,l.theta=a,l.oldPosition=new s.Vector3,l.velocity={x:4*Math.random()-2,y:0,vx:0,vy:0,vz:0,sx:.2+.1*Math.random(),sy:.2+.1*Math.random(),sz:2*Math.random()+2,progress:0,time:0,direction:1,timeSpeed:.1,rot:.5*(2*Math.random()-1)*Math.PI/180},l.resetAnimOffset=function(){l.animOffset=Object.assign({},t.animOffset);var e=Math.random()<.2?-1:1;l.animOffset.centerX=t.animOffset.centerX*Math.random(),l.animOffset.centerY=t.animOffset.centerY*Math.random(),l.animOffset.centerZ=t.animOffset.centerZ*Math.random(),l.animOffset.rotY*=e,l.animOffset.disX+=1e3*(10*Math.random()-5),l.animOffset.disY+=1e3*(10*Math.random()-5),l.animOffset.disZ+=2*Math.random()*500},l.resetAnimOffset(),l.free=!1,t.papers[e]=l,t.paperContainer.add(l.container),t.loaders.push(l.load([o+"thumb.jpg",o+"thumb_en.jpg"]).then(function(){}))}),i=0;i<u["default"].sceneOffset.intro.papers;i++){var r,a;n(i)}return this.loaders}},{key:"reset",value:function(){this.papers.forEach(function(t,e){t.velocity.progress=0,t.free=!1,t.resetAnimOffset(),t.freeTimer&&clearTimeout(t.freeTimer)})}},{key:"spread",value:function(){var t=this;return new Promise(function(e){t.papers.forEach(function(n,i){n.velocity.progress=0,n.free=!1,n.resetAnimOffset(),n.freeTimer&&clearTimeout(n.freeTimer),n.freeTimer=setTimeout(function(){n.free=!0,i==t.papers.length-1&&(t.spreadTimer=setTimeout(e,1e3*t.paperOption.spreadTime*.5))},(t.paperTotal-i)*t.animOffset.delay)}),l.TweenLite.to(t.paperContainer.position,3,{y:-700,ease:l.Power3.easeInOut})})}},{key:"showTitle",value:function(){this.$introContents.classList.remove("-hide")}},{key:"hideTitle",value:function(){this.$introContents.classList.add("-hide")}},{key:"hide",value:function(){this.container.visible=!1}},{key:"kill",value:function(){this.isKilled=!0,this.$introContents.parentElement.removeChild(this.$introContents),u["default"].scene.remove(this.container),this.papers.forEach(function(t,e){t.kill()}),this.papers=null,window.removeEventListener("mousemove",this.onMoseMove)}},{key:"resise",value:function(){}},{key:"update",value:function(){var t=this;if(!this.isKilled){var e=new s.Vector3,n=this.paperContainer.position.clone();n.add(this.paperCenter),this.mouseAcc.x+=.05*(this.mouse.x-this.mouseAcc.x),this.paperContainer.rotation.z=.8203-.2*this.mouseAcc.x,this.papers.forEach(function(i,r){var a=i.velocity;i.free?(a.progress+=1/t.paperOption.spreadTime/60,a.progress>1&&(a.progress=1,i.free=!1,i.resetAnimOffset())):(a.vx=0,a.vy=0,a.vz=0,a.time=0,i.container.position.x=a.vx,i.container.position.y=a.vy,i.container.position.z=r*t.paperMargin*10),a.vx=Math.sin(a.progress*i.animOffset.rotX*t.toRad)*i.animOffset.disX*a.progress,a.vy=Math.sin(a.progress*i.animOffset.rotY*t.toRad)*i.animOffset.disY*a.progress,a.vz=i.animOffset.disZ*a.progress,i.container.position.x=a.vx,i.container.position.y=a.vy,i.container.position.z=a.vz+r*t.paperMargin*10;var o=i.oldPosition.distanceTo(i.container.position);e.subVectors(i.oldPosition,i.container.position),e.normalize(),i.mesh.material.uniforms.time.value+=Math.min(1,Math.abs(o)*t.animOffset.timeSpeed),i.mesh.material.uniforms.ampX.value+=e.x*t.animOffset.amp,i.mesh.material.uniforms.ampY.value+=e.y*t.animOffset.amp,i.mesh.material.uniforms.ampX.value*=t.animOffset.ampFriction,i.mesh.material.uniforms.ampY.value*=t.animOffset.ampFriction,i.oldPosition.copy(i.container.position),n.x+=i.animOffset.centerX*a.progress,n.y+=i.animOffset.centerY*a.progress,n.z+=i.animOffset.centerZ*a.progress,i.container.lookAt(n),i.mesh.rotation.copy(t.paperContainer.rotation)})}}}]),t}();n["default"]=f},{"../../Config":92,"../../util/UA":132,"./Intro_Lion":107,"./Paper":109,"./util/Dat":120,gsap:7,lodash:76,three:89}],107:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=i(t("../../Config")),u=t("three"),c=(i(t("./util/Dat")),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1024,height:1122};r(this,t),this.texture=null;var n=(s["default"].stageSize,new u.PlaneBufferGeometry(e.width,e.height,1)),i=new u.ShaderMaterial({uniforms:{uTexture:{value:this.texture},distortion:{value:0},loaded:{value:0},lionAspect:{value:e.width/e.height}},vertexShader:"\n        varying vec2 vUv;\n        void main(){\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position , 1.0);\n        }\n      ",fragmentShader:"\n        varying vec2 vUv;\n\n        uniform sampler2D uTexture;\n        uniform float distortion;\n        uniform float loaded;\n        uniform float lionAspect;\n\n        void main(){\n          vec4 tColor = vec4(1.0);\n          vec4 lionColor = vec4(1.0);\n\n          vec2 newUV = vUv;\n          vec2 lionUV = vUv;\n\n  \t\t\t\t// newUV -= vec2(0.5,0.5);\n  \t\t\t\t// newUV *= vec2(pow(length(newUV),distortion));\n          // newUV += vec2(0.5,0.5);\n          \n          float alpha = 1.0;\n          if(loaded == 1.) {\n            \n            lionColor = texture2D(uTexture , lionUV);\n\n          } \n\n          if(lionColor.r == 1.){\n            tColor.a = 0.0;\n          }\n          \n          gl_FragColor = lionColor;\n          \n        }\n      ",transparent:!0});this.mesh=new u.Mesh(n,i),this.mesh.position.set(0,0,0)}return o(t,[{key:"load",value:function(){var t=this;return new Promise(function(e){t.texture=(new u.TextureLoader).load(s["default"].assetPath+"images/lion.png",function(n){n.minFilter=u.LinearFilter;var i=t.mesh.material.uniforms;i.uTexture.value=n,i.loaded.value=1,t.mesh.material.needsUpdate=!0,e()})})}},{key:"resize",value:function(){}}]),t}());n["default"]=c},{"../../Config":92,"./util/Dat":120,three:89}],108:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=d();return function(){var n,i=m(t);if(e){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var v=i(t("./Base3D")),g=i(t("../../util/DragAndDropSmooth")),y=i(t("@barba/core")),_=(i(t("@barba/css")),t("three")),x=t("gsap"),b=i(t("./Intro")),w=i(t("./Papers")),M=i(t("./Histories")),S=i(t("../../Config")),A=i(t("../../util/GetLanguage")),T=i(t("../lineAnim/LineAnimation")),P=i(t("../Cursor")),L=i(t("../Header")),E=t("./postprocessing/EffectComposer.js"),O=t("./postprocessing/RenderPass.js"),C=t("./postprocessing/ShaderPass.js"),F=t("./shader/LionMaskShader.js"),I=t("./shader/FXAAShader.js"),N=t("../../util/UA")(),D=function(t){function e(){var t;if(o(this,e),e.instance)return f(t,e.instance);var i=document.querySelector("#webglContent");t=n.call(this,"#webglContent",{camera_far:5e3,debugMode:!1,cameraHelper:!1,stats:!1,render_renderAuto:!1}),t.scene.background=S["default"].backgroundColors["default"].clone(),t.renderer.autoColor=!1,t.option={maskOpacity:1},t.mouse={x:0,y:0},t.tweeners={},t.header=new L["default"],t.$nav=document.querySelector("nav"),t.$webglContent=i,S["default"].base3D=p(t),S["default"].scene=t.scene,S["default"].stageSize=t.stage,S["default"].camera=t.camera,S["default"].renderer=t.renderer,S["default"].computeZ=function(e,n,i){var r=t.camera.fov*Math.PI/180,a=2*Math.tan(r/2),o=n*t.stage.height,s=e*a,u=i*a,c=i*s,l=o+c,h=l/u;return h},t.dnd=new g["default"](t.$webglContent,N.isPC?{power:.2,friction:.93,wheel:!0}:{power:.6,friction:.94});var r=Array.from(document.querySelectorAll("[data-navi-list]"));r=r.splice(Math.round(.5*r.length)).concat(r),r.forEach(function(t,e){var n=t.getAttribute("data-page-color");S["default"].naviColors[e]=n}),t.cursor=new P["default"],t.intro=new b["default"](r),t.intro.container.position.copy(S["default"].scenePosition.intro.position),t.scene.add(t.intro.container),t.papers=new w["default"](r),t.papers.container.position.copy(S["default"].scenePosition.home.position),t.scene.add(t.papers.container),t.histories=new M["default"](r,t.papers.papers),t.histories.container.position.copy(S["default"].scenePosition.history.position),t.scene.add(t.histories.container),t.papers.histories=t.histories.list,t.lineAnimation=new T["default"](r),t.lineAnimation.container.position.copy(S["default"].scenePosition.about.position),t.scene.add(t.lineAnimation.container),t.raycaster=new _.Raycaster,t.intersectedObject=null,t.mouseDownTimeCheck=null,t.intersectObject=function(e,n,i){t.mouse.x=e/t.stage.width*2-1,t.mouse.y=2*-(n/t.stage.height)+1,t.raycaster.setFromCamera(t.mouse,t.camera);var r=t.raycaster.intersectObjects(i),a=null;return r.length>0&&(a=r[0].object),a},i.addEventListener("mousedown",function(e){t.intersectedObject=a(e),t.mouseDownTimeCheck=new Date}),i.addEventListener("mouseup",function(e){var n=new Date-t.mouseDownTimeCheck;if(!(n>S["default"].mouseDownUpThresholdTime)){var i=a(e);if(null!==t.intersectedObject&&null!==i&&t.intersectedObject._name==i._name){if(S["default"].isTransition)return;var r="en"==(0,A["default"])().document?i._hrefEn:i._href;r+"/"==window.location.pathname?t.header.emit("naviClose"):y["default"].go(r)}}}),i.addEventListener("mousemove",function(e){var n=a(e);n?i.classList.contains("-hover")||(i.classList.add("-hover"),t.cursor.changeScale("big")):i.classList.contains("-hover")&&(i.classList.remove("-hover"),t.cursor.changeScale("normal"))});var a=function(e){var n=e.clientX,i=e.clientY;return t.intersectObject(n,i,t.papers.eventTargets)};t.renderPass=new O.RenderPass(t.scene,t.camera),t.fxaaPass=new C.ShaderPass(I.FXAAShader),t.lionPass=new C.ShaderPass(F.LionMaskShader),t.lionPass.uniforms.resolution.value.x=S["default"].stageSize.width,t.lionPass.uniforms.resolution.value.y=S["default"].stageSize.height;var s=t.renderer.getPixelRatio();return t.fxaaPass.material.uniforms.resolution.value.x=1/(t.renderer.domElement.offsetWidth*s),t.fxaaPass.material.uniforms.resolution.value.y=1/(t.renderer.domElement.offsetHeight*s),t.composer=new E.EffectComposer(t.renderer),t.composer.addPass(t.renderPass),t.composer.addPass(t.lionPass),t.composer.addPass(t.fxaaPass),t.addRenderObject("navi",function(){t.infoText="";var e=t.dnd.update();S["default"].isTransition&&(e.x=0,e.y=0),t.papers.update(e),t.composer.render(),t.intro.update(t.mouse),t.cursor.update(),t.lineAnimation.update(),t.lionPass.uniforms.time.value+=.01}),t.resizeObject.push({resize:function(e,n){t.onResize(e,n)}}),t.onResize(t.stage.width,t.stage.height),e.instance=p(t),f(t,e.instance)}c(e,t);var n=h(e);return u(e,[{key:"ready",value:function(){var t=this;return new Promise(function(e){(new _.TextureLoader).load(S["default"].assetPath+"images/lion.png",function(n){t.lionPass.uniforms.tMask.value=n,e()})})}},{key:"load",value:function(){var t=this;if(!this.isLoading)return this.isLoading=!0,new Promise(function(e){function n(t,e){var n=0;return e(0),t.forEach(function(i){i.then(function(){n++,e(n/t.length)})}),Promise.all(t)}var i=[];i=i.concat(t.intro.load()),i=i.concat(t.papers.load()),i=i.concat(t.histories.load()),n(i,function(e){t.cursor.loading(e)}).then(function(){setTimeout(function(){N.isPC?t.cursor.changeMode("loading"):t.cursor.close()},500),t.isLoading=!1,e()})})}},{key:"changeBgColor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{duration:1,delay:0};return new Promise(function(i){var r={duration:1,delay:0,ease:x.Power3.easeOut,onComplete:i};Object.assign(r,n),Object.assign(r,S["default"].backgroundColors[e]),t.tweeners.bgColor&&t.tweeners.bgColor.kill(),t.tweeners.bgColor=x.TweenLite.to(t.scene.background,r.duration,r)})}},{key:"viewTop",value:function(){var t=this;return new Promise(function(e){var n=S["default"].animation.intro.spreadTime;t.sceneMove("intro"),t.maskView({duration:1,delay:.1}).then(function(){t.intro.showTitle(),t.contentsView({delay:2}),setTimeout(function(){t.intro.hideTitle()},4e3),t.maskHide({delay:3}).then(function(){return t.sceneMoveSmooth("home",{duration:S["default"].animation.navi.duration}),t.intro.spread({duration:n})}).then(function(){t.papers.intro().then(function(){e(),t.intro.kill()})})})})}},{key:"viewNavi",value:function(t){var e=this;return new Promise(function(n){e.intro.kill(),e.sceneMove("navi"),e.contentsView({delay:0}),e.maskHide({delay:2}),e.maskView({duration:1,delay:0}).then(function(){return e.papers.intro(t,!0)}).then(function(){n()})})}},{key:"viewAbout",value:function(){var t=this;return new Promise(function(e){t.intro.kill(),t.contentsView({delay:0}),t.maskView({duration:1,delay:0}),t.maskHide({delay:.5}).then(function(){e()}),t.papers.intro()})}},{key:"sceneMove",value:function(t){S["default"].currentScene!=t&&(S["default"].currentScene=t,this.camera.position.z=S["default"].scenePosition[t].camera.z);
}},{key:"sceneMoveSmooth",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i){var r=S["default"].scenePosition[t].camera;if(t==S["default"].currentScene||r.z==e.camera.position.z)return i();var a=Object.assign({duration:2,ease:x.Power4.easeInOut},n);e.tweeners.sceneMove&&e.tweeners.sceneMove.kill(),e.tweeners.sceneMove=x.TweenLite.to(e.camera.position,a.duration,{x:r.x,y:r.y,z:r.z,delay:0,ease:a.ease,onComplete:function(){i(),e.sceneMove(t)}})})}},{key:"maskView",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return this.lionPass.uniforms.scale.value=S["default"].lionScale,new Promise(function(e){var i;x.TweenLite.to(t.lionPass.uniforms.maskOpacity,n.duration,(i={delay:.3,value:1},a(i,"delay",n.delay),a(i,"ease",x.Power2.easeInOut),a(i,"onComplete",e),i)),x.TweenLite.to(t.lionPass.uniforms.scale,n.duration,{value:S["default"].lionScale,delay:n.delay,ease:x.Power1.easeInOut})})}},{key:"maskHide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){x.TweenLite.to(t.lionPass.uniforms.maskOpacity,n.duration,{value:0,delay:n.delay,ease:x.Power1.easeInOut,onComplete:e}),x.TweenLite.to(t.lionPass.uniforms.scale,2*n.duration,{value:.35,delay:n.delay,ease:x.Power1.easeInOut,onComplete:e})})}},{key:"contentsView",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){x.TweenLite.to(t.lionPass.uniforms.opacity,n.duration,{value:1,delay:n.delay,ease:x.Power1.easeInOut,onComplete:e})})}},{key:"contentsHide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){x.TweenLite.to(t.lionPass.uniforms.opacity,n.duration,{value:0,delay:n.delay,ease:x.Power1.easeInOut,onComplete:e})})}},{key:"changeNoise",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({duration:2,delay:0,noise:.05},t);x.TweenLite.to(this.lionPass.uniforms.noiseIntensity,e.duration,{value:e.noise,ease:x.Power1.easeInOut})}},{key:"onResize",value:function(t,e){this.composer.setSize(t,e);var n=this.renderer.getPixelRatio();this.fxaaPass.material.uniforms.resolution.value.x=1/(t*n),this.fxaaPass.material.uniforms.resolution.value.y=1/(e*n),this.scene.position.y=this.stage.distHeight,N.isIOS&&window.innerWidth<720&&(this.scene.position.y+=-window.innerWidth/720*50);var i=t<720?t/720:1;if(this.lionPass.uniforms.lionPosition.value.y=.8*-this.stage.distHeight,N.isSmartPhone){var r=2012/1920;this.lionPass.uniforms.resolution.value.x=.5*t,this.lionPass.uniforms.resolution.value.y=.5*e,this.lionPass.uniforms.lionResolution.value.x=t,this.lionPass.uniforms.lionResolution.value.y=t*r}else{var a=1920/2012;this.lionPass.uniforms.resolution.value.x=1*t/i,this.lionPass.uniforms.resolution.value.y=1*e/i,this.lionPass.uniforms.lionResolution.value.x=e*a,this.lionPass.uniforms.lionResolution.value.y=e}for(var o in S["default"].scenePosition){var s=S["default"].scenePosition[o];s.camera.x=s.position.x,s.camera.y=s.position.y,s.camera.z=S["default"].computeZ(s.position.z,s.height+this.stage.distHeight,e)}this.papers.resize(),""!=S["default"].currentScene&&this.camera.position.copy(S["default"].scenePosition[S["default"].currentScene].camera)}},{key:"show",value:function(){}},{key:"hide",value:function(){}}]),e}(v["default"]);n["default"]=D},{"../../Config":92,"../../util/DragAndDropSmooth":125,"../../util/GetLanguage":127,"../../util/UA":132,"../Cursor":93,"../Header":94,"../lineAnim/LineAnimation":99,"./Base3D":103,"./Histories":104,"./Intro":106,"./Papers":110,"./postprocessing/EffectComposer.js":112,"./postprocessing/RenderPass.js":115,"./postprocessing/ShaderPass.js":116,"./shader/FXAAShader.js":118,"./shader/LionMaskShader.js":119,"@barba/core":1,"@barba/css":2,gsap:7,three:89}],109:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=t("gsap"),c=i(t("../../Config")),l=(t("../../util/UA")(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=Object.assign({id:-1,name:"",width:100,height:100,transparent:!1,lang:"",segments:1,shaderMaterial:!1,side:s.DoubleSide,isBackFaceColor:!1,eventTarget:!1,href:!1,backFaceColor:new s.Color("#ffffff")},e);this.texture,this.container=new s.Object3D,this.meshContainer=new s.Object3D,this.size={width:e.width,height:e.height,aspectW:e.width/e.height,aspectH:e.height/e.width},this.scale=new s.Vector2(1,1),this.rotation=new s.Quaternion(0,0,0),this.progress={zoom:0,texture:0,now:0},this.isZooming=!1,this.name=e.name,this.zoomOption=c["default"].animation.paper.zoomOption,this.config={zoomFit:0},this.tweeners={zoom:null,texture:null},this.isFit=!1;var i;i=n.shaderMaterial?new s.ShaderMaterial({uniforms:{time:{value:0},opacity:{value:1},opacity2:{value:1},tDiffuse1:{value:null},tDiffuse2:{value:null},range:{value:100},radius:{value:0},rotY:{value:0},ampX:{value:0},ampY:{value:Math.PI},lightPosition:{value:new s.Vector3(0,0,0)},backFaceColor:{value:n.backFaceColor},isBackFaceColor:{value:n.isBackFaceColor},freqX:{value:.01},freqY:{value:.01},tProgress:{value:"ja"==c["default"].currentLang?0:1}},vertexShader:"\n          #define PI radians(180.0)\n          uniform float time;\n          uniform float range;\n          uniform float radius;\n          uniform float rotY;\n          uniform float ampX;\n          uniform float ampY;\n          uniform float freqX;\n          uniform float freqY;\n\n          varying vec2 vUv;\n          varying float zColor;\n        \n          mat4 rotationMatrix(vec3 axis, float angle)\n          {\n              axis = normalize(axis);\n              float s = sin(angle);\n              float c = cos(angle);\n              float oc = 1.0 - c;\n              \n              return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                          oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                          oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                          0.0,                                0.0,                                0.0,                                1.0);\n          }\n\n        \n          void main() {\n            vUv = uv;\n            float curveAmount = range / radius;\n\n            float invRange = range > 0.0 ? 1.0 / range : 0.0;\n\n            vec3 pos = position;\n            pos.z = sin(pos.x * freqX + time) * ampX + cos(pos.y * freqY + time) * ampY;\n            mat4 rota = rotationMatrix(vec3(0.0,1.0,0.0), rotY);\n            \n            zColor = pos.z;\n            vec4 mvPosition = modelViewMatrix * rota * vec4(pos, 1.0);\n            gl_Position = projectionMatrix * mvPosition;\n          }\n        ",fragmentShader:"\n          uniform vec3 color;\n          uniform vec3 backFaceColor;\n          uniform float opacity;\n          uniform float opacity2;\n          uniform sampler2D tDiffuse1;\n          uniform sampler2D tDiffuse2;\n          uniform bool isBackFaceColor;\n          uniform vec3 lightPosition;\n          uniform float tProgress;\n\n          varying vec2 vUv;\n          varying float zColor;\n\n          void main() {\n            vec4 tColor1 = texture2D(tDiffuse1,vUv);\n            vec4 tColor2 = texture2D(tDiffuse2,vUv);\n            vec4 tColor = mix(tColor1,tColor2,tProgress);\n\n            float brightness = (smoothstep(-1.0,1.0,clamp(zColor,-1.,1.)) * 0.02);\n            vec3 destColor= tColor.rgb;\n            if (gl_FrontFacing == false && isBackFaceColor) destColor = backFaceColor;\n            gl_FragColor = vec4( destColor.rgb + brightness, opacity * opacity2 );\n          }\n        ",transparent:!0,wireframe:!1,side:n.side}):new s.MeshBasicMaterial({wireframe:!1,transparent:n.transparent});var a=new s.PlaneBufferGeometry(n.width,n.height,n.segments,n.segments);a.dispose(),this.mesh=new s.Mesh(a,i),this.container.add(this.meshContainer),this.meshContainer.add(this.mesh),n.eventTarget&&(this.eventTarget=new s.Mesh(new s.PlaneBufferGeometry(n.width,n.height,1),new s.MeshBasicMaterial({wireframe:!1,color:16711680})),this.eventTarget.renderOrder=10,this.eventTarget.material.depthTest=!1,this.eventTarget.material.dispose(),this.eventTarget.geometry.dispose(),this.eventTarget.visible=!1,this.eventTarget._name=n.name,this.eventTarget._id=n.id,this.eventTarget._href=n.href,this.eventTarget._hrefEn=n.hrefEn,this.meshContainer.add(this.eventTarget)),this.uniforms=this.mesh.material.uniforms}return o(t,[{key:"load",value:function(t){var e=this;return new Promise(function(n){var i=0;t.forEach(function(r,a){(new s.TextureLoader).load(r,function(r){r.minFilter=s.LinearFilter,r.magFilter=s.LinearFilter,e.size.width=r.image.width,e.size.height=r.image.height;var o=e.mesh.material;e.texture=r,"ShaderMaterial"==o.type?o.uniforms["tDiffuse".concat(a+1)].value=r:o.map=r,o.needsUpdate=!0,i++,i==t.length&&n()})})})}},{key:"fitSize",value:function(){this.mesh.geometry.computeBoundingBox();var t=window.innerWidth,e=window.innerHeight,n=e;n=t>e?t/this.size.aspectW:e*this.size.aspectH;var i=e,r=this.mesh.geometry.boundingBox.max.y-this.mesh.geometry.boundingBox.min.y,a=c["default"].camera.fov*Math.PI/180,o=2*Math.tan(a/2),u=r*i,l=this.mesh.position.z*o,h=n*o,f=n*l,p=u+f,d=this.container.getWorldPosition(new s.Vector3),m=c["default"].camera.position.z-d.z-p/h;this.config.zoomFit=m}},{key:"setOpacity",value:function(t){this.mesh.material.uniforms.opacity2.value=t}},{key:"changeTexture",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign(n,c["default"].animation.paper.textureChange);return new Promise(function(n){t.tweeners.texture&&(t.tweeners.texture.kill(),n()),t.uniforms.time.value%=2*Math.PI,t.uniforms.ampY.value%=2*Math.PI,t.progress.now=0,t.progress.texture=2==e?0:1,t.tweeners.texture=u.TweenLite.to(t.progress,i.duration,{texture:2==e?1:0,now:1,delay:i.delay,ease:i.ease,onUpdate:t.textureUpdate.bind(t),onComplete:n})})}},{key:"zoom",value:function(t,e){var n=this;this.tweeners.zoom&&(this.tweeners.zoom.kill(),this.isZooming=!1),this.tweeners.zoom=u.TweenLite.to(this.progress,t.duration,{zoom:t.zoom,delay:t.delay,ease:t.ease,onStart:function(){n.isZooming=!0,n.fitSize()},onUpdate:this.zoomUpdate.bind(this),onComplete:function(){e(),n.isZooming=!1}})}},{key:"zoomIn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Object.assign(Object.assign({},c["default"].animation.paper.zoomOption),e));return n.zoom=1,this.isFit=!0,this.fitSize(),new Promise(function(e){t.zoom(n,e)})}},{key:"zoomOut",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isFit=!1;var n=Object.assign(Object.assign({},c["default"].animation.paper.zoomOption),e);return n.zoom=0,new Promise(function(e){t.zoom(n,e)})}},{key:"zoomUpdate",value:function(){var t=this.progress.zoom;this.meshContainer.position.z=t*this.config.zoomFit;var e=t*-Math.PI,n=e-this.uniforms.rotY.value;this.uniforms.ampX.value+=20*Math.abs(n),this.uniforms.time.value+=.1*Math.abs(n),this.uniforms.time.value%=2*Math.PI,this.uniforms.rotY.value=e,this.mesh.position.y=.5*-c["default"].stageSize.distHeight*t,this.isFit||(this.uniforms.opacity2.value+=1-.2*this.uniforms.opacity2.value)}},{key:"textureUpdate",value:function(){var t=this.progress.texture,e=Math.abs(1-(this.progress.now-.5)/.5);"happenings"==this.name,this.uniforms.ampY.value+=e*Math.PI*.4,this.uniforms.tProgress.value=t}},{key:"resize",value:function(){var t=this;if(this.fitSize(),this.isFit){var e=Object.assign({},c["default"].animation.paper.zoomOption);e.zoom=1,u.TweenLite.to(this.progress,0,{zoom:e.zoom,delay:e.delay,ease:e.ease,onStart:function(){t.fitSize()},onUpdate:this.zoomUpdate.bind(this),onComplete:function(){}})}}},{key:"resizeGeomery",value:function(){this.mesh.geometry.dispose(),this.mesh.geometry=new s.PlaneBufferGeometry(this.size.width,this.size.height)}},{key:"kill",value:function(){this.mesh.material.dispose(),this.mesh.geometry.dispose(),this.texture&&this.texture.dispose()}}]),t}());n["default"]=l},{"../../Config":92,"../../util/UA":132,gsap:7,three:89}],110:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=i(t("./Paper")),c=(i(t("./util/SimpleMesh")),i(t("./util/Dat")),i(t("../../Config"))),l=t("gsap"),h=(t("lodash"),i(t("../Header"))),f=t("../../util/UA")(),p=function(){function t(e){var n=this;r(this,t),this.paperOption=c["default"].paperOption[f.isPC?"pc":"sp"],this.paperSize=this.paperOption.size,this.offset={cx:0,cy:0,vx:0,vy:0,introProgress:0,disX:0,disY:0,oldX:0,x:0,sx:0,margin:this.paperOption.margin,degree:180*Math.PI/180,radius:this.paperOption.bend,freqX:0,freqY:0,amp:2,ampFriction:.94,timeSpeed:.1},this.naviList=e,this.container=new s.Object3D,this.container.name="Papers",this.lock=!1,this.isIntro=!1,this.currentID=0,this.oldID=0,this.opacity=1,this.currentActivePaper=null,this.tweener,this.header=new h["default"],this.loaders=[],this.names=[],this.papers=[],this.colors=[],this.eventTargets=[],this.histories=[],this.orderNames=[],this.orderId=[],this.papersProgress=[],this.$articleHeader=document.querySelector(".article_headers"),this.$articleHeaders=document.querySelectorAll(".article_header"),this.naviList.forEach(function(t,e){var i=t.querySelectorAll("a"),r=(t.getAttribute("data-page-assets-path"),t.getAttribute("data-page-thumb"),t.getAttribute("data-page-name")),a=t.getAttribute("data-navi-index"),o=t.getAttribute("data-page-color"),l=new u["default"]({id:e,name:r,lang:c["default"].currentLang,width:n.paperSize.width,height:n.paperSize.height,shaderMaterial:!0,segments:10,isBackFaceColor:!0,eventTarget:!0,href:i[0].getAttribute("href"),hrefEn:i[1].getAttribute("href"),backFaceColor:new s.Color(o)});n.names[a]=r,n.orderId[e]=a,n.papers[e]=l,n.orderNames[e]=r,n.eventTargets[e]=l.eventTarget,n.colors[e]=o,n.container.add(l.container)}),this.isJumping=!1,this.resize()}return o(t,[{key:"load",value:function(){var t=this;return this.naviList.forEach(function(e,n){var i=e.getAttribute("data-page-assets-path"),r=t.papers[n];t.loaders.push(r.load([i+"thumb.jpg",i+"thumb_en.jpg"]))}),this.loaders}},{key:"getMaxInArray",value:function(t,e){return Math.max(t,e)}},{key:"getMinInArray",value:function(t,e){return Math.min(t,e)}},{key:"changeProperty",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:l.Power4.easeInOut},e);l.TweenLite.to(t.offset,i.duration,i)})}},{key:"bendOff",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:l.Power4.easeInOut,radius:0},e);l.TweenLite.to(t.offset,i.duration,i),l.TweenLite.to(t.container.position,i.duration,{y:c["default"].stageSize.distHeight,ease:i.ease})})}},{key:"bendOn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:l.Power4.easeInOut,radius:t.paperOption.bend},e);l.TweenLite.to(t.offset,i.duration,i),l.TweenLite.to(t.container.position,i.duration,{y:0,ease:i.ease})})}},{key:"resize",value:function(){this.paperSizeWithMargin=this.paperSize.width+this.offset.margin.x,window.innerWidth<960&&!f.isPC&&(this.paperSizeWithMargin-=window.innerWidth/960*50),this.allPaperSize=this.paperSizeWithMargin*this.papers.length,this.standX=.5*-this.allPaperSize,this.papers.forEach(function(t){t.resize()})}},{key:"fadeIn",value:function(){}},{key:"changeTxuture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ja";this.papers.forEach(function(e,n){e.changeTexture("ja"==t?1:2)})}},{key:"intro",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.names[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(i){var r=t.getID(e),a=c["default"].animation.navi.cycle,o=a*t.papers.length*t.paperSizeWithMargin-t.paperSizeWithMargin*r,s=-t.paperSizeWithMargin*r,u=t.getPaperByName(e);t.offset.introProgress=0,t.container.position.y=c["default"].animation.navi.fromY,t.offset.x=o,t.isIntro=!0,t.tweener&&t.tweener.kill(),l.TweenLite.to(t.container.position,c["default"].animation.navi.duration,{y:0,ease:l.Power4.easeInOut}),t.tweener=l.TweenLite.to(t.offset,c["default"].animation.navi.duration,{introProgress:1,x:s,ease:l.Power4.easeInOut,onComplete:function(){t.isIntro=!1,n?u.zoomIn().then(function(){i()}):i()}})})}},{key:"viewPapers",value:function(){return this.getCurrentPaper()}},{key:"getCurrentPaper",value:function(){return this.currentActivePaper}},{key:"getID",value:function(t){return this.names.indexOf(t)}},{key:"getPaperByName",value:function(t){return this.papers[this.orderNames.indexOf(t)]}},{key:"getPaperColor",value:function(t){return this.colors[this.orderNames.indexOf(t)]}},{key:"articleHeaderToggle",value:function(t){t?this.$articleHeader.classList.remove("-hide"):this.$articleHeader.classList.add("-hide")}},{key:"changeAritcleHeader",value:function(t){var e=this;this.$articleHeaders.forEach(function(n,i){i==e.orderId[t]?n.classList.remove("-hide"):n.classList.add("-hide")})}},{key:"jump",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t=this.getID(t));var i=Object.assign(n,c["default"].animation.paper.jump);return new Promise(function(n){e.jump_next=t,e.jump_crt=e.currentID;var r=e.currentID-t,a=e.papers.length;if(Math.abs(r)>a/2){var o=(a-e.jump_next+a/2)%a,s=(a-e.currentID+a/2)%a,u=o-s;r=u}e.jumpX=r*e.paperSizeWithMargin+e.offset.cx,e.offset.x=e.offset.cx,e.tweener&&e.tweener.kill(),e.jumpTimer&&clearTimeout(e.jumpTimer),e.jumpTimer=setTimeout(function(){n()},.8*i.duration*1e3),i.x=e.jumpX,e.tweener=l.TweenLite.to(e.offset,i.duration,i)})}},{key:"active",value:function(t){var e=this.orderNames.indexOf(t);return this.currentActivePaper=this.papers[e],this.papers.forEach(function(t,n){e==-1||e==n?t.container.visible=!0:t.container.visible=!1}),e}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.lock||this.papersUpdate(t)}},{key:"infoTextUpdate",value:function(){}},{key:"papersUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=0+this.standX,i=this.allPaperSize+this.standX;this.opacity=this.offset.introProgress,this.offset.x+=e.x;var r=this.offset.x-this.offset.oldX;if(Math.abs(r)<100&&(this.offset.disX=r),this.offset.disX=Math.round(1e3*this.offset.disX)/1e3,this.offset.cx=this.offset.x,this.offset.cx%=this.allPaperSize,this.header.moveIndication(this.offset.cx/this.allPaperSize),this.currentID=-this.offset.cx/this.paperSizeWithMargin,this.currentID<0&&(this.currentID=this.papers.length+this.currentID),this.papers.forEach(function(e,r){var a=e.container.position,o=e.container.rotation;a.x=t.offset.cx+r*t.paperSizeWithMargin+t.standX+.5*t.paperSizeWithMargin,a.x<n&&(a.x+=t.allPaperSize),a.x>i&&(a.x-=t.allPaperSize);var s=-a.x/t.standX;s=Math.round(1e3*s)/1e3;var u=Math.abs(s);t.papersProgress[r]=u,a.y=Math.cos(-s*Math.PI)*t.offset.radius*.1-.1*t.offset.radius;var c=t.offset.radius,l=Math.atan2(c,a.x-0);o.z=s*Math.cos(l+.5*Math.PI)*c/4e3;var h=.01*t.offset.disX;if(e.mesh.material.uniforms.ampX.value+=Math.abs(h)*t.offset.amp,e.mesh.material.uniforms.ampY.value+=.15*Math.min(1,c*Math.abs(h*u)),e.mesh.material.uniforms.opacity.value=t.opacity,e.mesh.material.uniforms.time.value+=t.offset.timeSpeed,e.mesh.material.uniforms.ampX.value*=t.offset.ampFriction,e.mesh.material.uniforms.ampY.value*=t.offset.ampFriction,t.histories.length>0){var f=t.histories[r].container;f.position.x=a.x,t.histories[r].update(t.opacity*(1-u))}}),this.papersProgress.length>0){var a=this.papersProgress.indexOf(this.papersProgress.reduce(this.getMinInArray));a!=this.oldID&&this.changeAritcleHeader(a),this.oldID=a,this.offset.oldX=this.offset.x}}}]),t}();n["default"]=p},{"../../Config":92,"../../util/UA":132,"../Header":94,"./Paper":109,"./util/Dat":120,"./util/SimpleMesh":122,gsap:7,lodash:76,three:89}],111:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=t("three"),u=(t("gsap"),i(t("../../Config"))),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=Object.assign({id:-1,name:"",width:100,height:100,transparent:!1,segments:1,href:!1,color:new s.Color,backFaceColor:new s.Color("#ffffff")},e);this.texture,this.container=new s.Object3D,this.size={width:n.width,height:n.height,aspectW:n.width/n.height,aspectH:n.height/n.width},this.name=e.name,this.viewArea={height:0,width:0},this.isFit=!1;var i=new s.ShaderMaterial({uniforms:{time:{value:0},opacity:{value:1},opacity2:{value:1},monochrome:{value:0},color:{value:e.color},tDiffuse:{value:null}},vertexShader:"\n        #define PI radians(180.0)\n\n        varying vec2 vUv;\n      \n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform float opacity;\n        uniform float opacity2;\n        uniform sampler2D tDiffuse;\n        uniform vec3 color;\n        uniform float monochrome;\n        varying vec2 vUv;\n\n        void main() {\n          vec4 tColor = texture2D(tDiffuse,vUv);\n          vec3 destColor = mix(tColor.rgb * color,tColor.rgb,monochrome);\n          gl_FragColor = vec4( destColor, tColor.a * opacity * opacity2);\n        }\n      ",transparent:!0,wireframe:!1}),a=new s.PlaneBufferGeometry(n.width,n.height,n.segments,n.segments);a.dispose(),i.dispose(),this.mesh=new s.Mesh(a,i),this.container.add(this.mesh)}return o(t,[{key:"resetViewPort",value:function(t){void 0!==t?t:u["default"].camera.position.z;this.mesh.geometry.computeBoundingBox();var e=this.mesh.geometry.boundingBox.max.y-this.mesh.geometry.boundingBox.min.y,n=u["default"].camera.fov*u["default"].PI,i=2*Math.tan(n/2),r=this.container.getWorldPosition(new s.Vector3),a=(u["default"].camera.position.z-r.z)*i+e/i*1.5;this.viewArea.height=Math.abs(.5*a),this.viewArea.width=this.viewArea.height*window.innerWidth/window.innerHeight}},{key:"setMonochro",value:function(){}},{key:"setOpacity",value:function(t){this.mesh.material.uniforms.opacity2.value=t}},{key:"load",value:function(t){var e=this;return new Promise(function(n){(new s.TextureLoader).load(t,function(t){t.minFilter=s.LinearFilter,t.magFilter=s.LinearFilter,e.size.width=t.image.width,e.size.height=t.image.height;var i=e.mesh.material;e.texture=t,"ShaderMaterial"==i.type?i.uniforms.tDiffuse.value=t:i.map=t,i.needsUpdate=!0,n()})})}},{key:"resize",value:function(){this.fitSize(),this.isFit&&this.zoomIn()}},{key:"resizeGeomery",value:function(){this.mesh.geometry.dispose(),this.mesh.geometry=new s.PlaneBufferGeometry(this.size.width,this.size.height)}}]),t}();n["default"]=c},{"../../Config":92,gsap:7,three:89}],112:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Pass=n.EffectComposer=void 0;var i=t("three"),r=t("../shader/CopyShader.js"),a=t("./ShaderPass.js"),o=t("./MaskPass.js"),s=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},o=t.getSize(new i.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=o.width,this._height=o.height,e=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===r.CopyShader,void 0===a.ShaderPass,this.copyPass=new a.ShaderPass(r.CopyShader),this.clock=new i.Clock};n.EffectComposer=s,Object.assign(s.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,i=this.renderer.getRenderTarget(),r=!1,a=this.passes.length;for(n=0;n<a;n++)if(e=this.passes[n],e.enabled!==!1){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),e.needsSwap){if(r){var s=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),u.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==o.MaskPass&&(e instanceof o.MaskPass?r=!0:e instanceof o.ClearMaskPass&&(r=!1))}this.renderer.setRenderTarget(i)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var u=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};n.Pass=u,Object.assign(u.prototype,{setSize:function(){},render:function(){}}),u.FullScreenQuad=function(){var t=new i.OrthographicCamera((-1),1,1,(-1),0,1),e=new i.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new i.Mesh(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},{"../shader/CopyShader.js":117,"./MaskPass.js":113,"./ShaderPass.js":116,three:89}],113:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ClearMaskPass=n.MaskPass=void 0;var i=t("./Pass.js"),r=function(t,e){i.Pass.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};n.MaskPass=r,r.prototype=Object.assign(Object.create(i.Pass.prototype),{constructor:r,render:function(t,e,n){var i=t.getContext(),r=t.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);var a,o;this.inverse?(a=0,o=1):(a=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}});var a=function(){i.Pass.call(this),this.needsSwap=!1};n.ClearMaskPass=a,a.prototype=Object.create(i.Pass.prototype),Object.assign(a.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}})},{"./Pass.js":114}],114:[function(t,e,n){"use strict";function i(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.defineProperty(n,"__esModule",{value:!0}),n.Pass=i;var r=t("three");Object.assign(i.prototype,{setSize:function(){},render:function(){}}),i.FullScreenQuad=function(){var t=new r.OrthographicCamera((-1),1,1,(-1),0,1),e=new r.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new r.Mesh(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},{three:89}],115:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RenderPass=void 0;var i=t("../postprocessing/Pass.js"),r=function(t,e,n,r,a){i.Pass.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};n.RenderPass=r,r.prototype=Object.assign(Object.create(i.Pass.prototype),{constructor:r,render:function(t,e,n){var i=t.autoClear;t.autoClear=!1;var r,a,o;void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=t.getClearColor().getHex(),a=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(r,a),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=i}})},{"../postprocessing/Pass.js":114}],116:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderPass=void 0;var i=t("three"),r=t("./Pass.js"),a=function(t,e){r.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof i.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=i.UniformsUtils.clone(t.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new r.Pass.FullScreenQuad(this.material)};n.ShaderPass=a,
a.prototype=Object.assign(Object.create(r.Pass.prototype),{constructor:a,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}})},{"./Pass.js":114,three:89}],117:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyShader=void 0;var i={uniforms:{tDiffuse:{value:null},opacity:{value:.5}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n  ",fragmentShader:"\n    uniform float opacity;\n    uniform sampler2D tDiffuse;\n    varying vec2 vUv;\n    void main() {\n    \tvec4 texel = texture2D( tDiffuse, vUv );\n    \tgl_FragColor = opacity * texel;\n    }\n  "};n.CopyShader=i},{}],118:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FXAAShader=void 0;var i=t("three"),r={uniforms:{tDiffuse:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")
};n.FXAAShader=r},{three:89}],119:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LionMaskShader=void 0;var i=t("three"),r={uniforms:{tDiffuse:{value:null},baseColor:{value:new i.Color(15856370)},tMask:{value:null},opacity:{value:0},maskOpacity:{value:0},resolution:{value:{x:1920,y:1080}},lionResolution:{value:{x:1920,y:2012}},lionAspect:{value:1920/2012},lionPosition:{value:{x:0,y:0}},distortion:{value:0},thretold:{value:1},noiseBrightness:{value:1},noiseIntensity:{value:.05},time:{value:0},scale:{value:1}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n  ",fragmentShader:"\n    uniform float opacity;\n    uniform float maskOpacity;\n    uniform float aspect;\n    uniform float scale;\n    uniform float thretold;\n    uniform float distortion;\n    uniform float lionAspect;\n    uniform vec2 resolution;\n    uniform vec2 lionResolution;\n    uniform vec2 lionPosition;\n    uniform vec3 baseColor;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tMask;\n\n    uniform float time;\n    uniform float noiseIntensity;\n\t\tuniform float noiseBrightness;\n\n    varying vec2 vUv;\n\n    float random(vec2 co){\n      return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);\n    }\n\n    void main() {\n\n      vec2 newUV = vUv;\n      newUV *= sin(time);\n      float r = random(newUV);\n      vec3 noise = vec3(r * noiseBrightness);\n      // vec3 newColor = mix(color.rgb,noise,noiseIntensity);\n      // destColor = newColor;\n\n\n      vec2 texelUv = vUv;\n      vec2 lionUV = vUv;\n\n      vec2 res = resolution / lionResolution;\n      lionUV -= vec2(0.5,0.5);\n      lionUV *= res;\n      lionUV /= scale;\n      lionUV += vec2(0.5,0.5);\n      lionUV.y += lionPosition.y / resolution.y;\n\n      \n      vec4 texelMask = texture2D( tMask, lionUV );\n      vec4 texel = texture2D( tDiffuse, texelUv );\n\n      texel.rgb = mix(baseColor.rgb,texel.rgb,opacity);\n\n      vec4 maskColor = vec4(1.0);\n      maskColor *= texelMask.a;\n\n      vec4 destColor = texel;\n\n      if(length(texelMask.rgb) < 0.9 ){\n        destColor.rgb= vec3(1.0);\n      }\n      \n      // texelMask.rgb = vec3(1.0);\n      // destColor *= texelMask;\n      // destColor.rgb = vec3(1.0 - texelMask.a);\n      // destColor.rgb = (texel.rgb * vec3(destColor.rgb));\n\n      destColor = mix(texel,destColor,maskOpacity);\n      vec3 noiseColor = mix(destColor.rgb,noise,noiseIntensity);\n      gl_FragColor = vec4(noiseColor,destColor.a);//vec4(destColor,1.0);\n    }\n  ",transparent:!0};n.LionMaskShader=r},{three:89}],120:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var o=function(){function t(){i(this,t)}return a(t,[{key:"remove",value:function(){}}]),t}(),s=new o,u=s;n["default"]=u},{}],121:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MapControls=n.OrbitControls=void 0;var i=t("THREE"),r=function(t,e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.autoRotateSpeed;return 2*Math.PI/60/60*t}function r(){return Math.pow(.95,z.zoomSpeed)}function a(t){X.theta-=t}function o(t){X.phi-=t}function s(t){z.object.isPerspectiveCamera?Y/=t:z.object.isOrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom*t)),z.object.updateProjectionMatrix(),Q=!0):z.enableZoom=!1}function u(t){z.object.isPerspectiveCamera?Y*=t:z.object.isOrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom/t)),z.object.updateProjectionMatrix(),Q=!0):z.enableZoom=!1}function c(t){Z.set(t.clientX,t.clientY)}function l(t){nt.set(t.clientX,t.clientY)}function h(t){K.set(t.clientX,t.clientY)}function f(t){J.set(t.clientX,t.clientY),$.subVectors(J,Z).multiplyScalar(z.rotateSpeed);var e=z.domElement;a(2*Math.PI*$.x/e.clientHeight),o(2*Math.PI*$.y/e.clientHeight),Z.copy(J),z.update()}function p(t){it.set(t.clientX,t.clientY),rt.subVectors(it,nt),rt.y>0?s(r()):rt.y<0&&u(r()),nt.copy(it),z.update()}function d(t){tt.set(t.clientX,t.clientY),et.subVectors(tt,K).multiplyScalar(z.panSpeed),st(et.x,et.y),K.copy(tt),z.update()}function m(){}function v(t){t.deltaY<0?u(r()):t.deltaY>0&&s(r()),z.update()}function g(t){var e=!1;switch(t.keyCode){case z.keys.UP:st(0,z.keyPanSpeed),e=!0;break;case z.keys.BOTTOM:st(0,-z.keyPanSpeed),e=!0;break;case z.keys.LEFT:st(z.keyPanSpeed,0),e=!0;break;case z.keys.RIGHT:st(-z.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),z.update())}function y(t){if(1==t.touches.length)Z.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);Z.set(e,n)}}function _(t){if(1==t.touches.length)K.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);K.set(e,n)}}function x(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);nt.set(0,i)}function b(t){z.enableZoom&&x(t),z.enablePan&&_(t)}function w(t){z.enableZoom&&x(t),z.enableRotate&&y(t)}function M(t){if(1==t.touches.length)J.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);J.set(e,n)}$.subVectors(J,Z).multiplyScalar(z.rotateSpeed);var i=z.domElement;a(2*Math.PI*$.x/i.clientHeight),o(2*Math.PI*$.y/i.clientHeight),Z.copy(J)}function S(t){if(1==t.touches.length)tt.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);tt.set(e,n)}et.subVectors(tt,K).multiplyScalar(z.panSpeed),st(et.x,et.y),K.copy(tt)}function A(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);it.set(0,i),rt.set(0,Math.pow(it.y/nt.y,z.zoomSpeed)),s(rt.y),nt.copy(it)}function T(t){z.enableZoom&&A(t),z.enablePan&&S(t)}function P(t){z.enableZoom&&A(t),z.enableRotate&&M(t)}function L(){}function E(t){if(z.enabled!==!1){t.preventDefault(),z.domElement.focus?z.domElement.focus():window.focus();var e;switch(t.button){case 0:e=z.mouseButtons.LEFT;break;case 1:e=z.mouseButtons.MIDDLE;break;case 2:e=z.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i.MOUSE.DOLLY:if(z.enableZoom===!1)return;l(t),V=G.DOLLY;break;case i.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(z.enablePan===!1)return;h(t),V=G.PAN}else{if(z.enableRotate===!1)return;c(t),V=G.ROTATE}break;case i.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(z.enableRotate===!1)return;c(t),V=G.ROTATE}else{if(z.enablePan===!1)return;h(t),V=G.PAN}break;default:V=G.NONE}V!==G.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",C,!1),z.dispatchEvent(B))}}function O(t){if(z.enabled!==!1)switch(t.preventDefault(),V){case G.ROTATE:if(z.enableRotate===!1)return;f(t);break;case G.DOLLY:if(z.enableZoom===!1)return;p(t);break;case G.PAN:if(z.enablePan===!1)return;d(t)}}function C(t){z.enabled!==!1&&(m(t),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",C,!1),z.dispatchEvent(j),V=G.NONE)}function F(t){z.enabled===!1||z.enableZoom===!1||V!==G.NONE&&V!==G.ROTATE||(t.preventDefault(),t.stopPropagation(),z.dispatchEvent(B),v(t),z.dispatchEvent(j))}function I(t){z.enabled!==!1&&z.enableKeys!==!1&&z.enablePan!==!1&&g(t)}function N(t){if(z.enabled!==!1){switch(t.preventDefault(),t.touches.length){case 1:switch(z.touches.ONE){case i.TOUCH.ROTATE:if(z.enableRotate===!1)return;y(t),V=G.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(z.enablePan===!1)return;_(t),V=G.TOUCH_PAN;break;default:V=G.NONE}break;case 2:switch(z.touches.TWO){case i.TOUCH.DOLLY_PAN:if(z.enableZoom===!1&&z.enablePan===!1)return;b(t),V=G.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(z.enableZoom===!1&&z.enableRotate===!1)return;w(t),V=G.TOUCH_DOLLY_ROTATE;break;default:V=G.NONE}break;default:V=G.NONE}V!==G.NONE&&z.dispatchEvent(B)}}function D(t){if(z.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),V){case G.TOUCH_ROTATE:if(z.enableRotate===!1)return;M(t),z.update();break;case G.TOUCH_PAN:if(z.enablePan===!1)return;S(t),z.update();break;case G.TOUCH_DOLLY_PAN:if(z.enableZoom===!1&&z.enablePan===!1)return;T(t),z.update();break;case G.TOUCH_DOLLY_ROTATE:if(z.enableZoom===!1&&z.enableRotate===!1)return;P(t),z.update();break;default:V=G.NONE}}function R(t){z.enabled!==!1&&(L(t),z.dispatchEvent(j),V=G.NONE)}function k(t){z.enabled!==!1&&t.preventDefault()}e===document,this.object=t,this.domElement=e,this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateProp={theta:"left",phi:"top"},this.autoRotateSpeed={theta:0,phi:0},this.autoPanSpeed={x:0,y:0},this.autoDolly={zoom:0},this.zoom=0,this.radius=1,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return H.phi},this.getAzimuthalAngle=function(){return H.theta},this.dollyIn=function(t){u(Math.pow(.95,t))},this.dollyOut=function(t){s(Math.pow(.95,t))},this.saveState=function(){z.target0.copy(z.target),z.position0.copy(z.object.position),z.zoom0=z.object.zoom},this.reset=function(){z.target.copy(z.target0),z.object.position.copy(z.position0),z.object.zoom=z.zoom0,z.object.updateProjectionMatrix(),z.dispatchEvent(U),z.update(),V=G.NONE},this.update=function(){var e=new i.Vector3,r=(new i.Vector3,(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0))),s=r.clone().inverse(),u=new i.Vector3,c=new i.Quaternion;return function(){var t=z.object.position;return e.copy(t).sub(z.target),e.applyQuaternion(r),H.setFromVector3(e),0!=z.autoRotateSpeed.theta&&a(n(z.autoRotateSpeed.theta)),0!=z.autoRotateSpeed.phi&&o(n(z.autoRotateSpeed.phi)),0!=z.autoPanSpeed.x&&at(z.autoPanSpeed.x,z.object.matrix),0!=z.autoPanSpeed.y&&ot(z.autoPanSpeed.y,z.object.matrix),0!=z.autoDolly.zoom&&z.dollyIn(z.autoDolly.zoom),z.enableDamping?(H.theta+=X.theta*z.dampingFactor,H.phi+=X.phi*z.dampingFactor):(H.theta+=X.theta,H.phi+=X.phi),H.theta=Math.max(z.minAzimuthAngle,Math.min(z.maxAzimuthAngle,H.theta)),H.phi=Math.max(z.minPolarAngle,Math.min(z.maxPolarAngle,H.phi)),H.makeSafe(),H.radius*=Y,H.radius=Math.max(z.minDistance,Math.min(z.maxDistance,H.radius)),z.enableDamping===!0?z.target.addScaledVector(q,z.dampingFactor):z.target.add(q),e.setFromSpherical(H),e.applyQuaternion(s),t.copy(z.target).add(e),z.object.lookAt(z.target),z.enableDamping===!0?(X.theta*=1-z.dampingFactor,X.phi*=1-z.dampingFactor,q.multiplyScalar(1-z.dampingFactor)):(X.set(0,0,0),q.set(0,0,0)),Y=1,!!(Q||u.distanceToSquared(z.object.position)>W||8*(1-c.dot(z.object.quaternion))>W)&&(z.dispatchEvent(U),u.copy(z.object.position),c.copy(z.object.quaternion),Q=!1,!0)}}(),this.dispose=function(){z.domElement.removeEventListener("contextmenu",k,!1),z.domElement.removeEventListener("mousedown",E,!1),z.domElement.removeEventListener("wheel",F,!1),z.domElement.removeEventListener("touchstart",N,!1),z.domElement.removeEventListener("touchend",R,!1),z.domElement.removeEventListener("touchmove",D,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",C,!1),z.domElement.removeEventListener("keydown",I,!1)};var z=this,U={type:"change"},B={type:"start"},j={type:"end"},G={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},V=G.NONE,W=1e-6;this.spherical=new i.Spherical;var H=this.spherical,X=new i.Spherical,Y=1,q=new i.Vector3,Q=!1,Z=new i.Vector2,J=new i.Vector2,$=new i.Vector2,K=new i.Vector2,tt=new i.Vector2,et=new i.Vector2,nt=new i.Vector2,it=new i.Vector2,rt=new i.Vector2,at=function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),q.add(t)}}(),ot=function(){var t=new i.Vector3;return function(e,n){z.screenSpacePanning===!0?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(z.object.up,t)),t.multiplyScalar(e),q.add(t)}}(),st=function(){var t=new i.Vector3;return function(e,n){var i=z.domElement;if(z.object.isPerspectiveCamera){var r=z.object.position;t.copy(r).sub(z.target);var a=t.length();a*=Math.tan(z.object.fov/2*Math.PI/180),at(2*e*a/i.clientHeight,z.object.matrix),ot(2*n*a/i.clientHeight,z.object.matrix)}else z.object.isOrthographicCamera?(at(e*(z.object.right-z.object.left)/z.object.zoom/i.clientWidth,z.object.matrix),ot(n*(z.object.top-z.object.bottom)/z.object.zoom/i.clientHeight,z.object.matrix)):z.enablePan=!1}}();z.domElement.addEventListener("contextmenu",k,!1),z.domElement.addEventListener("mousedown",E,!1),z.domElement.addEventListener("wheel",F,!1),z.domElement.addEventListener("touchstart",N,!1),z.domElement.addEventListener("touchend",R,!1),z.domElement.addEventListener("touchmove",D,!1),z.domElement.addEventListener("keydown",I,!1),z.domElement.tabIndex===-1&&(z.domElement.tabIndex=0),this.update()};n.OrbitControls=r,r.prototype=Object.create(i.EventDispatcher.prototype),r.prototype.constructor=r;var a=function(t,e){r.call(this,t,e),this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE};n.MapControls=a,a.prototype=Object.create(i.EventDispatcher.prototype),a.prototype.constructor=a},{THREE:5}],122:[function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2?arguments[2]:void 0,i=new r.PlaneBufferGeometry(t,e,1),a=new r.MeshBasicMaterial(Object.assign({opacity:1,transparent:!0},n));return i.dispose(),new r.Mesh(i,a)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var r=t("three")},{three:89}],123:[function(t,e,n){"use strict";function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(){if("object"===("undefined"==typeof window?"undefined":i(window))&&"function"==typeof window.addEventListener&&Object.defineProperty){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("test",null,e),t}}},{}],124:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=h();return function(){var n,i=f(t);if(e){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var p=i(t("events")),d=t("./UA")(),m=t("./CheckPassive"),v=t("lodash/throttle"),g=function(t){function e(t){function i(t){var e={x:0,y:0},n="ontouchstart"in window;t.target.getBoundingClientRect();if(d.isMozilla&&d.isPC&&(n=!1),t.touches){var i;t.touches?(i=t.touches[0],e.x=i.clientX,e.y=i.clientY):(e.x=t.clientX,e.y=t.clientY)}else e.x=t.clientX,e.y=t.clientY;return e}var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),r=n.call(this),r.$target=t,r.config=Object.assign({moveWhileDown:!0,targetOut:!1,wheel:!1,wheelReverse:!1,wheelUseYtoX:!0,wheelPower:.1},o),r.EVENT_DRAG_START="dragStart",r.EVENT_DRAG_MOVE="dragMove",r.EVENT_DRAG_END="dragEnd",r.EVENT_MOUSE_WHEEL="mouseWheel",r.isDown=!1,r.status={event:null,start:{x:0,y:0},move:{x:0,y:0},end:{x:0,y:0},wheel:{deltaX:0,deltaY:0},distance:{x:0,y:0},distanceOffset:function(){return{x:Math.abs(this.distance.x),y:Math.abs(this.distance.y)}}};var s=function(e){r.status.start=i(e),r.status.move={x:0,y:0},r.status.end={x:0,y:0},r.status.distance={x:0,y:0},r.emit(r.EVENT_DRAG_START,r.status),r.isDown=!0,d.isPC&&(document.addEventListener("mousemove",u,!!m()&&{passive:!0}),document.addEventListener("mouseup",c),r.config.targetOut&&t.addEventListener("mouseout",c)),document.addEventListener("touchmove",u,!!m()&&{passive:!0}),document.addEventListener("touchend",c,!1)},u=function(t){r.status.move=i(t),r.status.distance.x=r.status.start.x-r.status.move.x,r.status.distance.y=r.status.start.y-r.status.move.y,r.emit(r.EVENT_DRAG_MOVE,r.status)},c=function f(e){r.isDown=!1,r.status.end=r.status.move,r.emit(r.EVENT_DRAG_END,r.status),d.isPC&&(document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f),r.config.targetOut&&t.removeEventListener("mouseout",f)),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",f)},h=function(t){var e=(t.delta,t.deltaX),n=t.deltaY;r.config.wheelUseYtoX?r.status.wheel.deltaX=-n:(r.status.wheel.deltaX=-e,r.status.wheel.deltaY=-n),r.status.wheel.deltaX*=r.config.wheelPower,r.status.wheel.deltaY*=r.config.wheelPower,r.emit(r.EVENT_MOUSE_WHEEL,r.status)};return h=v(h.bind(l(r)),10),d.isPC&&(r.$target.addEventListener("mousedown",s),r.config.wheel&&r.$target.addEventListener("wheel",h,!!m()&&{passive:!0})),r.$target.addEventListener("touchstart",s,!!m()&&{passive:!0}),r}o(e,t);var n=u(e);return e}(p["default"]);n["default"]=g},{"./CheckPassive":123,"./UA":132,events:6,"lodash/throttle":79}],125:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var m=i(t("./DragAndDrop")),v=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,e),i=n.apply(this,arguments),i.smoothConfig=Object.assign({power:.2,friction:.93},r),i.offset={old:{x:0,y:0},vf:{x:0,y:0}},i.on(i.EVENT_DRAG_START,function(t){i.offset.old=t.start}),i.on(i.EVENT_DRAG_MOVE,function(t){i.offset.vf.x+=Math.round((t.move.x-i.offset.old.x)*i.smoothConfig.power),i.offset.vf.y+=Math.round((t.move.y-i.offset.old.y)*i.smoothConfig.power),i.offset.old=t.move}),i.config.wheel&&i.on(i.EVENT_MOUSE_WHEEL,function(t){i.offset.vf.x+=t.wheel.deltaX,i.offset.vf.y+=t.wheel.deltaY}),i.on(i.EVENT_DRAG_END,function(t){}),i}u(e,t);var n=l(e);return s(e,[{key:"update",value:function(){return this.offset.vf.x*=this.smoothConfig.friction,this.offset.vf.y*=this.smoothConfig.friction,this.offset.vf.x=Math.round(1e3*this.offset.vf.x)/1e3,this.offset.vf.y=Math.round(1e3*this.offset.vf.y)/1e3,this.offset.vf.x>-.01&&this.offset.vf.x<.01&&!this.isDrag&&(this.offset.vf.x=0),this.offset.vf.y>-.01&&this.offset.vf.y<.01&&!this.isDrag&&(this.offset.vf.y=0),this.offset.vf}}]),e}(m["default"]);n["default"]=v},{"./DragAndDrop":124}],126:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var i={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},back:function(t){return t*t*(4*t-3)}};n["default"]=i},{}],127:[function(t,e,n){"use strict";function i(){return{browser:(window.navigator.userLanguage||window.navigator.language).substring(0,2),document:document.querySelector("html").getAttribute("lang")}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],128:[function(t,e,n){"use strict";function i(t){var e=document.head,n=t.html.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],i=document.createElement("head");i.innerHTML=n;var r=(new DOMParser).parseFromString(t.html,"text/html"),a=r.getElementsByTagName("body")[0].getAttribute("data-page-type");document.querySelector("body").setAttribute("data-page-type",a);var o=r.getElementsByTagName("html")[0].getAttribute("lang"),s=document.querySelector("html").getAttribute("lang");document.querySelector("html").setAttribute("lang",o);var u=["meta[name='keywords']","meta[name='description']","meta[property^='fb']","meta[property^='og']","meta[name^='twitter']","meta[name='robots']","meta[itemprop]","link[itemprop]","link[rel='prev']","link[rel='next']","link[rel='canonical']"].join(","),c=e.querySelectorAll(u);c.forEach(function(t){e.removeChild(t)});var l=i.querySelectorAll(u);return l.forEach(function(t){e.appendChild(t)}),{lang:o,changed:s!=o}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],129:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var o=t("gsap"),s=t("lodash/bind"),u=t("lodash/debounce"),c=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this.wrap=e,this.inner=n,this.titleWrap=n.querySelectorAll(".scroll-anim__textWrap"),this.direction=this.wrap.getAttribute("data-direction"),this.scrollSpeed=this.wrap.getAttribute("data-speed")||-2,this.isRender=!1,this.position={x:0,y:0,z:0},this.speed={x:0,y:0,z:0,vx:0},this.loopSize=0,this.titleTotal=5,this.option=Object.assign({letterViewDelay:50,flowSpeed:Number(this.scrollSpeed),nonestop:!1},r),this.resize=u(s(this.resize,this),10),window.addEventListener("resize",this.resize),this.resize()}return a(t,[{key:"resize",value:function(){var t=this.titleWrap[0].getBoundingClientRect().width;"vertical"==this.direction&&(t=this.titleWrap[0].getBoundingClientRect().height);var e=0;this.loopSize=1*t,this.inner.style.marginLeft=-e+"px"}},{key:"translate3d",value:function(t,e,n,i){t.style.transform="translate3d("+e+","+n+","+i+")"}},{key:"start",value:function(){o.TweenLite.to(this.speed,1,{delay:1,x:this.option.flowSpeed,ease:o.Power4.easeInOut})}},{key:"stop",value:function(){}},{key:"speedUp",value:function(){o.TweenLite.to(this.speed,1,{vx:this.option.flowSpeed<0?-2:2,ease:o.Power4.easeOut})}},{key:"speedDown",value:function(){o.TweenLite.to(this.speed,1,{vx:0,ease:o.Power4.easeOut})}},{key:"show",value:function(){this.inner.classList.add("on")}},{key:"hide",value:function(){this.inner.classList.remove("on")}},{key:"update",value:function(){(this.wrap.classList.contains("is-inview")||this.option.nonestop)&&(this.position.x+=this.speed.x+this.speed.vx,0!=this.loopSize&&(this.position.x%=this.loopSize),this.inner.style.transform="translate3d(".concat(this.position.x,"px,0,0)"))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.resize),delete this}}]),t}();n["default"]=c},{gsap:7,"lodash/bind":67,"lodash/debounce":69}],130:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var s=i(t("locomotive-scroll")),u=function(){function t(){return r(this,t),t.instance?t.instance:(t.instance=this,this._scroll=null,this)}return o(t,[{key:"set",value:function(t){if(this._scroll)throw"already scroll is active";this._scroll=new s["default"]({el:t,smooth:!0})}},{key:"destroy",value:function(){this._scroll&&(this._scroll.destroy(),this._scroll=null)}},{key:"update",value:function(){this._scroll&&this._scroll.update()}}]),t}();n["default"]=u},{"locomotive-scroll":8}],131:[function(t,e,n){"use strict";var i=t("gsap"),r=function(t){function e(){n=t.getTotalLength(),r=n,a=n,this.update(this._progress)}var n,r,a,o,s=this;return this._progress=-1,this.update=function(e){this._progress=e,i.TweenLite.set(t,{strokeDashoffset:r*this._progress+"px",strokeDasharray:a+"px "+a+"px"})},this.fromTo=function(t,e,n,r,a,s){var u=this,c="undefined"==a?i.Power4.easeInOut:a;o&&o.kill(),o=i.TweenLite.to(this,n,{delay:r,_progress:e,ease:c,onStart:function(){u._progress=t},onUpdate:function(){u.update(u._progress)},onComplete:function(){s&&s()}})},this.to=function(t,e,n,r,a){var u="undefined"==r?i.Power4.easeInOut:r;o&&o.kill(),o=i.TweenLite.to(this,e,{delay:n,_progress:t,ease:u,onStart:function(){},onUpdate:function(){s.update(s._progress)},onComplete:function(){a&&a()}})},e.call(this),this};r.prototype.constructor=r,e.exports=r},{gsap:7}],132:[function(t,e,n){"use strict";(function(){var t=function(){if(window.UA)return window.UA;var t,e,n,i,r,a;return r=navigator.userAgent,i=navigator.userAgent.toLowerCase(),a=window.navigator,e={isIE:!1,isIE6:!1,isIE7:!1,isIE8:!1,isIE9:!1,isLtIE9:!1,isLtIE10:!1,isLtIE11:!1,isIE10:!1,isIE11:!1,isEdge:!1,isIOS:!1,isIOS8:!1,isIPhone:!1,isIPad:!1,isIPhone4:!1,isIPad3:!1,isAndroid:!1,isAndroidMobile:!1,isChrome:!1,isSafari:!1,isMozilla:!1,isWebkit:!1,isOpera:!1,isPC:!1,isTablet:!1,isSmartPhone:!1,browser:i,isMac:/mac/i.test(a.platform),isWin:/win/i.test(a.platform)},(e.isIE=/msie\s(\d+)/.test(i))&&(n=RegExp.$1,n*=1,e.isIE6=6===n,e.isIE7=7===n,e.isIE8=8===n,e.isIE9=9===n,e.isIE10=10===n,e.isLtIE9=n<9,e.isLtIE10=n<10,e.isLtIE11=n<11),e.isIE7&&i.indexOf("trident/4.0")!==-1&&(e.isIE7=!1,e.isIE8=!0),i.indexOf("trident/7.0")!==-1&&(e.isIE=!0,e.isIE11=!0),i.indexOf("applewebkit")>-1&&i.indexOf("edge")>-1&&(e.isEdge=!0,e.isIE=!0),(e.isIPhone=/i(phone|pod)/.test(i))&&(e.isIPhone4=2===window.devicePixelRatio),(e.isIPad=/ipad/.test(i))&&(t=2===window.devicePixelRatio),e.isIOS=e.isIPhone||e.isIPad,e.isAndroid=/android/.test(i),e.isAndroid&&(e.androidVersion=Number(/Android \d+(.\d)?/.exec(r)[0].replace("Android ",""))),e.isAndroidMobile=/android(.+)?mobile/.test(i),e.isPC=!e.isIOS&&!e.isAndroid,e.isTablet=e.isIPad||e.isAndroid&&e.isAndroidMobile,e.isSmartPhone=e.isIPhone||e.isAndroidMobile,e.isChrome=/chrome/.test(i),e.isIOS&&(e.isChrome=/crios/.test(i),e.isTablet?e.iosVersion=Number(i.substr(i.lastIndexOf("ipad")+12,3).split("_")[0]):e.iosVersion=Number(i.substr(i.lastIndexOf("iphone os")+10,3).split("_")[0]),e.isTablet&&(e.isSmartPhone=!1)),e.isChrome&&(e.isAndroidMobile?e.chromeVersion=i.substr(i.lastIndexOf("chrome/")+7,2):e.isAndroid&&e.isTablet?e.chromeVersion=i.substr(i.lastIndexOf("chrome/")+7,2):e.chromeVersion=i.substr(i.lastIndexOf("crios/")+6,2)),e.isWebkit=/webkit/.test(i),e.isOpera=/opera/.test(i),e.isMozilla=i.indexOf("compatible")<0&&/mozilla/.test(i),e.isSafari=!e.isChrome&&e.isWebkit,e.isSafari&&"undefined"!=typeof document.ontouchstart&&(e.isIOS=!0),window.UA=e,e};t.prototype.constructor=t,e.exports=t}).call(void 0)},{}],133:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var o=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{videoId:videoId,containerId:containerId,width:width,height:height};i(this,t),this.isReady=!1,this.player,this.config={height:"640",width:"480",videoId:"",playerVars:{},events:{onReady:function(t){e.onPlayerReady(t)},onStateChange:function(t){e.onPlayerStateChange(t)}}},Object.assign(this.config,n),this.player=new YT.Player(n.containerId,this.config)}return a(t,[{key:"onPlayerReady",value:function(t){}},{key:"onPlayerStateChange",value:function(t){}},{key:"play",value:function(){this.player.playVideo()}},{key:"destroy",value:function(){this.player.destroy()}},{key:"stop",value:function(){this.player.stopVideo()}}]),t}();n["default"]=o},{}],134:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var r=i(t("./component/Common"));(0,r["default"])()},{
"./component/Common":91}]},{},[134]);