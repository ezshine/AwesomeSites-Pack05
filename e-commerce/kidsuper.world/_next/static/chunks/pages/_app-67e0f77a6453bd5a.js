(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{793:function(e,t,n){"use strict";let r,i,a;n.d(t,{A:function(){return eu},B:function(){return T},C:function(){return ec},E:function(){return A},F:function(){return ep},a:function(){return M},b:function(){return ex},c:function(){return X},d:function(){return ew},e:function(){return y},g:function(){return eM},i:function(){return w},j:function(){return e_},n:function(){return en},o:function(){return er},p:function(){return ei},u:function(){return E}});var s,o,l=n(9477),u=n(7294),c=n(2576);let h="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?u.useEffect:u.useLayoutEffect;function d(e){let t="function"==typeof e?function(e){let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(i!==t){let e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a=(e,r=i,a=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(t);function o(){let n=r(t);if(!a(s,n)){let t=s;e(s=n,t)}}return n.add(o),()=>n.delete(o)},s={setState:r,getState:i,subscribe:(e,t,r)=>t||r?a(e,t,r):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,s),s}(e):e,n=(e=t.getState,n=Object.is)=>{let r;let[,i]=(0,u.useReducer)(e=>e+1,0),a=t.getState(),s=(0,u.useRef)(a),o=(0,u.useRef)(e),l=(0,u.useRef)(n),c=(0,u.useRef)(!1),d=(0,u.useRef)();void 0===d.current&&(d.current=e(a));let p=!1;(s.current!==a||o.current!==e||l.current!==n||c.current)&&(r=e(a),p=!n(d.current,r)),h(()=>{p&&(d.current=r),s.current=a,o.current=e,l.current=n,c.current=!1});let f=(0,u.useRef)(a);h(()=>{let e=()=>{try{let e=t.getState(),n=o.current(e);l.current(d.current,n)||(s.current=e,d.current=n,i())}catch(e){c.current=!0,i()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n},[]);let m=p?r:d.current;return(0,u.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let e=[n,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},n}var p=n(6525),f=n.n(p),m=n(3840),g=n(8139),v=n(3454);let _={},y=e=>void Object.assign(_,e),b=e=>"colorSpace"in e||"outputColorSpace"in e,x=()=>{var e;return null!=(e=_.ColorManagement)?e:null},S=e=>e&&e.isOrthographicCamera,w=e=>e&&e.hasOwnProperty("current"),M="undefined"!=typeof window&&(null!=(s=window.document)&&s.createElement||(null==(o=window.navigator)?void 0:o.product)==="ReactNative")?u.useLayoutEffect:u.useEffect;function E(e){let t=u.useRef(e);return M(()=>void(t.current=e),[e]),t}function T({set:e}){return M(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class A extends u.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}A.getDerivedStateFromError=()=>({error:!0});let C="__default",R=new Map,P=e=>e&&!!e.memoized&&!!e.changes;function I(e){var t;let n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}let L=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},O={obj:e=>e===Object(e)&&!O.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){let a;if(typeof e!=typeof t||!!e!=!!t)return!1;if(O.str(e)||O.num(e))return e===t;let s=O.obj(e);if(s&&"reference"===r)return e===t;let o=O.arr(e);if(o&&"reference"===n)return e===t;if((o||s)&&e===t)return!0;for(a in e)if(!(a in t))return!1;if(s&&"shallow"===n&&"shallow"===r){for(a in i?t:e)if(!O.equ(e[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:e)if(e[a]!==t[a])return!1;if(O.und(a)){if(o&&0===e.length&&0===t.length||s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function N(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function k(e,t){let n=e;if(!t.includes("-"))return{target:n,key:t};{let r=t.split("-"),i=r.pop();return{target:n=r.reduce((e,t)=>e[t],e),key:i}}}let D=/-\d+$/;function U(e,t,n){if(O.str(n)){if(D.test(n)){let{target:t,key:r}=k(e,n.replace(D,""));Array.isArray(t[r])||(t[r]=[])}let{target:r,key:i}=k(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function F(e,t,n){var r,i;if(O.str(n)){let{target:r,key:i}=k(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function z(e,{children:t,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},u=!1){var c;let h=null!=(c=null==e?void 0:e.__r3f)?c:{},d=Object.entries(i),p=[];if(u){let e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||d.unshift([e[t],C+"remove"])}d.forEach(([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t||O.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return p.push([t,n,!0,[]]);let a=[];for(let e in t.includes("-")&&(a=t.split("-")),p.push([t,n,!1,a]),i){let n=i[e];e.startsWith(`${t}-`)&&p.push([e,n,!1,e.split("-")])}});let f={...i};return h.memoizedProps&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:p}}let B=void 0!==v&&!1;function V(e,t){var n,r,i;let a=null!=(n=e.__r3f)?n:{},s=a.root,o=null!=(r=null==s?void 0:null==s.getState?void 0:s.getState())?r:{},{memoized:u,changes:c}=P(t)?t:z(e,t),h=a.eventCount;e.__r3f&&(e.__r3f.memoizedProps=u);for(let t=0;t<c.length;t++){let[n,r,i,s]=c[t];if(b(e)){let e="srgb",t="srgb-linear";"encoding"===n?(n="colorSpace",r=3001===r?e:t):"outputEncoding"===n&&(n="outputColorSpace",r=3001===r?e:t)}let u=e,h=u[n];if(s.length&&!((h=s.reduce((e,t)=>e[t],e))&&h.set)){let[t,...r]=s.reverse();u=r.reverse().reduce((e,t)=>e[t],e),n=t}if(r===C+"remove"){if(u.constructor){let e=R.get(u.constructor);e||(e=new u.constructor,R.set(u.constructor,e)),r=e[n]}else r=0}if(i)r?a.handlers[n]=r:delete a.handlers[n],a.eventCount=Object.keys(a.handlers).length;else if(h&&h.set&&(h.copy||h instanceof l.Layers)){if(Array.isArray(r))h.fromArray?h.fromArray(r):h.set(...r);else if(h.copy&&r&&r.constructor&&(B?h.constructor.name===r.constructor.name:h.constructor===r.constructor))h.copy(r);else if(void 0!==r){let e=h instanceof l.Color;!e&&h.setScalar?h.setScalar(r):h instanceof l.Layers&&r instanceof l.Layers?h.mask=r.mask:h.set(r),x()||o.linear||!e||h.convertSRGBToLinear()}}else if(u[n]=r,u[n]instanceof l.Texture&&u[n].format===l.RGBAFormat&&u[n].type===l.UnsignedByteType){let e=u[n];b(e)&&b(o.gl)?e.colorSpace=o.gl.outputColorSpace:e.encoding=o.gl.outputEncoding}H(e)}if(a.parent&&o.internal&&e.raycast&&h!==a.eventCount){let t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),a.eventCount&&o.internal.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(i=e.__r3f)&&i.parent&&j(e),e}function H(e){var t,n;let r=null==(t=e.__r3f)?void 0:null==(n=t.root)?void 0:null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function j(e){null==e.onUpdate||e.onUpdate(e)}function G(e,t){e.manual||(S(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function W(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function q(e,t,n,r){let i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function X(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(W(e)),null!=r&&r.eventCount){let n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){let{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;let u="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,h=function(t,n){let r=e.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){let t=L(s[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=s.flatMap(function(e){let n=L(e);if(!n||!n.events.enabled||null===n.raycaster.camera)return[];if(void 0===n.raycaster.camera){var r;null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)}return n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let n=L(e.object),r=L(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=W(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(r.events.filter&&(o=r.events.filter(o,r)),o)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(W(e.intersection))||a.push(e.intersection);return a}(a,u?t:void 0),d=c?function(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=h.map(e=>e.eventObject)),c&&!h.length&&d<=2&&(r(a,o.interaction),s&&s(a)),u&&n(h),function(t,r,i,a){let s=e.getState();if(t.length){let e={stopped:!1};for(let o of t){let{raycaster:u,pointer:c,camera:h,internal:d}=L(o.object)||s,p=new l.Vector3(c.x,c.y,0).unproject(h),f=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{let t={intersection:o,target:r.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,t):d.capturedMap.set(e,new Map([[o.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{let t=d.capturedMap.get(e);t&&q(d.capturedMap,o.eventObject,t,e)},v={};for(let e in r){let t=r[e];"function"!=typeof t&&(v[e]=t)}let _={...o,...v,pointer:c,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:u.ray,camera:h,stopPropagation(){let i="pointerId"in r&&d.capturedMap.get(r.pointerId);(!i||i.has(o.eventObject))&&(_.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject)&&n([...t.slice(0,t.indexOf(o)),o]))},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(a(_),!0===e.stopped)break}}}(h,a,d,function(e){let t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount){if(u){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){let t=W(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{let n=s[i];n?(!c||o.initialHits.includes(t))&&(r(a,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&r(a,o.interaction.filter(e=>!o.initialHits.includes(e)))}}})}}}}let Z=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Y=e=>!!(null!=e&&e.render),K=u.createContext(null),Q=(e,t)=>{let n=d((n,r)=>{let i;let a=new l.Vector3,s=new l.Vector3,o=new l.Vector3;function c(e=r().camera,t=s,n=r().size){let{width:i,height:u,top:c,left:h}=n,d=i/u;t instanceof l.Vector3?o.copy(t):o.set(...t);let p=e.getWorldPosition(a).distanceTo(o);if(S(e))return{width:i/e.zoom,height:u/e.zoom,top:c,left:h,factor:1,distance:p,aspect:d};{let t=2*Math.tan(e.fov*Math.PI/180/2)*p,n=i/u*t;return{width:n,height:t,top:c,left:h,factor:i/n,distance:p,aspect:d}}}let h=e=>n(t=>({performance:{...t.performance,current:e}})),d=new l.Vector2;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new l.Clock,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();i&&clearTimeout(i),e.performance.current!==e.performance.min&&h(e.performance.min),i=setTimeout(()=>h(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:c},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i,a,o)=>{let l=r().camera,u={width:e,height:t,top:a||0,left:o||0,updateStyle:i};n(e=>({size:u,viewport:{...e.viewport,...c(l,s,u)}}))},setDpr:e=>n(t=>{let n=I(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:u.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{let i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:o,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){var u;i=t,a=r.dpr,G(e,t),o.setPixelRatio(r.dpr);let n=null!=(u=t.updateStyle)?u:"undefined"!=typeof HTMLCanvasElement&&o.domElement instanceof HTMLCanvasElement;o.setSize(t.width,t.height,n)}e!==s&&(s=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function J(e,t){let n={callback:e};return t.add(n),()=>void t.delete(n)}let $=new Set,ee=new Set,et=new Set,en=e=>J(e,$),er=e=>J(e,ee),ei=e=>J(e,et);function ea(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function es(e,t){switch(e){case"before":return ea($,t);case"after":return ea(ee,t);case"tail":return ea(et,t)}}function eo(e,t,n){let s=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(s=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),i=t.internal.subscribers,r=0;r<i.length;r++)(a=i[r]).ref.current(a.store.getState(),s,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function el(){let e=u.useContext(K);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function eu(e=e=>e,t){return el()(e,t)}function ec(e,t=0){let n=el(),r=n.getState().internal.subscribe,i=E(e);return M(()=>r(i,t,n),[t,r,n]),null}let eh=new WeakMap;function ed(e,t){return function(n,...r){let i=eh.get(n);return i||(i=new n,eh.set(n,i)),e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,function(e){let t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`)))))).finally(()=>null==i.dispose?void 0:i.dispose())}}function ep(e,t,n,r){let i=Array.isArray(t)?t:[t],a=(0,g.Rq)(ed(n,r),[e,...i],{equal:O.equ});return Array.isArray(t)?a:a[0]}ep.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return(0,g.MA)(ed(n),[e,...r])},ep.clear=function(e,t){let n=Array.isArray(t)?t:[t];return(0,g.ZH)([e,...n])};let ef=new Map,{invalidate:em,advance:eg}=function(e){let t,n,r,i=!1;function a(s){for(let l of(n=requestAnimationFrame(a),i=!0,t=0,es("before",s),e.values())){var o;(r=l.store.getState()).internal.active&&("always"===r.frameloop||r.internal.frames>0)&&!(null!=(o=r.gl.xr)&&o.isPresenting)&&(t+=eo(s,r))}if(es("after",s),0===t)return es("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n,r=1){var s;if(!n)return e.forEach(e=>t(e.store.getState()),r);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(a)))},advance:function(t,n=!0,r,i){if(n&&es("before",t),r)eo(t,r,i);else for(let n of e.values())eo(t,n.store.getState());n&&es("after",t)}}}(ef),{reconciler:ev,applyProps:e_}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let a,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw Error("R3F: Primitives without 'object' are invalid!");a=N(r.object,{type:e,root:i,attach:n,primitive:!0})}else{let r=_[s];if(!r)throw Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw Error("R3F: The args prop must be an array!");a=N(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===a.__r3f.attach&&(a instanceof l.BufferGeometry?a.__r3f.attach="geometry":a instanceof l.Material&&(a.__r3f.attach="material")),"inject"!==s&&V(a,r),a}function r(e,t){let n=!1;if(t){var r,i;null!=(r=t.__r3f)&&r.attach?U(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||N(t,{}),t.__r3f.parent=e,j(t),H(t)}}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)U(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});let i=e.children.filter(e=>e!==t),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||N(t,{}),t.__r3f.parent=e,j(t),H(t)}}function a(e,t,n=!1){e&&[...e].forEach(e=>s(t,e,n))}function s(e,t,n){if(t){var r,i,s,o,l;t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(i=t.__r3f)&&i.attach?F(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{q(n.capturedMap,t,e,r)})}(t.__r3f.root,t));let u=null==(s=t.__r3f)?void 0:s.primitive,c=!u&&(void 0===n?null!==t.dispose:n);if(u||(a(null==(l=t.__r3f)?void 0:l.objects,t,c),a(t.children,t,c)),delete t.__r3f,c&&t.dispose&&"Scene"!==t.type){let e=()=>{try{t.dispose()}catch(e){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?(0,m.unstable_scheduleCallback)(m.unstable_IdlePriority,e):e()}H(e)}}let o=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:f()({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;let n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;let r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{let{args:t=[],children:i,...a}=r,{args:s=[],children:o,...l}=n;if(!Array.isArray(t))throw Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==s[t]))return[!0];let u=z(e,a,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,[t,i],a,o,l,u){t?function(e,t,i,a){var o;let l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;let u=n(t,i,e.__r3f.root);if(e.children){for(let t of e.children)t.__r3f&&r(u,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>r(u,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&u.__r3f.root.getState().internal.interaction.push(u),[a,a.alternate].forEach(e=>{null!==e&&(e.stateNode=u,e.ref&&("function"==typeof e.ref?e.ref(u):e.ref.current=u))})}(e,a,l,u):V(e,i)},commitMount(e,t,n,r){var i;let a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>N(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;let{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&F(r,e,n),e.isObject3D&&(e.visible=!1),H(e)},unhideInstance(e,t){var n;let{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&U(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),H(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():c.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&O.fun(performance.now)?performance.now:O.fun(Date.now)?Date.now:()=>0,scheduleTimeout:O.fun(setTimeout)?setTimeout:void 0,cancelTimeout:O.fun(clearTimeout)?clearTimeout:void 0}),applyProps:V}}(0,function(){var e;let t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return c.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return c.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return c.ContinuousEventPriority;default:return c.DefaultEventPriority}}),ey={objects:"shallow",strict:!1},eb=(e,t)=>{let n="function"==typeof e?e(t):e;return Y(n)?n:new l.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function ex(e){let t,n;let r=ef.get(e),i=null==r?void 0:r.fiber,a=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");let s="function"==typeof reportError?reportError:console.error,o=a||Q(em,eg),h=i||ev.createContainer(o,c.ConcurrentRoot,null,!1,null,"",s,null);r||ef.set(e,{fiber:h,store:o});let d=!1;return{configure(r={}){var i,a;let{gl:s,size:u,scene:c,events:h,onCreated:p,shadows:f=!1,linear:m=!1,flat:g=!1,legacy:v=!1,orthographic:_=!1,frameloop:y="always",dpr:b=[1,2],performance:S,raycaster:w,camera:M,onPointerMissed:E}=r,T=o.getState(),A=T.gl;T.gl||T.set({gl:A=eb(s,e)});let C=T.raycaster;C||T.set({raycaster:C=new l.Raycaster});let{params:R,...P}=w||{};if(O.equ(P,C,ey)||e_(C,{...P}),O.equ(R,C.params,ey)||e_(C,{params:{...C.params,...R}}),!T.camera||T.camera===n&&!O.equ(n,M,ey)){n=M;let e=M instanceof l.Camera,t=e?M:_?new l.OrthographicCamera(0,0,0,0,.1,1e3):new l.PerspectiveCamera(75,0,.1,1e3);e||(t.position.z=5,M&&e_(t,M),T.camera||null!=M&&M.rotation||t.lookAt(0,0,0)),T.set({camera:t}),C.camera=t}if(!T.scene){let e;c instanceof l.Scene?e=c:(e=new l.Scene,c&&e_(e,c)),T.set({scene:N(e)})}if(!T.xr){let e=(e,t)=>{let n=o.getState();"never"!==n.frameloop&&eg(e,!0,n,t)},t=()=>{let t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||em(t)},n={connect(){let e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=A.xr)?void 0:i.addEventListener)&&n.connect(),T.set({xr:n})}if(A.shadowMap){let e=A.shadowMap.enabled,t=A.shadowMap.type;if(A.shadowMap.enabled=!!f,O.boo(f))A.shadowMap.type=l.PCFSoftShadowMap;else if(O.str(f)){let e={basic:l.BasicShadowMap,percentage:l.PCFShadowMap,soft:l.PCFSoftShadowMap,variance:l.VSMShadowMap};A.shadowMap.type=null!=(a=e[f])?a:l.PCFSoftShadowMap}else O.obj(f)&&Object.assign(A.shadowMap,f);(e!==A.shadowMap.enabled||t!==A.shadowMap.type)&&(A.shadowMap.needsUpdate=!0)}let L=x();L&&("enabled"in L?L.enabled=!v:"legacyMode"in L&&(L.legacyMode=v)),e_(A,{outputEncoding:m?3e3:3001,toneMapping:g?l.NoToneMapping:l.ACESFilmicToneMapping}),T.legacy!==v&&T.set(()=>({legacy:v})),T.linear!==m&&T.set(()=>({linear:m})),T.flat!==g&&T.set(()=>({flat:g})),!s||O.fun(s)||Y(s)||O.equ(s,A,ey)||e_(A,s),h&&!T.events.handlers&&T.set({events:h(o)});let k=function(e,t){let n="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){let{width:e,height:r,top:i,left:a,updateStyle:s=n}=t;return{width:e,height:r,top:i,left:a,updateStyle:s}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:r,top:i,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a,updateStyle:n}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,u);return O.equ(k,T.size,ey)||T.setSize(k.width,k.height,k.updateStyle,k.top,k.left),b&&T.viewport.dpr!==I(b)&&T.setDpr(b),T.frameloop!==y&&T.setFrameloop(y),T.onPointerMissed||T.set({onPointerMissed:E}),S&&!O.equ(S,T.performance,ey)&&T.set(e=>({performance:{...e.performance,...S}})),t=p,d=!0,this},render(n){return d||this.configure(),ev.updateContainer(u.createElement(eS,{store:o,children:n,onCreated:t,rootElement:e}),h,null,()=>void 0),o},unmount(){ew(e)}}}function eS({store:e,children:t,onCreated:n,rootElement:r}){return M(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),u.createElement(K.Provider,{value:e},t)}function ew(e,t){let n=ef.get(e),r=null==n?void 0:n.fiber;if(r){let i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),ev.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),function(e){for(let t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),ef.delete(e),t&&t(e)}catch(e){}},500)})}}function eM(e,t,n){return u.createElement(eE,{key:t.uuid,children:e,container:t,state:n})}function eE({state:e={},children:t,container:n}){let{events:r,size:i,...a}=e,s=el(),[o]=u.useState(()=>new l.Raycaster),[c]=u.useState(()=>new l.Vector2),h=u.useCallback((e,t)=>{let u;let h={...e};if(Object.keys(e).forEach(n=>{(Z.includes(n)||e[n]!==t[n]&&t[n])&&delete h[n]}),t&&i){let n=t.camera;u=e.viewport.getCurrentViewport(n,new l.Vector3,i),n!==e.camera&&G(n,i)}return{...h,scene:n,raycaster:o,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...u},...a}},[e]),[p]=u.useState(()=>{let e=s.getState();return d((t,l)=>({...e,scene:n,raycaster:o,pointer:c,mouse:c,previousRoot:s,events:{...e.events,...r},size:{...e.size,...i},...a,set:t,get:l,setEvents:e=>t(t=>({...t,events:{...t.events,...e}}))}))});return u.useEffect(()=>{let e=s.subscribe(e=>p.setState(t=>h(e,t)));return()=>{e(),p.destroy()}},[]),u.useEffect(()=>{p.setState(e=>h(s.getState(),e))},[h]),u.createElement(u.Fragment,null,ev.createPortal(u.createElement(K.Provider,{value:p},t),p,null))}ev.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:u.version}),u.unstable_act},4347:function(e,t){var n,r,i,a,s,o,l,u,c,h,d,p,f,m,g,v,_,y,b;n=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,r=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,i=Math.PI/180,a=Math.sin,s=Math.cos,o=Math.abs,l=Math.sqrt,u=function(e){return Math.round(1e5*e)/1e5||0},d=function(){return c||"undefined"!=typeof window&&(c=window.gsap)&&c.registerPlugin&&c},p=function(){(c=d())?(c.registerEase("_CE",b.create),h=1):console.warn("Please gsap.registerPlugin(CustomEase)")},f=function(e){return~~(1e3*e+(e<0?-.5:.5))/1e3},m=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,g=/[cLlsSaAhHvVtTqQ]/g,v=function(e){var t,n=e.length,r=1e20;for(t=1;t<n;t+=6)+e[t]<r&&(r=+e[t]);return r},_=function(e,t,n){n||0===n||(n=Math.max(+e[e.length-1],+e[1]));var r,i=-1*+e[0],a=-n,s=e.length,o=1/(+e[s-2]+i),l=-t||(Math.abs(+e[s-1]-+e[1])<.01*(+e[s-2]-+e[0])?v(e)+a:+e[s-1]+a);for(r=0,l=l?1/l:-o;r<s;r+=2)e[r]=(+e[r]+i)*o,e[r+1]=(+e[r+1]+a)*l},y=function e(t,n,r,i,a,s,o,l,u,c,h){var d,p=(t+r)/2,f=(n+i)/2,m=(r+a)/2,g=(i+s)/2,v=(a+o)/2,_=(s+l)/2,y=(p+m)/2,b=(f+g)/2,x=(m+v)/2,S=(g+_)/2,w=(y+x)/2,M=(b+S)/2,E=o-t,T=l-n,A=Math.abs((r-o)*T-(i-l)*E),C=Math.abs((a-o)*T-(s-l)*E);return c||(c=[{x:t,y:n},{x:o,y:l}],h=1),c.splice(h||c.length-1,0,{x:w,y:M}),(A+C)*(A+C)>u*(E*E+T*T)&&(d=c.length,e(t,n,p,f,y,b,w,M,u,c,h),e(w,M,x,S,v,_,o,l,u,c,h+1+(c.length-d))),c},b=function(){function e(e,t,n){h||p(),this.id=e,this.setData(t,n)}var t=e.prototype;return t.setData=function(e,t){t=t||{};var u,h,d,p,f,v,b,x,S,w=(e=e||"0,0,1,1").match(m),M=1,E=[],T=[],A=t.precision||1,C=A<=1;if(this.data=e,(g.test(e)||~e.indexOf("M")&&0>e.indexOf("C"))&&(w=function(e){var t,u,c,h,d,p,f,m,g,v,_,y,b,x,S,w=(e+"").replace(r,function(e){var t=+e;return t<1e-4&&t>-.0001?0:t}).match(n)||[],M=[],E=0,T=0,A=2/3,C=w.length,R=0,P="ERROR: malformed path: "+e,I=function(e,t,n,r){v=(n-e)/3,_=(r-t)/3,f.push(e+v,t+_,n-v,r-_,n,r)};if(!e||!isNaN(w[0])||isNaN(w[1]))return console.log(P),M;for(t=0;t<C;t++)if(b=d,isNaN(w[t])?p=(d=w[t].toUpperCase())!==w[t]:t--,c=+w[t+1],h=+w[t+2],p&&(c+=E,h+=T),t||(m=c,g=h),"M"===d)f&&(f.length<8?M.length-=1:R+=f.length),E=m=c,T=g=h,f=[c,h],M.push(f),t+=2,d="L";else if("C"===d)f||(f=[0,0]),p||(E=T=0),f.push(c,h,E+1*w[t+3],T+1*w[t+4],E+=1*w[t+5],T+=1*w[t+6]),t+=6;else if("S"===d)v=E,_=T,("C"===b||"S"===b)&&(v+=E-f[f.length-4],_+=T-f[f.length-3]),p||(E=T=0),f.push(v,_,c,h,E+=1*w[t+3],T+=1*w[t+4]),t+=4;else if("Q"===d)v=E+(c-E)*A,_=T+(h-T)*A,p||(E=T=0),E+=1*w[t+3],T+=1*w[t+4],f.push(v,_,E+(c-E)*A,T+(h-T)*A,E,T),t+=4;else if("T"===d)v=E-f[f.length-4],_=T-f[f.length-3],f.push(E+v,T+_,c+(E+1.5*v-c)*A,h+(T+1.5*_-h)*A,E=c,T=h),t+=2;else if("H"===d)I(E,T,E=c,T),t+=1;else if("V"===d)I(E,T,E,T=c+(p?T-E:0)),t+=1;else if("L"===d||"Z"===d)"Z"===d&&(c=m,h=g,f.closed=!0),("L"===d||o(E-c)>.5||o(T-h)>.5)&&(I(E,T,c,h),"L"===d&&(t+=2)),E=c,T=h;else if("A"===d){if(x=w[t+4],S=w[t+5],v=w[t+6],_=w[t+7],u=7,x.length>1&&(x.length<3?(_=v,v=S,u--):(_=S,v=x.substr(2),u-=2),S=x.charAt(1),x=x.charAt(0)),y=function(e,t,n,r,u,c,h,d,p){if(e!==d||t!==p){n=o(n),r=o(r);var f=u%360*i,m=s(f),g=a(f),v=Math.PI,_=2*v,y=(e-d)/2,b=(t-p)/2,x=m*y+g*b,S=-g*y+m*b,w=x*x,M=S*S,E=w/(n*n)+M/(r*r);E>1&&(n=l(E)*n,r=l(E)*r);var T=n*n,A=r*r,C=(T*A-T*M-A*w)/(T*M+A*w);C<0&&(C=0);var R=(c===h?-1:1)*l(C),P=n*S/r*R,I=-(r*x/n*R),L=(e+d)/2+(m*P-g*I),O=(t+p)/2+(g*P+m*I),N=(x-P)/n,k=(S-I)/r,D=(-x-P)/n,U=(-S-I)/r,F=N*N+k*k,z=(k<0?-1:1)*Math.acos(N/l(F)),B=(N*U-k*D<0?-1:1)*Math.acos((N*D+k*U)/l(F*(D*D+U*U)));isNaN(B)&&(B=v),!h&&B>0?B-=_:h&&B<0&&(B+=_),z%=_;var V,H=Math.ceil(o(B%=_)/(_/4)),j=[],G=B/H,W=4/3*a(G/2)/(1+s(G/2)),q=m*n,X=g*n,Z=-(g*r),Y=m*r;for(V=0;V<H;V++)x=s(u=z+V*G),S=a(u),N=s(u+=G),k=a(u),j.push(x-W*S,S+W*x,N+W*k,k-W*N,N,k);for(V=0;V<j.length;V+=2)x=j[V],S=j[V+1],j[V]=x*q+S*Z+L,j[V+1]=x*X+S*Y+O;return j[V-2]=d,j[V-1]=p,j}}(E,T,+w[t+1],+w[t+2],+w[t+3],+x,+S,(p?E:0)+1*v,(p?T:0)+1*_),t+=u,y)for(u=0;u<y.length;u++)f.push(y[u]);E=f[f.length-2],T=f[f.length-1]}else console.log(P);return(t=f.length)<6?(M.pop(),t=0):f[0]===f[t-2]&&f[1]===f[t-1]&&(f.closed=!0),M.totalPoints=R+t,M}(e)[0]),4===(u=w.length))w.unshift(0,0),w.push(1,1),u=8;else if((u-2)%6)throw"Invalid CustomEase";for((0!=+w[0]||1!=+w[u-2])&&_(w,t.height,t.originY),this.segment=w,p=2;p<u;p+=6)h={x:+w[p-2],y:+w[p-1]},d={x:+w[p+4],y:+w[p+5]},E.push(h,d),y(h.x,h.y,+w[p],+w[p+1],+w[p+2],+w[p+3],d.x,d.y,1/(2e5*A),E,E.length-1);for(p=0,u=E.length;p<u;p++)b=E[p],x=E[p-1]||b,(b.x>x.x||x.y!==b.y&&x.x===b.x||b===x)&&b.x<=1?(x.cx=b.x-x.x,x.cy=b.y-x.y,x.n=b,x.nx=b.x,C&&p>1&&Math.abs(x.cy/x.cx-E[p-2].cy/E[p-2].cx)>2&&(C=0),x.cx<M&&(x.cx?M=x.cx:(x.cx=.001,p===u-1&&(x.x-=.001,M=Math.min(M,.001),C=0)))):(E.splice(p--,1),u--);if(f=1/(u=1/M+1|0),v=0,b=E[0],C){for(p=0;p<u;p++)S=p*f,b.nx<S&&(b=E[++v]),h=b.y+(S-b.x)/b.cx*b.cy,T[p]={x:S,cx:f,y:h,cy:0,nx:9},p&&(T[p-1].cy=h-T[p-1].y);T[u-1].cy=E[E.length-1].y-h}else{for(p=0;p<u;p++)b.nx<p*f&&(b=E[++v]),T[p]=b;v<E.length-1&&(T[p-1]=E[E.length-2])}return this.ease=function(e){var t=T[e*u|0]||T[u-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy},this.ease.custom=this,this.id&&c&&c.registerEase(this.id,this.ease),this},t.getSVGData=function(t){return e.getSVGData(this,t)},e.create=function(t,n,r){return new e(t,n,r).ease},e.register=function(e){c=e,p()},e.get=function(e){return c.parseEase(e)},e.getSVGData=function(t,n){var r,i,a,s,o,l,h,d,p,m,g=(n=n||{}).width||100,v=n.height||100,_=n.x||0,y=(n.y||0)+v,b=c.utils.toArray(n.path)[0];if(n.invert&&(v=-v,y=0),"string"==typeof t&&(t=c.parseEase(t)),t.custom&&(t=t.custom),t instanceof e)r=function(e){"number"==typeof e[0]&&(e=[e]);var t,n,r,i,a="",s=e.length;for(n=0;n<s;n++){for(a+="M"+u((i=e[n])[0])+","+u(i[1])+" C",t=i.length,r=2;r<t;r++)a+=u(i[r++])+","+u(i[r++])+" "+u(i[r++])+","+u(i[r++])+" "+u(i[r++])+","+u(i[r])+" ";i.closed&&(a+="z")}return a}(function(e,t,n,r,i,a,s){for(var o,l,u,c,h,d=e.length;--d>-1;)for(u=0,l=(o=e[d]).length;u<l;u+=2)c=o[u],h=o[u+1],o[u]=c*t+0*h+a,o[u+1]=0*c+h*i+s;return e._dirty=1,e}([t.segment],g,0,0,-v,_,y));else{for(r=[_,y],s=1/(h=Math.max(5,200*(n.precision||1))),h+=2,d=5/h,p=f(_+s*g),i=((m=f(y+-(t(s)*v)))-y)/(p-_),a=2;a<h;a++)o=f(_+a*s*g),(Math.abs(((l=f(y+-(t(a*s)*v)))-m)/(o-p)-i)>d||a===h-1)&&(r.push(p,m),i=(l-m)/(o-p)),p=o,m=l;r="M"+r.join(",")}return b&&b.setAttribute("d",r),r},e}(),d()&&c.registerPlugin(b),b.version="3.12.2",t.CustomEase=b,t.default=b,Object.defineProperty(t,"__esModule",{value:!0})},4011:function(e,t,n){"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{$i:function(){return em},DY:function(){return ex},Fc:function(){return I},Fo:function(){return nh},GN:function(){return tw},JV:function(){return nc},Ks:function(){return na},Ll:function(){return nT},Ok:function(){return eS},Pr:function(){return eM},S5:function(){return nn},SI:function(){return K},UI:function(){return th},Wy:function(){return te},bQ:function(){return $},cy:function(){return eT},d4:function(){return Q},fS:function(){return ew},if:function(){return t$},kr:function(){return tE},l1:function(){return tV},lC:function(){return ea},m2:function(){return H},p8:function(){return nE},r9:function(){return z},xr:function(){return tT}});/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var a,s,o,l,u,c,h,d,p,f,m,g,v,_,y,b,x,S,w,M,E,T,A,C,R,P,I={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},L={duration:.5,overwrite:!1,delay:0},O=2*Math.PI,N=O/4,k=0,D=Math.sqrt,U=Math.cos,F=Math.sin,z=function(e){return"string"==typeof e},B=function(e){return"function"==typeof e},V=function(e){return"number"==typeof e},H=function(e){return void 0===e},j=function(e){return"object"==typeof e},G=function(e){return!1!==e},W=function(){return"undefined"!=typeof window},q=function(e){return B(e)||z(e)},X="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Z=Array.isArray,Y=/(?:-?\.?\d|\.)+/gi,K=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Q=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,J=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$=/[+-]=-?[.\d]+/,ee=/[^,'"\[\]\s]+/gi,et=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,en={},er={},ei=function(e){return(er=eO(e,en))&&nE},ea=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},es=function(e,t){return!t&&console.warn(e)},eo=function(e,t){return e&&(en[e]=t)&&er&&(er[e]=t)||en},el=function(){return 0},eu={suppressEvents:!0,isStart:!0,kill:!1},ec={suppressEvents:!0,kill:!1},eh={suppressEvents:!0},ed={},ep=[],ef={},em={},eg={},ev=30,e_=[],ey="",eb=function(e){var t,n,r=e[0];if(j(r)||B(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=e_.length;n--&&!e_[n].targetTest(r););t=e_[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new tV(e[n],t)))||e.splice(n,1);return e},ex=function(e){return e._gsap||eb(tr(e))[0]._gsap},eS=function(e,t,n){return(n=e[t])&&B(n)?e[t]():H(n)&&e.getAttribute&&e.getAttribute(t)||n},ew=function(e,t){return(e=e.split(",")).forEach(t)||e},eM=function(e){return Math.round(1e5*e)/1e5||0},eE=function(e){return Math.round(1e7*e)/1e7||0},eT=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},eA=function(e,t){for(var n=t.length,r=0;0>e.indexOf(t[r])&&++r<n;);return r<n},eC=function(){var e,t,n=ep.length,r=ep.slice(0);for(e=0,ef={},ep.length=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},eR=function(e,t,n,r){ep.length&&!x&&eC(),e.render(t,n,r||x&&t<0&&(e._initted||e._startAt)),ep.length&&!x&&eC()},eP=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(ee).length<2?t:z(e)?e.trim():e},eI=function(e){return e},eL=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},eO=function(e,t){for(var n in t)e[n]=t[n];return e},eN=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=j(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},ek=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},eD=function(e){var t,n=e.parent||w,r=e.keyframes?(t=Z(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):eL;if(G(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},eU=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},eF=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,s=e[r];if(i)for(a=t[i];s&&s[i]>a;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=s,t.parent=t._dp=e,t},ez=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,a=t._next;i?i._next=a:e[n]===t&&(e[n]=a),a?a._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},eB=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},eV=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},eH=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},ej=function(e,t,n,r){return e._startAt&&(x?e._startAt.revert(ec):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},eG=function(e){return e._repeat?eW(e._tTime,e=e.duration()+e._rDelay)*e:0},eW=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},eq=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},eX=function(e){return e._end=eE(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},eZ=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=eE(n._time-(e._ts>0?t/e._ts:-(((e._dirty?e.totalDuration():e._tDur)-t)/e._ts))),eX(e),n._dirty||eV(n,e)),e},eY=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=eq(e.rawTime(),t),(!t._dur||e9(0,t.totalDuration(),n)-t._tTime>1e-8)&&t.render(n,!0)),eV(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-.00000001}},eK=function(e,t,n,r){return t.parent&&eB(t),t._start=eE((V(n)?n:n||e!==w?e7(e,n,t):e._time)+t._delay),t._end=eE(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),eF(e,t,"_first","_last",e._sort?"_start":0),e0(t)||(e._recent=t),r||eY(e,t),e._ts<0&&eZ(e,e._tTime),e},eQ=function(e,t){return(en.ScrollTrigger||ea("scrollTrigger",t))&&en.ScrollTrigger.create(t,e)},eJ=function(e,t,n,r,i){return(t0(e,t,i),e._initted)?!n&&e._pt&&!x&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&C!==tT.frame?(ep.push(e),e._lazy=[i,r],1):void 0:1},e$=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(0>n.rawTime()||e(n))},e0=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},e1=function(e,t,n,r){var i,a,s,o=e.ratio,l=t<0||!t&&(!e._start&&e$(e)&&!(!e._initted&&e0(e))||(e._ts<0||e._dp._ts<0)&&!e0(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(a=eW(c=e9(0,e._tDur,t),u),e._yoyo&&1&a&&(l=1-l),a!==eW(e._tTime,u)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||x||r||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&eJ(e,t,r,n,c))return;for(s=e._zTime,e._zTime=t||(n?1e-8:0),n||(n=t&&!s),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&ej(e,t,n,!0),e._onUpdate&&!n&&tf(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&tf(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&eB(e,1),n||x||(tf(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},e2=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}},e3=function(e,t,n,r){var i=e._repeat,a=eE(t)||0,s=e._tTime/e._tDur;return s&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=i?i<0?1e10:eE(a*(i+1)+e._rDelay*i):a,s>0&&!r&&eZ(e,e._tTime=e._tDur*s),e.parent&&eX(e),n||eV(e.parent,e),e},e4=function(e){return e instanceof tj?eV(e):e3(e,e._dur)},e5={_start:0,endTime:el,totalDuration:el},e7=function e(t,n,r){var i,a,s,o=t.labels,l=t._recent||e5,u=t.duration()>=1e8?l.endTime(!1):t._dur;return z(n)&&(isNaN(n)||n in o)?(a=n.charAt(0),s="%"===n.substr(-1),i=n.indexOf("="),"<"===a||">"===a)?(i>=0&&(n=n.replace(/=/,"")),("<"===a?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(s?(i<0?l:r).totalDuration()/100:1)):i<0?(n in o||(o[n]=u),o[n]):(a=parseFloat(n.charAt(i-1)+n.substr(i+1)),s&&r&&(a=a/100*(Z(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+a:u+a):null==n?u:+n},e8=function(e,t,n){var r,i,a=V(t[1]),s=(a?2:1)+(e<2?0:1),o=t[s];if(a&&(o.duration=t[1]),o.parent=n,e){for(r=o,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=G(i.vars.inherit)&&i.parent;o.immediateRender=G(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new t8(t[0],o,t[s+1])},e6=function(e,t){return e||0===e?t(e):t},e9=function(e,t,n){return n<e?e:n>t?t:n},te=function(e,t){return z(e)&&(t=et.exec(e))?t[1]:""},tt=[].slice,tn=function(e,t){return e&&j(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&j(e[0]))&&!e.nodeType&&e!==M},tr=function(e,t,n){var r;return S&&!t&&S.selector?S.selector(e):z(e)&&!n&&(E||!tA())?tt.call((t||T).querySelectorAll(e),0):Z(e)?(void 0===r&&(r=[]),e.forEach(function(e){var t;return z(e)&&!n||tn(e,1)?(t=r).push.apply(t,tr(e)):r.push(e)})||r):tn(e)?tt.call(e,0):e?[e]:[]},ti=function(e){return e=tr(e)[0]||es("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return tr(t,n.querySelectorAll?n:n===e?es("Invalid scope")||T.createElement("div"):e)}},ta=function(e){return e.sort(function(){return .5-Math.random()})},ts=function(e){if(B(e))return e;var t=j(e)?e:{each:e},n=tD(t.ease),r=t.from||0,i=parseFloat(t.base)||0,a={},s=r>0&&r<1,o=isNaN(r)||s,l=t.axis,u=r,c=r;return z(r)?u=c=({center:.5,edges:.5,end:1})[r]||0:!s&&o&&(u=r[0],c=r[1]),function(e,s,h){var d,p,f,m,g,v,_,y,b,x=(h||t).length,S=a[x];if(!S){if(!(b="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(_=-1e8;_<(_=h[b++].getBoundingClientRect().left)&&b<x;);b--}for(v=0,S=a[x]=[],d=o?Math.min(b,x)*u-.5:r%b,p=1e8===b?0:o?x*c/b-.5:r/b|0,_=0,y=1e8;v<x;v++)f=v%b-d,m=p-(v/b|0),S[v]=g=l?Math.abs("y"===l?m:f):D(f*f+m*m),g>_&&(_=g),g<y&&(y=g);"random"===r&&ta(S),S.max=_-y,S.min=y,S.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(b>x?x-1:l?"y"===l?x/b:b:Math.max(b,x/b))||0)*("edges"===r?-1:1),S.b=x<0?i-x:i,S.u=te(t.amount||t.each)||0,n=n&&x<0?tN(n):n}return x=(S[e]-S.min)/S.max||0,eE(S.b+(n?n(x):x)*S.v)+S.u}},to=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=eE(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(V(n)?0:te(n))}},tl=function(e,t){var n,r,i=Z(e);return!i&&j(e)&&(n=i=e.radius||1e8,e.values?(r=!V((e=tr(e.values))[0]))&&(n*=n):e=to(e.increment)),e6(t,i?B(e)?function(t){return Math.abs((r=e(t))-t)<=n?r:t}:function(t){for(var i,a,s=parseFloat(r?t.x:t),o=parseFloat(r?t.y:0),l=1e8,u=0,c=e.length;c--;)(i=r?(i=e[c].x-s)*i+(a=e[c].y-o)*a:Math.abs(e[c]-s))<l&&(l=i,u=c);return u=!n||l<=n?e[u]:t,r||u===t||V(t)?u:u+te(t)}:to(e))},tu=function(e,t,n,r){return e6(Z(e)?!t:!0===n?(n=0,!1):!r,function(){return Z(e)?e[~~(Math.random()*e.length)]:(r=(n=n||1e-5)<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},tc=function(e,t,n){return e6(n,function(n){return e[~~t(n)]})},th=function(e){for(var t,n,r,i,a=0,s="";~(t=e.indexOf("random(",a));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?ee:Y),s+=e.substr(a,t-a)+tu(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),a=r+1;return s+e.substr(a,e.length-a)},td=function(e,t,n,r,i){var a=t-e,s=r-n;return e6(i,function(t){return n+((t-e)/a*s||0)})},tp=function(e,t,n){var r,i,a,s=e.labels,o=1e8;for(r in s)(i=s[r]-t)<0==!!n&&i&&o>(i=Math.abs(i))&&(a=r,o=i);return a},tf=function(e,t,n){var r,i,a,s=e.vars,o=s[t],l=S,u=e._ctx;if(o)return r=s[t+"Params"],i=s.callbackScope||e,n&&ep.length&&eC(),u&&(S=u),a=r?o.apply(i,r):o.call(i),S=l,a},tm=function(e){return eB(e),e.scrollTrigger&&e.scrollTrigger.kill(!!x),1>e.progress()&&tf(e,"onInterrupt"),e},tg=[],tv=function(e){if(W()&&e){var t=(e=!e.name&&e.default||e).name,n=B(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:el,render:ns,add:tQ,kill:nl,modifier:no,rawVars:0},a={targetTest:0,get:0,getSetter:nn,aliases:{},register:0};if(tA(),e!==r){if(em[t])return;eL(r,eL(ek(e,i),a)),eO(r.prototype,eO(i,ek(e,a))),em[r.prop=t]=r,e.targetTest&&(e_.push(r),ed[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}eo(t,r),e.register&&e.register(nE,r,nh)}else e&&tg.push(e)},t_={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ty=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*255+.5|0},tb=function(e,t,n){var r,i,a,s,o,l,u,c,h,d,p=e?V(e)?[e>>16,e>>8&255,255&e]:0:t_.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),t_[e])p=t_[e];else if("#"===e.charAt(0)){if(e.length<6&&(e="#"+(r=e.charAt(1))+r+(i=e.charAt(2))+i+(a=e.charAt(3))+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3)){if(p=d=e.match(Y),t){if(~e.indexOf("="))return p=e.match(K),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,o=+p[1]/100,i=(l=+p[2]/100)<=.5?l*(o+1):l+o-l*o,r=2*l-i,p.length>3&&(p[3]*=1),p[0]=ty(s+1/3,r,i),p[1]=ty(s,r,i),p[2]=ty(s-1/3,r,i)}else p=e.match(Y)||t_.transparent;p=p.map(Number)}return t&&!d&&(l=((u=Math.max(r=p[0]/255,i=p[1]/255,a=p[2]/255))+(c=Math.min(r,i,a)))/2,u===c?s=o=0:(h=u-c,o=l>.5?h/(2-u-c):h/(u+c),s=(u===r?(i-a)/h+(i<a?6:0):u===i?(a-r)/h+2:(r-i)/h+4)*60),p[0]=~~(s+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},tx=function(e){var t=[],n=[],r=-1;return e.split(tw).forEach(function(e){var i=e.match(Q)||[];t.push.apply(t,i),n.push(r+=i.length+1)}),t.c=n,t},tS=function(e,t,n){var r,i,a,s,o="",l=(e+o).match(tw),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map(function(e){return(e=tb(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(a=tx(e),(r=n.c).join(o)!==a.c.join(o)))for(s=(i=e.replace(tw,"1").split(Q)).length-1;c<s;c++)o+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(a.length?a:l.length?l:n).shift());if(!i)for(s=(i=e.split(tw)).length-1;c<s;c++)o+=i[c]+l[c];return o+i[s]},tw=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in t_)t+="|"+e+"\\b";return RegExp(t+")","gi")}(),tM=/hsl[a]?\(/,tE=function(e){var t,n=e.join(" ");if(tw.lastIndex=0,tw.test(n))return t=tM.test(n),e[1]=tS(e[1],t),e[0]=tS(e[0],t,tx(e[1])),!0},tT=(h=Date.now,d=500,p=33,m=f=h(),g=1e3/240,v=1e3/240,_=[],y=function e(t){var n,r,i,o,y=h()-m,b=!0===t;if(y>d&&(f+=y-p),m+=y,((n=(i=m-f)-v)>0||b)&&(o=++l.frame,u=i-1e3*l.time,l.time=i/=1e3,v+=n+(n>=g?4:g-n),r=1),b||(a=s(e)),r)for(c=0;c<_.length;c++)_[c](i,u,o,t)},l={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(e){return u/(1e3/(e||60))},wake:function(){A&&(!E&&W()&&(T=(M=E=window).document||{},en.gsap=nE,(M.gsapVersions||(M.gsapVersions=[])).push(nE.version),ei(er||M.GreenSockGlobals||!M.gsap&&M||{}),o=M.requestAnimationFrame,tg.forEach(tv)),a&&l.sleep(),s=o||function(e){return setTimeout(e,v-1e3*l.time+1|0)},P=1,y(2))},sleep:function(){(o?M.cancelAnimationFrame:clearTimeout)(a),P=0,s=el},lagSmoothing:function(e,t){p=Math.min(t||33,d=e||1/0)},fps:function(e){g=1e3/(e||240),v=1e3*l.time+g},add:function(e,t,n){var r=t?function(t,n,i,a){e(t,n,i,a),l.remove(r)}:e;return l.remove(e),_[n?"unshift":"push"](r),tA(),r},remove:function(e,t){~(t=_.indexOf(e))&&_.splice(t,1)&&c>=t&&c--},_listeners:_}),tA=function(){return!P&&tT.wake()},tC={},tR=/^[\d.\-M][\d.\-,\s]/,tP=/["']/g,tI=function(e){for(var t,n,r,i={},a=e.substr(1,e.length-3).split(":"),s=a[0],o=1,l=a.length;o<l;o++)n=a[o],t=o!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[s]=isNaN(r)?r.replace(tP,"").trim():+r,s=n.substr(t+1).trim();return i},tL=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},tO=function(e){var t=(e+"").split("("),n=tC[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[tI(t[1])]:tL(e).split(",").map(eP)):tC._CE&&tR.test(e)?tC._CE("",e):n},tN=function(e){return function(t){return 1-e(1-t)}},tk=function e(t,n){for(var r,i=t._first;i;)i instanceof tj?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},tD=function(e,t){return e&&(B(e)?e:tC[e]||tO(e))||t},tU=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t((1-e)*2)/2});var i,a={easeIn:t,easeOut:n,easeInOut:r};return ew(e,function(e){for(var t in tC[e]=en[e]=a,tC[i=e.toLowerCase()]=n,a)tC[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=tC[e+"."+t]=a[t]}),a},tF=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e((t-.5)*2)/2}},tz=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/O*(Math.asin(1/i)||0),o=function(e){return 1===e?1:i*Math.pow(2,-10*e)*F((e-s)*a)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:tF(o);return a=O/a,l.config=function(n,r){return e(t,n,r)},l},tB=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:tF(r);return i.config=function(n){return e(t,n)},i};ew("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;tU(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow((1-e)*2,n)/2})}),tC.Linear.easeNone=tC.none=tC.Linear.easeIn,tU("Elastic",tz("in"),tz("out"),tz()),tW=2*(tG=1/2.75),tq=2.5*tG,tU("Bounce",function(e){return 1-tX(1-e)},tX=function(e){return e<tG?7.5625*e*e:e<tW?7.5625*Math.pow(e-1.5/2.75,2)+.75:e<tq?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*Math.pow(e-2.625/2.75,2)+.984375}),tU("Expo",function(e){return e?Math.pow(2,10*(e-1)):0}),tU("Circ",function(e){return-(D(1-e*e)-1)}),tU("Sine",function(e){return 1===e?1:-U(e*N)+1}),tU("Back",tB("in"),tB("out"),tB()),tC.SteppedEase=tC.steps=en.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*e9(0,.99999999,e)|0)+i)*n}}},L.ease=tC["quad.out"],ew("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return ey+=e+","+e+"Params,"});var tV=function(e,t){this.id=k++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:eS,this.set=t?t.getSetter:nn},tH=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,e3(this,+e.duration,1,1),this.data=e.data,S&&(this._ctx=S,S.data.push(this)),P||tT.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,e3(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(tA(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(eZ(this,e),!n._dp||n.parent||eY(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:-((n.totalDuration()-n._tTime)/n._ts))&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&eK(this._dp,this,this._start-this._delay)}return this._tTime===e&&(this._dur||t)&&(!this._initted||1e-8!==Math.abs(this._zTime))&&(e||this._initted||!this.add&&!this._ptLookup)||(this._ts||(this._pTime=e),eR(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+eG(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(1&this.iteration())?1-e:e)+eG(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?eW(this._tTime,n)+1:1},t.timeScale=function(e){if(!arguments.length)return -.00000001===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?eq(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-.00000001===e?0:this._rts,this.totalTime(e9(-Math.abs(this._delay),this._tDur,t),!0),eX(this),eH(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(tA(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&eK(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(G(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?eq(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=eh);var t=x;return x=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),x=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,e4(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,e4(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(e7(this,e),G(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,G(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-.00000001:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-.00000001,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!!(!t||this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-1e-8)},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise(function(n){var r=B(e)?e:eI,i=function(){var e=t.then;t.then=null,B(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i})},t.kill=function(){tm(this)},e}();eL(tH.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-.00000001,_prom:0,_ps:!1,_rts:1});var tj=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=G(t.sortChildren),w&&eK(t.parent||w,r(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&eQ(r(i),t.scrollTrigger),i}i(t,e);var n=t.prototype;return n.to=function(e,t,n){return e8(0,arguments,this),this},n.from=function(e,t,n){return e8(1,arguments,this),this},n.fromTo=function(e,t,n,r){return e8(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,eD(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new t8(e,t,e7(this,n),1),this},n.call=function(e,t,n){return eK(this,t8.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,a,s){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=a,n.onCompleteParams=s,n.parent=this,new t8(e,n,e7(this,i)),this},n.staggerFrom=function(e,t,n,r,i,a,s){return n.runBackwards=1,eD(n).immediateRender=G(n.immediateRender),this.staggerTo(e,t,n,r,i,a,s)},n.staggerFromTo=function(e,t,n,r,i,a,s,o){return r.startAt=n,eD(r).immediateRender=G(r.immediateRender),this.staggerTo(e,t,r,i,a,s,o)},n.render=function(e,t,n){var r,i,a,s,o,l,u,c,h,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,_=e<=0?0:eE(e),y=this._zTime<0!=e<0&&(this._initted||!v);if(this!==w&&_>g&&e>=0&&(_=g),_!==this._tTime||n||y){if(m!==this._time&&v&&(_+=this._time-m,e+=this._time-m),r=_,h=this._start,l=!(c=this._ts),y&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=eE(_%o),_===g?(s=this._repeat,r=v):((s=~~(_/o))&&s===_/o&&(r=v,s--),r>v&&(r=v)),d=eW(this._tTime,o),!m&&this._tTime&&d!==s&&this._tTime-d*o-this._dur<=0&&(d=s),p&&1&s&&(r=v-r,f=1),s!==d&&!this._lock){var b=p&&1&d,S=b===(p&&1&s);if(s<d&&(b=!b),m=b?0:_%v?v:_,this._lock=1,this.render(m||(f?0:eE(s*o)),t,!v)._lock=0,this._tTime=_,!t&&this.parent&&tf(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||!this._ts!==l||this.vars.onRepeat&&!this.parent&&!this._act||(v=this._dur,g=this._tDur,S&&(this._lock=2,m=b?v:-.0001,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l))return this;tk(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=e2(this,eE(m),eE(r)))&&(_-=r-(r=u._start)),this._tTime=_,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&!s&&(tf(this,"onStart"),this._tTime!==_))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(a=i._next,(i._act||r>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){u=0,a&&(_+=this._zTime=-.00000001);break}}i=a}else{i=this._last;for(var M=e<0?e:r;i;){if(a=i._prev,(i._act||M<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(M-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(M-i._start)*i._ts,t,n||x&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!l){u=0,a&&(_+=this._zTime=M?-.00000001:1e-8);break}}i=a}}if(u&&!t&&(this.pause(),u.render(r>=m?0:-.00000001)._zTime=r>=m?1:-1,this._ts))return this._start=h,eX(this),this.render(e,t,n);this._onUpdate&&!t&&tf(this,"onUpdate",!0),(_===g&&this._tTime>=this.totalDuration()||!_&&m)&&(h===this._start||Math.abs(c)!==Math.abs(this._ts))&&!this._lock&&((e||!v)&&(_===g&&this._ts>0||!_&&this._ts<0)&&eB(this,1),t||e<0&&!m||!_&&!m&&g||(tf(this,_===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<g&&this.timeScale()>0)&&this._prom()))}return this},n.add=function(e,t){var n=this;if(V(t)||(t=e7(this,t,e)),!(e instanceof tH)){if(Z(e))return e.forEach(function(e){return n.add(e,t)}),this;if(z(e))return this.addLabel(e,t);if(!B(e))return this;e=t8.delayedCall(0,e)}return this!==e?eK(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-1e8);for(var i=[],a=this._first;a;)a._start>=r&&(a instanceof t8?t&&i.push(a):(n&&i.push(a),e&&i.push.apply(i,a.getChildren(!0,t,n)))),a=a._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return z(e)?this.removeLabel(e):B(e)?this.killTweensOf(e):(ez(this,e),e===this._recent&&(this._recent=this._last),eV(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=eE(tT.time-(this._ts>0?t/this._ts:-((this.totalDuration()-t)/this._ts)))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=e7(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=t8.delayedCall(0,t||el,n);return r.data="isPause",this._hasPause=1,eK(this,r,e7(this,e))},n.removePause=function(e){var t=this._first;for(e=e7(this,e);t;)t._start===e&&"isPause"===t.data&&eB(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)tZ!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=tr(e),a=this._first,s=V(t);a;)a instanceof t8?eA(a._targets,i)&&(s?(!tZ||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&r.push(a):(n=a.getTweensOf(i,t)).length&&r.push.apply(r,n),a=a._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=e7(r,e),a=t,s=a.startAt,o=a.onStart,l=a.onStartParams,u=a.immediateRender,c=t8.to(r,eL({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(s&&"time"in s?s.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(s&&"time"in s?s.time:r._time))/r.timeScale());c._dur!==e&&e3(c,e,0,1).render(c._time,!0,!0),n=1}o&&o.apply(c,l||[])}},t));return u?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,eL({startAt:{time:e7(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),tp(this,e7(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),tp(this,e7(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,a=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in a)a[r]>=n&&(a[r]+=e);return eV(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),eV(this)},n.totalDuration=function(e){var t,n,r,i=0,a=this._last,s=1e8;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-e:e));if(this._dirty){for(r=this.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&this._sort&&a._ts&&!this._lock?(this._lock=1,eK(this,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!this._dp||r&&r.smoothChildTiming)&&(this._start+=n/this._ts,this._time-=n,this._tTime-=n),this.shiftChildren(-n,!1,-Infinity),s=0),a._end>i&&a._ts&&(i=a._end),a=t;e3(this,this===w&&this._time>i?this._time:i,1,1),this._dirty=0}return this._tDur},t.updateRoot=function(e){if(w._ts&&(eR(w,eq(e,w)),C=tT.frame),tT.frame>=ev){ev+=I.autoSleep||120;var t=w._first;if((!t||!t._ts)&&I.autoSleep&&tT._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||tT.sleep()}}},t}(tH);eL(tj.prototype,{_lock:0,_hasPause:0,_forcing:0});var tG,tW,tq,tX,tZ,tY,tK=function(e,t,n,r,i,a,s){var o,l,u,c,h,d,p,f,m=new nh(this._pt,e,t,0,1,na,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",r+="",(p=~r.indexOf("random("))&&(r=th(r)),a&&(a(f=[n,r],e,t),n=f[0],r=f[1]),l=n.match(J)||[];o=J.exec(r);)c=o[0],h=r.substring(g,o.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===c.charAt(1)?eT(d,c)-d:parseFloat(c)-d,m:u&&u<4?Math.round:0},g=J.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=s,($.test(r)||p)&&(m.e=0),this._pt=m,m},tQ=function(e,t,n,r,i,a,s,o,l,u){B(r)&&(r=r(i||0,e,a));var c,h=e[t],d="get"!==n?n:B(h)?l?e[t.indexOf("set")||!B(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,p=B(h)?l?ne:t9:t6;if(z(r)&&(~r.indexOf("random(")&&(r=th(r)),"="===r.charAt(1)&&((c=eT(d,r)+(te(d)||0))||0===c)&&(r=c)),!u||d!==r||tY)return isNaN(d*r)||""===r?(h||t in e||ea(t,r),tK.call(this,e,t,d,r,p,o||I.stringFilter,l)):(c=new nh(this._pt,e,t,+d||0,r-(d||0),"boolean"==typeof h?ni:nr,0,p),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},tJ=function(e,t,n,r,i){if(B(e)&&(e=t4(e,i,t,n,r)),!j(e)||e.style&&e.nodeType||Z(e)||X(e))return z(e)?t4(e,i,t,n,r):e;var a,s={};for(a in e)s[a]=t4(e[a],i,t,n,r);return s},t$=function(e,t,n,r,i,a){var s,o,l,u;if(em[e]&&!1!==(s=new em[e]).init(i,s.rawVars?t[e]:tJ(t[e],r,i,a,n),n,r,a)&&(n._pt=o=new nh(n._pt,i,e,0,1,s.render,s,0,s.priority),n!==R))for(l=n._ptLookup[n._targets.indexOf(i)],u=s._props.length;u--;)l[s._props[u]]=o;return s},t0=function e(t,n,r){var i,a,s,o,l,u,c,h,d,p,f,m,g,v=t.vars,_=v.ease,y=v.startAt,S=v.immediateRender,M=v.lazy,E=v.onUpdate,T=v.onUpdateParams,A=v.callbackScope,C=v.runBackwards,R=v.yoyoEase,P=v.keyframes,I=v.autoRevert,O=t._dur,N=t._startAt,k=t._targets,D=t.parent,U=D&&"nested"===D.data?D.vars.targets:k,F="auto"===t._overwrite&&!b,z=t.timeline;if(!z||P&&_||(_="none"),t._ease=tD(_,L.ease),t._yEase=R?tN(tD(!0===R?_:R,L.ease)):0,R&&t._yoyo&&!t._repeat&&(R=t._yEase,t._yEase=t._ease,t._ease=R),t._from=!z&&!!v.runBackwards,!z||P&&!v.stagger){if(m=(h=k[0]?ex(k[0]).harness:0)&&v[h.prop],i=ek(v,ed),N&&(N._zTime<0&&N.progress(1),n<0&&C&&S&&!I?N.render(-1,!0):N.revert(C&&O?ec:eu),N._lazy=0),y){if(eB(t._startAt=t8.set(k,eL({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!N&&G(M),startAt:null,delay:0,onUpdate:E,onUpdateParams:T,callbackScope:A,stagger:0},y))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(x||!S&&!I)&&t._startAt.revert(ec),S&&O&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(C&&O&&!N){if(n&&(S=!1),s=eL({overwrite:!1,data:"isFromStart",lazy:S&&!N&&G(M),immediateRender:S,stagger:0,parent:D},i),m&&(s[h.prop]=m),eB(t._startAt=t8.set(k,s)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(x?t._startAt.revert(ec):t._startAt.render(-1,!0)),t._zTime=n,S){if(!n)return}else e(t._startAt,1e-8,1e-8)}for(a=0,t._pt=t._ptCache=0,M=O&&G(M)||M&&!O;a<k.length;a++){if(c=(l=k[a])._gsap||eb(k)[a]._gsap,t._ptLookup[a]=p={},ef[c.id]&&ep.length&&eC(),f=U===k?a:U.indexOf(l),h&&!1!==(d=new h).init(l,m||i,t,f,U)&&(t._pt=o=new nh(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(e){p[e]=o}),d.priority&&(u=1)),!h||m)for(s in i)em[s]&&(d=t$(s,i,t,f,l,U))?d.priority&&(u=1):p[s]=o=tQ.call(t,l,s,"get",i[s],f,U,0,v.stringFilter);t._op&&t._op[a]&&t.kill(l,t._op[a]),F&&t._pt&&(tZ=t,w.killTweensOf(l,p,t.globalTime(n)),g=!t.parent,tZ=0),t._pt&&M&&(ef[c.id]=1)}u&&nc(t),t._onInit&&t._onInit(t)}t._onUpdate=E,t._initted=(!t._op||t._pt)&&!g,P&&n<=0&&z.render(1e8,!0,!0)},t1=function(e,t,n,r,i,a,s){var o,l,u,c,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],u=e._ptLookup,c=e._targets.length;c--;){if((o=u[c][t])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==t&&o.fp!==t;)o=o._next;if(!o)return tY=1,e.vars[t]="+=0",t0(e,s),tY=0,1;h.push(o)}for(c=h.length;c--;)(o=(l=h[c])._pt||l).s=(r||0===r)&&!i?r:o.s+(r||0)+a*o.c,o.c=n-o.s,l.e&&(l.e=eM(n)+te(l.e)),l.b&&(l.b=o.s+te(l.b))},t2=function(e,t){var n,r,i,a,s=e[0]?ex(e[0]).harness:0,o=s&&s.aliases;if(!o)return t;for(r in n=eO({},t),o)if(r in n)for(i=(a=o[r].split(",")).length;i--;)n[a[i]]=n[r];return n},t3=function(e,t,n,r){var i,a,s=t.ease||r||"power1.inOut";if(Z(t))a=n[e]||(n[e]=[]),t.forEach(function(e,n){return a.push({t:n/(t.length-1)*100,v:e,e:s})});else for(i in t)a=n[i]||(n[i]=[]),"ease"===i||a.push({t:parseFloat(e),v:t[i],e:s})},t4=function(e,t,n,r,i){return B(e)?e.call(t,n,r,i):z(e)&&~e.indexOf("random(")?th(e):e},t5=ey+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",t7={};ew(t5+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return t7[e]=1});var t8=function(e){function t(t,n,i,a){"number"==typeof n&&(i.duration=n,n=i,i=null);var s,o,l,u,c,h,d,p,f,m=(s=e.call(this,a?n:eD(n))||this).vars,g=m.duration,v=m.delay,_=m.immediateRender,y=m.stagger,x=m.overwrite,S=m.keyframes,M=m.defaults,E=m.scrollTrigger,T=m.yoyoEase,A=n.parent||w,C=(Z(t)||X(t)?V(t[0]):"length"in n)?[t]:tr(t);if(s._targets=C.length?eb(C):es("GSAP target "+t+" not found. https://greensock.com",!I.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,S||y||q(g)||q(v)){if(n=s.vars,(o=s.timeline=new tj({data:"nested",defaults:M||{},targets:A&&"nested"===A.data?A.vars.targets:C})).kill(),o.parent=o._dp=r(s),o._start=0,y||q(g)||q(v)){if(c=C.length,p=y&&ts(y),j(y))for(h in y)~t5.indexOf(h)&&(f||(f={}),f[h]=y[h]);for(l=0;l<c;l++)(u=ek(n,t7)).stagger=0,T&&(u.yoyoEase=T),f&&eO(u,f),d=C[l],u.duration=+t4(g,r(s),l,d,C),u.delay=(+t4(v,r(s),l,d,C)||0)-s._delay,!y&&1===c&&u.delay&&(s._delay=v=u.delay,s._start+=v,u.delay=0),o.to(d,u,p?p(l,d,C):0),o._ease=tC.none;o.duration()?g=v=0:s.timeline=0}else if(S){eD(eL(o.vars.defaults,{ease:"none"})),o._ease=tD(S.ease||n.ease||"none");var R,P,L,O=0;if(Z(S))S.forEach(function(e){return o.to(C,e,">")}),o.duration();else{for(h in u={},S)"ease"===h||"easeEach"===h||t3(h,S[h],u,S.easeEach);for(h in u)for(l=0,R=u[h].sort(function(e,t){return e.t-t.t}),O=0;l<R.length;l++)(L={ease:(P=R[l]).e,duration:(P.t-(l?R[l-1].t:0))/100*g})[h]=P.v,o.to(C,L,O),O+=L.duration;o.duration()<g&&o.to({},{duration:g-o.duration()})}}g||s.duration(g=o.duration())}else s.timeline=0;return!0!==x||b||(tZ=r(s),w.killTweensOf(C),tZ=0),eK(A,r(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(_||!g&&!S&&s._start===eE(A._time)&&G(_)&&function e(t){return!t||t._ts&&e(t.parent)}(r(s))&&"nested"!==A.data)&&(s._tTime=-.00000001,s.render(Math.max(0,-v)||0)),E&&eQ(r(s),E),s}i(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,a,s,o,l,u,c,h,d=this._time,p=this._tDur,f=this._dur,m=e<0,g=e>p-1e-8&&!m?p:e<1e-8?0:e;if(f){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(r=g,c=this.timeline,this._repeat){if(s=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*s+e,t,n);if(r=eE(g%s),g===p?(a=this._repeat,r=f):((a=~~(g/s))&&a===g/s&&(r=f,a--),r>f&&(r=f)),(l=this._yoyo&&1&a)&&(h=this._yEase,r=f-r),o=eW(this._tTime,s),r===d&&!n&&this._initted)return this._tTime=g,this;a===o||(c&&this._yEase&&tk(c,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(eE(s*a),!0).invalidate()._lock=0))}if(!this._initted){if(eJ(this,m?e:r,n,t,g))return this._tTime=0,this;if(d!==this._time)return this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(r/f),this._from&&(this.ratio=u=1-u),r&&!d&&!t&&!a&&(tf(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:!r&&l?-.00000001:c._dur*c._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&ej(this,e,t,n),tf(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!t&&this.parent&&tf(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(m&&!this._onUpdate&&ej(this,e,!0,!0),(e||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&eB(this,1),!t&&!(m&&!d)&&(g||d||l)&&(tf(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else e1(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return t&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r){P||tT.wake(),this._ts||this.play();var i=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return(this._initted||t0(this,i),t1(this,e,t,n,r,this._ease(i/this._dur),i))?this.resetTo(e,t,n,r):(eZ(this,0),this.parent||eF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?tm(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,tZ&&!0!==tZ.vars.overwrite)._first||tm(this),this.parent&&n!==this.timeline.totalDuration()&&e3(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,a,s,o,l,u,c=this._targets,h=e?tr(e):c,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&eU(c,h))return"all"===t&&(this._pt=0),tm(this);for(r=this._op=this._op||[],"all"!==t&&(z(t)&&(o={},ew(t,function(e){return o[e]=1}),t=o),t=t2(c,t)),u=c.length;u--;)if(~h.indexOf(c[u]))for(o in i=d[u],"all"===t?(r[u]=t,s=i,a={}):(a=r[u]=r[u]||{},s=t),s)(l=i&&i[o])&&("kill"in l.d&&!0!==l.d.kill(o)||ez(this,l,"_pt"),delete i[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&p&&tm(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return e8(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return e8(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return w.killTweensOf(e,t,n)},t}(tH);eL(t8.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ew("staggerTo,staggerFrom,staggerFromTo",function(e){t8[e]=function(){var t=new tj,n=tt.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}});var t6=function(e,t,n){return e[t]=n},t9=function(e,t,n){return e[t](n)},ne=function(e,t,n,r){return e[t](r.fp,n)},nt=function(e,t,n){return e.setAttribute(t,n)},nn=function(e,t){return B(e[t])?t9:H(e[t])&&e.setAttribute?nt:t6},nr=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ni=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},na=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},ns=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},no=function(e,t,n,r){for(var i,a=this._pt;a;)i=a._next,a.p===r&&a.modifier(e,t,n),a=i},nl=function(e){for(var t,n,r=this._pt;r;)n=r._next,(r.p!==e||r.op)&&r.op!==e?r.dep||(t=1):ez(this,r,"_pt"),r=n;return!t},nu=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},nc=function(e){for(var t,n,r,i,a=e._pt;a;){for(t=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:i)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:i=a,a=t}e._pt=r},nh=function(){function e(e,t,n,r,i,a,s,o,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=a||nr,this.d=s||this,this.set=o||t6,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=nu,this.m=e,this.mt=n,this.tween=t},e}();ew(ey+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return ed[e]=1}),en.TweenMax=en.TweenLite=t8,en.TimelineLite=en.TimelineMax=tj,w=new tj({sortChildren:!1,defaults:L,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),I.stringFilter=tE;var nd=[],np={},nf=[],nm=0,ng=0,nv=function(e){return(np[e]||nf).map(function(e){return e()})},n_=function(){var e=Date.now(),t=[];e-nm>2&&(nv("matchMediaInit"),nd.forEach(function(e){var n,r,i,a,s=e.queries,o=e.conditions;for(r in s)(n=M.matchMedia(s[r]).matches)&&(i=1),n!==o[r]&&(o[r]=n,a=1);a&&(e.revert(),i&&t.push(e))}),nv("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e)}),nm=e,nv("matchMedia"))},ny=function(){function e(e,t){this.selector=t&&ti(t),this.data=[],this._r=[],this.isReverted=!1,this.id=ng++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){B(e)&&(n=t,t=e,e=B);var r=this,i=function(){var e,i=S,a=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=ti(n)),S=r,e=t.apply(r,arguments),B(e)&&r._r.push(e),S=i,r.selector=a,r.isReverted=!1,e};return r.last=i,e===B?i(r):e?r[e]=i:i},t.ignore=function(e){var t=S;S=null,e(this),S=t},t.getTweens=function(){var t=[];return this.data.forEach(function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof t8&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e){var r=this.getTweens();this.data.forEach(function(e){"isFlip"===e.data&&(e.revert(),e.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}))}),r.map(function(e){return{g:e.globalTime(0),t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),this.data.forEach(function(t){return!(t instanceof t8)&&t.revert&&t.revert(e)}),this._r.forEach(function(t){return t(e,n)}),this.isReverted=!0}else this.data.forEach(function(e){return e.kill&&e.kill()});if(this.clear(),t)for(var i=nd.length;i--;)nd[i].id===this.id&&nd.splice(i,1)},t.revert=function(e){this.kill(e||{})},e}(),nb=function(){function e(e){this.contexts=[],this.scope=e}var t=e.prototype;return t.add=function(e,t,n){j(e)||(e={matches:e});var r,i,a,s=new ny(0,n||this.scope),o=s.conditions={};for(i in S&&!s.selector&&(s.selector=S.selector),this.contexts.push(s),t=s.add("onMatch",t),s.queries=e,e)"all"===i?a=1:(r=M.matchMedia(e[i]))&&(0>nd.indexOf(s)&&nd.push(s),(o[i]=r.matches)&&(a=1),r.addListener?r.addListener(n_):r.addEventListener("change",n_));return a&&t(s),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),nx={registerPlugin:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return tv(e)})},timeline:function(e){return new tj(e)},getTweensOf:function(e,t){return w.getTweensOf(e,t)},getProperty:function(e,t,n,r){z(e)&&(e=tr(e)[0]);var i=ex(e||{}).get,a=n?eI:eP;return"native"===n&&(n=""),e?t?a((em[t]&&em[t].get||i)(e,t,n,r)):function(t,n,r){return a((em[t]&&em[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=tr(e)).length>1){var r=e.map(function(e){return nE.quickSetter(e,t,n)}),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var a=em[t],s=ex(e),o=s.harness&&(s.harness.aliases||{})[t]||t,l=a?function(t){var r=new a;R._pt=0,r.init(e,n?t+n:t,R,0,[e]),r.render(1,r),R._pt&&ns(1,R)}:s.set(e,o);return a?l:function(t){return l(e,o,n?t+n:t,s,1)}},quickTo:function(e,t,n){var r,i=nE.to(e,eO(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),a=function(e,n,r){return i.resetTo(t,e,n,r)};return a.tween=i,a},isTweening:function(e){return w.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=tD(e.ease,L.ease)),eN(L,e||{})},config:function(e){return eN(I,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(e){return e&&!em[e]&&!en[e]&&es(t+" effect requires "+e+" plugin.")}),eg[t]=function(e,t,r){return n(tr(e),eL(t||{},i),r)},a&&(tj.prototype[t]=function(e,n,r){return this.add(eg[t](e,j(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){tC[e]=tD(t)},parseEase:function(e,t){return arguments.length?tD(e,t):tC},getById:function(e){return w.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new tj(e);for(i.smoothChildTiming=G(e.smoothChildTiming),w.remove(i),i._dp=0,i._time=i._tTime=w._time,n=w._first;n;)r=n._next,(t||!(!n._dur&&n instanceof t8&&n.vars.onComplete===n._targets[0]))&&eK(i,n,n._start-n._delay),n=r;return eK(w,i,0),i},context:function(e,t){return e?new ny(e,t):S},matchMedia:function(e){return new nb(e)},matchMediaRefresh:function(){return nd.forEach(function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()})||n_()},addEventListener:function(e,t){var n=np[e]||(np[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=np[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return Z(t)?tc(t,e(0,t.length),n):e6(r,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,n,r){var i=n-t,a=2*i;return Z(t)?tc(t,e(0,t.length-1),n):e6(r,function(e){return e=(a+(e-t)%a)%a||0,t+(e>i?a-e:e)})},distribute:ts,random:tu,snap:tl,normalize:function(e,t,n){return td(e,t,0,1,n)},getUnit:te,clamp:function(e,t,n){return e6(n,function(n){return e9(e,t,n)})},splitColor:tb,toArray:tr,selector:ti,mapRange:td,pipe:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||te(n))}},interpolate:function e(t,n,r,i){var a=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!a){var s,o,l,u,c,h=z(t),d={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(Z(t)&&!Z(n)){for(o=1,l=[],c=(u=t.length)-2;o<u;o++)l.push(e(t[o-1],t[o]));u--,a=function(e){var t=Math.min(c,~~(e*=u));return l[t](e-t)},r=n}else i||(t=eO(Z(t)?[]:{},t));if(!l){for(s in n)tQ.call(d,t,s,"get",n[s]);a=function(e){return ns(e,d)||(h?t.p:t)}}}return e6(r,a)},shuffle:ta},install:ei,effects:eg,ticker:tT,updateRoot:tj.updateRoot,plugins:em,globalTimeline:w,core:{PropTween:nh,globals:eo,Tween:t8,Timeline:tj,Animation:tH,getCache:ex,_removeLinkedListItem:ez,reverting:function(){return x},context:function(e){return e&&S&&(S.data.push(e),e._ctx=S),S},suppressOverwrites:function(e){return b=e}}};ew("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return nx[e]=t8[e]}),tT.add(tj.updateRoot),R=nx.to({},{duration:0});var nS=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},nw=function(e,t){var n,r,i,a=e._targets;for(n in t)for(r=a.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=nS(i,n)),i&&i.modifier&&i.modifier(t[n],e,a[r],n))},nM=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(z(n)&&(r={},ew(n,function(e){return r[e]=1}),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}nw(e,n)}}}},nE=nx.registerPlugin({name:"attr",init:function(e,t,n,r,i){var a,s,o;for(a in this.tween=n,t)o=e.getAttribute(a)||"",(s=this.add(e,"setAttribute",(o||0)+"",t[a],r,i,0,0,a)).op=a,s.b=o,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)x?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},nM("roundProps",to),nM("modifiers"),nM("snap",tl))||nx;t8.version=tj.version=nE.version="3.12.2",A=1,W()&&tA(),tC.Power0,tC.Power1,tC.Power2,tC.Power3,tC.Power4,tC.Linear,tC.Quad;var nT=tC.Cubic;tC.Quart,tC.Quint,tC.Strong,tC.Elastic,tC.Back,tC.SteppedEase,tC.Bounce,tC.Sine,tC.Expo,tC.Circ},990:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ew}});var r,i,a,s,o,l,u,c,h,d,p=n(4011),f={},m=180/Math.PI,g=Math.PI/180,v=Math.atan2,_=/([A-Z])/g,y=/(left|right|width|margin|padding|x)/i,b=/[\s,\(]\S/,x={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},S=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},w=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},M=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},E=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},T=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},A=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},C=function(e,t,n){return e.style[t]=n},R=function(e,t,n){return e.style.setProperty(t,n)},P=function(e,t,n){return e._gsap[t]=n},I=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},L=function(e,t,n,r,i){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(i,a)},O=function(e,t,n,r,i){var a=e._gsap;a[t]=n,a.renderTransform(i,a)},N="transform",k=N+"Origin",D=function e(t,n){var r=this,i=this.target,a=i.style;if(t in f&&a){if(this.tfm=this.tfm||{},"transform"===t)return x.transform.split(",").forEach(function(t){return e.call(r,t,n)});if(~(t=x[t]||t).indexOf(",")?t.split(",").forEach(function(e){return r.tfm[e]=ee(i,e)}):this.tfm[t]=i._gsap.x?i._gsap[t]:ee(i,t),this.props.indexOf(N)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(k,n,"")),t=N}(a||n)&&this.props.push(t,n,a[t])},U=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},F=function(){var e,t,n=this.props,r=this.target,i=r.style,a=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(_,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)a[t]=this.tfm[t];a.svg&&(a.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=h())&&e.isStart||i[N]||(U(i),a.uncache=1)}},z=function(e,t){var n={target:e,props:[],revert:F,save:D};return e._gsap||p.p8.core.getCache(e),t&&t.split(",").forEach(function(e){return n.save(e)}),n},B=function(e,t){var n=s.createElementNS?s.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):s.createElement(e);return n.style?n:s.createElement(e)},V=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(_,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,j(n)||n,1)||""},H="O,Moz,ms,Ms,Webkit".split(","),j=function(e,t,n){var r=(t||u).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(H[i]+e in r););return i<0?null:(3===i?"ms":i>=0?H[i]:"")+e},G=function(){"undefined"!=typeof window&&window.document&&(o=(s=window.document).documentElement,u=B("div")||{style:{}},B("div"),k=(N=j(N))+"Origin",u.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",d=!!j("perspective"),h=p.p8.core.reverting,l=1)},W=function e(t){var n,r=B("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),o.removeChild(r),this.style.cssText=s,n},q=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},X=function(e){var t;try{t=e.getBBox()}catch(n){t=W.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===W||(t=W.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+q(e,["x","cx","x1"])||0,y:+q(e,["y","cy","y1"])||0,width:0,height:0}},Z=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&X(e))},Y=function(e,t){if(t){var n=e.style;t in f&&t!==k&&(t=N),n.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),n.removeProperty(t.replace(_,"-$1").toLowerCase())):n.removeAttribute(t)}},K=function(e,t,n,r,i,a){var s=new p.Fo(e._pt,t,n,0,1,a?A:T);return e._pt=s,s.b=r,s.e=i,e._props.push(n),s},Q={deg:1,rad:1,turn:1},J={grid:1,flex:1},$=function e(t,n,r,i){var a,o,l,c,h=parseFloat(r)||0,d=(r+"").trim().substr((h+"").length)||"px",m=u.style,g=y.test(n),v="svg"===t.tagName.toLowerCase(),_=(v?"client":"offset")+(g?"Width":"Height"),b="px"===i,x="%"===i;return i===d||!h||Q[i]||Q[d]?h:("px"===d||b||(h=e(t,n,r,"px")),c=t.getCTM&&Z(t),(x||"%"===d)&&(f[n]||~n.indexOf("adius")))?(a=c?t.getBBox()[g?"width":"height"]:t[_],(0,p.Pr)(x?h/a*100:h/100*a)):(m[g?"width":"height"]=100+(b?d:i),o=~n.indexOf("adius")||"em"===i&&t.appendChild&&!v?t:t.parentNode,c&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==s&&o.appendChild||(o=s.body),(l=o._gsap)&&x&&l.width&&g&&l.time===p.xr.time&&!l.uncache)?(0,p.Pr)(h/l.width*100):((x||"%"===d)&&!J[V(o,"display")]&&(m.position=V(t,"position")),o===t&&(m.position="static"),o.appendChild(u),a=u[_],o.removeChild(u),m.position="absolute",g&&x&&((l=(0,p.DY)(o)).time=p.xr.time,l.width=o[_]),(0,p.Pr)(b?a*h/100:a&&h?100/a*h:0))},ee=function(e,t,n,r){var i;return l||G(),t in x&&"transform"!==t&&~(t=x[t]).indexOf(",")&&(t=t.split(",")[0]),f[t]&&"transform"!==t?(i=ed(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:ep(V(e,k))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=ea[t]&&ea[t](e,t,n)||V(e,t)||(0,p.Ok)(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?$(e,t,i,n)+n:i},et=function(e,t,n,r){if(!n||"none"===n){var i=j(t,e,1),a=i&&V(e,i,1);a&&a!==n?(t=i,n=a):"borderColor"===t&&(n=V(e,"borderTopColor"))}var s,o,l,u,c,h,d,f,m,g,v,_=new p.Fo(this._pt,e.style,t,0,1,p.Ks),y=0,b=0;if(_.b=n,_.e=r,n+="","auto"==(r+="")&&(e.style[t]=r,r=V(e,t)||r,e.style[t]=n),s=[n,r],(0,p.kr)(s),n=s[0],r=s[1],l=n.match(p.d4)||[],(r.match(p.d4)||[]).length){for(;o=p.d4.exec(r);)d=o[0],m=r.substring(y,o.index),c?c=(c+1)%5:("rgba("===m.substr(-5)||"hsla("===m.substr(-5))&&(c=1),d!==(h=l[b++]||"")&&(u=parseFloat(h)||0,v=h.substr((u+"").length),"="===d.charAt(1)&&(d=(0,p.cy)(u,d)+v),f=parseFloat(d),g=d.substr((f+"").length),y=p.d4.lastIndex-g.length,g||(g=g||p.Fc.units[t]||v,y!==r.length||(r+=g,_.e+=g)),v!==g&&(u=$(e,t,h,g)||0),_._pt={_next:_._pt,p:m||1===b?m:",",s:u,c:f-u,m:c&&c<4||"zIndex"===t?Math.round:0});_.c=y<r.length?r.substring(y,r.length):""}else _.r="display"===t&&"none"===r?A:T;return p.bQ.test(r)&&(_.e=0),this._pt=_,_},en={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},er=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return("top"===n||"bottom"===n||"left"===r||"right"===r)&&(e=n,n=r,r=e),t[0]=en[n]||n,t[1]=en[r]||r,t.join(" ")},ei=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,a=t.t,s=a.style,o=t.u,l=a._gsap;if("all"===o||!0===o)s.cssText="",r=1;else for(i=(o=o.split(",")).length;--i>-1;)f[n=o[i]]&&(r=1,n="transformOrigin"===n?k:N),Y(a,n);r&&(Y(a,N),l&&(l.svg&&a.removeAttribute("transform"),ed(a,1),l.uncache=1,U(s)))}},ea={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var a=e._pt=new p.Fo(e._pt,t,n,0,0,ei);return a.u=r,a.pr=-10,a.tween=i,e._props.push(n),1}}},es=[1,0,0,1,0,0],eo={},el=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},eu=function(e){var t=V(e,N);return el(t)?es:t.substr(7).match(p.SI).map(p.Pr)},ec=function(e,t){var n,r,i,a,s=e._gsap||(0,p.DY)(e),l=e.style,u=eu(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?es:u:(u!==es||e.offsetParent||e===o||s.svg||(i=l.display,l.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextElementSibling,o.appendChild(e)),u=eu(e),i?l.display=i:Y(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):o.removeChild(e))),t&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},eh=function(e,t,n,r,i,a){var s,o,l,u,c=e._gsap,h=i||ec(e,!0),d=c.xOrigin||0,p=c.yOrigin||0,f=c.xOffset||0,m=c.yOffset||0,g=h[0],v=h[1],_=h[2],y=h[3],b=h[4],x=h[5],S=t.split(" "),w=parseFloat(S[0])||0,M=parseFloat(S[1])||0;n?h!==es&&(o=g*y-v*_)&&(l=y/o*w+-_/o*M+(_*x-y*b)/o,u=-v/o*w+g/o*M-(g*x-v*b)/o,w=l,M=u):(w=(s=X(e)).x+(~S[0].indexOf("%")?w/100*s.width:w),M=s.y+(~(S[1]||S[0]).indexOf("%")?M/100*s.height:M)),r||!1!==r&&c.smooth?(b=w-d,x=M-p,c.xOffset=f+(b*g+x*_)-b,c.yOffset=m+(b*v+x*y)-x):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=M,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[k]="0px 0px",a&&(K(a,c,"xOrigin",d,w),K(a,c,"yOrigin",p,M),K(a,c,"xOffset",f,c.xOffset),K(a,c,"yOffset",m,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+M)},ed=function(e,t){var n=e._gsap||new p.l1(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,a,s,o,l,u,c,h,f,_,y,b,x,S,w,M,E,T,A,C,R,P,I,L,O,D,U,F,z,B,H,j=e.style,G=n.scaleX<0,W=getComputedStyle(e),q=V(e,k)||"0";return r=i=a=l=u=c=h=f=_=0,s=o=1,n.svg=!!(e.getCTM&&Z(e)),W.translate&&(("none"!==W.translate||"none"!==W.scale||"none"!==W.rotate)&&(j[N]=("none"!==W.translate?"translate3d("+(W.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==W.rotate?"rotate("+W.rotate+") ":"")+("none"!==W.scale?"scale("+W.scale.split(" ").join(",")+") ":"")+("none"!==W[N]?W[N]:"")),j.scale=j.rotate=j.translate="none"),x=ec(e,n.svg),n.svg&&(n.uncache?(L=e.getBBox(),q=n.xOrigin-L.x+"px "+(n.yOrigin-L.y)+"px",I=""):I=!t&&e.getAttribute("data-svg-origin"),eh(e,I||q,!!I||n.originIsAbsolute,!1!==n.smooth,x)),y=n.xOrigin||0,b=n.yOrigin||0,x!==es&&(E=x[0],T=x[1],A=x[2],C=x[3],r=R=x[4],i=P=x[5],6===x.length?(s=Math.sqrt(E*E+T*T),o=Math.sqrt(C*C+A*A),l=E||T?v(T,E)*m:0,(h=A||C?v(A,C)*m+l:0)&&(o*=Math.abs(Math.cos(h*g))),n.svg&&(r-=y-(y*E+b*A),i-=b-(y*T+b*C))):(H=x[6],z=x[7],D=x[8],U=x[9],F=x[10],B=x[11],r=x[12],i=x[13],a=x[14],u=(S=v(H,F))*m,S&&(I=R*(w=Math.cos(-S))+D*(M=Math.sin(-S)),L=P*w+U*M,O=H*w+F*M,D=-(R*M)+D*w,U=-(P*M)+U*w,F=-(H*M)+F*w,B=-(z*M)+B*w,R=I,P=L,H=O),c=(S=v(-A,F))*m,S&&(I=E*(w=Math.cos(-S))-D*(M=Math.sin(-S)),L=T*w-U*M,O=A*w-F*M,B=C*M+B*w,E=I,T=L,A=O),l=(S=v(T,E))*m,S&&(I=E*(w=Math.cos(S))+T*(M=Math.sin(S)),L=R*w+P*M,T=T*w-E*M,P=P*w-R*M,E=I,R=L),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),s=(0,p.Pr)(Math.sqrt(E*E+T*T+A*A)),o=(0,p.Pr)(Math.sqrt(P*P+H*H)),h=Math.abs(S=v(R,P))>2e-4?S*m:0,_=B?1/(B<0?-B:B):0),n.svg&&(I=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!el(V(e,N)),I&&e.setAttribute("transform",I))),Math.abs(h)>90&&270>Math.abs(h)&&(G?(s*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+"px",n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+"px",n.z=a+"px",n.scaleX=(0,p.Pr)(s),n.scaleY=(0,p.Pr)(o),n.rotation=(0,p.Pr)(l)+"deg",n.rotationX=(0,p.Pr)(u)+"deg",n.rotationY=(0,p.Pr)(c)+"deg",n.skewX=h+"deg",n.skewY=f+"deg",n.transformPerspective=_+"px",(n.zOrigin=parseFloat(q.split(" ")[2])||0)&&(j[k]=ep(q)),n.xOffset=n.yOffset=0,n.force3D=p.Fc.force3D,n.renderTransform=n.svg?e_:d?ev:em,n.uncache=0,n},ep=function(e){return(e=e.split(" "))[0]+" "+e[1]},ef=function(e,t,n){var r=(0,p.Wy)(t);return(0,p.Pr)(parseFloat(t)+parseFloat($(e,"x",n+"px",r)))+r},em=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ev(e,t)},eg="0deg",ev=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,a=n.x,s=n.y,o=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,v=n.force3D,_=n.target,y=n.zOrigin,b="",x="auto"===v&&e&&1!==e||!0===v;if(y&&(c!==eg||u!==eg)){var S,w=parseFloat(u)*g,M=Math.sin(w),E=Math.cos(w);a=ef(_,a,-(M*(S=Math.cos(w=parseFloat(c)*g))*y)),s=ef(_,s,-(-Math.sin(w)*y)),o=ef(_,o,-(E*S*y)+y)}"0px"!==m&&(b+="perspective("+m+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(x||"0px"!==a||"0px"!==s||"0px"!==o)&&(b+="0px"!==o||x?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+") "),l!==eg&&(b+="rotate("+l+") "),u!==eg&&(b+="rotateY("+u+") "),c!==eg&&(b+="rotateX("+c+") "),(h!==eg||d!==eg)&&(b+="skew("+h+", "+d+") "),(1!==p||1!==f)&&(b+="scale("+p+", "+f+") "),_.style[N]=b||"translate(0, 0)"},e_=function(e,t){var n,r,i,a,s,o=t||this,l=o.xPercent,u=o.yPercent,c=o.x,h=o.y,d=o.rotation,f=o.skewX,m=o.skewY,v=o.scaleX,_=o.scaleY,y=o.target,b=o.xOrigin,x=o.yOrigin,S=o.xOffset,w=o.yOffset,M=o.forceCSS,E=parseFloat(c),T=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(m=parseFloat(m))&&(f+=m=parseFloat(m),d+=m),d||f?(d*=g,f*=g,n=Math.cos(d)*v,r=Math.sin(d)*v,i=-(Math.sin(d-f)*_),a=Math.cos(d-f)*_,f&&(m*=g,i*=s=Math.sqrt(1+(s=Math.tan(f-m))*s),a*=s,m&&(n*=s=Math.sqrt(1+(s=Math.tan(m))*s),r*=s)),n=(0,p.Pr)(n),r=(0,p.Pr)(r),i=(0,p.Pr)(i),a=(0,p.Pr)(a)):(n=v,a=_,r=i=0),(E&&!~(c+"").indexOf("px")||T&&!~(h+"").indexOf("px"))&&(E=$(y,"x",c,"px"),T=$(y,"y",h,"px")),(b||x||S||w)&&(E=(0,p.Pr)(E+b-(b*n+x*i)+S),T=(0,p.Pr)(T+x-(b*r+x*a)+w)),(l||u)&&(s=y.getBBox(),E=(0,p.Pr)(E+l/100*s.width),T=(0,p.Pr)(T+u/100*s.height)),s="matrix("+n+","+r+","+i+","+a+","+E+","+T+")",y.setAttribute("transform",s),M&&(y.style[N]=s)},ey=function(e,t,n,r,i){var a,s,o=(0,p.r9)(i),l=parseFloat(i)*(o&&~i.indexOf("rad")?m:1)-r,u=r+l+"deg";return o&&("short"===(a=i.split("_")[1])&&(l%=360)!=l%180&&(l+=l<0?360:-360),"cw"===a&&l<0?l=(l+36e9)%360-360*~~(l/360):"ccw"===a&&l>0&&(l=(l-36e9)%360-360*~~(l/360))),e._pt=s=new p.Fo(e._pt,t,n,r,l,w),s.e=u,s.u="deg",e._props.push(n),s},eb=function(e,t){for(var n in t)e[n]=t[n];return e},ex=function(e,t,n){var r,i,a,s,o,l,u,c=eb({},n._gsap),h=n.style;for(i in c.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),h[N]=t,r=ed(n,1),Y(n,N),n.setAttribute("transform",a)):(a=getComputedStyle(n)[N],h[N]=t,r=ed(n,1),h[N]=a),f)(a=c[i])!==(s=r[i])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)&&(o=(0,p.Wy)(a)!==(u=(0,p.Wy)(s))?$(n,i,a,u):parseFloat(a),l=parseFloat(s),e._pt=new p.Fo(e._pt,r,i,o,l-o,S),e._pt.u=u||0,e._props.push(i));eb(r,c)};(0,p.fS)("padding,margin,Width,Radius",function(e,t){var n="Right",r="Bottom",i="Left",a=(t<3?["Top",n,r,i]:["Top"+i,"Top"+n,r+n,r+i]).map(function(n){return t<2?e+n:"border"+n+e});ea[t>1?"border"+e:e]=function(e,t,n,r,i){var s,o;if(arguments.length<4)return 5===(o=(s=a.map(function(t){return ee(e,t,n)})).join(" ")).split(s[0]).length?s[0]:o;s=(r+"").split(" "),o={},a.forEach(function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]}),e.init(t,o,i)}});var eS={name:"css",register:G,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var a,s,o,u,c,h,d,m,g,v,_,y,w,T,A,C,R=this._props,P=e.style,I=n.vars.startAt;for(d in l||G(),this.styles=this.styles||z(e),C=this.styles.props,this.tween=n,t)if("autoRound"!==d&&(s=t[d],!(p.$i[d]&&(0,p.if)(d,t,n,r,e,i)))){if(c=typeof s,h=ea[d],"function"===c&&(c=typeof(s=s.call(n,r,e,i))),"string"===c&&~s.indexOf("random(")&&(s=(0,p.UI)(s)),h)h(this,e,d,s,n)&&(A=1);else if("--"===d.substr(0,2))a=(getComputedStyle(e).getPropertyValue(d)+"").trim(),s+="",p.GN.lastIndex=0,p.GN.test(a)||(m=(0,p.Wy)(a),g=(0,p.Wy)(s)),g?m!==g&&(a=$(e,d,a,g)+g):m&&(s+=m),this.add(P,"setProperty",a,s,r,i,0,0,d),R.push(d),C.push(d,0,P[d]);else if("undefined"!==c){if(I&&d in I?(a="function"==typeof I[d]?I[d].call(n,r,e,i):I[d],(0,p.r9)(a)&&~a.indexOf("random(")&&(a=(0,p.UI)(a)),(0,p.Wy)(a+"")||(a+=p.Fc.units[d]||(0,p.Wy)(ee(e,d))||""),"="===(a+"").charAt(1)&&(a=ee(e,d))):a=ee(e,d),u=parseFloat(a),(v="string"===c&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),o=parseFloat(s),d in x&&("autoAlpha"===d&&(1===u&&"hidden"===ee(e,"visibility")&&o&&(u=0),C.push("visibility",0,P.visibility),K(this,P,"visibility",u?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==d&&"transform"!==d&&~(d=x[d]).indexOf(",")&&(d=d.split(",")[0])),_=d in f){if(this.styles.save(d),y||((w=e._gsap).renderTransform&&!t.parseTransform||ed(e,t.parseTransform),T=!1!==t.smoothOrigin&&w.smooth,(y=this._pt=new p.Fo(this._pt,P,N,0,1,w.renderTransform,w,0,-1)).dep=1),"scale"===d)this._pt=new p.Fo(this._pt,w,"scaleY",w.scaleY,(v?(0,p.cy)(w.scaleY,v+o):o)-w.scaleY||0,S),this._pt.u=0,R.push("scaleY",d),d+="X";else if("transformOrigin"===d){C.push(k,0,P[k]),s=er(s),w.svg?eh(e,s,0,T,0,this):((g=parseFloat(s.split(" ")[2])||0)!==w.zOrigin&&K(this,w,"zOrigin",w.zOrigin,g),K(this,P,d,ep(a),ep(s)));continue}else if("svgOrigin"===d){eh(e,s,1,T,0,this);continue}else if(d in eo){ey(this,w,d,u,v?(0,p.cy)(u,v+s):s);continue}else if("smoothOrigin"===d){K(this,w,"smooth",w.smooth,s);continue}else if("force3D"===d){w[d]=s;continue}else if("transform"===d){ex(this,s,e);continue}}else d in P||(d=j(d)||d);if(_||(o||0===o)&&(u||0===u)&&!b.test(s)&&d in P)m=(a+"").substr((u+"").length),o||(o=0),g=(0,p.Wy)(s)||(d in p.Fc.units?p.Fc.units[d]:m),m!==g&&(u=$(e,d,a,g)),this._pt=new p.Fo(this._pt,_?w:P,d,u,(v?(0,p.cy)(u,v+o):o)-u,_||"px"!==g&&"zIndex"!==d||!1===t.autoRound?S:E),this._pt.u=g||0,m!==g&&"%"!==g&&(this._pt.b=a,this._pt.r=M);else if(d in P)et.call(this,e,d,a,v?v+s:s);else if(d in e)this.add(e,d,a||e[d],v?v+s:s,r,i);else if("parseTransform"!==d){(0,p.lC)(d,s);continue}_||(d in P?C.push(d,0,P[d]):C.push(d,1,a||e[d])),R.push(d)}}A&&(0,p.JV)(this)},render:function(e,t){if(t.tween._time||!h())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:ee,aliases:x,getSetter:function(e,t,n){var r=x[t];return r&&0>r.indexOf(",")&&(t=r),t in f&&t!==k&&(e._gsap.x||ee(e,"x"))?n&&c===n?"scale"===t?I:P:(c=n||{},"scale"===t?L:O):e.style&&!(0,p.m2)(e.style[t])?C:~t.indexOf("-")?R:(0,p.S5)(e,t)},core:{_removeProperty:Y,_getMatrix:ec}};p.p8.utils.checkPrefix=j,p.p8.core.getStyleSaver=z,r="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",i="rotation,rotationX,rotationY,skewX,skewY",a=(0,p.fS)(r+","+i+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){f[e]=1}),(0,p.fS)(i,function(e){p.Fc.units[e]="deg",eo[e]=1}),x[a[13]]=r+","+i,(0,p.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");x[t[1]]=a[t[0]]}),(0,p.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){p.Fc.units[e]="px"}),p.p8.registerPlugin(eS);var ew=p.p8.registerPlugin(eS)||p.p8;ew.core.Tween},8552:function(e,t,n){var r=n(852)(n(5639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(1789),i=n(401),a=n(7667),s=n(1327),o=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},8407:function(e,t,n){var r=n(7040),i=n(4125),a=n(2117),s=n(7518),o=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},7071:function(e,t,n){var r=n(852)(n(5639),"Map");e.exports=r},3369:function(e,t,n){var r=n(4785),i=n(1285),a=n(6e3),s=n(9916),o=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},3818:function(e,t,n){var r=n(852)(n(5639),"Promise");e.exports=r},8525:function(e,t,n){var r=n(852)(n(5639),"Set");e.exports=r},8668:function(e,t,n){var r=n(3369),i=n(619),a=n(2385);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=a,e.exports=s},6384:function(e,t,n){var r=n(8407),i=n(7465),a=n(3779),s=n(7599),o=n(6783),l=n(4309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=s,u.prototype.has=o,u.prototype.set=l,e.exports=u},2705:function(e,t,n){var r=n(5639).Symbol;e.exports=r},1149:function(e,t,n){var r=n(5639).Uint8Array;e.exports=r},577:function(e,t,n){var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a}},4636:function(e,t,n){var r=n(2545),i=n(5694),a=n(1469),s=n(4144),o=n(5776),l=n(6719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),c=!n&&i(e),h=!n&&!c&&s(e),d=!n&&!c&&!h&&l(e),p=n||c||h||d,f=p?r(e.length,String):[],m=f.length;for(var g in e)(t||u.call(e,g))&&!(p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,m)))&&f.push(g);return f}},9932:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},2488:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2663:function(e){e.exports=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}},2908:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},9029:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},8470:function(e,t,n){var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},8866:function(e,t,n){var r=n(2488),i=n(1469);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},4239:function(e,t,n){var r=n(2705),i=n(9607),a=n(2333),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},9454:function(e,t,n){var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:function(e,t,n){var r=n(2492),i=n(7005);e.exports=function e(t,n,a,s,o){return t===n||(null!=t&&null!=n&&(i(t)||i(n))?r(t,n,a,s,e,o):t!=t&&n!=n)}},2492:function(e,t,n){var r=n(6384),i=n(7114),a=n(8351),s=n(6096),o=n(4160),l=n(1469),u=n(4144),c=n(6719),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var _=l(e),y=l(t),b=_?d:o(e),x=y?d:o(t);b=b==h?p:b,x=x==h?p:x;var S=b==p,w=x==p,M=b==x;if(M&&u(e)){if(!u(t))return!1;_=!0,S=!1}if(M&&!S)return v||(v=new r),_||c(e)?i(e,t,n,m,g,v):a(e,t,b,n,m,g,v);if(!(1&n)){var E=S&&f.call(e,"__wrapped__"),T=w&&f.call(t,"__wrapped__");if(E||T){var A=E?e.value():e,C=T?t.value():t;return v||(v=new r),g(A,C,n,m,v)}}return!!M&&(v||(v=new r),s(e,t,n,m,g,v))}},8458:function(e,t,n){var r=n(3560),i=n(5346),a=n(3218),s=n(346),o=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,h=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:o).test(s(e))}},8749:function(e,t,n){var r=n(4239),i=n(1780),a=n(7005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!s[r(e)]}},280:function(e,t,n){var r=n(5726),i=n(6916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8674:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},2545:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},531:function(e,t,n){var r=n(2705),i=n(9932),a=n(1469),s=n(3448),o=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(s(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-o?"-0":n}},1717:function(e){e.exports=function(e){return function(t){return e(t)}}},4757:function(e){e.exports=function(e,t){return e.has(t)}},4429:function(e,t,n){var r=n(5639)["__core-js_shared__"];e.exports=r},5393:function(e,t,n){var r=n(2663),i=n(3816),a=n(8748),s=RegExp("[']","g");e.exports=function(e){return function(t){return r(a(i(t).replace(s,"")),e,"")}}},9389:function(e,t,n){var r=n(8674)({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"});e.exports=r},7114:function(e,t,n){var r=n(8668),i=n(2908),a=n(4757);e.exports=function(e,t,n,s,o,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var f=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var v=e[f],_=t[f];if(s)var y=u?s(_,v,f,t,e,l):s(v,_,f,e,t,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!i(t,function(e,t){if(!a(g,t)&&(v===e||o(v,e,n,s,l)))return g.push(t)})){m=!1;break}}else if(!(v===_||o(v,_,n,s,l))){m=!1;break}}return l.delete(e),l.delete(t),m}},8351:function(e,t,n){var r=n(2705),i=n(1149),a=n(7813),s=n(7114),o=n(8776),l=n(1814),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!h(new i(e),new i(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)break;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=s(p(e),p(t),r,u,h,d);return d.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6096:function(e,t,n){var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,o){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var p=o.get(e),f=o.get(t);if(p&&f)return p==t&&f==e;var m=!0;o.set(e,t),o.set(t,e);for(var g=l;++h<c;){var v=e[d=u[h]],_=t[d];if(a)var y=l?a(_,v,d,t,e,o):a(v,_,d,e,t,o);if(!(void 0===y?v===_||s(v,_,n,a,o):y)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var b=e.constructor,x=t.constructor;b!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(m=!1)}return o.delete(e),o.delete(t),m}},1957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:function(e,t,n){var r=n(8866),i=n(9551),a=n(3674);e.exports=function(e){return r(e,a,i)}},5050:function(e,t,n){var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:function(e,t,n){var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:function(e,t,n){var r=n(2705),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[o]=n:delete e[o]),i}},9551:function(e,t,n){var r=n(4963),i=n(479),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:r(s(e=Object(e)),function(t){return a.call(e,t)})}:i;e.exports=o},4160:function(e,t,n){var r=n(8552),i=n(7071),a=n(3818),s=n(8525),o=n(577),l=n(4239),u=n(346),c="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",m=u(r),g=u(i),v=u(a),_=u(s),y=u(o),b=l;(r&&b(new r(new ArrayBuffer(1)))!=f||i&&b(new i)!=c||a&&b(a.resolve())!=h||s&&b(new s)!=d||o&&b(new o)!=p)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return f;case g:return c;case v:return h;case _:return d;case y:return p}return t}),e.exports=b},7801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},3157:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},1789:function(e,t,n){var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:function(e,t,n){var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:function(e,t,n){var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:function(e,t,n){var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:function(e,t,n){var r,i=n(4429),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},5726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:function(e){e.exports=function(){this.__data__=[],this.size=0}},4125:function(e,t,n){var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},2117:function(e,t,n){var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:function(e,t,n){var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:function(e,t,n){var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:function(e,t,n){var r=n(1989),i=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},1285:function(e,t,n){var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:function(e,t,n){var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},4536:function(e,t,n){var r=n(852)(Object,"create");e.exports=r},6916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},4e3:function(e,t,n){e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i&&r.process,o=function(){try{var e=a&&a.require&&a.require("util").types;if(e)return e;return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=o},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},5639:function(e,t,n){var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},619:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:function(e){e.exports=function(e){return this.__data__.has(e)}},1814:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},7465:function(e,t,n){var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:function(e){e.exports=function(e){return this.__data__.get(e)}},6783:function(e){e.exports=function(e){return this.__data__.has(e)}},4309:function(e,t,n){var r=n(8407),i=n(7071),a=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(e,t),this.size=n.size,this}},346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2757:function(e){var t="\ud800-\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",s="[']",o="["+a+"]",l="["+r+"]",u="[^"+t+a+"\\d+"+n+r+i+"]",c="(?:\ud83c[\udde6-\uddff]){2}",h="[\ud800-\udbff][\udc00-\udfff]",d="["+i+"]",p="(?:"+l+"|"+u+")",f="(?:"+s+"(?:d|ll|m|re|s|t|ve))?",m="(?:"+s+"(?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",v="[\\ufe0e\\ufe0f]?",_="(?:\\u200d(?:"+["[^"+t+"]",c,h].join("|")+")"+v+g+")*",y="(?:"+["["+n+"]",c,h].join("|")+")"+(v+g+_),b=RegExp([d+"?"+l+"+"+f+"(?="+[o,d,"$"].join("|")+")","(?:"+d+"|"+u+")+"+m+"(?="+[o,d+p,"$"].join("|")+")",d+"?"+p+"+"+f,d+"+"+m,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",y].join("|"),"g");e.exports=function(e){return e.match(b)||[]}},3816:function(e,t,n){var r=n(9389),i=n(9833),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(a,r).replace(s,"")}},7813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:function(e,t,n){var r=n(9454),i=n(7005),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},1469:function(e){var t=Array.isArray;e.exports=t},8612:function(e,t,n){var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:function(e,t,n){e=n.nmd(e);var r=n(5639),i=n(5062),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,o=s&&s.exports===a?r.Buffer:void 0,l=o?o.isBuffer:void 0;e.exports=l||i},8446:function(e,t,n){var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:function(e,t,n){var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3448:function(e,t,n){var r=n(4239),i=n(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},6719:function(e,t,n){var r=n(8749),i=n(1717),a=n(4e3),s=a&&a.isTypedArray,o=s?i(s):r;e.exports=o},1804:function(e,t,n){var r=n(5393)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});e.exports=r},3674:function(e,t,n){var r=n(4636),i=n(280),a=n(8612);e.exports=function(e){return a(e)?r(e):i(e)}},479:function(e){e.exports=function(){return[]}},5062:function(e){e.exports=function(){return!1}},9833:function(e,t,n){var r=n(531);e.exports=function(e){return null==e?"":r(e)}},8748:function(e,t,n){var r=n(9029),i=n(3157),a=n(9833),s=n(2757);e.exports=function(e,t,n){return(e=a(e),void 0===(t=n?void 0:t))?i(e)?s(e):r(e):e.match(t)||[]}},2441:function(e,t,n){var r;!function(i,a,s){if(i){for(var o,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();v.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},v.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},v.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1||function e(t,n){return null!==t&&t!==a&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);o=null},v.init=function(){var e=v(a);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),i.Mousetrap=v,e.exports&&(e.exports=v),void 0!==(r=(function(){return v}).call(t,n,t,e))&&(e.exports=r)}function p(e,t,n){if(e.addEventListener){e.addEventListener(t,n,!1);return}e.attachEvent("on"+t,n)}function f(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:u[e.which]?u[e.which]:String.fromCharCode(e.which).toLowerCase()}function m(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(e,t){var n,r,i,a,s,u,d=[];for(u=0,a="+"===(n=e)?["+"]:(n=n.replace(/\+{2}/g,"+plus")).split("+");u<a.length;++u)h[s=a[u]]&&(s=h[s]),t&&"keypress"!=t&&c[s]&&(s=c[s],d.push("shift")),m(s)&&d.push(s);return r=s,(i=t)||(i=function(){if(!o)for(var e in o={},l)(!(e>95)||!(e<112))&&l.hasOwnProperty(e)&&(o[l[e]]=e);return o}()[r]?"keydown":"keypress"),"keypress"==i&&d.length&&(i="keydown"),{key:s,modifiers:d,action:t=i}}function v(e){var t,n=this;if(e=e||a,!(n instanceof v))return new v(e);n.target=e,n._callbacks={},n._directMap={};var r={},i=!1,s=!1,o=!1;function l(e){e=e||{};var t,n=!1;for(t in r){if(e[t]){n=!0;continue}r[t]=0}n||(o=!1)}function u(e,t,i,a,s,o){var l,u,c=[],h=i.type;if(!n._callbacks[e])return[];for("keyup"==h&&m(e)&&(t=[e]),l=0;l<n._callbacks[e].length;++l)if(u=n._callbacks[e][l],(a||!u.seq||r[u.seq]==u.level)&&h==u.action&&("keypress"==h&&!i.metaKey&&!i.ctrlKey||(d=t,p=u.modifiers,d.sort().join(",")===p.sort().join(",")))){var d,p,f=!a&&u.combo==s,g=a&&u.seq==a&&u.level==o;(f||g)&&n._callbacks[e].splice(l,1),c.push(u)}return c}function c(e,t,r,i){n.stopCallback(t,t.target||t.srcElement,r,i)||!1!==e(t,r)||(!function(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}(t),function(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}(t))}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,r=f(e);if(r){if("keyup"==e.type&&i===r){i=!1;return}n.handleKey(r,(t=[],e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t),e)}}n._handleKey=function(e,t,n){var r,i=u(e,t,n),a={},h=0,d=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r){if(i[r].seq){if(i[r].level!=h)continue;d=!0,a[i[r].seq]=1,c(i[r].callback,n,i[r].combo,i[r].seq);continue}d||c(i[r].callback,n,i[r].combo)}var p="keypress"==n.type&&s;n.type!=o||m(e)||p||l(a),s=d&&"keydown"==n.type},n._bindMultiple=function(e,a,s){for(var h=0;h<e.length;++h)(function e(a,s,h,d,p){n._directMap[a+":"+h]=s;var m,v=(a=a.replace(/\s+/g," ")).split(" ");if(v.length>1){!function(n,a,s,u){function h(e){c(s,e,n),"keyup"!==u&&(i=f(e)),setTimeout(l,10)}r[n]=0;for(var d=0;d<a.length;++d){var p=d+1===a.length?h:function(e){return function(){o=e,++r[n],clearTimeout(t),t=setTimeout(l,1e3)}}(u||g(a[d+1]).action);e(a[d],p,u,n,d)}}(a,v,s,h);return}m=g(a,h),n._callbacks[m.key]=n._callbacks[m.key]||[],u(m.key,m.modifiers,{type:m.action},d,a,p),n._callbacks[m.key][d?"unshift":"push"]({callback:s,modifiers:m.modifiers,action:m.action,seq:d,level:p,combo:a})})(e[h],a,s)},p(e,"keypress",h),p(e,"keydown",h),p(e,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},3454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(3621)}])},7290:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{PrefetchKind:function(){return n},ACTION_REFRESH:function(){return i},ACTION_NAVIGATE:function(){return a},ACTION_RESTORE:function(){return s},ACTION_SERVER_PATCH:function(){return o},ACTION_PREFETCH:function(){return l},ACTION_FAST_REFRESH:function(){return u},ACTION_SERVER_ACTION:function(){return c},isThenable:function(){return h}});let i="refresh",a="navigate",s="restore",o="server-patch",l="prefetch",u="fast-refresh",c="server-action";function h(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(r=n||(n={})).AUTO="auto",r.FULL="full",r.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7733:function(e,t,n){"use strict";function r(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),n(6436),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let r=n(8754),i=n(1757)._(n(7294)),a=r._(n(3935)),s=r._(n(7484)),o=n(3101),l=n(2986),u=n(7861);n(2299);let c=n(394),h=r._(n(6640)),d={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function p(e,t,n,r,i,a){let s=null==e?void 0:e.src;e&&e["data-loaded-src"]!==s&&(e["data-loaded-src"]=s,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,i=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==r?void 0:r.current)&&r.current(e)}}))}function f(e){let[t,n]=i.version.split(".",2),r=parseInt(t,10),a=parseInt(n,10);return r>18||18===r&&a>=3?{fetchPriority:e}:{fetchpriority:e}}let m=(0,i.forwardRef)((e,t)=>{let{src:n,srcSet:r,sizes:a,height:s,width:o,decoding:l,className:u,style:c,fetchPriority:h,placeholder:d,loading:m,unoptimized:g,fill:v,onLoadRef:_,onLoadingCompleteRef:y,setBlurComplete:b,setShowAltText:x,onLoad:S,onError:w,...M}=e;return i.default.createElement("img",{...M,...f(h),loading:m,width:o,height:s,decoding:l,"data-nimg":v?"fill":"1",className:u,style:c,sizes:a,srcSet:r,src:n,ref:(0,i.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(w&&(e.src=e.src),e.complete&&p(e,d,_,y,b,g))},[n,d,_,y,b,w,g,t]),onLoad:e=>{p(e.currentTarget,d,_,y,b,g)},onError:e=>{x(!0),"empty"!==d&&b(!0),w&&w(e)}})});function g(e){let{isAppRouter:t,imgAttributes:n}=e,r={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...f(n.fetchPriority)};return t&&a.default.preload?(a.default.preload(n.src,r),null):i.default.createElement(s.default,null,i.default.createElement("link",{key:"__nimg-"+n.src+n.srcSet+n.sizes,rel:"preload",href:n.srcSet?void 0:n.src,...r}))}let v=(0,i.forwardRef)((e,t)=>{let n=(0,i.useContext)(c.RouterContext),r=(0,i.useContext)(u.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=d||r||l.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[r]),{onLoad:s,onLoadingComplete:p}=e,f=(0,i.useRef)(s);(0,i.useEffect)(()=>{f.current=s},[s]);let v=(0,i.useRef)(p);(0,i.useEffect)(()=>{v.current=p},[p]);let[_,y]=(0,i.useState)(!1),[b,x]=(0,i.useState)(!1),{props:S,meta:w}=(0,o.getImgProps)(e,{defaultLoader:h.default,imgConf:a,blurComplete:_,showAltText:b});return i.default.createElement(i.default.Fragment,null,i.default.createElement(m,{...S,unoptimized:w.unoptimized,placeholder:w.placeholder,fill:w.fill,onLoadRef:f,onLoadingCompleteRef:v,setBlurComplete:y,setShowAltText:x,ref:t}),w.priority?i.default.createElement(g,{isAppRouter:!n,imgAttributes:S}):null)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _}});let r=n(8754)._(n(7294)),i=n(5019),a=n(9733),s=n(1833),o=n(9271),l=n(3809),u=n(394),c=n(3360),h=n(7718),d=n(7733),p=n(8273),f=n(7290),m=new Set;function g(e,t,n,r,i,s){if(s||(0,a.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let i=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(m.has(i))return;m.add(i)}Promise.resolve(s?e.prefetch(t,i):e.prefetch(t,n,r)).catch(e=>{})}}function v(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}let _=r.default.forwardRef(function(e,t){let n,s;let{href:m,as:_,children:y,prefetch:b=null,passHref:x,replace:S,shallow:w,scroll:M,locale:E,onClick:T,onMouseEnter:A,onTouchStart:C,legacyBehavior:R=!1,...P}=e;n=y,R&&("string"==typeof n||"number"==typeof n)&&(n=r.default.createElement("a",null,n));let I=r.default.useContext(u.RouterContext),L=r.default.useContext(c.AppRouterContext),O=null!=I?I:L,N=!I,k=!1!==b,D=null===b?f.PrefetchKind.AUTO:f.PrefetchKind.FULL,{href:U,as:F}=r.default.useMemo(()=>{if(!I){let e=v(m);return{href:e,as:_?v(_):e}}let[e,t]=(0,i.resolveHref)(I,m,!0);return{href:e,as:_?(0,i.resolveHref)(I,_):t||e}},[I,m,_]),z=r.default.useRef(U),B=r.default.useRef(F);R&&(s=r.default.Children.only(n));let V=R?s&&"object"==typeof s&&s.ref:t,[H,j,G]=(0,h.useIntersection)({rootMargin:"200px"}),W=r.default.useCallback(e=>{(B.current!==F||z.current!==U)&&(G(),B.current=F,z.current=U),H(e),V&&("function"==typeof V?V(e):"object"==typeof V&&(V.current=e))},[F,V,U,G,H]);r.default.useEffect(()=>{O&&j&&k&&g(O,U,F,{locale:E},{kind:D},N)},[F,U,j,E,k,null==I?void 0:I.locale,O,N,D]);let q={ref:W,onClick(e){R||"function"!=typeof T||T(e),R&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),O&&!e.defaultPrevented&&function(e,t,n,i,s,o,l,u,c){let{nodeName:h}=e.currentTarget;if("A"===h.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,a.isLocalURL)(n)))return;e.preventDefault();let d=()=>{let e=null==l||l;"beforePopState"in t?t[s?"replace":"push"](n,i,{shallow:o,locale:u,scroll:e}):t[s?"replace":"push"](i||n,{scroll:e})};c?r.default.startTransition(d):d()}(e,O,U,F,S,w,M,E,N)},onMouseEnter(e){R||"function"!=typeof A||A(e),R&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),O&&(k||!N)&&g(O,U,F,{locale:E,priority:!0,bypassPrefetchedCheck:!0},{kind:D},N)},onTouchStart(e){R||"function"!=typeof C||C(e),R&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),O&&(k||!N)&&g(O,U,F,{locale:E,priority:!0,bypassPrefetchedCheck:!0},{kind:D},N)}};if((0,o.isAbsoluteUrl)(F))q.href=F;else if(!R||x||"a"===s.type&&!("href"in s.props)){let e=void 0!==E?E:null==I?void 0:I.locale,t=(null==I?void 0:I.isLocaleDomain)&&(0,d.getDomainLocale)(F,e,null==I?void 0:I.locales,null==I?void 0:I.domainLocales);q.href=t||(0,p.addBasePath)((0,l.addLocale)(F,e,null==I?void 0:I.defaultLocale))}return R?r.default.cloneElement(s,q):r.default.createElement("a",{...P,...q},n)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let r=n(7294),i=n(3533),a="function"==typeof IntersectionObserver,s=new Map,o=[];function l(e){let{rootRef:t,rootMargin:n,disabled:l}=e,u=l||!a,[c,h]=(0,r.useState)(!1),d=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{d.current=e},[]);return(0,r.useEffect)(()=>{if(a){if(u||c)return;let e=d.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:i,elements:a}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=o.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let i=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:i},o.push(n),s.set(n,t),t}(n);return a.set(e,t),i.observe(e),function(){if(a.delete(e),i.unobserve(e),0===a.size){i.disconnect(),s.delete(r);let e=o.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&o.splice(e,1)}}}(e,e=>e&&h(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!c){let e=(0,i.requestIdleCallback)(()=>h(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,n,t,c,d.current]),[p,c,(0,r.useCallback)(()=>{h(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{noSSR:function(){return s},default:function(){return o}});let r=n(8754),i=(n(7294),r._(n(513)));function a(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){return delete t.webpack,delete t.modules,e(t)}function o(e,t){let n=i.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let o=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?n({...r,loader:()=>null!=o?o().then(a):Promise.resolve(a(()=>null))}):(delete r.webpack,delete r.modules,s(n,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return o}}),n(2299);let r=n(1083),i=n(2986);function a(e){return void 0!==e.default}function s(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function o(e,t){var n;let o,l,u,{src:c,sizes:h,unoptimized:d=!1,priority:p=!1,loading:f,className:m,quality:g,width:v,height:_,fill:y=!1,style:b,onLoad:x,onLoadingComplete:S,placeholder:w="empty",blurDataURL:M,fetchPriority:E,layout:T,objectFit:A,objectPosition:C,lazyBoundary:R,lazyRoot:P,...I}=e,{imgConf:L,showAltText:O,blurComplete:N,defaultLoader:k}=t,D=L||i.imageConfigDefault;if("allSizes"in D)o=D;else{let e=[...D.deviceSizes,...D.imageSizes].sort((e,t)=>e-t),t=D.deviceSizes.sort((e,t)=>e-t);o={...D,allSizes:e,deviceSizes:t}}let U=I.loader||k;delete I.loader,delete I.srcSet;let F="__next_img_default"in U;if(F){if("custom"===o.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=U;U=t=>{let{config:n,...r}=t;return e(r)}}if(T){"fill"===T&&(y=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[T];e&&(b={...b,...e});let t={responsive:"100vw",fill:"100vw"}[T];t&&!h&&(h=t)}let z="",B=s(v),V=s(_);if("object"==typeof(n=c)&&(a(n)||void 0!==n.src)){let e=a(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,u=e.blurHeight,M=M||e.blurDataURL,z=e.src,!y){if(B||V){if(B&&!V){let t=B/e.width;V=Math.round(e.height*t)}else if(!B&&V){let t=V/e.height;B=Math.round(e.width*t)}}else B=e.width,V=e.height}}let H=!p&&("lazy"===f||void 0===f);(!(c="string"==typeof c?c:z)||c.startsWith("data:")||c.startsWith("blob:"))&&(d=!0,H=!1),o.unoptimized&&(d=!0),F&&c.endsWith(".svg")&&!o.dangerouslyAllowSVG&&(d=!0),p&&(E="high");let j=s(g),G=Object.assign(y?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:A,objectPosition:C}:{},O?{}:{color:"transparent"},b),W=N||"empty"===w?null:"blur"===w?'url("data:image/svg+xml;charset=utf-8,'+(0,r.getImageBlurSvg)({widthInt:B,heightInt:V,blurWidth:l,blurHeight:u,blurDataURL:M||"",objectFit:G.objectFit})+'")':'url("'+w+'")',q=W?{backgroundSize:G.objectFit||"cover",backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},X=function(e){let{config:t,src:n,unoptimized:r,width:i,quality:a,sizes:s,loader:o}=e;if(r)return{src:n,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,n){let{deviceSizes:r,allSizes:i}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let r;r=e.exec(n);r)t.push(parseInt(r[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=r[0]*e),kind:"w"}}return{widths:i,kind:"w"}}return"number"!=typeof t?{widths:r,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))],kind:"x"}}(t,i,s),c=l.length-1;return{sizes:s||"w"!==u?s:"100vw",srcSet:l.map((e,r)=>o({config:t,src:n,quality:a,width:e})+" "+("w"===u?e:r+1)+u).join(", "),src:o({config:t,src:n,quality:a,width:l[c]})}}({config:o,src:c,unoptimized:d,width:B,quality:j,sizes:h,loader:U});return{props:{...I,loading:H?"lazy":f,fetchPriority:E,width:B,height:V,decoding:"async",className:m,style:{...G,...q},sizes:X.sizes,srcSet:X.srcSet,src:X.src},meta:{unoptimized:d,priority:p,placeholder:w,fill:y}}}},1083:function(e,t){"use strict";function n(e){let{widthInt:t,heightInt:n,blurWidth:r,blurHeight:i,blurDataURL:a,objectFit:s}=e,o=r?40*r:t,l=i?40*i:n,u=o&&l?"viewBox='0 0 "+o+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(u?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},1669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{unstable_getImgProps:function(){return l},default:function(){return u}});let r=n(8754),i=n(3101),a=n(2299),s=n(1373),o=r._(n(6640)),l=e=>{(0,a.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},u=s.Image},6640:function(e,t){"use strict";function n(e){let{config:t,src:n,width:r,quality:i}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+r+"&q="+(i||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),n.__next_img_default=!0;let r=n},5942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=n(8754)._(n(7294)).default.createContext(null)},513:function(e,t,n){"use strict";/**
@copyright (c) 2017-present James Kyle <me@thejameskyle.com>
 MIT License
 Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:
 The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE
*/Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=n(8754)._(n(7294)),i=n(5942),a=[],s=[],o=!1;function l(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class u{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),a=null;function l(){if(!a){let t=new u(e,n);a={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return a.promise()}if(!o){let e=n.webpack?n.webpack():n.modules;e&&s.push(t=>{for(let n of e)if(t.includes(n))return l()})}function c(e,t){!function(){l();let e=r.default.useContext(i.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach(t=>{e(t)})}();let s=r.default.useSyncExternalStore(a.subscribe,a.getCurrentValue,a.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:a.retry}),[]),r.default.useMemo(()=>{var t;return s.loading||s.error?r.default.createElement(n.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:a.retry}):s.loaded?r.default.createElement((t=s.loaded)&&t.default?t.default:t,e):null},[e,s])}return c.preload=()=>l(),c.displayName="LoadableComponent",r.default.forwardRef(c)}(l,e)}function h(e,t){let n=[];for(;e.length;){let r=e.pop();n.push(r(t))}return Promise.all(n).then(()=>{if(e.length)return h(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{h(a).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(o=!0,t());h(s,e).then(n,n)})),window.__NEXT_PRELOADREADY=c.preloadReady;let d=c},4648:function(e,t,n){"use strict";n.d(t,{Fu:function(){return a},I2:function(){return s},TQ:function(){return u},_b:function(){return o},a9:function(){return l},bU:function(){return m},ki:function(){return g},p0:function(){return c},p1:function(){return p},pT:function(){return d},yD:function(){return h},yE:function(){return f}});var r=n(9477),i=n(8879);let a=[1.2,-.6,7],s=[-.7,-.5,3.3];(0,i.G3)("Collection","461751681243");let o="kissing-bag-preorder",l=2550099,u=1.2,c="#79592d",h=new r.Vector3(-500,200,50),d=2,p="#dbc7b1",f=r.SRGBColorSpace,m=r.ACESFilmicToneMapping,g=1.5},9354:function(e,t,n){"use strict";n.d(t,{Z:function(){return y},f:function(){return _}});var r=n(5893),i=n(9477),a=n(7294);let s="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect,o=0,l=function(e){let t="function"==typeof e?function(e){let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(i!==t){let e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a=(e,r=i,a=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=r(t);function o(){let n=r(t);if(!a(s,n)){let t=s;e(s=n,t)}}return n.add(o),()=>n.delete(o)},s={setState:r,getState:i,subscribe:(e,t,r)=>t||r?a(e,t,r):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,s),s}(e):e,n=(e=t.getState,n=Object.is)=>{let r;let[,i]=(0,a.useReducer)(e=>e+1,0),o=t.getState(),l=(0,a.useRef)(o),u=(0,a.useRef)(e),c=(0,a.useRef)(n),h=(0,a.useRef)(!1),d=(0,a.useRef)();void 0===d.current&&(d.current=e(o));let p=!1;(l.current!==o||u.current!==e||c.current!==n||h.current)&&(r=e(o),p=!n(d.current,r)),s(()=>{p&&(d.current=r),l.current=o,u.current=e,c.current=n,h.current=!1});let f=(0,a.useRef)(o);s(()=>{let e=()=>{try{let e=t.getState(),n=u.current(e);c.current(d.current,n)||(l.current=e,d.current=n,i())}catch(e){h.current=!0,i()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n},[]);let m=p?r:d.current;return(0,a.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let e=[n,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},n}(e=>(i.DefaultLoadingManager.onStart=(t,n,r)=>{e({active:!0,item:t,loaded:n,total:r,progress:(n-o)/(r-o)*100})},i.DefaultLoadingManager.onLoad=()=>{e({active:!1})},i.DefaultLoadingManager.onError=t=>e(e=>({errors:[...e.errors,t]})),i.DefaultLoadingManager.onProgress=(t,n,r)=>{n===r&&(o=r),e({active:!0,item:t,loaded:n,total:r,progress:(n-o)/(r-o)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var u=n(9012),c=n(5518),h=n(4529),d=n(8815),p=n(5876);let f=e=>{let t=(0,a.useRef)(!1);return(0,a.useCallback)(()=>{t.current||(t.current=!0,e())},[])},m=e=>{let t=(0,a.useRef)(!1);(0,a.useEffect)(()=>{t.current||(t.current=!0,e())},[])};var g=n(7551),v=n.n(g);let _=(0,h.Ue)(()=>({progress:0,isLoaded:!1}));var y=()=>{let e=_(e=>e.progress),t=l(e=>e.progress),n=(0,a.useRef)(0),i=(0,a.useRef)(null),s=(0,a.useMemo)(()=>u.p8.timeline({paused:!0,defaults:{ease:"expo.inOut"}}),[]);m(()=>{let e={value:0};s.to(e,{value:99,ease:"power3.out",duration:5,onUpdate:()=>{let t=3*Math.round(e.value/3);_.setState({progress:t})},onComplete:()=>{_.setState({progress:99})}}),s.play()});let o=f(()=>{s.clear(),_.setState({progress:100,isLoaded:!0}),s.to(i.current,{translateY:"-100vh",delay:c.tq?0:2,duration:u.th,onComplete:()=>{d.q.setState({loaderEnded:!0})}}),s.play()});return(0,p.Z)(()=>{i.current&&!(n.current>t)&&(n.current=t,100===t&&o())},[t]),(0,r.jsxs)("div",{className:v().loader,ref:i,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 602 66",fill:"none",children:(0,r.jsx)("path",{fill:"#000",d:"M27.39 54.23c-4.898 0-9.374-1.148-13.43-3.445-4.03-2.32-7.218-5.531-9.562-9.633C2.055 37.051.883 32.48.883 27.442c0-5.04 1.172-9.61 3.515-13.712 2.344-4.125 5.532-7.347 9.563-9.668 4.055-2.32 8.531-3.48 13.43-3.48 3.656 0 7.113.691 10.37 2.074 3.258 1.36 6.06 3.223 8.403 5.59 2.344 2.344 4.195 5.191 5.555 8.543 1.383 3.328 2.074 6.879 2.074 10.652 0 3.774-.691 7.325-2.074 10.653-1.36 3.328-3.211 6.175-5.555 8.543-2.344 2.343-5.145 4.195-8.402 5.554-3.258 1.36-6.715 2.04-10.371 2.04Zm0-3.55c4.172 0 7.946-.996 11.32-2.989 3.4-2.015 6.06-4.793 7.981-8.332 1.946-3.562 2.918-7.535 2.918-11.918 0-4.382-.972-8.343-2.918-11.882-1.922-3.563-4.582-6.352-7.98-8.368-3.375-2.015-7.148-3.023-11.32-3.023-3.141 0-6.094.598-8.86 1.793-2.742 1.172-5.11 2.789-7.101 4.851-1.97 2.04-3.528 4.5-4.676 7.383-1.125 2.883-1.688 5.965-1.688 9.246 0 3.282.563 6.364 1.688 9.247C7.902 39.57 9.46 42.03 11.43 44.07c1.992 2.04 4.36 3.657 7.101 4.852 2.766 1.172 5.719 1.758 8.86 1.758Zm.212-7.242c-4.57 0-8.286-1.524-11.145-4.57-2.86-3.048-4.289-6.927-4.289-11.638 0-4.734 1.418-8.636 4.254-11.707 2.86-3.093 6.61-4.64 11.25-4.64 3.867 0 7.008 1.066 9.422 3.199 2.437 2.11 3.832 4.84 4.183 8.191h-7.77c-.257-1.406-.901-2.543-1.933-3.41-1.031-.867-2.355-1.3-3.972-1.3-2.32 0-4.114.902-5.38 2.707-1.265 1.78-1.898 4.101-1.898 6.96 0 2.813.668 5.11 2.004 6.891 1.36 1.781 3.14 2.672 5.344 2.672 1.758 0 3.164-.492 4.219-1.477 1.078-.984 1.71-2.238 1.898-3.761h7.77c-.211 3.28-1.489 6.058-3.832 8.332-2.438 2.367-5.813 3.55-10.125 3.55ZM58.787 53V1.531h12.761v18.633L89.267 1.531h15.117L84.662 22.168 105.544 53H90.708L75.873 30.746l-4.325 4.535V53H58.787ZM106.847 53V16.121h11.742V53h-11.742Zm0-41.977V1.531h11.742v9.492h-11.742ZM137.258 54.16c-4.805 0-8.695-1.746-11.672-5.238-2.976-3.516-4.465-8.297-4.465-14.344 0-5.766 1.5-10.453 4.5-14.062 3-3.633 6.879-5.45 11.637-5.45 2.438 0 4.465.457 6.082 1.371 1.617.891 3.012 2.18 4.184 3.868h.246V1.53h11.707V53h-11.215v-4.957h-.141c-1.125 1.945-2.625 3.457-4.5 4.535-1.851 1.055-3.972 1.582-6.363 1.582Zm3.024-9.281c2.414 0 4.312-.95 5.695-2.848s2.074-4.383 2.074-7.453c0-3.21-.656-5.789-1.969-7.734-1.312-1.946-3.199-2.918-5.66-2.918-2.297 0-4.113.972-5.449 2.918-1.313 1.922-1.969 4.453-1.969 7.593 0 3.211.645 5.754 1.934 7.63 1.312 1.874 3.094 2.812 5.344 2.812ZM184.896 54.23c-6.961 0-12.492-1.5-16.593-4.5-4.102-3.023-6.223-7.335-6.364-12.937h12.797c.281 2.555 1.254 4.418 2.918 5.59 1.664 1.172 4.055 1.758 7.172 1.758 1.477 0 2.812-.164 4.008-.493 1.219-.351 2.238-.949 3.058-1.793.821-.843 1.231-1.886 1.231-3.128 0-1.266-.492-2.309-1.477-3.13a9.349 9.349 0 0 0-3.129-1.792c-1.125-.375-3.058-.89-5.8-1.547l-.844-.211a120.064 120.064 0 0 1-3.867-.95 47.938 47.938 0 0 1-3.657-1.16c-1.382-.492-2.543-.996-3.48-1.511-.938-.516-1.91-1.172-2.918-1.969-.984-.797-1.781-1.652-2.391-2.566-.586-.938-1.078-2.04-1.476-3.305-.375-1.266-.563-2.648-.563-4.148 0-2.157.34-4.114 1.02-5.872.679-1.757 1.629-3.246 2.847-4.464 1.219-1.243 2.684-2.274 4.395-3.094 1.711-.844 3.574-1.453 5.59-1.828 2.039-.399 4.23-.598 6.574-.598 3.797 0 7.16.563 10.09 1.688 2.953 1.101 5.355 2.87 7.207 5.308 1.851 2.414 2.859 5.367 3.023 8.86h-12.445c-.234-1.97-1.078-3.493-2.531-4.57-1.453-1.102-3.375-1.653-5.766-1.653-2.226 0-4.019.445-5.379 1.336-1.359.89-2.039 2.062-2.039 3.515 0 .586.094 1.114.281 1.582.188.446.551.868 1.09 1.266a17.09 17.09 0 0 0 1.512.95c.469.234 1.266.515 2.391.843 1.125.305 2.05.55 2.777.738.75.164 1.957.434 3.621.809a77.13 77.13 0 0 1 4.043 1.02c1.148.328 2.391.75 3.727 1.265 1.336.492 2.472 1.02 3.41 1.582.961.54 1.91 1.219 2.847 2.04.938.82 1.688 1.71 2.25 2.671.586.961 1.055 2.086 1.407 3.375.351 1.29.527 2.707.527 4.254 0 3.492-.937 6.527-2.812 9.105-1.875 2.555-4.395 4.477-7.559 5.766-3.141 1.266-6.715 1.898-10.723 1.898ZM221.706 54.09c-4.148 0-7.347-1.242-9.597-3.727-2.227-2.484-3.34-5.824-3.34-10.02V16.122h11.636v21.762c0 4.172 1.852 6.258 5.555 6.258 1.992 0 3.563-.68 4.711-2.04 1.172-1.359 1.758-3.152 1.758-5.378V16.12h11.742V53h-11.215v-4.535h-.211c-1.406 1.875-2.988 3.281-4.746 4.219-1.734.937-3.832 1.406-6.293 1.406ZM248.391 65.164V16.121h11.215v4.465h.246c2.813-3.68 6.528-5.52 11.145-5.52 3.187 0 5.988.868 8.402 2.602 2.414 1.71 4.242 4.031 5.484 6.96 1.243 2.93 1.864 6.247 1.864 9.95 0 5.953-1.465 10.711-4.395 14.274-2.93 3.539-6.808 5.308-11.637 5.308-4.476 0-7.957-1.664-10.441-4.992h-.141v15.996h-11.742Zm19.301-20.074c2.227 0 3.984-.903 5.273-2.707 1.29-1.805 1.934-4.266 1.934-7.383 0-3.258-.633-5.824-1.898-7.7-1.243-1.874-3.082-2.812-5.52-2.812-2.461 0-4.371.973-5.73 2.918-1.336 1.946-2.004 4.477-2.004 7.594 0 3.047.703 5.496 2.109 7.348 1.406 1.828 3.352 2.742 5.836 2.742ZM307.279 54.09c-3.961 0-7.453-.856-10.476-2.567-3-1.734-5.285-4.066-6.856-6.996-1.547-2.953-2.32-6.293-2.32-10.02 0-3.655.785-6.948 2.356-9.878a17.844 17.844 0 0 1 6.714-6.996c2.907-1.711 6.188-2.567 9.844-2.567 5.039 0 9.246 1.536 12.621 4.606 2.156 1.992 3.785 4.535 4.887 7.629 1.101 3.07 1.629 6.504 1.582 10.3h-26.508c.352 2.532 1.231 4.512 2.637 5.942 1.406 1.406 3.293 2.11 5.66 2.11 3 0 5.039-1.22 6.117-3.657h11.461c-.867 3.563-2.93 6.457-6.187 8.684-3.282 2.273-7.125 3.41-11.532 3.41Zm-8.086-23.485h14.555c-.211-2.203-.949-3.949-2.215-5.238-1.242-1.312-2.824-1.969-4.746-1.969-4.172 0-6.703 2.403-7.594 7.207ZM328.128 53V16.121h11.215v5.766h.246c1.313-2.203 2.754-3.809 4.325-4.817 1.593-1.008 3.504-1.511 5.73-1.511 1.102 0 1.875.093 2.32.28v10.09h-.281c-3.68-.515-6.574.13-8.683 1.934-2.086 1.805-3.129 4.664-3.129 8.578V53h-11.743ZM385.225 54.23c-6.961 0-12.492-1.5-16.594-4.5-4.101-3.023-6.222-7.335-6.363-12.937h12.797c.281 2.555 1.254 4.418 2.918 5.59 1.664 1.172 4.055 1.758 7.172 1.758 1.476 0 2.812-.164 4.008-.493 1.218-.351 2.238-.949 3.058-1.793.82-.843 1.231-1.886 1.231-3.128 0-1.266-.493-2.309-1.477-3.13a9.349 9.349 0 0 0-3.129-1.792c-1.125-.375-3.058-.89-5.801-1.547l-.843-.211a120.865 120.865 0 0 1-3.868-.95 48.07 48.07 0 0 1-3.656-1.16c-1.383-.492-2.543-.996-3.48-1.511-.938-.516-1.91-1.172-2.918-1.969-.985-.797-1.782-1.652-2.391-2.566-.586-.938-1.078-2.04-1.476-3.305-.375-1.266-.563-2.648-.563-4.148 0-2.157.34-4.114 1.02-5.872.679-1.757 1.628-3.246 2.847-4.464 1.219-1.243 2.684-2.274 4.395-3.094 1.711-.844 3.574-1.453 5.59-1.828 2.039-.399 4.23-.598 6.574-.598 3.797 0 7.16.563 10.09 1.688 2.953 1.101 5.355 2.87 7.207 5.308 1.851 2.414 2.859 5.367 3.023 8.86h-12.445c-.235-1.97-1.078-3.493-2.531-4.57-1.454-1.102-3.375-1.653-5.766-1.653-2.227 0-4.02.445-5.379 1.336-1.359.89-2.039 2.062-2.039 3.515 0 .586.094 1.114.281 1.582.188.446.551.868 1.09 1.266a17.09 17.09 0 0 0 1.512.95c.469.234 1.265.515 2.39.843 1.125.305 2.051.55 2.778.738.75.164 1.957.434 3.621.809 1.547.351 2.894.691 4.043 1.02 1.148.328 2.39.75 3.726 1.265 1.336.492 2.473 1.02 3.411 1.582.96.54 1.91 1.219 2.847 2.04.938.82 1.688 1.71 2.25 2.671.586.961 1.055 2.086 1.406 3.375.352 1.29.528 2.707.528 4.254 0 3.492-.938 6.527-2.813 9.105-1.875 2.555-4.394 4.477-7.558 5.766-3.141 1.266-6.715 1.898-10.723 1.898ZM423.301 53.422c-1.805 0-3.387-.152-4.746-.457a11.143 11.143 0 0 1-3.692-1.617c-1.078-.75-1.898-1.793-2.461-3.13-.562-1.359-.844-3-.844-4.921V23.469h-4.886V16.12h4.886V4.484h11.426v11.637h6.715v7.348h-6.715v17.297c0 1.359.34 2.297 1.02 2.812.679.516 1.711.774 3.094.774.398 0 .902-.012 1.511-.036a57.07 57.07 0 0 1 1.09-.035v8.578c-1.359.375-3.492.563-6.398.563ZM445.134 54.09c-4.148 0-7.348-1.242-9.598-3.727-2.226-2.484-3.339-5.824-3.339-10.02V16.122h11.636v21.762c0 4.172 1.852 6.258 5.555 6.258 1.992 0 3.562-.68 4.711-2.04 1.172-1.359 1.758-3.152 1.758-5.378V16.12h11.742V53h-11.215v-4.535h-.211c-1.406 1.875-2.988 3.281-4.746 4.219-1.734.937-3.832 1.406-6.293 1.406ZM486.303 54.16c-4.804 0-8.695-1.746-11.671-5.238-2.977-3.516-4.465-8.297-4.465-14.344 0-5.766 1.5-10.453 4.5-14.062 3-3.633 6.879-5.45 11.636-5.45 2.438 0 4.465.457 6.082 1.371 1.618.891 3.012 2.18 4.184 3.868h.246V1.53h11.707V53h-11.215v-4.957h-.14c-1.125 1.945-2.625 3.457-4.5 4.535-1.852 1.055-3.973 1.582-6.364 1.582Zm3.024-9.281c2.414 0 4.312-.95 5.695-2.848s2.074-4.383 2.074-7.453c0-3.21-.656-5.789-1.968-7.734-1.313-1.946-3.2-2.918-5.661-2.918-2.296 0-4.113.972-5.449 2.918-1.312 1.922-1.968 4.453-1.968 7.593 0 3.211.644 5.754 1.933 7.63 1.313 1.874 3.094 2.812 5.344 2.812ZM512.707 53V16.121h11.742V53h-11.742Zm0-41.977V1.531h11.742v9.492h-11.742ZM540.869 42.805c1.336 1.992 3.258 2.988 5.765 2.988 2.508 0 4.442-1.008 5.801-3.023 1.36-2.016 2.039-4.723 2.039-8.122 0-3.421-.679-6.152-2.039-8.191-1.359-2.039-3.293-3.059-5.801-3.059-2.484 0-4.406 1.02-5.765 3.059-1.336 2.04-2.004 4.77-2.004 8.191 0 3.422.668 6.141 2.004 8.157Zm5.836 11.355c-3.867 0-7.313-.855-10.336-2.566-3-1.711-5.321-4.043-6.961-6.996-1.617-2.953-2.426-6.27-2.426-9.95 0-3.68.809-6.996 2.426-9.949 1.64-2.953 3.961-5.285 6.961-6.996 3.023-1.71 6.469-2.566 10.336-2.566 3.89 0 7.336.855 10.336 2.566 3 1.711 5.297 4.043 6.89 6.996 1.617 2.953 2.426 6.27 2.426 9.95 0 3.68-.809 6.995-2.426 9.949-1.593 2.953-3.89 5.285-6.89 6.996-3 1.71-6.446 2.566-10.336 2.566ZM584.569 54.16c-5.39 0-9.679-1.172-12.867-3.515-3.187-2.344-4.875-5.543-5.062-9.598h11.109c.211 1.805.891 3.176 2.039 4.113 1.172.914 2.742 1.371 4.711 1.371 1.781 0 3.188-.316 4.219-.949 1.031-.656 1.547-1.57 1.547-2.742 0-.352-.047-.68-.141-.985a1.941 1.941 0 0 0-.492-.808 4.28 4.28 0 0 0-.703-.633c-.211-.187-.539-.363-.985-.527a12.875 12.875 0 0 0-1.125-.387c-.304-.117-.75-.234-1.336-.352a14.6 14.6 0 0 0-1.406-.28c-.351-.071-.879-.165-1.582-.282-.703-.117-1.23-.211-1.582-.281a78.016 78.016 0 0 1-2.777-.528 30.217 30.217 0 0 1-2.637-.703c-.984-.304-1.828-.633-2.531-.984a16.486 16.486 0 0 1-2.11-1.406 8.304 8.304 0 0 1-1.722-1.934c-.422-.727-.774-1.582-1.055-2.566-.281-1.008-.422-2.11-.422-3.305 0-3.727 1.512-6.621 4.535-8.684 3.024-2.086 6.821-3.129 11.391-3.129 5.133 0 9.117 1.043 11.953 3.13 2.836 2.085 4.395 4.98 4.676 8.683h-10.793c-.211-1.57-.82-2.684-1.828-3.34-.985-.656-2.344-.984-4.078-.984-1.524 0-2.766.293-3.727.879-.937.562-1.406 1.394-1.406 2.496 0 .351.07.68.211.984.14.281.387.54.738.773.375.211.715.399 1.02.563.328.14.82.293 1.476.457.656.14 1.184.258 1.582.352.399.07 1.031.187 1.899.351.867.14 1.511.246 1.933.317 1.125.187 2.074.363 2.848.527.773.164 1.687.41 2.742.738 1.078.305 1.981.645 2.707 1.02.727.375 1.488.879 2.285 1.511.797.61 1.43 1.301 1.899 2.075.468.75.855 1.664 1.16 2.742.328 1.078.492 2.273.492 3.586 0 2.601-.738 4.84-2.215 6.715-1.476 1.875-3.469 3.27-5.976 4.183-2.485.89-5.356 1.336-8.614 1.336Z"})}),(0,r.jsxs)("h3",{children:[e.toFixed(0),"%"]})]})}},2653:function(e,t,n){"use strict";n.d(t,{Z:function(){return _},j:function(){return v}});var r=n(5893),i=n(512),a=n(7294),s=n(5518),o=n(9354),l=Object.prototype.hasOwnProperty;function u(e,t,n){for(n of e.keys())if(c(n,t))return n}function c(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&c(e[r],t[r]););return -1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if((i=r)&&"object"==typeof i&&!(i=u(t,i))||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if((i=r[0])&&"object"==typeof i&&!(i=u(t,i))||!c(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return -1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return -1===r}if(!n||"object"==typeof e){for(n in r=0,e)if(l.call(e,n)&&++r&&!l.call(t,n)||!(n in t)||!c(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!=e&&t!=t}var h=n(4918),d=n(9946);let p=e=>{var t,n,r;let i=e.map(e=>(0,d.jl)(e));return a.useEffect(()=>{let{signal:e,abort:t}=new AbortController;return i.map(t=>fetch(t,{signal:e,cache:h.r8?"no-cache":"force-cache"})),()=>{t()}},(t=[i],n=a.useRef(t),r=a.useRef(0),c(t,n.current)||(n.current=t,r.current+=1),a.useMemo(function(){return n.current},[r.current]))),i};var f=n(3651),m=n.n(f);let g=(0,a.createContext)(null),v=()=>{let e=(0,a.useContext)(g);if(!e)throw Error("useCursor must be used within a CursorProvider");return e};var _=e=>{let{children:t}=e,n=(0,a.useRef)(null),[l,u]=(0,a.useState)("default"),[c,h]=(0,a.useState)();(0,a.useEffect)(()=>{h(s.tq)},[]);let[d,f,v,_]=p(["/images/cursor/default.gif","/images/cursor/grab.gif","/images/cursor/pointer.gif","/images/cursor/paint.gif"]);(0,a.useEffect)(()=>{if(!n.current||c)return;let e={x:window.innerWidth/2,y:window.innerHeight/2},t={x:e.x,y:e.y},r=e=>{var r,i,a;t.x=e.x,t.y=e.y,null==n||null===(r=n.current)||void 0===r||r.style.setProperty("--x",String(t.x)),null==n||null===(i=n.current)||void 0===i||i.style.setProperty("--y",String(t.y)),null==n||null===(a=n.current)||void 0===a||a.style.setProperty("opacity","1")};return window.addEventListener("mousemove",r,{passive:!0}),()=>{window.removeEventListener("mousemove",r)}},[c]);let y=(0,o.f)(e=>e.isLoaded),[b,x]=(0,a.useState)(y);(0,a.useEffect)(()=>{if(!y)return;let e=setTimeout(()=>{x(!0)},500);return()=>{clearTimeout(e)}},[x,y]);let S=(0,a.useMemo)(()=>({setCursor:e=>{u(e)},resetCursor:()=>{u("default")}}),[u]);return(0,r.jsxs)(r.Fragment,{children:[!1===c&&(0,r.jsx)("div",{className:(0,i.W)(m().cursor__follower,m()["".concat(l)]),style:{"--default":'url("'.concat(d,'")'),"--pointer":'url("'.concat(v,'")'),"--grab":'url("'.concat(f,'")'),"--paint":'url("'.concat(_,'")'),visibility:b?"visible":"hidden"},ref:n,children:(0,r.jsx)("div",{className:m().inner})}),(0,r.jsx)(g.Provider,{value:S,children:t})]})}},2977:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r=(0,n(4529).Ue)((e,t)=>({activeTrack:null,isOpen:!1,isPlaying:!1,pause:()=>e({isPlaying:!1}),pauseAllTracks:()=>e({isPlaying:!1,activeTrack:null}),play:()=>e({isPlaying:!0}),setActiveTrack:t=>e({activeTrack:t}),setOpen:t=>e({isOpen:t}),stop:()=>e({isPlaying:!1,activeTrack:null}),toggleSound:()=>{e({isPlaying:!t().isPlaying,activeTrack:null})}}))},2733:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(990);let i=(0,n(4529).Ue)((e,t)=>{let n=r.ZP.timeline({autoRemoveChildren:!0}),i={value:-1},a=()=>{t().isRevealingTransition||(n.clear(),e({isInTransition:!0}),n.to(i,{value:0,duration:1,delay:.2,ease:"power2.out",onStart:()=>{e({isRevealingTransition:!0})},onComplete:()=>{e({isRevealingTransition:!1})}}),n.play())},s=()=>{n.to(i,{value:1,duration:1,delay:1,ease:"power2.out",onComplete:()=>{e({isInTransition:!1}),i.value=-1}})};return{tl:n,activeScene:null,setActiveScene:(r,o)=>{if(r===t().activeScene){t().isInTransition&&s();return}let l=t().isFirstScene;if(o||l){n.clear(),i.value=-1,e({activeScene:r,isRevealingTransition:!1,isFirstScene:!1,isInTransition:!1});return}t().isRevealingTransition||0===i.value||a(),n.call(()=>{e({activeScene:r})}),s(),n.play()},transition:i,startTransition:a,endTransition:s,isFirstScene:!0,isRevealingTransition:!1,isInTransition:!1}})},6509:function(e,t,n){"use strict";n.d(t,{GS:function(){return h},QZ:function(){return d},VW:function(){return u},YU:function(){return c}});var r=n(7294),i=n(9477),a=n(4529),s=n(4648),o=n(4918),l=n(8879);let u=[{title:o.N3.kissingBag,position:[2.2,-1.36,7.7],cameraPosition:s.I2,cameraTarget:s.Fu,zoomFactor:1,rotation:[0,i.MathUtils.degToRad(180),0],scale:[1,1,1],size:1,texture:3,shopifyId:(0,l.BW)("Product",["8052991557851","8052991361243","8052991787227","8052991590619"]),colors:o.aO}],c=[...u,{title:o.N3.lowBootsWithSwirls,position:[2.43,-1.7,10.52],cameraPosition:s.I2,cameraTarget:s.Fu,zoomFactor:1.2,rotation:[0,i.MathUtils.degToRad(-120),0],scale:[.8,.8,.8],shopifyId:(0,l.BW)("Product",["8076307792091","8076307890395","8076305498331","8076307661019"]),colors:o.SY},{title:o.N3.kissingPuffer,position:[3.3,-.42,10.4],cameraPosition:s.I2,cameraTarget:s.Fu,zoomFactor:2.3,rotation:[0,0,0],scale:[1,1,1],shopifyId:(0,l.BW)("Product",["8076305596635","8076305727707"]),colors:o.Q$},{title:"lacasa-jacket",position:[0,0,0],cameraPosition:s.I2,cameraTarget:s.Fu,zoomFactor:1,rotation:[0,0,0],scale:[1,1,1],shopifyId:(0,l.G3)("Product","8268140151030")}],h=(0,a.Ue)(e=>({products:null,handleProductsUpdate:t=>{let n=Object.keys(o.N3),r=Object.values(o.N3).reduce((e,r,i)=>{let a=r.toLowerCase(),s=t.filter(e=>e.title.toLowerCase().startsWith(a)).map(e=>({...e}));if(s.length>0&&e){let t=c.find(e=>{var t;return null!==(t=e.title.toLowerCase().startsWith(a))&&void 0!==t?t:{}});e[n[i]]={products:[...s],_productR3FGroupProps:t}}return e},{});e(()=>({products:r}))}})),d=e=>{let{handleProductsUpdate:t}=h();(0,r.useEffect)(()=>{e&&t(e)},[t,e])}},8815:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});let r=(0,n(4529).Ue)((e,t)=>({appQuality:1,activeLandScape:!1,animationOpen:!1,aoMapIntensity:1,canvasLoaded:!1,fontsLoaded:!1,lightMapIntensity:1,loaderEnded:!1,canvasEventsEnabled:!0,setAppQuality:n=>{0!==t().appQuality&&e(e=>({...e,appQuality:n}))},setAoMapIntensity:t=>e(e=>({...e,aoMapIntensity:t})),setLightMapIntensity:t=>e(e=>({...e,lightMapIntensity:t})),setActiveLandScape:t=>e(e=>({...e,activeLandScape:t})),setAnimationOpen:t=>e(e=>({...e,animationOpen:t})),setCanvasLoaded:t=>e(e=>({...e,canvasLoaded:t})),setFontsLoaded:t=>e(e=>({...e,fontsLoaded:t})),setLoaderEnded:t=>e(e=>({...e,loaderEnded:t})),setCanvasEventsEnabled:t=>e(e=>({...e,canvasEventsEnabled:t}))}))},2869:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(5476);let i=e=>{let[t,n]=(0,r.y)("sessionStorage",e=>e.number(),"".concat(e,"-active-bag-texture"),{enabled:!!e,initialValue:4});return{activeTexture:t,setActiveTexture:n}}},2453:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(5476);let i=e=>{let[t,n]=(0,r.y)("sessionStorage",e=>e.number(),"".concat(e,"-active-jacket-texture"),{enabled:!!e,initialValue:0});return{activeTexture:t,setActiveTexture:n}}},743:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var r=n(1804),i=n.n(r),a=n(1163),s=n(6509),o=n(4918);let l=()=>{var e;let{products:t}=(0,s.GS)(),{slug:n}=(0,a.useRouter)().query;return n&&t&&null!==(e=t[Object.keys(o.N3).find(e=>n.includes(i()(e)))])&&void 0!==e?e:null}},3608:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(5476);let i=e=>{let[t,n]=(0,r.y)("sessionStorage",e=>e.number(),"".concat(e,"-active-shoe-texture"),{enabled:!!e,initialValue:4});return{activeTexture:t,setActiveTexture:n}}},5876:function(e,t,n){"use strict";let r=n(7294).useLayoutEffect;t.Z=r},1497:function(e,t,n){"use strict";n.d(t,{k:function(){return s},w:function(){return o}});var r=n(7294),i=n(9477),a=n(9542);let s=(0,n(4529).Ue)(()=>({uv:new i.Vector2(.5,.5),position:new i.Vector2(0,0)})),o=()=>{let e=s(e=>e.uv),t=s(e=>e.position);(0,r.useEffect)(()=>{let n=n=>{let r=(0,a.uZ)(n.clientX/window.innerWidth,0,1),i=(0,a.uZ)(n.clientY/window.innerHeight,0,1);e.set(isNaN(r)?0:r,isNaN(i)?0:i),t.set(n.clientX,n.clientY)};return window.addEventListener("mousemove",n),()=>{window.removeEventListener("mousemove",n)}},[e,t])}},8977:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(2441),i=n.n(r),a=n(7294);let s=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];a.useEffect(()=>{if(t)return e.forEach(e=>{let{keys:t,callback:n,action:r}=e;return i().bind(t,n,r)}),()=>{e.forEach(e=>{let{keys:t}=e;return i().unbind(t)})}},[e,t])}},5476:function(e,t,n){"use strict";let r;n.d(t,{y:function(){return tn}});var i,a,s,o,l,u,c,h=n(7848),d=n(7294);(i=o||(o={})).assertEqual=e=>e,i.assertIs=function(e){},i.assertNever=function(e){throw Error()},i.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},i.getValidEnumValues=e=>{let t=i.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return i.objectValues(n)},i.objectValues=e=>i.objectKeys(e).map(function(t){return e[t]}),i.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},i.find=(e,t)=>{for(let n of e)if(t(n))return n},i.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,i.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},i.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(l||(l={})).mergeShapes=(e,t)=>({...e,...t});let p=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),f=e=>{switch(typeof e){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(e)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":if(Array.isArray(e))return p.array;if(null===e)return p.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return p.promise;if("undefined"!=typeof Map&&e instanceof Map)return p.map;if("undefined"!=typeof Set&&e instanceof Set)return p.set;if("undefined"!=typeof Date&&e instanceof Date)return p.date;return p.object;default:return p.unknown}},m=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class g extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){let n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}g.create=e=>new g(e);let v=(e,t)=>{let n;switch(e.code){case m.invalid_type:n=e.received===p.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case m.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:n=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case m.invalid_union:n="Invalid input";break;case m.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case m.invalid_enum_value:n=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case m.invalid_arguments:n="Invalid function arguments";break;case m.invalid_return_type:n="Invalid function return type";break;case m.invalid_date:n="Invalid date";break;case m.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case m.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case m.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case m.custom:n="Invalid input";break;case m.invalid_intersection_types:n="Intersection results could not be merged";break;case m.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case m.not_finite:n="Number must be finite";break;default:n=t.defaultError,o.assertNever(e)}return{message:n}},_=v;function y(){return _}let b=e=>{let{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],s={...i,path:a},o="";for(let e of r.filter(e=>!!e).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...i,path:a,message:i.message||o}};function x(e,t){let n=b({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,y(),v].filter(e=>!!e)});e.common.issues.push(n)}class S{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return w;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let e of t)n.push({key:await e.key,value:await e.value});return S.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:i}=r;if("aborted"===t.status||"aborted"===i.status)return w;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||r.alwaysSet)&&(n[t.value]=i.value)}return{status:e.value,value:n}}}let w=Object.freeze({status:"aborted"}),M=e=>({status:"dirty",value:e}),E=e=>({status:"valid",value:e}),T=e=>"aborted"===e.status,A=e=>"dirty"===e.status,C=e=>"valid"===e.status,R=e=>"undefined"!=typeof Promise&&e instanceof Promise;(a=u||(u={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},a.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class P{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let I=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new g(e.common.issues);return this._error=t,this._error}}};function L(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class O{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return f(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new S,ctx:{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(R(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},i=this._parseSync({data:e,path:r.path,parent:r});return I(r,i)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},r=this._parse({data:e,path:n.path,parent:n});return I(n,await (R(r)?r:Promise.resolve(r)))}refine(e,t){let n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let i=e(t),a=()=>r.addIssue({code:m.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new ev({schema:this,typeName:c.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return e_.create(this,this._def)}nullable(){return ey.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ee.create(this,this._def)}promise(){return eg.create(this,this._def)}or(e){return en.create([this,e],this._def)}and(e){return ea.create(this,e,this._def)}transform(e){return new ev({...L(this._def),schema:this,typeName:c.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eb({...L(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:c.ZodDefault})}brand(){return new eM({typeName:c.ZodBranded,type:this,...L(this._def)})}catch(e){return new ex({...L(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:c.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eE.create(this,e)}readonly(){return eT.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let N=/^c[^\s-]{8,}$/i,k=/^[a-z][a-z0-9]*$/,D=/^[0-9A-HJKMNP-TV-Z]{26}$/,U=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,F=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,z=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,B=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,V=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class H extends O{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.string,received:t.parsedType}),w}let n=new S;for(let s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if("max"===s.kind)e.data.length>s.value&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if("length"===s.kind){let r=e.data.length>s.value,i=e.data.length<s.value;(r||i)&&(t=this._getOrReturnCtx(e,t),r?x(t,{code:m.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&x(t,{code:m.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if("email"===s.kind)F.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"email",code:m.invalid_string,message:s.message}),n.dirty());else if("emoji"===s.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:m.invalid_string,message:s.message}),n.dirty());else if("uuid"===s.kind)U.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:m.invalid_string,message:s.message}),n.dirty());else if("cuid"===s.kind)N.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:m.invalid_string,message:s.message}),n.dirty());else if("cuid2"===s.kind)k.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:m.invalid_string,message:s.message}),n.dirty());else if("ulid"===s.kind)D.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:m.invalid_string,message:s.message}),n.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(r){x(t=this._getOrReturnCtx(e,t),{validation:"url",code:m.invalid_string,message:s.message}),n.dirty()}else if("regex"===s.kind)s.regex.lastIndex=0,s.regex.test(e.data)||(x(t=this._getOrReturnCtx(e,t),{validation:"regex",code:m.invalid_string,message:s.message}),n.dirty());else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(x(t=this._getOrReturnCtx(e,t),{code:m.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(x(t=this._getOrReturnCtx(e,t),{code:m.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(x(t=this._getOrReturnCtx(e,t),{code:m.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty());else if("datetime"===s.kind)V(s).test(e.data)||(x(t=this._getOrReturnCtx(e,t),{code:m.invalid_string,validation:"datetime",message:s.message}),n.dirty());else if("ip"===s.kind){var i,a;i=e.data,("v4"===(a=s.version)||!a)&&z.test(i)||("v6"===a||!a)&&B.test(i)||(x(t=this._getOrReturnCtx(e,t),{validation:"ip",code:m.invalid_string,message:s.message}),n.dirty())}else o.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:m.invalid_string,...u.errToObj(n)})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...u.errToObj(e)})}url(e){return this._addCheck({kind:"url",...u.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...u.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...u.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...u.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...u.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...u.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...u.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...u.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...u.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...u.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...u.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...u.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...u.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...u.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...u.errToObj(t)})}nonempty(e){return this.min(1,u.errToObj(e))}trim(){return new H({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>{var t;return new H({checks:[],typeName:c.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...L(e)})};class j extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.number,received:t.parsedType}),w}let n=new S;for(let r of this._def.checks)"int"===r.kind?o.isInteger(e.data)||(x(t=this._getOrReturnCtx(e,t),{code:m.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}(e.data,r.value)&&(x(t=this._getOrReturnCtx(e,t),{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(x(t=this._getOrReturnCtx(e,t),{code:m.not_finite,message:r.message}),n.dirty()):o.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,u.toString(t))}gt(e,t){return this.setLimit("min",e,!1,u.toString(t))}lte(e,t){return this.setLimit("max",e,!0,u.toString(t))}lt(e,t){return this.setLimit("max",e,!1,u.toString(t))}setLimit(e,t,n,r){return new j({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:u.toString(r)}]})}_addCheck(e){return new j({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:u.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:u.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:u.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&o.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}j.create=e=>new j({checks:[],typeName:c.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...L(e)});class G extends O{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==p.bigint){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.bigint,received:t.parsedType}),w}let n=new S;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(x(t=this._getOrReturnCtx(e,t),{code:m.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):o.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,u.toString(t))}gt(e,t){return this.setLimit("min",e,!1,u.toString(t))}lte(e,t){return this.setLimit("max",e,!0,u.toString(t))}lt(e,t){return this.setLimit("max",e,!1,u.toString(t))}setLimit(e,t,n,r){return new G({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:u.toString(r)}]})}_addCheck(e){return new G({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:u.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}G.create=e=>{var t;return new G({checks:[],typeName:c.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...L(e)})};class W extends O{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.boolean,received:t.parsedType}),w}return E(e.data)}}W.create=e=>new W({typeName:c.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...L(e)});class q extends O{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.date,received:t.parsedType}),w}if(isNaN(e.data.getTime()))return x(this._getOrReturnCtx(e),{code:m.invalid_date}),w;let n=new S;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(x(t=this._getOrReturnCtx(e,t),{code:m.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):o.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:u.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:u.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}q.create=e=>new q({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:c.ZodDate,...L(e)});class X extends O{_parse(e){if(this._getType(e)!==p.symbol){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.symbol,received:t.parsedType}),w}return E(e.data)}}X.create=e=>new X({typeName:c.ZodSymbol,...L(e)});class Z extends O{_parse(e){if(this._getType(e)!==p.undefined){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.undefined,received:t.parsedType}),w}return E(e.data)}}Z.create=e=>new Z({typeName:c.ZodUndefined,...L(e)});class Y extends O{_parse(e){if(this._getType(e)!==p.null){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.null,received:t.parsedType}),w}return E(e.data)}}Y.create=e=>new Y({typeName:c.ZodNull,...L(e)});class K extends O{constructor(){super(...arguments),this._any=!0}_parse(e){return E(e.data)}}K.create=e=>new K({typeName:c.ZodAny,...L(e)});class Q extends O{constructor(){super(...arguments),this._unknown=!0}_parse(e){return E(e.data)}}Q.create=e=>new Q({typeName:c.ZodUnknown,...L(e)});class J extends O{_parse(e){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.never,received:t.parsedType}),w}}J.create=e=>new J({typeName:c.ZodNever,...L(e)});class $ extends O{_parse(e){if(this._getType(e)!==p.undefined){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.void,received:t.parsedType}),w}return E(e.data)}}$.create=e=>new $({typeName:c.ZodVoid,...L(e)});class ee extends O{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==p.array)return x(t,{code:m.invalid_type,expected:p.array,received:t.parsedType}),w;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(x(t,{code:e?m.too_big:m.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(x(t,{code:m.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(x(t,{code:m.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new P(t,e,t.path,n)))).then(e=>S.mergeArray(n,e));let i=[...t.data].map((e,n)=>r.type._parseSync(new P(t,e,t.path,n)));return S.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ee({...this._def,minLength:{value:e,message:u.toString(t)}})}max(e,t){return new ee({...this._def,maxLength:{value:e,message:u.toString(t)}})}length(e,t){return new ee({...this._def,exactLength:{value:e,message:u.toString(t)}})}nonempty(e){return this.min(1,e)}}ee.create=(e,t)=>new ee({type:e,minLength:null,maxLength:null,exactLength:null,typeName:c.ZodArray,...L(t)});class et extends O{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==p.object){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.object,received:t.parsedType}),w}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof J&&"strip"===this._def.unknownKeys))for(let e in n.data)i.includes(e)||a.push(e);let s=[];for(let e of i){let t=r[e],i=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new P(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof J){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)a.length>0&&(x(n,{code:m.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new P(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>S.mergeObjectSync(t,e)):S.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return u.errToObj,new et({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,a,s;let o=null!==(a=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=u.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new et({...this._def,unknownKeys:"strip"})}passthrough(){return new et({...this._def,unknownKeys:"passthrough"})}extend(e){return new et({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:c.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new et({...this._def,catchall:e})}pick(e){let t={};return o.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new et({...this._def,shape:()=>t})}omit(e){let t={};return o.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new et({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof et){let n={};for(let r in t.shape){let i=t.shape[r];n[r]=e_.create(e(i))}return new et({...t._def,shape:()=>n})}return t instanceof ee?new ee({...t._def,type:e(t.element)}):t instanceof e_?e_.create(e(t.unwrap())):t instanceof ey?ey.create(e(t.unwrap())):t instanceof es?es.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return o.objectKeys(this.shape).forEach(n=>{let r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new et({...this._def,shape:()=>t})}required(e){let t={};return o.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof e_;)e=e._def.innerType;t[n]=e}}),new et({...this._def,shape:()=>t})}keyof(){return ep(o.objectKeys(this.shape))}}et.create=(e,t)=>new et({shape:()=>e,unknownKeys:"strip",catchall:J.create(),typeName:c.ZodObject,...L(t)}),et.strictCreate=(e,t)=>new et({shape:()=>e,unknownKeys:"strict",catchall:J.create(),typeName:c.ZodObject,...L(t)}),et.lazycreate=(e,t)=>new et({shape:e,unknownKeys:"strip",catchall:J.create(),typeName:c.ZodObject,...L(t)});class en extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new g(e.ctx.common.issues));return x(t,{code:m.invalid_union,unionErrors:n}),w});{let e;let r=[];for(let i of n){let n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=r.map(e=>new g(e));return x(t,{code:m.invalid_union,unionErrors:i}),w}}get options(){return this._def.options}}en.create=(e,t)=>new en({options:e,typeName:c.ZodUnion,...L(t)});let er=e=>{if(e instanceof eh)return er(e.schema);if(e instanceof ev)return er(e.innerType());if(e instanceof ed)return[e.value];if(e instanceof ef)return e.options;if(e instanceof em)return Object.keys(e.enum);if(e instanceof eb)return er(e._def.innerType);if(e instanceof Z)return[void 0];else if(e instanceof Y)return[null];else return null};class ei extends O{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.object)return x(t,{code:m.invalid_type,expected:p.object,received:t.parsedType}),w;let n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(x(t,{code:m.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),w)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let r=new Map;for(let n of t){let t=er(n.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(r.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new ei({typeName:c.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...L(n)})}}class ea extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(T(e)||T(r))return w;let i=function e(t,n){let r=f(t),i=f(n);if(t===n)return{valid:!0,data:t};if(r===p.object&&i===p.object){let r=o.objectKeys(n),i=o.objectKeys(t).filter(e=>-1!==r.indexOf(e)),a={...t,...n};for(let r of i){let i=e(t[r],n[r]);if(!i.valid)return{valid:!1};a[r]=i.data}return{valid:!0,data:a}}if(r===p.array&&i===p.array){if(t.length!==n.length)return{valid:!1};let r=[];for(let i=0;i<t.length;i++){let a=e(t[i],n[i]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}return r===p.date&&i===p.date&&+t==+n?{valid:!0,data:t}:{valid:!1}}(e.value,r.value);return i.valid?((A(e)||A(r))&&t.dirty(),{status:t.value,value:i.data}):(x(n,{code:m.invalid_intersection_types}),w)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ea.create=(e,t,n)=>new ea({left:e,right:t,typeName:c.ZodIntersection,...L(n)});class es extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return x(n,{code:m.invalid_type,expected:p.array,received:n.parsedType}),w;if(n.data.length<this._def.items.length)return x(n,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w;!this._def.rest&&n.data.length>this._def.items.length&&(x(n,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new P(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>S.mergeArray(t,e)):S.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new es({...this._def,rest:e})}}es.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new es({items:e,typeName:c.ZodTuple,rest:null,...L(t)})};class eo extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.object)return x(n,{code:m.invalid_type,expected:p.object,received:n.parsedType}),w;let r=[],i=this._def.keyType,a=this._def.valueType;for(let e in n.data)r.push({key:i._parse(new P(n,e,n.path,e)),value:a._parse(new P(n,n.data[e],n.path,e))});return n.common.async?S.mergeObjectAsync(t,r):S.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new eo(t instanceof O?{keyType:e,valueType:t,typeName:c.ZodRecord,...L(n)}:{keyType:H.create(),valueType:e,typeName:c.ZodRecord,...L(t)})}}class el extends O{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return x(n,{code:m.invalid_type,expected:p.map,received:n.parsedType}),w;let r=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([e,t],a)=>({key:r._parse(new P(n,e,n.path,[a,"key"])),value:i._parse(new P(n,t,n.path,[a,"value"]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of a){let r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return w;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let n of a){let r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return w;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}el.create=(e,t,n)=>new el({valueType:t,keyType:e,typeName:c.ZodMap,...L(n)});class eu extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return x(n,{code:m.invalid_type,expected:p.set,received:n.parsedType}),w;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(x(n,{code:m.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(x(n,{code:m.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let n=new Set;for(let r of e){if("aborted"===r.status)return w;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let s=[...n.data.values()].map((e,t)=>i._parse(new P(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new eu({...this._def,minSize:{value:e,message:u.toString(t)}})}max(e,t){return new eu({...this._def,maxSize:{value:e,message:u.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eu.create=(e,t)=>new eu({valueType:e,minSize:null,maxSize:null,typeName:c.ZodSet,...L(t)});class ec extends O{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.function)return x(t,{code:m.invalid_type,expected:p.function,received:t.parsedType}),w;function n(e,n){return b({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y(),v].filter(e=>!!e),issueData:{code:m.invalid_arguments,argumentsError:n}})}function r(e,n){return b({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y(),v].filter(e=>!!e),issueData:{code:m.invalid_return_type,returnTypeError:n}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof eg){let e=this;return E(async function(...t){let s=new g([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(n(t,e)),s}),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw s.addIssue(r(l,e)),s})})}{let e=this;return E(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new g([n(t,s.error)]);let o=Reflect.apply(a,this,s.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new g([r(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ec({...this._def,args:es.create(e).rest(Q.create())})}returns(e){return new ec({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ec({args:e||es.create([]).rest(Q.create()),returns:t||Q.create(),typeName:c.ZodFunction,...L(n)})}}class eh extends O{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eh.create=(e,t)=>new eh({getter:e,typeName:c.ZodLazy,...L(t)});class ed extends O{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return x(t,{received:t.data,code:m.invalid_literal,expected:this._def.value}),w}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ep(e,t){return new ef({values:e,typeName:c.ZodEnum,...L(t)})}ed.create=(e,t)=>new ed({value:e,typeName:c.ZodLiteral,...L(t)});class ef extends O{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return x(t,{expected:o.joinValues(n),received:t.parsedType,code:m.invalid_type}),w}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return x(t,{received:t.data,code:m.invalid_enum_value,options:n}),w}return E(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return ef.create(e)}exclude(e){return ef.create(this.options.filter(t=>!e.includes(t)))}}ef.create=ep;class em extends O{_parse(e){let t=o.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){let e=o.objectValues(t);return x(n,{expected:o.joinValues(e),received:n.parsedType,code:m.invalid_type}),w}if(-1===t.indexOf(e.data)){let e=o.objectValues(t);return x(n,{received:n.data,code:m.invalid_enum_value,options:e}),w}return E(e.data)}get enum(){return this._def.values}}em.create=(e,t)=>new em({values:e,typeName:c.ZodNativeEnum,...L(t)});class eg extends O{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==p.promise&&!1===t.common.async?(x(t,{code:m.invalid_type,expected:p.promise,received:t.parsedType}),w):E((t.parsedType===p.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eg.create=(e,t)=>new eg({type:e,typeName:c.ZodPromise,...L(t)});class ev extends O{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===c.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{x(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){let e=r.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?w:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?w:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>C(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!C(e))return e;let a=r.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}}o.assertNever(r)}}ev.create=(e,t,n)=>new ev({schema:e,typeName:c.ZodEffects,effect:t,...L(n)}),ev.createWithPreprocess=(e,t,n)=>new ev({schema:t,effect:{type:"preprocess",transform:e},typeName:c.ZodEffects,...L(n)});class e_ extends O{_parse(e){return this._getType(e)===p.undefined?E(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}e_.create=(e,t)=>new e_({innerType:e,typeName:c.ZodOptional,...L(t)});class ey extends O{_parse(e){return this._getType(e)===p.null?E(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ey.create=(e,t)=>new ey({innerType:e,typeName:c.ZodNullable,...L(t)});class eb extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eb.create=(e,t)=>new eb({innerType:e,typeName:c.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...L(t)});class ex extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return R(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new g(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:c.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...L(t)});class eS extends O{_parse(e){if(this._getType(e)!==p.nan){let t=this._getOrReturnCtx(e);return x(t,{code:m.invalid_type,expected:p.nan,received:t.parsedType}),w}return{status:"valid",value:e.data}}}eS.create=e=>new eS({typeName:c.ZodNaN,...L(e)});let ew=Symbol("zod_brand");class eM extends O{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class eE extends O{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),M(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?w:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new eE({in:e,out:t,typeName:c.ZodPipeline})}}class eT extends O{_parse(e){let t=this._def.innerType._parse(e);return C(t)&&(t.value=Object.freeze(t.value)),t}}eT.create=(e,t)=>new eT({innerType:e,typeName:c.ZodReadonly,...L(t)});let eA=(e,t={},n)=>e?K.create().superRefine((r,i)=>{var a,s;if(!e(r)){let e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:n)||void 0===s||s;i.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:o})}}):K.create(),eC={object:et.lazycreate};(s=c||(c={})).ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly";let eR=H.create,eP=j.create,eI=eS.create,eL=G.create,eO=W.create,eN=q.create,ek=X.create,eD=Z.create,eU=Y.create,eF=K.create,ez=Q.create,eB=J.create,eV=$.create,eH=ee.create,ej=et.create,eG=et.strictCreate,eW=en.create,eq=ei.create,eX=ea.create,eZ=es.create,eY=eo.create,eK=el.create,eQ=eu.create,eJ=ec.create,e$=eh.create,e0=ed.create,e1=ef.create,e2=em.create,e3=eg.create,e4=ev.create,e5=e_.create,e7=ey.create,e8=ev.createWithPreprocess,e6=eE.create;var e9=Object.freeze({__proto__:null,defaultErrorMap:v,setErrorMap:function(e){_=e},getErrorMap:y,makeIssue:b,EMPTY_PATH:[],addIssueToContext:x,ParseStatus:S,INVALID:w,DIRTY:M,OK:E,isAborted:T,isDirty:A,isValid:C,isAsync:R,get util(){return o},get objectUtil(){return l},ZodParsedType:p,getParsedType:f,ZodType:O,ZodString:H,ZodNumber:j,ZodBigInt:G,ZodBoolean:W,ZodDate:q,ZodSymbol:X,ZodUndefined:Z,ZodNull:Y,ZodAny:K,ZodUnknown:Q,ZodNever:J,ZodVoid:$,ZodArray:ee,ZodObject:et,ZodUnion:en,ZodDiscriminatedUnion:ei,ZodIntersection:ea,ZodTuple:es,ZodRecord:eo,ZodMap:el,ZodSet:eu,ZodFunction:ec,ZodLazy:eh,ZodLiteral:ed,ZodEnum:ef,ZodNativeEnum:em,ZodPromise:eg,ZodEffects:ev,ZodTransformer:ev,ZodOptional:e_,ZodNullable:ey,ZodDefault:eb,ZodCatch:ex,ZodNaN:eS,BRAND:ew,ZodBranded:eM,ZodPipeline:eE,ZodReadonly:eT,custom:eA,Schema:O,ZodSchema:O,late:eC,get ZodFirstPartyTypeKind(){return c},coerce:{string:e=>H.create({...e,coerce:!0}),number:e=>j.create({...e,coerce:!0}),boolean:e=>W.create({...e,coerce:!0}),bigint:e=>G.create({...e,coerce:!0}),date:e=>q.create({...e,coerce:!0})},any:eF,array:eH,bigint:eL,boolean:eO,date:eN,discriminatedUnion:eq,effect:e4,enum:e1,function:eJ,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eA(t=>t instanceof e,t),intersection:eX,lazy:e$,literal:e0,map:eK,nan:eI,nativeEnum:e2,never:eB,null:eU,nullable:e7,number:eP,object:ej,oboolean:()=>eO().optional(),onumber:()=>eP().optional(),optional:e5,ostring:()=>eR().optional(),pipeline:e6,preprocess:e8,promise:e3,record:eY,set:eQ,strictObject:eG,string:eR,symbol:ek,transformer:e4,tuple:eZ,undefined:eD,union:eW,unknown:ez,void:eV,NEVER:w,ZodIssueCode:m,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:g});let te=!1,tt=()=>{let[e,t]=d.useState(te);return d.useEffect(()=>{t(!0),te=!0},[]),e},tn=(e,t,n,r)=>{let i=d.useMemo(()=>t(e9),[t]),a=tt(),s=(null==r?void 0:r.enabled)===!1||!a,o=(0,h.a)([n],()=>{if(!a)return null==r?void 0:r.initialValue;let t=window[e].getItem(n);return t?i.parse(JSON.parse(t)):null==r?void 0:r.initialValue},{initialData:null==r?void 0:r.initialValue,enabled:!s}),l=d.useCallback(t=>{if(s)return;let r="function"==typeof t?t(prev):t;window[e].setItem(n,JSON.stringify(r)),o.refetch()},[s,n,o,e]);return[o.data,l]}},4918:function(e,t,n){"use strict";n.d(t,{BB:function(){return o},C5:function(){return l},N3:function(){return i},Q$:function(){return v},SY:function(){return m},TY:function(){return g},V7:function(){return p},aO:function(){return f},f7:function(){return u},i0:function(){return c},lH:function(){return _},oW:function(){return h},r8:function(){return s},sO:function(){return d}});var r,i,a=n(3454);let s=!1,o=!0,l="undefined"!=typeof document;l&&window;let u=new URL("https://kidsuper.world/"),c=u.origin,h="\n\n   \n   \n   \n     \n     \n      \n                                                                                \n   From the basement. https://basement.studio\n",d={title:"KidSuper World",description:"A real company built on unreal ideas.",ogImage:"".concat(c,"/og-image.jpeg"),twitter:{handle:"@kidsuper",site:"@kidsuper",creator:"@basementstudio"}},p=a.env.NEXT_PUBLIC_GA_TRACKING_ID;(r=i||(i={})).miniKissingBag="Mini Kissing bag",r.kissingBag="Kissing bag",r.kissingPuffer="Kissing Puffer",r.lowBootsWithSwirls="Low Boots with Swirls";let f=["Blue","Orange","Mint","Pink","Grape","Yellow"],m=["Blue/Multi","Purple/Multi","Tan","Black/Multi"],g=["Blue M","Purple M","Tan","Black M"],v=["Gold","Blue Grey"],_=["Mini","Regular"]},9012:function(e,t,n){"use strict";n.d(t,{QE:function(){return o},p8:function(){return r.ZP},th:function(){return s},zF:function(){return l}});var r=n(990),i=n(4347);r.ZP.registerPlugin(i.CustomEase);let a=1/((1+Math.sqrt(5))/2),s=a,o=i.CustomEase.create("ease","0.175, 0.885, 0.32, 1"),l=a/2;r.ZP.config({autoSleep:60,nullTargetWarn:!1}),r.ZP.defaults({duration:s,ease:o})},1590:function(e){"use strict";e.exports={endpoint:"https://kidsuper.myshopify.com/api/2023-04/graphql",headers:{"x-shopify-storefront-access-token":"dd822d639e01027325d7302c1a527ee8"}}},3393:function(e,t,n){"use strict";n.d(t,{r6:function(){return a},wM:function(){return s}});let r={url:!0,width:!0,height:!0,altText:!0},i={id:!0,title:!0,availableForSale:!0,quantityAvailable:!0,compareAtPriceV2:{amount:!0,currencyCode:!0},priceV2:{amount:!0,currencyCode:!0},image:r,selectedOptions:{name:!0,value:!0}},a={id:!0,checkoutUrl:!0,createdAt:!0,lines:{__args:{first:100},edges:{node:{id:!0,quantity:!0,cost:{subtotalAmount:{amount:!0}},merchandise:{on_ProductVariant:{product:{id:!0,title:!0,descriptionHtml:!0,featuredImage:r,options:{__args:{first:25},id:!0,name:!0,values:!0},availableForSale:!0,priceRange:{minVariantPrice:{amount:!0}},metafields:{__args:{identifiers:[{namespace:"custom",key:"details"},{namespace:"custom",key:"size_charts"}]},type:!0,key:!0,namespace:!0,value:!0,reference:{on_MediaImage:{image:r}}},totalInventory:!0,variants:{__args:{first:100},nodes:i}},...i}}}}},totalQuantity:!0,cost:{subtotalAmount:{amount:!0,currencyCode:!0}}},s={message:!0,code:!0,field:!0}},1166:function(e,t,n){"use strict";n.d(t,{L:function(){return v}});var r,i=n(1590),a=n.n(i);class s extends Error{constructor(e,t){let n=Array.isArray(e)?e.map(e=>(null==e?void 0:e.message)||"").join("\n"):"";n||(n="GraphQL error"),super(n),this.errors=[],this.errors=e,this.data=t}}function o(e,t){let n=t.map(e=>e.request);1===n.length&&(n=n[0]),e.fetcher(n).then(e=>{if(1!==t.length||Array.isArray(e)){if(e.length!==t.length)throw Error("response length did not match query length")}else{if(e.errors&&e.errors.length){t[0].reject(new s(e.errors,e.data));return}t[0].resolve(e);return}for(let n=0;n<t.length;n++)e[n].errors&&e[n].errors.length?t[n].reject(new s(e[n].errors,e[n].data)):t[n].resolve(e[n])})}function l(e,t){let n=e._queue,r=t.maxBatchSize||0;if(e._queue=[],r>0&&r<n.length)for(let t=0;t<n.length/r;t++)o(e,n.slice(t*r,(t+1)*r));else o(e,n)}class u{fetch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={query:e},a=Object.assign({},this._options,r);return t&&(i.variables=t),n&&(i.operationName=n),new Promise((e,t)=>{this._queue.push({request:i,resolve:e,reject:t}),1===this._queue.length&&(a.shouldBatch?setTimeout(()=>l(this,a),a.batchInterval):l(this,a))})}forceFetch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={query:e},a=Object.assign({},this._options,r,{shouldBatch:!1});return t&&(i.variables=t),n&&(i.operationName=n),new Promise((e,t)=>{let n=new u(this.fetcher,this._options);n._queue=[{request:i,resolve:e,reject:t}],l(n,a)})}constructor(e,{batchInterval:t=6,shouldBatch:n=!0,maxBatchSize:r=0}={}){this.fetcher=e,this._options={batchInterval:t,shouldBatch:n,maxBatchSize:r},this._queue=[]}}let c={maxBatchSize:10,batchInterval:40},h=e=>{let{url:t,headers:n={},fetcher:r,fetch:i,batch:a=!1,...o}=e;if(!t&&!r)throw Error("url or fetcher is required");if(r||(r=async e=>{let r="function"==typeof n?await n():n;if(r=r||{},"undefined"==typeof fetch&&!i)throw Error("Global `fetch` function is not available, pass a fetch polyfill to Genql `createClient`");let a=i||fetch,s=await a(t,{headers:{"Content-Type":"application/json",...r},method:"POST",body:JSON.stringify(e),...o});if(!s.ok)throw Error("".concat(s.statusText,": ").concat(await s.text()));return await s.json()}),!a)return async e=>{var t;let n=await r(e);if(Array.isArray(n))return n.map(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw new s(e.errors||[],e.data);return e.data});if(null==n?void 0:null===(t=n.errors)||void 0===t?void 0:t.length)throw new s(n.errors||[],n.data);return n.data};let l=new u(async e=>await r(e),!0===a?c:a);return async e=>{let{query:t,variables:n}=e,r=await l.fetch(t,n);if(null==r?void 0:r.data)return r.data;throw Error("Genql batch fetcher returned unexpected result "+JSON.stringify(r))}},d=(e,t,n)=>{if("object"==typeof e&&"__args"in e){let r=e.__args,i={...e};delete i.__args;let a=Object.keys(r);if(0===a.length)return d(i,t,n);let s=f(t.root,n),o=a.map(e=>{t.varCounter++;let i="v".concat(t.varCounter),a=s.args&&s.args[e];if(!a)throw Error("no typing defined for argument `".concat(e,"` in path `").concat(n.join("."),"`"));return t.variables[i]={value:r[e],typing:a},"".concat(e,":$").concat(i)});return"(".concat(o,")").concat(d(i,t,n))}if("object"!=typeof e||!(Object.keys(e).length>0))return"";{let r;let i=Object.keys(e).filter(t=>!!e[t]);if(0===i.length)throw Error("field selection should not be empty: ".concat(n.join(".")));let a=n.length>0?f(t.root,n).type:t.root,s=a.scalar;if(i.includes("__scalar")){let n=new Set(Object.keys(e).filter(t=>!e[t]));(null==s?void 0:s.length)&&(t.fragmentCounter++,r="f".concat(t.fragmentCounter),t.fragments.push("fragment ".concat(r," on ").concat(a.name,"{").concat(s.filter(e=>!n.has(e)).join(","),"}")))}let o=i.filter(e=>!["__scalar","__name"].includes(e)).map(r=>{let i=d(e[r],t,[...n,r]);if(!r.startsWith("on_"))return"".concat(r).concat(i);{t.fragmentCounter++;let e="f".concat(t.fragmentCounter),n=r.match(/^on_(.+)/);if(!n||!n[1])throw Error("match failed");return t.fragments.push("fragment ".concat(e," on ").concat(n[1]).concat(i)),"...".concat(e)}}).concat(r?["...".concat(r)]:[]).join(",");return"{".concat(o,"}")}},p=(e,t,n)=>{let r={root:t,varCounter:0,variables:{},fragmentCounter:0,fragments:[]},i=d(n,r,[]),a=Object.keys(r.variables),s=a.length>0?"(".concat(a.map(e=>{let t=r.variables[e].typing[1];return"$".concat(e,":").concat(t)}),")"):"",o=(null==n?void 0:n.__name)||"";return{query:["".concat(e," ").concat(o).concat(s).concat(i),...r.fragments].join(","),variables:Object.keys(r.variables).reduce((e,t)=>(e[t]=r.variables[t].value,e),{}),...o?{operationName:o.toString()}:{}}},f=(e,t)=>{let n;if(!e)throw Error("root type is not provided");if(0===t.length)throw Error("path is empty");return t.forEach(t=>{let r=n?n.type:e;if(!r.fields)throw Error("type `".concat(r.name,"` does not have fields"));let i=Object.keys(r.fields).filter(e=>e.startsWith("on_")).reduce((e,t)=>{let n=r.fields&&r.fields[t];return n&&e.push(n.type),e},[r]),a=null;if(i.forEach(e=>{let n=e.fields&&e.fields[t];n&&(a=n)}),!a)throw Error("type `".concat(r.name,"` does not have a field `").concat(t,"`"));n=a}),n},m=e=>(Object.keys(e).forEach(t=>{let n=e[t];if(!n.fields)return;let r=n.fields;Object.keys(r).forEach(t=>{let n=r[t];if(n.args){let t=n.args;Object.keys(t).forEach(n=>{let r=t[n];if(r){let[t]=r;"string"==typeof t&&(e[t]||(e[t]={name:t}),r[0]=e[t])}})}let i=n.type;"string"==typeof i&&(e[i]||(e[i]={name:i}),n.type=e[i])})}),e),g=(e=>{let t=Object.assign({},...Object.keys(e.types).map((e,t)=>({[t]:e})));return m(Object.assign({},...Object.keys(e.types||{}).map(n=>{let r=e.types[n]||{};return{[n]:{name:n,scalar:Object.keys(r).filter(t=>{let[n]=r[t]||[];return n&&e.scalars.includes(n)}),fields:Object.assign({},...Object.keys(r).map(e=>{let[n,i]=r[e]||[];return null==n?{}:{[e]:{type:t[n],args:Object.assign({},...Object.keys(i||{}).map(e=>{if(!i||!i[e])return;let[n,r]=i[e];return{[e]:[t[n],r||t[n]]}}))}}}))}}})))})({scalars:[8,19,20,24,31,50,91,109,110,117,119,122,124,141,149,150,153,154,157,160,161,167,169,177,180,183,188,189,191,197,206,208,211,214,217,225,239,242,243,247,252,255,260,264,265,268,269,273,285,307,311,318,319,320,322,323,324,325,333],types:{ApiVersion:{displayName:[307],handle:[307],supported:[20],__typename:[307]},ApplePayWalletContentInput:{billingAddress:[201],data:[307],header:[2],lastDigits:[307],signature:[307],version:[307],__typename:[307]},ApplePayWalletHeaderInput:{applicationData:[307],ephemeralPublicKey:[307],publicKeyHash:[307],transactionId:[307],__typename:[307]},AppliedGiftCard:{amountUsed:[234],amountUsedV2:[234],balance:[234],balanceV2:[234],id:[180],lastCharacters:[307],presentmentAmountUsed:[234],__typename:[307]},Article:{author:[5],authorV2:[5],blog:[16],comments:[113,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],content:[307,{truncateAt:[188]}],contentHtml:[177],excerpt:[307,{truncateAt:[188]}],excerptHtml:[177],handle:[307],id:[180],image:[181],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[320],publishedAt:[149],seo:[274],tags:[307],title:[307],__typename:[307]},ArticleAuthor:{bio:[307],email:[307],firstName:[307],lastName:[307],name:[307],__typename:[307]},ArticleConnection:{edges:[7],nodes:[4],pageInfo:[251],__typename:[307]},ArticleEdge:{cursor:[307],node:[4],__typename:[307]},ArticleSortKeys:{},Attribute:{key:[307],value:[307],__typename:[307]},AttributeInput:{key:[307],value:[307],__typename:[307]},AutomaticDiscountApplication:{allocationMethod:[157],targetSelection:[160],targetType:[161],title:[307],value:[258],__typename:[307]},AvailableShippingRates:{ready:[20],shippingRates:[299],__typename:[307]},BaseCartLine:{attribute:[9,{key:[307,"String!"]}],attributes:[9],cost:[56],discountAllocations:[47],estimatedCost:[57],id:[180],merchandise:[215],quantity:[188],sellingPlanAllocation:[279],on_CartLine:[55],__typename:[307]},BaseCartLineConnection:{edges:[15],nodes:[13],pageInfo:[251],__typename:[307]},BaseCartLineEdge:{cursor:[307],node:[13],__typename:[307]},Blog:{articleByHandle:[4,{handle:[307,"String!"]}],articles:[6,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[8],query:[307]}],authors:[5],handle:[307],id:[180],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[320],seo:[274],title:[307],__typename:[307]},BlogConnection:{edges:[18],nodes:[16],pageInfo:[251],__typename:[307]},BlogEdge:{cursor:[307],node:[16],__typename:[307]},BlogSortKeys:{},Boolean:{},Brand:{colors:[23],coverImage:[209],logo:[209],shortDescription:[307],slogan:[307],squareLogo:[209],__typename:[307]},BrandColorGroup:{background:[110],foreground:[110],__typename:[307]},BrandColors:{primary:[22],secondary:[22],__typename:[307]},CardBrand:{},Cart:{attribute:[9,{key:[307,"String!"]}],attributes:[9],buyerIdentity:[28],checkoutUrl:[320],cost:[39],createdAt:[149],deliveryGroups:[43,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],discountAllocations:[47],discountCodes:[48],estimatedCost:[51],id:[180],lines:[14,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],note:[307],totalQuantity:[188],updatedAt:[149],__typename:[307]},CartAttributesUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartAutomaticDiscountAllocation:{discountedAmount:[234],title:[307],__typename:[307]},CartBuyerIdentity:{countryCode:[119],customer:[125],deliveryAddressPreferences:[151],email:[307],phone:[307],walletPreferences:[307],__typename:[307]},CartBuyerIdentityInput:{email:[307],phone:[307],countryCode:[119],customerAccessToken:[307],deliveryAddressPreferences:[152],walletPreferences:[307],__typename:[307]},CartBuyerIdentityUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartCardSource:{},CartCodeDiscountAllocation:{code:[307],discountedAmount:[234],__typename:[307]},CartCompletionAction:{on_CompletePaymentChallenge:[115],__typename:[307]},CartCompletionActionRequired:{action:[33],id:[307],__typename:[307]},CartCompletionAttemptResult:{on_CartCompletionActionRequired:[34],on_CartCompletionFailed:[36],on_CartCompletionProcessing:[37],on_CartCompletionSuccess:[38],__typename:[307]},CartCompletionFailed:{errors:[116],id:[307],__typename:[307]},CartCompletionProcessing:{id:[307],pollDelay:[188],__typename:[307]},CartCompletionSuccess:{completedAt:[149],id:[307],orderId:[180],orderUrl:[320],__typename:[307]},CartCost:{checkoutChargeAmount:[234],subtotalAmount:[234],subtotalAmountEstimated:[20],totalAmount:[234],totalAmountEstimated:[20],totalDutyAmount:[234],totalDutyAmountEstimated:[20],totalTaxAmount:[234],totalTaxAmountEstimated:[20],__typename:[307]},CartCreatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartCustomDiscountAllocation:{discountedAmount:[234],title:[307],__typename:[307]},CartDeliveryGroup:{cartLines:[14,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],deliveryAddress:[198],deliveryOptions:[45],id:[180],selectedDeliveryOption:[45],__typename:[307]},CartDeliveryGroupConnection:{edges:[44],nodes:[42],pageInfo:[251],__typename:[307]},CartDeliveryGroupEdge:{cursor:[307],node:[42],__typename:[307]},CartDeliveryOption:{code:[307],deliveryMethodType:[153],description:[307],estimatedCost:[234],handle:[307],title:[307],__typename:[307]},CartDirectPaymentMethodInput:{billingAddress:[201],sessionId:[307],cardSource:[31],__typename:[307]},CartDiscountAllocation:{discountedAmount:[234],on_CartAutomaticDiscountAllocation:[27],on_CartCodeDiscountAllocation:[32],on_CartCustomDiscountAllocation:[41],__typename:[307]},CartDiscountCode:{applicable:[20],code:[307],__typename:[307]},CartDiscountCodesUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartErrorCode:{},CartEstimatedCost:{checkoutChargeAmount:[234],subtotalAmount:[234],totalAmount:[234],totalDutyAmount:[234],totalTaxAmount:[234],__typename:[307]},CartFreePaymentMethodInput:{billingAddress:[201],__typename:[307]},CartInput:{attributes:[10],lines:[58],discountCodes:[307],note:[307],buyerIdentity:[29],metafields:[54],__typename:[307]},CartInputMetafieldInput:{key:[307],value:[307],type:[307],__typename:[307]},CartLine:{attribute:[9,{key:[307,"String!"]}],attributes:[9],cost:[56],discountAllocations:[47],estimatedCost:[57],id:[180],merchandise:[215],quantity:[188],sellingPlanAllocation:[279],__typename:[307]},CartLineCost:{amountPerQuantity:[234],compareAtAmountPerQuantity:[234],subtotalAmount:[234],totalAmount:[234],__typename:[307]},CartLineEstimatedCost:{amount:[234],compareAtAmount:[234],subtotalAmount:[234],totalAmount:[234],__typename:[307]},CartLineInput:{attributes:[10],quantity:[188],merchandiseId:[180],sellingPlanId:[180],__typename:[307]},CartLineUpdateInput:{id:[180],quantity:[188],merchandiseId:[180],attributes:[10],sellingPlanId:[180],__typename:[307]},CartLinesAddPayload:{cart:[25],userErrors:[74],__typename:[307]},CartLinesRemovePayload:{cart:[25],userErrors:[74],__typename:[307]},CartLinesUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartMetafieldDeleteInput:{ownerId:[180],key:[307],__typename:[307]},CartMetafieldDeletePayload:{deletedId:[180],userErrors:[218],__typename:[307]},CartMetafieldsSetInput:{ownerId:[180],key:[307],value:[307],type:[307],__typename:[307]},CartMetafieldsSetPayload:{metafields:[216],userErrors:[224],__typename:[307]},CartNoteUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartPaymentInput:{amount:[233],sourceIdentifier:[307],freePaymentMethod:[52],directPaymentMethod:[46],walletPaymentMethod:[75],__typename:[307]},CartPaymentUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartSelectedDeliveryOptionInput:{deliveryGroupId:[180],deliveryOptionHandle:[307],__typename:[307]},CartSelectedDeliveryOptionsUpdatePayload:{cart:[25],userErrors:[74],__typename:[307]},CartSubmitForCompletionPayload:{result:[73],userErrors:[74],__typename:[307]},CartSubmitForCompletionResult:{on_SubmitAlreadyAccepted:[312],on_SubmitFailed:[313],on_SubmitSuccess:[314],on_SubmitThrottled:[315],__typename:[307]},CartUserError:{code:[50],field:[307],message:[307],__typename:[307]},CartWalletPaymentMethodInput:{applePayWalletContent:[1],shopPayWalletContent:[301],__typename:[307]},Checkout:{appliedGiftCards:[3],availableShippingRates:[12],buyerIdentity:[79],completedAt:[149],createdAt:[149],currencyCode:[124],customAttributes:[9],discountApplications:[158,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],email:[307],id:[180],lineItems:[95,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],lineItemsSubtotalPrice:[234],note:[307],order:[238],orderStatusUrl:[320],paymentDue:[234],paymentDueV2:[234],ready:[20],requiresShipping:[20],shippingAddress:[198],shippingDiscountAllocations:[155],shippingLine:[299],subtotalPrice:[234],subtotalPriceV2:[234],taxExempt:[20],taxesIncluded:[20],totalDuties:[234],totalPrice:[234],totalPriceV2:[234],totalTax:[234],totalTaxV2:[234],updatedAt:[149],webUrl:[320],__typename:[307]},CheckoutAttributesUpdateV2Input:{note:[307],customAttributes:[10],allowPartialAddresses:[20],__typename:[307]},CheckoutAttributesUpdateV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutBuyerIdentity:{countryCode:[119],__typename:[307]},CheckoutBuyerIdentityInput:{countryCode:[119],__typename:[307]},CheckoutCompleteFreePayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutCompleteWithCreditCardV2Payload:{checkout:[76],checkoutUserErrors:[105],payment:[253],userErrors:[329],__typename:[307]},CheckoutCompleteWithTokenizedPaymentV3Payload:{checkout:[76],checkoutUserErrors:[105],payment:[253],userErrors:[329],__typename:[307]},CheckoutCreateInput:{email:[307],lineItems:[97],shippingAddress:[201],note:[307],customAttributes:[10],allowPartialAddresses:[20],buyerIdentity:[80],__typename:[307]},CheckoutCreatePayload:{checkout:[76],checkoutUserErrors:[105],queueToken:[307],userErrors:[329],__typename:[307]},CheckoutCustomerAssociateV2Payload:{checkout:[76],checkoutUserErrors:[105],customer:[125],userErrors:[329],__typename:[307]},CheckoutCustomerDisassociateV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutDiscountCodeApplyV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutDiscountCodeRemovePayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutEmailUpdateV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutErrorCode:{},CheckoutGiftCardRemoveV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutGiftCardsAppendPayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutLineItem:{customAttributes:[9],discountAllocations:[155],id:[180],quantity:[188],title:[307],unitPrice:[234],variant:[270],__typename:[307]},CheckoutLineItemConnection:{edges:[96],nodes:[94],pageInfo:[251],__typename:[307]},CheckoutLineItemEdge:{cursor:[307],node:[94],__typename:[307]},CheckoutLineItemInput:{customAttributes:[10],quantity:[188],variantId:[180],__typename:[307]},CheckoutLineItemUpdateInput:{id:[180],variantId:[180],quantity:[188],customAttributes:[10],__typename:[307]},CheckoutLineItemsAddPayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutLineItemsRemovePayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutLineItemsReplacePayload:{checkout:[76],userErrors:[105],__typename:[307]},CheckoutLineItemsUpdatePayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutShippingAddressUpdateV2Payload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutShippingLineUpdatePayload:{checkout:[76],checkoutUserErrors:[105],userErrors:[329],__typename:[307]},CheckoutUserError:{code:[91],field:[307],message:[307],__typename:[307]},Collection:{description:[307,{truncateAt:[188]}],descriptionHtml:[177],handle:[307],id:[180],image:[181],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[320],products:[261,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[260],filters:[263,"[ProductFilter!]"]}],seo:[274],title:[307],updatedAt:[149],__typename:[307]},CollectionConnection:{edges:[108],nodes:[106],pageInfo:[251],__typename:[307]},CollectionEdge:{cursor:[307],node:[106],__typename:[307]},CollectionSortKeys:{},Color:{},Comment:{author:[112],content:[307,{truncateAt:[188]}],contentHtml:[177],id:[180],__typename:[307]},CommentAuthor:{email:[307],name:[307],__typename:[307]},CommentConnection:{edges:[114],nodes:[111],pageInfo:[251],__typename:[307]},CommentEdge:{cursor:[307],node:[111],__typename:[307]},CompletePaymentChallenge:{redirectUrl:[320],__typename:[307]},CompletionError:{code:[117],message:[307],__typename:[307]},CompletionErrorCode:{},Country:{availableLanguages:[190],currency:[123],isoCode:[119],market:[203],name:[307],unitSystem:[324],__typename:[307]},CountryCode:{},CreditCard:{brand:[307],expiryMonth:[188],expiryYear:[188],firstDigits:[307],firstName:[307],lastDigits:[307],lastName:[307],maskedNumber:[307],__typename:[307]},CreditCardPaymentInputV2:{paymentAmount:[233],idempotencyKey:[307],billingAddress:[201],vaultId:[307],test:[20],__typename:[307]},CropRegion:{},Currency:{isoCode:[124],name:[307],symbol:[307],__typename:[307]},CurrencyCode:{},Customer:{acceptsMarketing:[20],addresses:[199,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],createdAt:[149],defaultAddress:[198],displayName:[307],email:[307],firstName:[307],id:[180],lastIncompleteCheckout:[76],lastName:[307],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],numberOfOrders:[325],orders:[240,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[247],query:[307]}],phone:[307],tags:[307],updatedAt:[149],__typename:[307]},CustomerAccessToken:{accessToken:[307],expiresAt:[149],__typename:[307]},CustomerAccessTokenCreateInput:{email:[307],password:[307],__typename:[307]},CustomerAccessTokenCreatePayload:{customerAccessToken:[126],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerAccessTokenCreateWithMultipassPayload:{customerAccessToken:[126],customerUserErrors:[148],__typename:[307]},CustomerAccessTokenDeletePayload:{deletedAccessToken:[307],deletedCustomerAccessTokenId:[307],userErrors:[329],__typename:[307]},CustomerAccessTokenRenewPayload:{customerAccessToken:[126],userErrors:[329],__typename:[307]},CustomerActivateByUrlPayload:{customer:[125],customerAccessToken:[126],customerUserErrors:[148],__typename:[307]},CustomerActivateInput:{activationToken:[307],password:[307],__typename:[307]},CustomerActivatePayload:{customer:[125],customerAccessToken:[126],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerAddressCreatePayload:{customerAddress:[198],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerAddressDeletePayload:{customerUserErrors:[148],deletedCustomerAddressId:[307],userErrors:[329],__typename:[307]},CustomerAddressUpdatePayload:{customerAddress:[198],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerCreateInput:{firstName:[307],lastName:[307],email:[307],phone:[307],password:[307],acceptsMarketing:[20],__typename:[307]},CustomerCreatePayload:{customer:[125],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerDefaultAddressUpdatePayload:{customer:[125],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerErrorCode:{},CustomerRecoverPayload:{customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerResetByUrlPayload:{customer:[125],customerAccessToken:[126],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerResetInput:{resetToken:[307],password:[307],__typename:[307]},CustomerResetPayload:{customer:[125],customerAccessToken:[126],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerUpdateInput:{firstName:[307],lastName:[307],email:[307],phone:[307],password:[307],acceptsMarketing:[20],__typename:[307]},CustomerUpdatePayload:{customer:[125],customerAccessToken:[126],customerUserErrors:[148],userErrors:[329],__typename:[307]},CustomerUserError:{code:[141],field:[307],message:[307],__typename:[307]},DateTime:{},Decimal:{},DeliveryAddress:{on_MailingAddress:[198],on_Node:[236],__typename:[307]},DeliveryAddressInput:{deliveryAddress:[201],customerAddressId:[180],__typename:[307]},DeliveryMethodType:{},DigitalWallet:{},DiscountAllocation:{allocatedAmount:[234],discountApplication:[156],__typename:[307]},DiscountApplication:{allocationMethod:[157],targetSelection:[160],targetType:[161],value:[258],on_AutomaticDiscountApplication:[11],on_DiscountCodeApplication:[162],on_ManualDiscountApplication:[202],on_ScriptDiscountApplication:[275],__typename:[307]},DiscountApplicationAllocationMethod:{},DiscountApplicationConnection:{edges:[159],nodes:[156],pageInfo:[251],__typename:[307]},DiscountApplicationEdge:{cursor:[307],node:[156],__typename:[307]},DiscountApplicationTargetSelection:{},DiscountApplicationTargetType:{},DiscountCodeApplication:{allocationMethod:[157],applicable:[20],code:[307],targetSelection:[160],targetType:[161],value:[258],__typename:[307]},DisplayableError:{field:[307],message:[307],on_CartUserError:[74],on_CheckoutUserError:[105],on_CustomerUserError:[148],on_MetafieldDeleteUserError:[218],on_MetafieldsSetUserError:[224],on_UserError:[329],__typename:[307]},Domain:{host:[307],sslEnabled:[20],url:[320],__typename:[307]},ExternalVideo:{alt:[307],embedUrl:[320],embeddedUrl:[320],host:[208],id:[180],mediaContentType:[206],originUrl:[320],presentation:[210],previewImage:[181],__typename:[307]},Filter:{id:[307],label:[307],type:[167],values:[168],__typename:[307]},FilterType:{},FilterValue:{count:[188],id:[307],input:[189],label:[307],__typename:[307]},Float:{},Fulfillment:{fulfillmentLineItems:[172,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],trackingCompany:[307],trackingInfo:[174,{first:[188]}],__typename:[307]},FulfillmentLineItem:{lineItem:[244],quantity:[188],__typename:[307]},FulfillmentLineItemConnection:{edges:[173],nodes:[171],pageInfo:[251],__typename:[307]},FulfillmentLineItemEdge:{cursor:[307],node:[171],__typename:[307]},FulfillmentTrackingInfo:{number:[307],url:[320],__typename:[307]},GenericFile:{alt:[307],id:[180],mimeType:[307],originalFileSize:[188],previewImage:[181],url:[320],__typename:[307]},GeoCoordinateInput:{latitude:[169],longitude:[169],__typename:[307]},HTML:{},HasMetafields:{metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],on_Article:[4],on_Blog:[16],on_Cart:[25],on_Collection:[106],on_Customer:[125],on_Location:[193],on_Market:[203],on_Order:[238],on_Page:[248],on_Product:[259],on_ProductVariant:[270],on_Shop:[300],__typename:[307]},HasMetafieldsIdentifier:{namespace:[307],key:[307],__typename:[307]},ID:{},Image:{altText:[307],height:[188],id:[180],originalSrc:[320],src:[320],transformedSrc:[320,{maxWidth:[188],maxHeight:[188],crop:[122],scale:[188],preferredContentType:[183]}],url:[320,{transform:[185]}],width:[188],__typename:[307]},ImageConnection:{edges:[184],nodes:[181],pageInfo:[251],__typename:[307]},ImageContentType:{},ImageEdge:{cursor:[307],node:[181],__typename:[307]},ImageTransformInput:{crop:[122],maxWidth:[188],maxHeight:[188],scale:[188],preferredContentType:[183],__typename:[307]},InContext:{description:[307],type:[187],__typename:[307]},InContextType:{kind:[307],name:[307],__typename:[307]},Int:{},JSON:{},Language:{endonymName:[307],isoCode:[191],name:[307],__typename:[307]},LanguageCode:{},Localization:{availableCountries:[118],availableLanguages:[190],country:[118],language:[190],market:[203],__typename:[307]},Location:{address:[194],id:[180],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],name:[307],__typename:[307]},LocationAddress:{address1:[307],address2:[307],city:[307],country:[307],countryCode:[307],formatted:[307],latitude:[169],longitude:[169],phone:[307],province:[307],provinceCode:[307],zip:[307],__typename:[307]},LocationConnection:{edges:[196],nodes:[193],pageInfo:[251],__typename:[307]},LocationEdge:{cursor:[307],node:[193],__typename:[307]},LocationSortKeys:{},MailingAddress:{address1:[307],address2:[307],city:[307],company:[307],country:[307],countryCode:[307],countryCodeV2:[119],firstName:[307],formatted:[307,{withName:[20],withCompany:[20]}],formattedArea:[307],id:[180],lastName:[307],latitude:[169],longitude:[169],name:[307],phone:[307],province:[307],provinceCode:[307],zip:[307],__typename:[307]},MailingAddressConnection:{edges:[200],nodes:[198],pageInfo:[251],__typename:[307]},MailingAddressEdge:{cursor:[307],node:[198],__typename:[307]},MailingAddressInput:{address1:[307],address2:[307],city:[307],company:[307],country:[307],firstName:[307],lastName:[307],phone:[307],province:[307],zip:[307],__typename:[307]},ManualDiscountApplication:{allocationMethod:[157],description:[307],targetSelection:[160],targetType:[161],title:[307],value:[258],__typename:[307]},Market:{handle:[307],id:[180],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],__typename:[307]},Media:{alt:[307],mediaContentType:[206],presentation:[210],previewImage:[181],on_ExternalVideo:[165],on_MediaImage:[209],on_Model3d:[231],on_Video:[331],__typename:[307]},MediaConnection:{edges:[207],nodes:[204],pageInfo:[251],__typename:[307]},MediaContentType:{},MediaEdge:{cursor:[307],node:[204],__typename:[307]},MediaHost:{},MediaImage:{alt:[307],id:[180],image:[181],mediaContentType:[206],presentation:[210],previewImage:[181],__typename:[307]},MediaPresentation:{asJson:[189,{format:[211,"MediaPresentationFormat!"]}],id:[180],__typename:[307]},MediaPresentationFormat:{},Menu:{handle:[307],id:[180],items:[213],itemsCount:[188],title:[307],__typename:[307]},MenuItem:{id:[180],items:[213],resourceId:[180],tags:[307],title:[307],type:[214],url:[320],__typename:[307]},MenuItemType:{},Merchandise:{on_ProductVariant:[270],on_HasMetafields:[178],on_Node:[236],__typename:[307]},Metafield:{createdAt:[149],description:[307],id:[180],key:[307],namespace:[307],parentResource:[220],reference:[221],references:[222,{first:[188],after:[307],last:[188],before:[307]}],type:[307],updatedAt:[149],value:[307],__typename:[307]},MetafieldDeleteErrorCode:{},MetafieldDeleteUserError:{code:[217],field:[307],message:[307],__typename:[307]},MetafieldFilter:{namespace:[307],key:[307],value:[307],__typename:[307]},MetafieldParentResource:{on_Article:[4],on_Blog:[16],on_Cart:[25],on_Collection:[106],on_Customer:[125],on_Location:[193],on_Market:[203],on_Order:[238],on_Page:[248],on_Product:[259],on_ProductVariant:[270],on_Shop:[300],on_HasMetafields:[178],on_Node:[236],on_OnlineStorePublishable:[237],__typename:[307]},MetafieldReference:{on_Collection:[106],on_GenericFile:[175],on_MediaImage:[209],on_Metaobject:[226],on_Page:[248],on_Product:[259],on_ProductVariant:[270],on_Video:[331],on_HasMetafields:[178],on_Node:[236],on_OnlineStorePublishable:[237],on_Media:[204],__typename:[307]},MetafieldReferenceConnection:{edges:[223],nodes:[221],pageInfo:[251],__typename:[307]},MetafieldReferenceEdge:{cursor:[307],node:[221],__typename:[307]},MetafieldsSetUserError:{code:[225],elementIndex:[188],field:[307],message:[307],__typename:[307]},MetafieldsSetUserErrorCode:{},Metaobject:{field:[229,{key:[307,"String!"]}],fields:[229],handle:[307],id:[180],type:[307],updatedAt:[149],__typename:[307]},MetaobjectConnection:{edges:[228],nodes:[226],pageInfo:[251],__typename:[307]},MetaobjectEdge:{cursor:[307],node:[226],__typename:[307]},MetaobjectField:{key:[307],reference:[221],references:[222,{first:[188],after:[307],last:[188],before:[307]}],type:[307],value:[307],__typename:[307]},MetaobjectHandleInput:{handle:[307],type:[307],__typename:[307]},Model3d:{alt:[307],id:[180],mediaContentType:[206],presentation:[210],previewImage:[181],sources:[232],__typename:[307]},Model3dSource:{filesize:[188],format:[307],mimeType:[307],url:[307],__typename:[307]},MoneyInput:{amount:[150],currencyCode:[124],__typename:[307]},MoneyV2:{amount:[150],currencyCode:[124],__typename:[307]},Mutation:{cartAttributesUpdate:[26,{attributes:[10,"[AttributeInput!]!"],cartId:[180,"ID!"]}],cartBuyerIdentityUpdate:[30,{cartId:[180,"ID!"],buyerIdentity:[29,"CartBuyerIdentityInput!"]}],cartCreate:[40,{input:[53]}],cartDiscountCodesUpdate:[49,{cartId:[180,"ID!"],discountCodes:[307,"[String!]"]}],cartLinesAdd:[60,{lines:[58,"[CartLineInput!]!"],cartId:[180,"ID!"]}],cartLinesRemove:[61,{cartId:[180,"ID!"],lineIds:[180,"[ID!]!"]}],cartLinesUpdate:[62,{cartId:[180,"ID!"],lines:[59,"[CartLineUpdateInput!]!"]}],cartMetafieldDelete:[64,{input:[63,"CartMetafieldDeleteInput!"]}],cartMetafieldsSet:[66,{metafields:[65,"[CartMetafieldsSetInput!]!"]}],cartNoteUpdate:[67,{cartId:[180,"ID!"],note:[307]}],cartPaymentUpdate:[69,{cartId:[180,"ID!"],payment:[68,"CartPaymentInput!"]}],cartSelectedDeliveryOptionsUpdate:[71,{cartId:[180,"ID!"],selectedDeliveryOptions:[70,"[CartSelectedDeliveryOptionInput!]!"]}],cartSubmitForCompletion:[72,{cartId:[180,"ID!"],attemptToken:[307,"String!"]}],checkoutAttributesUpdateV2:[78,{checkoutId:[180,"ID!"],input:[77,"CheckoutAttributesUpdateV2Input!"]}],checkoutCompleteFree:[81,{checkoutId:[180,"ID!"]}],checkoutCompleteWithCreditCardV2:[82,{checkoutId:[180,"ID!"],payment:[121,"CreditCardPaymentInputV2!"]}],checkoutCompleteWithTokenizedPaymentV3:[83,{checkoutId:[180,"ID!"],payment:[316,"TokenizedPaymentInputV3!"]}],checkoutCreate:[85,{input:[84,"CheckoutCreateInput!"],queueToken:[307]}],checkoutCustomerAssociateV2:[86,{checkoutId:[180,"ID!"],customerAccessToken:[307,"String!"]}],checkoutCustomerDisassociateV2:[87,{checkoutId:[180,"ID!"]}],checkoutDiscountCodeApplyV2:[88,{discountCode:[307,"String!"],checkoutId:[180,"ID!"]}],checkoutDiscountCodeRemove:[89,{checkoutId:[180,"ID!"]}],checkoutEmailUpdateV2:[90,{checkoutId:[180,"ID!"],email:[307,"String!"]}],checkoutGiftCardRemoveV2:[92,{appliedGiftCardId:[180,"ID!"],checkoutId:[180,"ID!"]}],checkoutGiftCardsAppend:[93,{giftCardCodes:[307,"[String!]!"],checkoutId:[180,"ID!"]}],checkoutLineItemsAdd:[99,{lineItems:[97,"[CheckoutLineItemInput!]!"],checkoutId:[180,"ID!"]}],checkoutLineItemsRemove:[100,{checkoutId:[180,"ID!"],lineItemIds:[180,"[ID!]!"]}],checkoutLineItemsReplace:[101,{lineItems:[97,"[CheckoutLineItemInput!]!"],checkoutId:[180,"ID!"]}],checkoutLineItemsUpdate:[102,{checkoutId:[180,"ID!"],lineItems:[98,"[CheckoutLineItemUpdateInput!]!"]}],checkoutShippingAddressUpdateV2:[103,{shippingAddress:[201,"MailingAddressInput!"],checkoutId:[180,"ID!"]}],checkoutShippingLineUpdate:[104,{checkoutId:[180,"ID!"],shippingRateHandle:[307,"String!"]}],customerAccessTokenCreate:[128,{input:[127,"CustomerAccessTokenCreateInput!"]}],customerAccessTokenCreateWithMultipass:[129,{multipassToken:[307,"String!"]}],customerAccessTokenDelete:[130,{customerAccessToken:[307,"String!"]}],customerAccessTokenRenew:[131,{customerAccessToken:[307,"String!"]}],customerActivate:[134,{id:[180,"ID!"],input:[133,"CustomerActivateInput!"]}],customerActivateByUrl:[132,{activationUrl:[320,"URL!"],password:[307,"String!"]}],customerAddressCreate:[135,{customerAccessToken:[307,"String!"],address:[201,"MailingAddressInput!"]}],customerAddressDelete:[136,{id:[180,"ID!"],customerAccessToken:[307,"String!"]}],customerAddressUpdate:[137,{customerAccessToken:[307,"String!"],id:[180,"ID!"],address:[201,"MailingAddressInput!"]}],customerCreate:[139,{input:[138,"CustomerCreateInput!"]}],customerDefaultAddressUpdate:[140,{customerAccessToken:[307,"String!"],addressId:[180,"ID!"]}],customerRecover:[142,{email:[307,"String!"]}],customerReset:[145,{id:[180,"ID!"],input:[144,"CustomerResetInput!"]}],customerResetByUrl:[143,{resetUrl:[320,"URL!"],password:[307,"String!"]}],customerUpdate:[147,{customerAccessToken:[307,"String!"],customer:[146,"CustomerUpdateInput!"]}],__typename:[307]},Node:{id:[180],on_AppliedGiftCard:[3],on_Article:[4],on_Blog:[16],on_Cart:[25],on_CartLine:[55],on_Checkout:[76],on_CheckoutLineItem:[94],on_Collection:[106],on_Comment:[111],on_ExternalVideo:[165],on_GenericFile:[175],on_Location:[193],on_MailingAddress:[198],on_Market:[203],on_MediaImage:[209],on_MediaPresentation:[210],on_Menu:[212],on_MenuItem:[213],on_Metafield:[216],on_Metaobject:[226],on_Model3d:[231],on_Order:[238],on_Page:[248],on_Payment:[253],on_Product:[259],on_ProductOption:[266],on_ProductVariant:[270],on_Shop:[300],on_ShopPolicy:[302],on_UrlRedirect:[326],on_Video:[331],__typename:[307]},OnlineStorePublishable:{onlineStoreUrl:[320],on_Article:[4],on_Blog:[16],on_Collection:[106],on_Page:[248],on_Product:[259],__typename:[307]},Order:{billingAddress:[198],cancelReason:[239],canceledAt:[149],currencyCode:[124],currentSubtotalPrice:[234],currentTotalDuties:[234],currentTotalPrice:[234],currentTotalTax:[234],customAttributes:[9],customerLocale:[307],customerUrl:[320],discountApplications:[158,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],edited:[20],email:[307],financialStatus:[242],fulfillmentStatus:[243],id:[180],lineItems:[245,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],name:[307],orderNumber:[188],originalTotalDuties:[234],originalTotalPrice:[234],phone:[307],processedAt:[149],shippingAddress:[198],shippingDiscountAllocations:[155],statusUrl:[320],subtotalPrice:[234],subtotalPriceV2:[234],successfulFulfillments:[170,{first:[188]}],totalPrice:[234],totalPriceV2:[234],totalRefunded:[234],totalRefundedV2:[234],totalShippingPrice:[234],totalShippingPriceV2:[234],totalTax:[234],totalTaxV2:[234],__typename:[307]},OrderCancelReason:{},OrderConnection:{edges:[241],nodes:[238],pageInfo:[251],totalCount:[325],__typename:[307]},OrderEdge:{cursor:[307],node:[238],__typename:[307]},OrderFinancialStatus:{},OrderFulfillmentStatus:{},OrderLineItem:{currentQuantity:[188],customAttributes:[9],discountAllocations:[155],discountedTotalPrice:[234],originalTotalPrice:[234],quantity:[188],title:[307],variant:[270],__typename:[307]},OrderLineItemConnection:{edges:[246],nodes:[244],pageInfo:[251],__typename:[307]},OrderLineItemEdge:{cursor:[307],node:[244],__typename:[307]},OrderSortKeys:{},Page:{body:[177],bodySummary:[307],createdAt:[149],handle:[307],id:[180],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[320],seo:[274],title:[307],updatedAt:[149],__typename:[307]},PageConnection:{edges:[250],nodes:[248],pageInfo:[251],__typename:[307]},PageEdge:{cursor:[307],node:[248],__typename:[307]},PageInfo:{endCursor:[307],hasNextPage:[20],hasPreviousPage:[20],startCursor:[307],__typename:[307]},PageSortKeys:{},Payment:{amount:[234],amountV2:[234],billingAddress:[198],checkout:[76],creditCard:[120],errorMessage:[307],id:[180],idempotencyKey:[307],nextActionUrl:[320],ready:[20],test:[20],transaction:[317],__typename:[307]},PaymentSettings:{acceptedCardBrands:[24],cardVaultUrl:[320],countryCode:[119],currencyCode:[124],enabledPresentmentCurrencies:[124],shopifyPaymentsAccountId:[307],supportedDigitalWallets:[154],__typename:[307]},PaymentTokenType:{},PriceRangeFilter:{min:[169],max:[169],__typename:[307]},PricingPercentageValue:{percentage:[169],__typename:[307]},PricingValue:{on_MoneyV2:[234],on_PricingPercentageValue:[257],__typename:[307]},Product:{availableForSale:[20],collections:[107,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],compareAtPriceRange:[267],createdAt:[149],description:[307,{truncateAt:[188]}],descriptionHtml:[177],featuredImage:[181],handle:[307],id:[180],images:[182,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[264]}],isGiftCard:[20],media:[205,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[265]}],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[320],options:[266,{first:[188]}],priceRange:[267],productType:[307],publishedAt:[149],requiresSellingPlan:[20],sellingPlanGroups:[292,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],seo:[274],tags:[307],title:[307],totalInventory:[188],updatedAt:[149],variantBySelectedOptions:[270,{selectedOptions:[277,"[SelectedOptionInput!]!"]}],variants:[271,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[273]}],vendor:[307],__typename:[307]},ProductCollectionSortKeys:{},ProductConnection:{edges:[262],filters:[166],nodes:[259],pageInfo:[251],__typename:[307]},ProductEdge:{cursor:[307],node:[259],__typename:[307]},ProductFilter:{available:[20],variantOption:[330],productType:[307],productVendor:[307],price:[256],productMetafield:[219],variantMetafield:[219],tag:[307],__typename:[307]},ProductImageSortKeys:{},ProductMediaSortKeys:{},ProductOption:{id:[180],name:[307],values:[307],__typename:[307]},ProductPriceRange:{maxVariantPrice:[234],minVariantPrice:[234],__typename:[307]},ProductRecommendationIntent:{},ProductSortKeys:{},ProductVariant:{availableForSale:[20],barcode:[307],compareAtPrice:[234],compareAtPriceV2:[234],currentlyNotInStock:[20],id:[180],image:[181],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],price:[234],priceV2:[234],product:[259],quantityAvailable:[188],requiresShipping:[20],selectedOptions:[276],sellingPlanAllocations:[280,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],sku:[307],storeAvailability:[305,{near:[176],first:[188],after:[307],last:[188],before:[307],reverse:[20]}],title:[307],unitPrice:[234],unitPriceMeasurement:[321],weight:[169],weightUnit:[333],__typename:[307]},ProductVariantConnection:{edges:[272],nodes:[270],pageInfo:[251],__typename:[307]},ProductVariantEdge:{cursor:[307],node:[270],__typename:[307]},ProductVariantSortKeys:{},SEO:{description:[307],title:[307],__typename:[307]},ScriptDiscountApplication:{allocationMethod:[157],targetSelection:[160],targetType:[161],title:[307],value:[258],__typename:[307]},SelectedOption:{name:[307],value:[307],__typename:[307]},SelectedOptionInput:{name:[307],value:[307],__typename:[307]},SellingPlan:{checkoutCharge:[283],description:[307],id:[180],name:[307],options:[295],priceAdjustments:[297],recurringDeliveries:[20],__typename:[307]},SellingPlanAllocation:{checkoutChargeAmount:[234],priceAdjustments:[282],remainingBalanceChargeAmount:[234],sellingPlan:[278],__typename:[307]},SellingPlanAllocationConnection:{edges:[281],nodes:[279],pageInfo:[251],__typename:[307]},SellingPlanAllocationEdge:{cursor:[307],node:[279],__typename:[307]},SellingPlanAllocationPriceAdjustment:{compareAtPrice:[234],perDeliveryPrice:[234],price:[234],unitPrice:[234],__typename:[307]},SellingPlanCheckoutCharge:{type:[285],value:[286],__typename:[307]},SellingPlanCheckoutChargePercentageValue:{percentage:[169],__typename:[307]},SellingPlanCheckoutChargeType:{},SellingPlanCheckoutChargeValue:{on_MoneyV2:[234],on_SellingPlanCheckoutChargePercentageValue:[284],__typename:[307]},SellingPlanConnection:{edges:[288],nodes:[278],pageInfo:[251],__typename:[307]},SellingPlanEdge:{cursor:[307],node:[278],__typename:[307]},SellingPlanFixedAmountPriceAdjustment:{adjustmentAmount:[234],__typename:[307]},SellingPlanFixedPriceAdjustment:{price:[234],__typename:[307]},SellingPlanGroup:{appName:[307],name:[307],options:[294],sellingPlans:[287,{first:[188],after:[307],last:[188],before:[307],reverse:[20]}],__typename:[307]},SellingPlanGroupConnection:{edges:[293],nodes:[291],pageInfo:[251],__typename:[307]},SellingPlanGroupEdge:{cursor:[307],node:[291],__typename:[307]},SellingPlanGroupOption:{name:[307],values:[307],__typename:[307]},SellingPlanOption:{name:[307],value:[307],__typename:[307]},SellingPlanPercentagePriceAdjustment:{adjustmentPercentage:[188],__typename:[307]},SellingPlanPriceAdjustment:{adjustmentValue:[298],orderCount:[188],__typename:[307]},SellingPlanPriceAdjustmentValue:{on_SellingPlanFixedAmountPriceAdjustment:[289],on_SellingPlanFixedPriceAdjustment:[290],on_SellingPlanPercentagePriceAdjustment:[296],__typename:[307]},ShippingRate:{handle:[307],price:[234],priceV2:[234],title:[307],__typename:[307]},Shop:{brand:[21],description:[307],id:[180],metafield:[216,{namespace:[307,"String!"],key:[307,"String!"]}],metafields:[216,{identifiers:[179,"[HasMetafieldsIdentifier!]!"]}],moneyFormat:[307],name:[307],paymentSettings:[254],primaryDomain:[164],privacyPolicy:[302],refundPolicy:[302],shippingPolicy:[302],shipsToCountries:[119],subscriptionPolicy:[303],termsOfService:[302],__typename:[307]},ShopPayWalletContentInput:{billingAddress:[201],sessionToken:[307],__typename:[307]},ShopPolicy:{body:[307],handle:[307],id:[180],title:[307],url:[320],__typename:[307]},ShopPolicyWithDefault:{body:[307],handle:[307],id:[180],title:[307],url:[320],__typename:[307]},StoreAvailability:{available:[20],location:[193],pickUpTime:[307],__typename:[307]},StoreAvailabilityConnection:{edges:[306],nodes:[304],pageInfo:[251],__typename:[307]},StoreAvailabilityEdge:{cursor:[307],node:[304],__typename:[307]},String:{},StringConnection:{edges:[309],pageInfo:[251],__typename:[307]},StringEdge:{cursor:[307],node:[307],__typename:[307]},SubmissionError:{code:[311],message:[307],__typename:[307]},SubmissionErrorCode:{},SubmitAlreadyAccepted:{attemptId:[307],__typename:[307]},SubmitFailed:{checkoutUrl:[320],errors:[310],__typename:[307]},SubmitSuccess:{attemptId:[307],__typename:[307]},SubmitThrottled:{pollAfter:[149],__typename:[307]},TokenizedPaymentInputV3:{paymentAmount:[233],idempotencyKey:[307],billingAddress:[201],paymentData:[307],test:[20],identifier:[307],type:[255],__typename:[307]},Transaction:{amount:[234],amountV2:[234],kind:[318],status:[319],statusV2:[319],test:[20],__typename:[307]},TransactionKind:{},TransactionStatus:{},URL:{},UnitPriceMeasurement:{measuredType:[322],quantityUnit:[323],quantityValue:[169],referenceUnit:[323],referenceValue:[188],__typename:[307]},UnitPriceMeasurementMeasuredType:{},UnitPriceMeasurementMeasuredUnit:{},UnitSystem:{},UnsignedInt64:{},UrlRedirect:{id:[180],path:[307],target:[307],__typename:[307]},UrlRedirectConnection:{edges:[328],nodes:[326],pageInfo:[251],__typename:[307]},UrlRedirectEdge:{cursor:[307],node:[326],__typename:[307]},UserError:{field:[307],message:[307],__typename:[307]},VariantOptionFilter:{name:[307],value:[307],__typename:[307]},Video:{alt:[307],id:[180],mediaContentType:[206],presentation:[210],previewImage:[181],sources:[332],__typename:[307]},VideoSource:{format:[307],height:[188],mimeType:[307],url:[307],width:[188],__typename:[307]},WeightUnit:{},Query:{article:[4,{id:[180,"ID!"]}],articles:[6,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[8],query:[307]}],blog:[16,{id:[180],handle:[307]}],blogByHandle:[16,{handle:[307,"String!"]}],blogs:[17,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[19],query:[307]}],cart:[25,{id:[180,"ID!"]}],cartCompletionAttempt:[35,{attemptId:[307,"String!"]}],collection:[106,{id:[180],handle:[307]}],collectionByHandle:[106,{handle:[307,"String!"]}],collections:[107,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[109],query:[307]}],customer:[125,{customerAccessToken:[307,"String!"]}],localization:[192],locations:[195,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[197],near:[176]}],menu:[212,{handle:[307,"String!"]}],metaobject:[226,{id:[180],handle:[230]}],metaobjects:[227,{type:[307,"String!"],sortKey:[307],first:[188],after:[307],last:[188],before:[307],reverse:[20]}],node:[236,{id:[180,"ID!"]}],nodes:[236,{ids:[180,"[ID!]!"]}],page:[248,{id:[180],handle:[307]}],pageByHandle:[248,{handle:[307,"String!"]}],pages:[249,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[252],query:[307]}],product:[259,{id:[180],handle:[307]}],productByHandle:[259,{handle:[307,"String!"]}],productRecommendations:[259,{productId:[180,"ID!"],intent:[268]}],productTags:[308,{first:[188,"Int!"]}],productTypes:[308,{first:[188,"Int!"]}],products:[261,{first:[188],after:[307],last:[188],before:[307],reverse:[20],sortKey:[269],query:[307]}],publicApiVersions:[0],shop:[300],urlRedirects:[327,{first:[188],after:[307],last:[188],before:[307],reverse:[20],query:[307]}],__typename:[307]}}}),v=(e=>{let{queryRoot:t,mutationRoot:n,subscriptionRoot:r,...i}=e,a=h(i),s={};return t&&(s.query=e=>{if(!t)throw Error("queryRoot argument is missing");return a(p("query",t,e))}),n&&(s.mutation=e=>{if(!n)throw Error("mutationRoot argument is missing");return a(p("mutation",n,e))}),s})({url:"https://kidsuper.myshopify.com/api/2023-04/graphql",...{...r={...a(),next:{revalidate:1}},headers:{Accept:"application/json","Content-Type":"application/json",...r.headers},url:r.endpoint},queryRoot:g.Query,mutationRoot:g.Mutation,subscriptionRoot:g.Subscription})},1737:function(e,t,n){"use strict";n.d(t,{aH:function(){return D},Cf:function(){return F},K7:function(){return j},ef:function(){return H},CM:function(){return U},TS:function(){return k},U:function(){return B},mJ:function(){return V}});var r=n(3645),i=n(5945),a=n(7294),s=n(7848),o=n(2161),l=n(9886),u=n(81),c=n(3989);class h extends c.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let n=this.options;this.options=this.client.defaultMutationOptions(e),(0,o.VS)(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,l.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){u.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,n,r,i,a,s,o,l;e.onSuccess?(null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(a=(s=this.mutateOptions).onError)||a.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var d=n(464),p=n(4798);function f(e,t,n){let r=(0,o.lV)(e,t,n),s=(0,i.NL)({context:r.context}),[l]=a.useState(()=>new h(s,r));a.useEffect(()=>{l.setOptions(r)},[l,r]);let c=(0,d.$)(a.useCallback(e=>l.subscribe(u.V.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f=a.useCallback((e,t)=>{l.mutate(e,t).catch(m)},[l]);if(c.error&&(0,p.L)(l.options.useErrorBoundary,[c.error]))throw c.error;return{...c,mutate:f,mutateAsync:c.mutate}}function m(){}/*! js-cookie v3.0.5 | MIT */function g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var v=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=g({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var a=n[i].split("="),s=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(r[o]=t.read(s,o),e===o)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",g({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,g({},this.attributes,t))},withConverter:function(t){return e(g({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),_=n(5893),y=!1,b=!1,x=({syncWithQueryParam:e})=>{let t=(0,i.NL)(),n=a.useMemo(()=>!0===e?"cart":"object"==typeof e?e.key:null,[e]),{data:r}=(0,s.a)(["cart-open-state"],()=>{if(!e||b)return y}),o=a.useCallback(()=>{t.setQueriesData(["cart-open-state"],y)},[t]),l=a.useCallback(()=>{if(y=!0,o(),n){let e=new URL(window.location.href);e.searchParams.set(n,"open"),window.history.replaceState({},"",e.toString())}},[n,o]),u=a.useCallback(()=>{if(y=!1,o(),n){let e=new URL(window.location.href);e.searchParams.delete(n),window.history.replaceState({},"",e.toString())}},[n,o]),c=a.useCallback(()=>{if(y=!y,o(),n){let e=new URL(window.location.href);y?e.searchParams.set(n,"open"):e.searchParams.delete(n),window.history.replaceState({},"",e.toString())}},[n,o]);return a.useEffect(()=>{n&&(y="open"===new URLSearchParams(window.location.search).get(n),b=!0,o())},[n,o]),{isOpen:r,open:l,close:u,toggle:c}};function S(e,t,n=!1){if(!e)throw!function(e,t=!1){if(e&&!t&&e.length>0)throw Error(e.map(e=>e.message).join(", "))}(t,n),Error("Mutation failed")}var w="undefined"!=typeof document,M=(e,t)=>a.useMemo(()=>({set:n=>{w&&v.set(e,n,{sameSite:"strict",secure:!0,expires:365,...t})},get:()=>{if(w)return v.get(e)},clear:()=>{if(w)return v.remove(e)}}),[e,t]),E=e=>["cart",e],T=({fetchCart:e,mutators:t,cartCookieKey:n,options:r,logging:i,cartCookieOptions:o})=>{let l=M(n,o),u=a.useCallback(async()=>{let{data:e,userErrors:n,silenceUserErrors:r}=await t.createCart();return S(e,n,r),e},[t]),c=a.useMemo(()=>E(n),[n]);return(0,s.a)(c,async()=>{let t=l.get();if(!t){if(null==r?void 0:r.createCartIfNotFound){let e=await u();return l.set(e.id),e.__sfhooks_is_new=!0,e}return null}let n=await e(t);if(!n){if(null==r?void 0:r.createCartIfNotFound){let e=await u();return l.set(e.id),e.__sfhooks_is_new=!0,e}throw l.clear(),Error(`Cart with id ${t} not found.`)}return n},{...null==r?void 0:r.queryOptions,onError(e){var t;(null==(t=null==r?void 0:r.queryOptions)?void 0:t.onError)&&r.queryOptions.onError(e),(null==i?void 0:i.onError)&&i.onError("fetchCartError",e)},onSuccess(e){var t;let n=null==e?void 0:e.__sfhooks_is_new;n&&delete e.__sfhooks_is_new,(null==(t=null==r?void 0:r.queryOptions)?void 0:t.onSuccess)&&r.queryOptions.onSuccess(e),(null==i?void 0:i.onSuccess)&&i.onSuccess(n?"createCartSuccess":"fetchCartSuccess",e)}})},A=({cartCookieKey:e})=>{let t=(0,i.NL)(),n=a.useMemo(()=>E(e),[e]);return a.useMemo(()=>{let e;return{update:async r=>{await t.cancelQueries(n),e=t.getQueryData(n),t.setQueryData(n,r)},revert:()=>{t.setQueryData(n,e)}}},[n,t])},C=({mutators:e,cartCookieKey:t,options:n,logging:r,cartCookieOptions:i})=>{let a=M(t,i),s=A({cartCookieKey:t,cartCookieOptions:i});return f(["addLineItemsToCart"],async t=>{let{updateCartQueryDataOnSuccess:r=!0}=n,i=a.get(),{data:o,userErrors:l,silenceUserErrors:u}=i?await e.addLineItemsToCart(i,t):await e.createCartWithLines(t);return S(o,l,u),i||(o.__sfhooks_is_new=!0,a.set(o.id)),r&&s.update(o),o},{...null==n?void 0:n.mutationOptions,onError(e,t,i){var a;(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onError)&&n.mutationOptions.onError(e,t,i),(null==r?void 0:r.onError)&&r.onError("addLineItemError",e)},onSuccess(e,t,i){var a;let s=null==e?void 0:e.__sfhooks_is_new;s&&delete e.__sfhooks_is_new,(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onSuccess)&&n.mutationOptions.onSuccess(e,t,i),(null==r?void 0:r.onSuccess)&&r.onSuccess(s?"createCartWithLinesSuccess":"addLineItemSuccess",e)}})},R=({mutators:e,cartCookieKey:t,options:n,logging:r,cartCookieOptions:i})=>{let a=M(t,i),s=A({cartCookieKey:t,cartCookieOptions:i});return f(["removeLineItemsFromCart"],async t=>{let r=a.get();if(!r)throw Error("Cart not found while trying to remove line items from it");let{updateCartQueryDataOnSuccess:i=!0}=n,{data:o,userErrors:l,silenceUserErrors:u}=await e.removeLineItemsFromCart(r,t);return S(o,l,u),i&&s.update(o),o},{...null==n?void 0:n.mutationOptions,onError(e,t,i){var a;(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onError)&&n.mutationOptions.onError(e,t,i),(null==r?void 0:r.onError)&&r.onError("removeLineItemError",e)},onSuccess(e,t,i){var a;(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onSuccess)&&n.mutationOptions.onSuccess(e,t,i),(null==r?void 0:r.onSuccess)&&r.onSuccess("removeLineItemSuccess",e)}})},P=({mutators:e,cartCookieKey:t,options:n,logging:r,cartCookieOptions:i})=>{let a=M(t,i),s=A({cartCookieKey:t,cartCookieOptions:i});return f(["updateLineItemsInCart"],async t=>{let r=a.get();if(!r)throw Error("Cart not found while trying to update line items in it");let{updateCartQueryDataOnSuccess:i=!0}=n,{data:o,userErrors:l,silenceUserErrors:u}=await e.updateLineItemsInCart(r,t);return S(o,l,u),i&&s.update(o),o},{...null==n?void 0:n.mutationOptions,onError(e,t,i){var a;(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onError)&&n.mutationOptions.onError(e,t,i),(null==r?void 0:r.onError)&&r.onError("updateLineItemError",e)},onSuccess(e,t,i){var a;(null==(a=null==n?void 0:n.mutationOptions)?void 0:a.onSuccess)&&n.mutationOptions.onSuccess(e,t,i),(null==r?void 0:r.onSuccess)&&r.onSuccess("updateLineItemSuccess",e)}})},I=n(3393),L=n(1166),O=n(8446),N=n.n(O);let k=e=>{let t=(0,a.useRef)(e),[n,r]=(0,a.useState)(()=>{let t={};return null==e||e.options.forEach(e=>{"title"!==e.name.toLowerCase()&&(t[e.name]=void 0)}),t});N()(t.current,e)||(t.current=e,r({}));let i=(0,a.useCallback)((e,t)=>r(n=>({...n,[e]:t})),[]),s=(0,a.useMemo)(()=>{if((null==e?void 0:e.variants.nodes.length)===1)return e.variants.nodes[0];let t=Object.entries(n);return null==e?void 0:e.variants.nodes.find(e=>t.every(t=>{let[n,r]=t;return e.selectedOptions.find(e=>e.name===n&&e.value===r)}))},[n,null==e?void 0:e.variants]),o=(0,a.useMemo)(()=>null==e?void 0:e.options.filter(e=>"title"!==e.name.toLowerCase()).map(t=>({...t,values:t.values.map(r=>{let i=e.variants.nodes.filter(e=>e.selectedOptions.every(e=>e.name===t.name?e.value===r:!n[e.name]||e.value===n[e.name])).every(e=>!e||!e.availableForSale);return{value:r,disabled:i}})})),[null==e?void 0:e.options,null==e?void 0:e.variants.nodes,n]),{hasOneOptionSelected:l,hasAllOptionsSelected:u,hasNoOptions:c}=(0,a.useMemo)(()=>{let e=Object.keys(n);return{hasOneOptionSelected:e.some(e=>!!n[e]),hasAllOptionsSelected:e.every(e=>!!n[e]),hasNoOptions:0===e.length}},[n]),h=(0,a.useMemo)(()=>{if(!s||!s.compareAtPriceV2)return null;let e=s.priceV2.amount-s.compareAtPriceV2.amount;return{percentage:e/s.compareAtPriceV2.amount*100,raw:e}},[s]),d=(0,a.useMemo)(()=>!(null==e?void 0:e.availableForSale),[null==e?void 0:e.availableForSale]),p=(0,a.useMemo)(()=>null==s?void 0:s.availableForSale,[s]);return{handleSelectOption:i,optionsToSelect:o,selectedVariant:s,discount:h,isProductSoldOut:d,isSelectedVariantSoldOut:p,selectedOptions:n,hasOneOptionSelected:l,hasAllOptionsSelected:u,hasNoOptions:c}},{QueryClientProvider:D,useCartQuery:U,useAddLineItemsToCartMutation:F,useOptimisticCartUpdate:z,useRemoveLineItemsFromCartMutation:B,useUpdateLineItemsInCartMutation:V,useCartOpenState:H}=function({cartCookieKey:e,fetchers:t,mutators:n,createCartIfNotFound:a,queryClientConfig:s,cartOpenStateOptions:o,logging:l,cartCookieOptions:u}){let c=new r.S(s);return{QueryClientProvider:e=>(0,_.jsx)(i.aH,{...e,client:c}),useCartQuery:r=>T({cartCookieKey:e,cartCookieOptions:u,fetchCart:t.fetchCart,mutators:{createCart:n.createCart},options:{...r,createCartIfNotFound:(null==r?void 0:r.createCartIfNotFound)??a},logging:l}),useOptimisticCartUpdate:()=>A({cartCookieKey:e,cartCookieOptions:u}),useAddLineItemsToCartMutation:t=>C({mutators:{addLineItemsToCart:n.addLineItemsToCart,createCartWithLines:n.createCartWithLines},cartCookieKey:e,cartCookieOptions:u,options:{...t},logging:l}),useUpdateLineItemsInCartMutation:t=>P({mutators:{updateLineItemsInCart:n.updateLineItemsInCart},cartCookieKey:e,cartCookieOptions:u,options:{...t,mutationOptions:null==t?void 0:t.mutationOptions},logging:l}),useRemoveLineItemsFromCartMutation:t=>R({mutators:{removeLineItemsFromCart:n.removeLineItemsFromCart},cartCookieKey:e,cartCookieOptions:u,options:{...t,mutationOptions:null==t?void 0:t.mutationOptions},logging:l}),useCartOpenState:()=>x({...o})}}({cartCookieKey:"kissing-bags-sandbox-cart-id",fetchers:{fetchCart:async e=>{let{cart:t}=await L.L.query({cart:{__args:{id:e},...I.r6}});return null!=t?t:null}},mutators:{addLineItemsToCart:async(e,t)=>{let{cartLinesAdd:n}=await L.L.mutation({cartLinesAdd:{__args:{cartId:e,lines:t},cart:I.r6,userErrors:I.wM}});return{data:null==n?void 0:n.cart,userErrors:null==n?void 0:n.userErrors}},createCart:async()=>{let{cartCreate:e}=await L.L.mutation({cartCreate:{cart:I.r6,userErrors:I.wM}});return{data:null==e?void 0:e.cart,userErrors:null==e?void 0:e.userErrors}},createCartWithLines:async e=>{let{cartCreate:t}=await L.L.mutation({cartCreate:{__args:{input:{lines:e}},cart:I.r6,userErrors:I.wM}});return{data:null==t?void 0:t.cart,userErrors:null==t?void 0:t.userErrors}},removeLineItemsFromCart:async(e,t)=>{let{cartLinesRemove:n}=await L.L.mutation({cartLinesRemove:{__args:{cartId:e,lineIds:t},cart:I.r6,userErrors:I.wM}});return{data:null==n?void 0:n.cart,userErrors:null==n?void 0:n.userErrors}},updateLineItemsInCart:async(e,t)=>{let{cartLinesUpdate:n}=await L.L.mutation({cartLinesUpdate:{__args:{cartId:e,lines:t.map(e=>({id:e.merchandiseId,quantity:e.quantity,attributes:e.attributes}))},cart:I.r6,userErrors:I.wM}});return{data:null==n?void 0:n.cart,userErrors:null==n?void 0:n.userErrors}}},createCartIfNotFound:!0}),j=()=>{let{data:e}=U();return(0,a.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.lines.edges.reduce((e,t)=>{let{node:n}=t;return e+n.quantity},0))&&void 0!==t?t:0},[null==e?void 0:e.lines.edges])}},8785:function(e,t,n){"use strict";n.d(t,{WA:function(){return C},m8:function(){return A}});var r=n(5893);let i="_shopify_y",a="_shopify_s",s={PAGE_VIEW:"PAGE_VIEW",ADD_TO_CART:"ADD_TO_CART"},o={collection:"collection",product:"product",search:"search"},l={headless:"headless"},u={hydrogen:"6167201",headless:"12875497473"};function c(e,t){return{schema_id:e,payload:t,metadata:{event_created_at_ms:Date.now()}}}function h(e){let t={id:"",resource:null,resourceId:null,search:"",searchParams:new URLSearchParams,hash:""};if("string"!=typeof e)return t;try{let{search:n,searchParams:r,pathname:i,hash:a}=new URL(e),s=i.split("/"),o=s[s.length-1],l=s[s.length-2];if(!o||!l)return t;return{id:`${o}${n}${a}`||"",resource:l??null,resourceId:o||null,search:n,searchParams:r,hash:a}}catch{return t}}function d(e,t){return"object"!=typeof e?{}:(Object.entries(e).forEach(([e,n])=>{n&&(t[e]=n)}),t)}var p=new Set(["domain","path","max-age","expires","samesite","secure","httponly"]);let f="xxxx-4xxx-xxxx-xxxxxxxxxxxx";function m(){let e="";try{let t=window.crypto,n=new Uint16Array(31);t.getRandomValues(n);let r=0;e=f.replace(/[x]/g,e=>{let t=n[r]%16;return r++,("x"===e?t:3&t|8).toString(16)}).toUpperCase()}catch(t){e=f.replace(/[x]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}).toUpperCase()}return`${function(){let e=0,t=0;e=new Date().getTime()>>>0;try{t=performance.now()>>>0}catch(e){t=0}return Math.abs(e+t).toString(16).toLowerCase().padStart(8,"0")}()}-${e}`}function g(e){let t=function(e){let t={},n,r,i=0,a=e.split(/;\s*/g),s,o;for(;i<a.length;i++)if(~(n=(r=a[i]).indexOf("="))){if(s=r.substring(0,n++).trim(),'"'===(o=r.substring(n).trim())[0]&&(o=o.substring(1,o.length-1)),~o.indexOf("%"))try{o=decodeURIComponent(o)}catch(e){}p.has(r=s.toLowerCase())?"expires"===r?t.expires=new Date(o):"max-age"===r?t.maxage=+o:t[r]=o:t[s]=o}else(s=r.trim().toLowerCase())&&("httponly"===s||"secure"===s)&&(t[s]=!0);return t}(e);return{[i]:t[i]||"",[a]:t[a]||""}}let v="custom_storefront_customer_tracking/1.0";function _(e){return{source:e.shopifySalesChannel||l.headless,hydrogenSubchannelId:e.storefrontId||"0",is_persistent_cookie:e.hasUserConsent,ccpa_enforced:!1,gdpr_enforced:!1,unique_token:e.uniqueToken,event_time:Date.now(),event_id:m(),event_source_url:e.url,referrer:e.referrer,user_agent:e.userAgent,navigation_type:e.navigationType,navigation_api:e.navigationApi,shop_id:parseInt(h(e.shopId).id),currency:e.currency}}function y(e){return e?e.map(e=>JSON.stringify(d({variant_gid:e.variantGid,category:e.category,sku:e.sku,product_id:parseInt(h(e.productGid).id),variant_id:parseInt(h(e.variantGid).id)},{product_gid:e.productGid,name:e.name,variant:e.variantName||"",brand:e.brand,price:parseFloat(e.price),quantity:Number(e.quantity||0)}))):[]}function b(e,t){let{eventName:n,payload:r}=e;if(!r.hasUserConsent)return Promise.resolve();let i=[];return(n===s.PAGE_VIEW?i=i.concat(function(e){let{id:t,resource:n}=h(e.resourceId),r=n?n.toLowerCase():void 0;return[c("trekkie_storefront_page_view/1.4",d({pageType:e.pageType,customerId:e.customerId,resourceType:r,resourceId:parseInt(t)},{appClientId:e.shopifySalesChannel?u[e.shopifySalesChannel]:u.headless,isMerchantRequest:function(e){if("string"!=typeof e)return!1;let t=new URL(e).hostname;return -1!==t.indexOf("myshopify.dev")||"localhost"===t}(e.url),hydrogenSubchannelId:e.storefrontId||"0",isPersistentCookie:e.hasUserConsent,uniqToken:e.uniqueToken,visitToken:e.visitToken,microSessionId:m(),microSessionCount:1,url:e.url,path:e.path,search:e.search,referrer:e.referrer,title:e.title,shopId:parseInt(h(e.shopId).id),currency:e.currency,contentLanguage:e.acceptedLanguage||"en"}))]}(r),function(e){let t={canonical_url:e.canonicalUrl||e.url,customer_id:e.customerId},n=e.pageType,r=[];switch(r.push(c(v,d({event_name:"page_rendered",...t},_(e)))),n){case o.collection:r.push(c(v,d({event_name:"collection_page_rendered",...t,collection_name:e.collectionHandle},_(e))));break;case o.product:r.push(c(v,d({event_name:"product_page_rendered",...t,products:y(e.products),total_value:e.totalValue},_(e))));break;case o.search:r.push(c(v,d({event_name:"search_submitted",...t,search_string:e.searchString},_(e))))}return r}(r)):n===s.ADD_TO_CART&&(i=i.concat(function(e){let t=h(e.cartId),n=(null==t?void 0:t.id)?`${t.id}`:null;return[c(v,d({event_name:"product_added_to_cart",customerId:e.customerId,cart_token:n,total_value:e.totalValue,products:y(e.products)},_(e)))]}(r))),i.length)?function(e,t){let n={events:e,metadata:{event_sent_at_ms:Date.now()}};try{return fetch(t?`https://${t}/.well-known/shopify/monorail/unstable/produce_batch`:"https://monorail-edge.shopifysvc.com/unstable/produce_batch",{method:"post",headers:{"content-type":"text/plain"},body:JSON.stringify(n)}).then(e=>{if(!e.ok)throw Error("Response failed");return e.text()}).then(e=>{e&&JSON.parse(e).result.forEach(e=>{200!==e.status&&console.error(x,"\n\n",e.message)})}).catch(e=>{console.error(x,e)})}catch(e){return Promise.resolve()}}(i,t):Promise.resolve()}let x="sendShopifyAnalytics request is unsuccessful";function S(){if("undefined"==typeof document&&(console.error("getClientBrowserParameters should only be used within the useEffect callback or event handlers"),1))return{uniqueToken:"",visitToken:"",url:"",path:"",search:"",referrer:"",title:"",userAgent:"",navigationType:"",navigationApi:""};let[e,t]=function(){try{let e="PerformanceNavigationTiming",t=function(){try{let e=(null==performance?void 0:performance.getEntriesByType)&&(null==performance?void 0:performance.getEntriesByType("navigation"));if(e&&e[0]){let e=window.performance.getEntriesByType("navigation")[0].type;return e&&e.toString()}}catch(e){}}();if(t||(t=function(){var e,t;try{if(PerformanceNavigation&&(null==(e=null==performance?void 0:performance.navigation)?void 0:e.type)!==null&&(null==(t=null==performance?void 0:performance.navigation)?void 0:t.type)!==void 0){let e=performance.navigation.type;switch(e){case PerformanceNavigation.TYPE_NAVIGATE:return"navigate";case PerformanceNavigation.TYPE_RELOAD:return"reload";case PerformanceNavigation.TYPE_BACK_FORWARD:return"back_forward";default:return`unknown: ${e}`}}}catch(e){}}(),e="performance.navigation"),t)return[t,e];return["unknown","unknown"]}catch(e){}return["error","error"]}(),n=g(document.cookie);return{uniqueToken:n[i],visitToken:n[a],url:location.href,path:location.pathname,search:location.search,referrer:document.referrer,title:document.title,userAgent:navigator.userAgent,navigationType:e,navigationApi:t}}var w=n(7294);function M(e,t,n,r){document.cookie=function(e,t,n={}){let r=e+"="+encodeURIComponent(t);return n.expires&&(r+="; Expires="+new Date(n.expires).toUTCString()),null!=n.maxage&&n.maxage>=0&&(r+="; Max-Age="+(0|n.maxage)),n.domain&&(r+="; Domain="+n.domain),n.path&&(r+="; Path="+n.path),n.samesite&&(r+="; SameSite="+n.samesite),(n.secure||"None"===n.samesite)&&(r+="; Secure"),n.httponly&&(r+="; HttpOnly"),r}(e,t,{maxage:n,domain:r,samesite:"Lax",path:"/"})}var E=n(4648);async function T(e){let t={...S(),hasUserConsent:!0,shopId:"gid://shopify/Shop/".concat(E.a9),currency:"USD",acceptedLanguage:"EN",shopifySalesChannel:"headless",pageType:e.pageType,resourceId:e.resourceId,collectionHandle:e.collectionHandle};await b({eventName:s.PAGE_VIEW,payload:t})}async function A(e){let t={...S(),hasUserConsent:!0,shopId:"gid://shopify/Shop/".concat(E.a9),currency:"USD",acceptedLanguage:"EN",shopifySalesChannel:"headless",pageType:e.pageType,resourceId:e.resourceId,collectionHandle:e.collectionHandle,cartId:e.cartId,totalValue:e.totalValue};await b({eventName:s.ADD_TO_CART,payload:t})}let C=e=>{!function(e){let{hasUserConsent:t=!1,domain:n=""}=e||{};(0,w.useEffect)(()=>{let e=g(document.cookie);t?(M(i,e[i]||m(),31104e3,n),M(a,e[a]||m(),1800,n)):(M(i,"",0,n),M(a,"",0,n))})}({hasUserConsent:!0});let t=(0,w.useRef)(!1);return(0,w.useEffect)(()=>{t.current||(T(e),t.current=!0)},[e]),(0,r.jsx)(r.Fragment,{})}},8879:function(e,t,n){"use strict";n.d(t,{BW:function(){return i},G3:function(){return r},T4:function(){return s}});let r=(e,t)=>"gid://shopify/".concat(e,"/").concat(t),i=(e,t)=>t.map(t=>r(e,t)),a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),s=e=>a.format(parseFloat(e)).replace("$","USD ")},3442:function(e,t,n){"use strict";n.d(t,{yv:function(){return d},Ov:function(){return h},_K:function(){return c},td:function(){return u}});var r,i,a=n(7294),s=n(4529);let o="undefined"!=typeof window&&(null!=(r=window.document)&&r.createElement||(null==(i=window.navigator)?void 0:i.product)==="ReactNative")?a.useLayoutEffect:a.useEffect;function l(){let e=(0,s.Ue)(e=>({current:[],version:0,set:e}));return{In:({children:t})=>{let n=e(e=>e.set),r=e(e=>e.version);return o(()=>{n(e=>({version:e.version+1}))},[]),o(()=>(n(({current:e})=>({current:[...e,t]})),()=>n(({current:e})=>({current:e.filter(e=>e!==t)}))),[t,r]),null},Out:()=>{let t=e(e=>e.current);return a.createElement(a.Fragment,null,t)}}}let u=l(),c=l(),h=l(),d=l()},9946:function(e,t,n){"use strict";n.d(t,{Bu:function(){return u},OP:function(){return d},Q3:function(){return a},T4:function(){return l},gE:function(){return s},hj:function(){return h},jl:function(){return p},mA:function(){return c}});var r=n(4918),i=n(3454);let a=e=>r.C5&&e in window,s=(e,t,n)=>"".concat("number"==typeof n&&"(max-width: 767px) ".concat(n,"vw, ")).concat("number"==typeof t&&"(max-width: 1024px) ".concat(t,"vw, ")).concat(e,"vw").replace(/undefined/g,""),o=new Intl.NumberFormat("en-US",{currency:"USD",minimumFractionDigits:2}),l=e=>o.format(parseFloat(null!=e?e:0)),u=(e,t)=>String(e).padStart(t,"0"),c=e=>e.toString().toLowerCase().replace(/[[\]']+/g,""),h=e=>e.toString().toLowerCase().replace(/[[\]']+/g,"").replace(/ /g,"-");function d(e){let t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return new Blob([r],{type:n})}let p=e=>r.r8?e:e+"?hash=".concat(i.env.NEXT_PUBLIC_BUILD_ID)},3621:function(e,t,n){"use strict";let r,i;n.r(t),n.d(t,{default:function(){return nO}});var a,s,o,l,u,c,h=n(5893),d=n(5084),p=n.n(d),f=n(6810),m=n.n(f),g=n(392),v=n.n(g);n(42);var _=n(793),y=n(3645),b=n(5945),x=n(7294),S=n.t(x,2),w=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function M(){return"undefined"!=typeof window}function E(){return"production"}function T(){return"development"===((M()?window.vam:E())||"production")}function A({beforeSend:e,debug:t=!0,mode:n="auto"}){return(0,x.useEffect)(()=>{!function(e={debug:!0}){var t;if(!M())return;(function(e="auto"){if("auto"===e){window.vam=E();return}window.vam=e})(e.mode),w(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));let n=T()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${n}"]`))return;let r=document.createElement("script");r.src=n,r.defer=!0,r.setAttribute("data-sdkn","@vercel/analytics"),r.setAttribute("data-sdkv","1.1.1"),r.onerror=()=>{let e=T()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${e}`)},T()&&!1===e.debug&&r.setAttribute("data-debug","false"),document.head.appendChild(r)}({beforeSend:e,debug:t,mode:n})},[e,t,n]),null}var C=n(9008),R=n.n(C),P=n(512),I=n(4918);let L=e=>{try{let t=new URL(e),{hostname:n}=new URL(I.i0);if(t.hostname!==n)return!0}catch(e){return!1}};var O=n(1664),N=n.n(O),k=n(2653);let D=x.forwardRef((e,t)=>{let{children:n,className:r,variant:i="default",...a}=e,{href:s,replace:o,scroll:l=!1,shallow:u,prefetch:c,...d}=a,p=L(s),{setCursor:f,resetCursor:m}=(0,k.j)();return(0,h.jsx)(N(),{href:s,legacyBehavior:!0,passHref:!0,prefetch:c,replace:o,scroll:l,shallow:u,children:(0,h.jsx)("a",{className:(0,P.W)("unstyled"!==i&&"link","unstyled"!==i&&"link--".concat(i),r),onPointerEnter:()=>f("pointer"),onPointerLeave:()=>m(),ref:t,rel:p?"noopener":void 0,target:p?"_blank":void 0,...d,children:n})})});var U=n(5514),F=n.n(U),z=()=>{let e=(0,x.useMemo)(()=>new Date().getFullYear(),[]);return(0,h.jsx)("footer",{className:(0,P.W)(F().footer,"desktop-only"),id:"footer",children:(0,h.jsxs)("div",{className:(0,P.W)(F().wrapper,"container"),children:[(0,h.jsxs)("p",{className:F().date,children:["\xa9",e," ",(0,h.jsx)("a",{href:"https://kidsuper.com",className:"link",target:"_blank",rel:"noopener",style:{display:"inline-flex"},children:"KidSuper"})," ","x"," ",(0,h.jsx)("a",{href:"https://twitter.com/basementstudio",className:"link",target:"_blank",rel:"noopener",style:{display:"inline-flex"},children:"basement.studio"}),". All rights reserved."]}),(0,h.jsx)("nav",{className:F().nav,children:(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:(0,h.jsx)(D,{href:"https://www.instagram.com/kidsuper/",children:"Instagram"})}),(0,h.jsx)("li",{children:(0,h.jsx)(D,{href:"https://twitter.com/kidsuper",children:"Twitter"})}),(0,h.jsx)("li",{children:(0,h.jsx)(D,{href:"https://www.youtube.com/kidsuper",children:"Youtube"})})]})})]})})},B=n(5518);let V=(0,x.forwardRef)((e,t)=>(0,h.jsx)("svg",{...e,fill:"none",ref:t,viewBox:"0 0 181 18",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{fill:"#000",d:"M8.394 3.74c-2.42 0-4 1.58-4 4.1 0 2.54 1.58 4.14 4 4.14 2.14 0 3.58-1.26 3.76-3.24l-1.86-.12c-.14 1.14-.84 1.78-1.9 1.78-1.32 0-2.12-.94-2.12-2.56 0-1.6.8-2.52 2.12-2.52 1 0 1.68.64 1.82 1.66l1.88-.12c-.18-1.9-1.62-3.12-3.7-3.12ZM.954 7.86c0-4.08 3.3-7.38 7.38-7.38s7.38 3.3 7.38 7.38-3.3 7.38-7.38 7.38-7.38-3.3-7.38-7.38Zm1.82 0c0 3.04 2.5 5.56 5.56 5.56 3.02 0 5.54-2.52 5.54-5.56 0-3.06-2.52-5.58-5.54-5.58-3.06 0-5.56 2.52-5.56 5.58ZM17.015.8h3.52v5.88l4.7-5.88h3.84l-5.08 6.3 5.4 7.9h-3.76l-3.76-5.6-1.34 1.62V15h-3.52V.8ZM30.27 4.4h3.48V15h-3.48V4.4Zm-.06-1.28V.8h3.58v2.32h-3.58ZM45.806.8V15h-3.36l-.06-1.52c-.6 1.12-1.68 1.76-3.16 1.76-2.88 0-4.48-2.36-4.48-5.54s1.6-5.54 4.48-5.54c1.4 0 2.46.6 3.1 1.72V.8h3.48Zm-7.5 8.9c0 1.64.72 3 2.1 3 1.42 0 2.1-1.38 2.1-3 0-1.7-.68-3.04-2.1-3.04s-2.1 1.34-2.1 3.04ZM50.572 10.1c.26 1.4 1.22 2.28 2.84 2.28 1.2 0 2-.48 1.98-1.36-.02-.92-.78-1.4-2.78-1.88-3.34-.78-5.26-2.06-5.26-4.36 0-2.64 2.22-4.3 5.62-4.3 3.24 0 5.44 1.96 5.78 4.92l-3.48.14c-.14-1.38-1.04-2.22-2.38-2.22-1.22 0-2.06.6-1.98 1.52.06 1.02 1.26 1.4 2.66 1.72 3.36.68 5.38 2.08 5.38 4.38 0 2.72-2.38 4.3-5.6 4.3-3.6 0-6.06-1.92-6.28-4.96l3.5-.18ZM70.44 15H67.3l-.08-1.62c-.58 1.36-1.72 1.86-3.08 1.86-2.26 0-3.66-1.5-3.66-4.02V4.4h3.48v5.64c0 1.6.28 2.5 1.38 2.5 1.1 0 1.62-.9 1.62-2.5V4.4h3.48V15ZM71.993 18V4.4h3.36l.06 1.56c.6-1.16 1.68-1.8 3.12-1.8 2.92 0 4.52 2.36 4.52 5.54s-1.6 5.54-4.52 5.54c-1.36 0-2.42-.62-3.06-1.76V18h-3.48Zm3.28-8.3c0 1.66.7 3 2.1 3 1.42 0 2.1-1.34 2.1-3 0-1.64-.72-3-2.1-3-1.42 0-2.1 1.38-2.1 3ZM83.559 9.7c0-3.34 2.26-5.54 5.66-5.54 3.14 0 5.46 2.2 5.38 5.92v.5h-7.4c.06 1.36.82 2.2 2.02 2.2.78 0 1.48-.44 1.78-1.16l3.46.26c-.66 2.06-2.68 3.36-5.24 3.36-3.4 0-5.66-2.2-5.66-5.54Zm3.66-1.06h3.9c-.12-1.4-.94-2.02-1.9-2.02-1.14 0-1.9.76-2 2.02ZM95.637 4.4h3.34l.06 2.2c.44-1.46 1.24-2.2 2.58-2.2h.94v2.52h-.98c-1.78 0-2.46.76-2.46 2.34V15h-3.48V4.4ZM111.74 10.1c.26 1.4 1.22 2.28 2.84 2.28 1.2 0 2-.48 1.98-1.36-.02-.92-.78-1.4-2.78-1.88-3.34-.78-5.26-2.06-5.26-4.36 0-2.64 2.22-4.3 5.62-4.3 3.24 0 5.44 1.96 5.78 4.92l-3.48.14c-.14-1.38-1.04-2.22-2.38-2.22-1.22 0-2.06.6-1.98 1.52.06 1.02 1.26 1.4 2.66 1.72 3.36.68 5.38 2.08 5.38 4.38 0 2.72-2.38 4.3-5.6 4.3-3.6 0-6.06-1.92-6.28-4.96l3.5-.18ZM122.567 1.98h3.48V4.4h2.76v2.5h-2.76v4.36c0 .76.44 1.22 1.18 1.22h1.62V15h-2.48c-2.6 0-3.8-1.26-3.8-3.74V6.9h-1.68V4.4h1.68V1.98ZM139.924 15h-3.14l-.08-1.62c-.58 1.36-1.72 1.86-3.08 1.86-2.26 0-3.66-1.5-3.66-4.02V4.4h3.48v5.64c0 1.6.28 2.5 1.38 2.5 1.1 0 1.62-.9 1.62-2.5V4.4h3.48V15ZM151.997.8V15h-3.36l-.06-1.52c-.6 1.12-1.68 1.76-3.16 1.76-2.88 0-4.48-2.36-4.48-5.54s1.6-5.54 4.48-5.54c1.4 0 2.46.6 3.1 1.72V.8h3.48Zm-7.5 8.9c0 1.64.72 3 2.1 3 1.42 0 2.1-1.38 2.1-3 0-1.7-.68-3.04-2.1-3.04s-2.1 1.34-2.1 3.04ZM153.563 4.4h3.48V15h-3.48V4.4Zm-.06-1.28V.8h3.58v2.32h-3.58ZM163.699 15.24c-3.42 0-5.66-2.2-5.66-5.54s2.24-5.54 5.66-5.54c3.4 0 5.64 2.2 5.64 5.54s-2.24 5.54-5.64 5.54Zm-2.1-5.54c0 1.9.76 2.98 2.1 2.98s2.08-1.08 2.08-2.98-.74-2.98-2.08-2.98-2.1 1.08-2.1 2.98ZM176.712 7.9c-.16-.92-.88-1.48-1.7-1.48s-1.42.44-1.38 1.12c.06.68.8 1 1.74 1.14 3.38.52 4.82 1.38 4.82 3.36 0 2.12-1.94 3.2-4.9 3.2-3.3 0-5.3-1.34-5.48-3.62l3.48-.14c.18.92.84 1.46 1.9 1.46.7 0 1.48-.3 1.44-.94-.02-.78-.86-.98-1.82-1.16-3.28-.6-4.74-1.4-4.74-3.3 0-2.14 1.8-3.4 5.04-3.4 2.86 0 4.7 1.34 5.06 3.64l-3.46.12Z"})}));var H=n(9012),j=n(2977),G=n(5876),W=n(6530),q=n(9946),X=n(6701),Z=n.n(X);let Y=x.forwardRef((e,t)=>{let{as:n="button",children:r,className:i,selected:a,selector:s,noFocus:o,variant:l,...u}=e,c=x.useRef(null),{setCursor:d,resetCursor:p}=(0,k.j)();return(0,h.jsxs)(n,{className:(0,P.W)(Z().base,"focus",a&&Z().selected,s&&Z()["button--selector"],"unstyled"!==l&&Z().button,Z()["button--".concat(null!=l?l:"default")],o&&Z()["no-focus"],i),onPointerEnter:()=>d("pointer"),onPointerLeave:()=>p(),...u,ref:(0,W.l)([c,t]),children:[s&&(0,h.jsx)("span",{className:(0,P.W)(s&&Z().selector,s&&Z()[(0,q.hj)(s)])}),(0,h.jsx)("span",{children:r})]})});var K=n(9673),Q=n.n(K);let J=e=>{let{active:t=!0,className:n}=e,r=(0,x.useRef)(null),i=(0,x.useRef)();return(0,G.Z)(()=>{if(!r.current)return;let e=r.current.querySelectorAll("rect");return i.current=H.p8.timeline({repeat:-1,paused:!0,yoyo:!0}),i.current.fromTo(e,{attr:{height:2,y:6}},{attr:{height:"random(12, 15)",y:0},stagger:{amount:H.th/2.5,from:"random",ease:"power3.inOut"},ease:"sine.inOut",duration:H.th/2.5}),()=>{var e;null==i||null===(e=i.current)||void 0===e||e.kill()}},[]),(0,G.Z)(()=>{if(i.current)return t?i.current.play():i.current.tweenTo(0),()=>{var e;null==i||null===(e=i.current)||void 0===e||e.kill()}},[t]),(0,h.jsxs)("svg",{className:n,fill:"none",ref:r,viewBox:"0 0 22 15",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("rect",{y:"3",width:"2",height:"9",fill:"var(--color-black)"}),(0,h.jsx)("rect",{x:"5",y:"1",width:"2",height:"13",fill:"var(--color-black)"}),(0,h.jsx)("rect",{x:"10",y:"3",width:"2",height:"9",fill:"var(--color-black)"}),(0,h.jsx)("rect",{x:"15",y:"4",width:"2",height:"7",fill:"var(--color-black)"}),(0,h.jsx)("rect",{x:"20",width:"2",y:"2",height:"12",fill:"var(--color-black)"})]})},$=e=>{let{label:t,value:n,onToggle:r}=e,{setCursor:i,resetCursor:a}=(0,k.j)(),[s,o]=(0,x.useState)(!1),{activeTrack:l}=(0,j.U)(),u=(0,x.useCallback)(()=>{o(!0),i("pointer")},[i]),c=(0,x.useCallback)(()=>{o(!1),a()},[a]);return(0,h.jsxs)(Y,{id:"ui-toggle-music",onClick:r,className:(0,P.W)(Q().toggle,{[Q().active]:n}),variant:"unstyled","data-hovering":s,onPointerEnter:u,onPointerLeave:c,children:[t&&(0,h.jsx)("span",{children:t})," ",(0,h.jsx)(J,{className:Q().sound,active:!!l&&n})]})},ee=()=>{let[e,t]=(0,x.useState)(new Date);return(0,x.useEffect)(()=>{let e=window.setInterval(()=>{t(new Date)},1e3);return()=>{window.clearInterval(e)}},[]),(0,x.useCallback)(e=>{let t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),i=t<=12;return t%=12,{hours:t=(t=t||12)<10?"0"+t:t,minutes:n=n<10?"0"+n:n,seconds:r=r<10?"0"+r:r,meridiem:i?"AM":"PM"}},[])(e)};var et=n(3442),en=n(5675),er=n.n(en);let ei=x.forwardRef((e,t)=>{let{ratio:n,children:r,style:i,...a}=e;return(0,h.jsx)("div",{ref:t,style:{position:"relative",width:"100%",paddingBottom:"".concat(100/n,"%")},children:(0,h.jsx)("div",{...a,style:{...i,position:"absolute",top:0,right:0,bottom:0,left:0},children:r})})});var ea=n(6509),es=n(1737),eo=n(8879),el={blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAASFBMVEVMaXGIiIidnZ12dnZ2dnaTk5Opqam6urqioqKJiYmPj49xcXGVlZW0tLSsrKyXl5eFhYWNjY2ZmZmrq6uvr6/Dw8OwsLDS0tJ4OuL0AAAAEnRSTlMAct6dKdD8/v6RvxLx1LdPsvwgCqkEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVR4nAXBBwLAIAgAsXMgYDdq+/+fNgHSnQA2xytUL5eXyvm1qdo5lkWsTJ42nhB21ddCkNFMtf82dgIF6w4BxwAAAABJRU5ErkJggg=="},eu=n(7462);function ec(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function eh(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function ed(...e){return(0,x.useCallback)(eh(...e),e)}let ep=(null==globalThis?void 0:globalThis.document)?x.useLayoutEffect:()=>{},ef=S["useId".toString()]||(()=>void 0),em=0;function eg(e){let[t,n]=x.useState(ef());return ep(()=>{e||n(e=>null!=e?e:String(em++))},[e]),e||(t?`radix-${t}`:"")}function ev(e){let t=(0,x.useRef)(e);return(0,x.useEffect)(()=>{t.current=e}),(0,x.useMemo)(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}var e_=n(3935);let ey=(0,x.forwardRef)((e,t)=>{let{children:n,...r}=e,i=x.Children.toArray(n),a=i.find(eS);if(a){let e=a.props.children,n=i.map(t=>t!==a?t:x.Children.count(e)>1?x.Children.only(null):(0,x.isValidElement)(e)?e.props.children:null);return(0,x.createElement)(eb,(0,eu.Z)({},r,{ref:t}),(0,x.isValidElement)(e)?(0,x.cloneElement)(e,void 0,n):null)}return(0,x.createElement)(eb,(0,eu.Z)({},r,{ref:t}),n)});ey.displayName="Slot";let eb=(0,x.forwardRef)((e,t)=>{let{children:n,...r}=e;return(0,x.isValidElement)(n)?(0,x.cloneElement)(n,{...function(e,t){let n={...t};for(let r in t){let i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{a(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...a}:"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props),ref:t?eh(t,n.ref):n.ref}):x.Children.count(n)>1?x.Children.only(null):null});eb.displayName="SlotClone";let ex=({children:e})=>(0,x.createElement)(x.Fragment,null,e);function eS(e){return(0,x.isValidElement)(e)&&e.type===ex}let ew=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=(0,x.forwardRef)((e,n)=>{let{asChild:r,...i}=e,a=r?ey:t;return(0,x.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,x.createElement)(a,(0,eu.Z)({},i,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),eM="dismissableLayer.update",eE=(0,x.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eT=(0,x.forwardRef)((e,t)=>{var n;let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...c}=e,h=(0,x.useContext)(eE),[d,p]=(0,x.useState)(null),f=null!==(n=null==d?void 0:d.ownerDocument)&&void 0!==n?n:null==globalThis?void 0:globalThis.document,[,m]=(0,x.useState)({}),g=ed(t,e=>p(e)),v=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(_),b=d?v.indexOf(d):-1,S=h.layersWithOutsidePointerEventsDisabled.size>0,w=b>=y,M=function(e,t=null==globalThis?void 0:globalThis.document){let n=ev(e),r=(0,x.useRef)(!1),i=(0,x.useRef)(()=>{});return(0,x.useEffect)(()=>{let e=e=>{if(e.target&&!r.current){let r={originalEvent:e};function a(){eC("dismissableLayer.pointerDownOutside",n,r,{discrete:!0})}"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=a,t.addEventListener("click",i.current,{once:!0})):a()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,n=[...h.branches].some(e=>e.contains(t));!w||n||(null==s||s(e),null==l||l(e),e.defaultPrevented||null==u||u())},f),E=function(e,t=null==globalThis?void 0:globalThis.document){let n=ev(e),r=(0,x.useRef)(!1);return(0,x.useEffect)(()=>{let e=e=>{e.target&&!r.current&&eC("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;[...h.branches].some(e=>e.contains(t))||(null==o||o(e),null==l||l(e),e.defaultPrevented||null==u||u())},f);return!function(e,t=null==globalThis?void 0:globalThis.document){let n=ev(e);(0,x.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[n,t])}(e=>{b!==h.layers.size-1||(null==a||a(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))},f),(0,x.useEffect)(()=>{if(d)return i&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(r=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),eA(),()=>{i&&1===h.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=r)}},[d,f,i,h]),(0,x.useEffect)(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),eA())},[d,h]),(0,x.useEffect)(()=>{let e=()=>m({});return document.addEventListener(eM,e),()=>document.removeEventListener(eM,e)},[]),(0,x.createElement)(ew.div,(0,eu.Z)({},c,{ref:g,style:{pointerEvents:S?w?"auto":"none":void 0,...e.style},onFocusCapture:ec(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ec(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ec(e.onPointerDownCapture,M.onPointerDownCapture)}))});function eA(){let e=new CustomEvent(eM);document.dispatchEvent(e)}function eC(e,t,n,{discrete:r}){let i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});(t&&i.addEventListener(e,t,{once:!0}),r)?i&&(0,e_.flushSync)(()=>i.dispatchEvent(a)):i.dispatchEvent(a)}let eR="focusScope.autoFocusOnMount",eP="focusScope.autoFocusOnUnmount",eI={bubbles:!1,cancelable:!0},eL=(0,x.forwardRef)((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=e,[o,l]=(0,x.useState)(null),u=ev(i),c=ev(a),h=(0,x.useRef)(null),d=ed(t,e=>l(e)),p=(0,x.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,x.useEffect)(()=>{if(r){function e(e){if(p.paused||!o)return;let t=e.target;o.contains(t)?h.current=t:ek(h.current,{select:!0})}function t(e){if(p.paused||!o)return;let t=e.relatedTarget;null===t||o.contains(t)||ek(h.current,{select:!0})}document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&ek(o)});return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[r,o,p.paused]),(0,x.useEffect)(()=>{if(o){eD.add(p);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(eR,eI);o.addEventListener(eR,u),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let n=document.activeElement;for(let r of e)if(ek(r,{select:t}),document.activeElement!==n)return}(eO(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&ek(o))}return()=>{o.removeEventListener(eR,u),setTimeout(()=>{let t=new CustomEvent(eP,eI);o.addEventListener(eP,c),o.dispatchEvent(t),t.defaultPrevented||ek(null!=e?e:document.body,{select:!0}),o.removeEventListener(eP,c),eD.remove(p)},0)}}},[o,u,c,p]);let f=(0,x.useCallback)(e=>{if(!n&&!r||p.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[r,a]=function(e){let t=eO(e);return[eN(t,e),eN(t.reverse(),e)]}(t);r&&a?e.shiftKey||i!==a?e.shiftKey&&i===r&&(e.preventDefault(),n&&ek(a,{select:!0})):(e.preventDefault(),n&&ek(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return(0,x.createElement)(ew.div,(0,eu.Z)({tabIndex:-1},s,{ref:d,onKeyDown:f}))});function eO(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function eN(e,t){for(let n of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(n,{upTo:t}))return n}function ek(e,{select:t=!1}={}){if(e&&e.focus){var n;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(n=e)instanceof HTMLInputElement&&"select"in n&&t&&e.select()}}let eD=(i=[],{add(e){let t=i[0];e!==t&&(null==t||t.pause()),(i=eU(i,e)).unshift(e)},remove(e){var t;null===(t=(i=eU(i,e))[0])||void 0===t||t.resume()}});function eU(e,t){let n=[...e],r=n.indexOf(t);return -1!==r&&n.splice(r,1),n}let eF=(0,x.forwardRef)((e,t)=>{var n;let{container:r=null==globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body,...i}=e;return r?e_.createPortal((0,x.createElement)(ew.div,(0,eu.Z)({},i,{ref:t})),r):null}),ez=e=>{let{present:t,children:n}=e,r=function(e){var t,n;let[r,i]=(0,x.useState)(),a=(0,x.useRef)({}),s=(0,x.useRef)(e),o=(0,x.useRef)("none"),[l,u]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,x.useReducer)((e,t)=>{let r=n[e][t];return null!=r?r:e},t));return(0,x.useEffect)(()=>{let e=eB(a.current);o.current="mounted"===l?e:"none"},[l]),ep(()=>{let t=a.current,n=s.current;if(n!==e){let r=o.current,i=eB(t);e?u("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?u("UNMOUNT"):n&&r!==i?u("ANIMATION_OUT"):u("UNMOUNT"),s.current=e}},[e,u]),ep(()=>{if(r){let e=e=>{let t=eB(a.current).includes(e.animationName);e.target===r&&t&&(0,e_.flushSync)(()=>u("ANIMATION_END"))},t=e=>{e.target===r&&(o.current=eB(a.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}u("ANIMATION_END")},[r,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:(0,x.useCallback)(e=>{e&&(a.current=getComputedStyle(e)),i(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):x.Children.only(n),a=ed(r.ref,i.ref);return"function"==typeof n||r.isPresent?(0,x.cloneElement)(i,{ref:a}):null};function eB(e){return(null==e?void 0:e.animationName)||"none"}ez.displayName="Presence";let eV=0;function eH(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var ej=function(){return(ej=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function eG(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}"function"==typeof SuppressedError&&SuppressedError;var eW="right-scroll-bar-position",eq="width-before-scroll-bar",eX=(void 0===a&&(a={}),(void 0===s&&(s=function(e){return e}),o=[],l=!1,u={read:function(){if(l)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:null},useMedium:function(e){var t=s(e,l);return o.push(t),function(){o=o.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(l=!0;o.length;){var t=o;o=[],t.forEach(e)}o={push:function(t){return e(t)},filter:function(){return o}}},assignMedium:function(e){l=!0;var t=[];if(o.length){var n=o;o=[],n.forEach(e),t=o}var r=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),o={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),o}}}}).options=ej({async:!0,ssr:!1},a),u),eZ=function(){},eY=x.forwardRef(function(e,t){var n,r,i,a=x.useRef(null),s=x.useState({onScrollCapture:eZ,onWheelCapture:eZ,onTouchMoveCapture:eZ}),o=s[0],l=s[1],u=e.forwardProps,c=e.children,h=e.className,d=e.removeScrollBar,p=e.enabled,f=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,_=e.allowPinchZoom,y=e.as,b=eG(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),S=(n=[a,t],r=function(e){return n.forEach(function(t){return"function"==typeof t?t(e):t&&(t.current=e),t})},(i=(0,x.useState)(function(){return{value:null,callback:r,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=r,i.facade),w=ej(ej({},b),o);return x.createElement(x.Fragment,null,p&&x.createElement(m,{sideCar:eX,removeScrollBar:d,shards:f,noIsolation:g,inert:v,setCallbacks:l,allowPinchZoom:!!_,lockRef:a}),u?x.cloneElement(x.Children.only(c),ej(ej({},w),{ref:S})):x.createElement(void 0===y?"div":y,ej({},w,{className:h,ref:S}),c))});eY.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},eY.classNames={fullWidth:eq,zeroRight:eW};var eK=function(e){var t=e.sideCar,n=eG(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw Error("Sidecar medium not found");return x.createElement(r,ej({},n))};eK.isSideCarExport=!0;var eQ=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=c||n.nc;return t&&e.setAttribute("nonce",t),e}())){var i,a;(i=t).styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eJ=function(){var e=eQ();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},e$=function(){var e=eJ();return function(t){return e(t.styles,t.dynamic),null}},e0={left:0,top:0,right:0,gap:0},e1=function(e){return parseInt(e||"",10)||0},e2=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[e1(n),e1(r),e1(i)]},e3=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return e0;var t=e2(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},e4=e$(),e5=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(eW," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(eq," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(eW," .").concat(eW," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(eq," .").concat(eq," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},e7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r,a=x.useMemo(function(){return e3(i)},[i]);return x.createElement(e4,{styles:e5(a,!t,i,n?"":"!important")})},e8=!1;if("undefined"!=typeof window)try{var e6=Object.defineProperty({},"passive",{get:function(){return e8=!0,!0}});window.addEventListener("test",e6,e6),window.removeEventListener("test",e6,e6)}catch(e){e8=!1}var e9=!!e8&&{passive:!1},te=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===n[t])},tt=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),tn(e,n)){var r=tr(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},tn=function(e,t){return"v"===e?te(t,"overflowY"):te(t,"overflowX")},tr=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},ti=function(e,t,n,r,i){var a,s=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),o=s*r,l=n.target,u=t.contains(l),c=!1,h=o>0,d=0,p=0;do{var f=tr(e,l),m=f[0],g=f[1]-f[2]-s*m;(m||g)&&tn(e,l)&&(d+=g,p+=m),l=l.parentNode}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return h&&(i&&0===d||!i&&o>d)?c=!0:!h&&(i&&0===p||!i&&-o>p)&&(c=!0),c},ta=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ts=function(e){return[e.deltaX,e.deltaY]},to=function(e){return e&&"current"in e?e.current:e},tl=0,tu=[],tc=(eX.useMedium(function(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(tl++)[0],a=x.useState(function(){return e$()})[0],s=x.useRef(e);x.useEffect(function(){s.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(to),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=x.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var i,a=ta(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-a[0],u="deltaY"in e?e.deltaY:o[1]-a[1],c=e.target,h=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===h&&"range"===c.type)return!1;var d=tt(h,c);if(!d)return!0;if(d?i=h:(i="v"===h?"h":"v",d=tt(h,c)),!d)return!1;if(!r.current&&"changedTouches"in e&&(l||u)&&(r.current=i),!i)return!0;var p=r.current||i;return ti(p,t,e,"h"===p?l:u,!0)},[]),l=x.useCallback(function(e){if(tu.length&&tu[tu.length-1]===a){var n="deltaY"in e?ts(e):ta(e),r=t.current.filter(function(t){var r;return t.name===e.type&&t.target===e.target&&(r=t.delta)[0]===n[0]&&r[1]===n[1]})[0];if(r&&r.should){e.cancelable&&e.preventDefault();return}if(!r){var i=(s.current.shards||[]).map(to).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?o(e,i[0]):!s.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),u=x.useCallback(function(e,n,r,i){var a={name:e,delta:n,target:r,should:i};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),c=x.useCallback(function(e){n.current=ta(e),r.current=void 0},[]),h=x.useCallback(function(t){u(t.type,ts(t),t.target,o(t,e.lockRef.current))},[]),d=x.useCallback(function(t){u(t.type,ta(t),t.target,o(t,e.lockRef.current))},[]);x.useEffect(function(){return tu.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,e9),document.addEventListener("touchmove",l,e9),document.addEventListener("touchstart",c,e9),function(){tu=tu.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,e9),document.removeEventListener("touchmove",l,e9),document.removeEventListener("touchstart",c,e9)}},[]);var p=e.removeScrollBar,f=e.inert;return x.createElement(x.Fragment,null,f?x.createElement(a,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?x.createElement(e7,{gapMode:"margin"}):null)}),eK),th=x.forwardRef(function(e,t){return x.createElement(eY,ej({},e,{ref:t,sideCar:tc}))});th.classNames=eY.classNames;var td=new WeakMap,tp=new WeakMap,tf={},tm=0,tg=function(e){return e&&(e.host||tg(e.parentNode))},tv=function(e,t,n,r){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var n=tg(e);return n&&t.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});tf[n]||(tf[n]=new WeakMap);var a=tf[n],s=[],o=new Set,l=new Set(i),u=function(e){!e||o.has(e)||(o.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))c(e);else{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(td.get(e)||0)+1,u=(a.get(e)||0)+1;td.set(e,l),a.set(e,u),s.push(e),1===l&&i&&tp.set(e,!0),1===u&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}})};return c(t),o.clear(),tm++,function(){s.forEach(function(e){var t=td.get(e)-1,i=a.get(e)-1;td.set(e,t),a.set(e,i),t||(tp.has(e)||e.removeAttribute(r),tp.delete(e)),i||e.removeAttribute(n)}),--tm||(td=new WeakMap,td=new WeakMap,tp=new WeakMap,tf={})}},t_=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),tv(r,i,n,"aria-hidden")):function(){return null}};let ty="Dialog",[tb,tx]=function(e,t=[]){let n=[],r=()=>{let t=n.map(e=>(0,x.createContext)(e));return function(n){let r=(null==n?void 0:n[e])||t;return(0,x.useMemo)(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){let i=(0,x.createContext)(r),a=n.length;function s(t){let{scope:n,children:r,...s}=t,o=(null==n?void 0:n[e][a])||i,l=(0,x.useMemo)(()=>s,Object.values(s));return(0,x.createElement)(o.Provider,{value:l},r)}return n=[...n,r],s.displayName=t+"Provider",[s,function(n,s){let o=(null==s?void 0:s[e][a])||i,l=(0,x.useContext)(o);if(l)return l;if(void 0!==r)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return(0,x.useMemo)(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}(r,...t)]}(ty),[tS,tw]=tb(ty),tM=(0,x.forwardRef)((e,t)=>{let{__scopeDialog:n,...r}=e,i=tw("DialogTrigger",n),a=ed(t,i.triggerRef);return(0,x.createElement)(ew.button,(0,eu.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tD(i.open)},r,{ref:a,onClick:ec(e.onClick,i.onOpenToggle)}))}),tE="DialogPortal",[tT,tA]=tb(tE,{forceMount:void 0}),tC="DialogOverlay",tR=(0,x.forwardRef)((e,t)=>{let n=tA(tC,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=tw(tC,e.__scopeDialog);return a.modal?(0,x.createElement)(ez,{present:r||a.open},(0,x.createElement)(tP,(0,eu.Z)({},i,{ref:t}))):null}),tP=(0,x.forwardRef)((e,t)=>{let{__scopeDialog:n,...r}=e,i=tw(tC,n);return(0,x.createElement)(th,{as:ey,allowPinchZoom:!0,shards:[i.contentRef]},(0,x.createElement)(ew.div,(0,eu.Z)({"data-state":tD(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),tI="DialogContent",tL=(0,x.forwardRef)((e,t)=>{let n=tA(tI,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=tw(tI,e.__scopeDialog);return(0,x.createElement)(ez,{present:r||a.open},a.modal?(0,x.createElement)(tO,(0,eu.Z)({},i,{ref:t})):(0,x.createElement)(tN,(0,eu.Z)({},i,{ref:t})))}),tO=(0,x.forwardRef)((e,t)=>{let n=tw(tI,e.__scopeDialog),r=(0,x.useRef)(null),i=ed(t,n.contentRef,r);return(0,x.useEffect)(()=>{let e=r.current;if(e)return t_(e)},[]),(0,x.createElement)(tk,(0,eu.Z)({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ec(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:ec(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:ec(e.onFocusOutside,e=>e.preventDefault())}))}),tN=(0,x.forwardRef)((e,t)=>{let n=tw(tI,e.__scopeDialog),r=(0,x.useRef)(!1),i=(0,x.useRef)(!1);return(0,x.createElement)(tk,(0,eu.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,s;null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented||(r.current||null===(s=n.triggerRef.current)||void 0===s||s.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var a,s;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let o=t.target;(null===(s=n.triggerRef.current)||void 0===s?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))}),tk=(0,x.forwardRef)((e,t)=>{let{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=e,o=tw(tI,n),l=ed(t,(0,x.useRef)(null));return(0,x.useEffect)(()=>{var e,t;let n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:eH()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:eH()),eV++,()=>{1===eV&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),eV--}},[]),(0,x.createElement)(x.Fragment,null,(0,x.createElement)(eL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a},(0,x.createElement)(eT,(0,eu.Z)({role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":tD(o.open)},s,{ref:l,onDismiss:()=>o.onOpenChange(!1)}))),!1)});function tD(e){return e?"open":"closed"}let[tU,tF]=function(e,t){let n=(0,x.createContext)(t);function r(e){let{children:t,...r}=e,i=(0,x.useMemo)(()=>r,Object.values(r));return(0,x.createElement)(n.Provider,{value:i},t)}return r.displayName=e+"Provider",[r,function(r){let i=(0,x.useContext)(n);if(i)return i;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}("DialogTitleWarning",{contentName:tI,titleName:"DialogTitle",docsSlug:"dialog"}),tz=e=>{let{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!0}=e,o=(0,x.useRef)(null),l=(0,x.useRef)(null),[u=!1,c]=function({prop:e,defaultProp:t,onChange:n=()=>{}}){let[r,i]=function({defaultProp:e,onChange:t}){let n=(0,x.useState)(e),[r]=n,i=(0,x.useRef)(r),a=ev(t);return(0,x.useEffect)(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}({defaultProp:t,onChange:n}),a=void 0!==e,s=a?e:r,o=ev(n);return[s,(0,x.useCallback)(t=>{if(a){let n="function"==typeof t?t(e):t;n!==e&&o(n)}else i(t)},[a,e,i,o])]}({prop:r,defaultProp:i,onChange:a});return(0,x.createElement)(tS,{scope:t,triggerRef:o,contentRef:l,contentId:eg(),titleId:eg(),descriptionId:eg(),open:u,onOpenChange:c,onOpenToggle:(0,x.useCallback)(()=>c(e=>!e),[c]),modal:s},n)},tB=e=>{let{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=tw(tE,t);return(0,x.createElement)(tT,{scope:t,forceMount:n},x.Children.map(r,e=>(0,x.createElement)(ez,{present:n||a.open},(0,x.createElement)(eF,{asChild:!0,container:i},e))))};var tV=n(395),tH=n.n(tV);let tj=e=>{let{children:t,triggerChildren:n,headerChildren:r,onOpenChange:i,open:a}=e;return(0,h.jsxs)(tz,{onOpenChange:e=>{null==i||i(e)},open:a,modal:!1,children:[n&&(0,h.jsx)(tM,{asChild:!0,children:n}),(0,h.jsxs)(tB,{children:[(0,h.jsx)(tR,{className:tH().overlay}),(0,h.jsxs)(tL,{className:tH().content,children:[(0,h.jsx)("div",{className:tH().content__header,children:r}),(0,h.jsx)("div",{className:tH().content__children,children:t})]})]})]})};var tG=n(1845),tW=n.n(tG);let tq=()=>{var e;let{open:t,close:n,isOpen:r}=(0,es.ef)(),i=(0,x.useRef)(null),a=(0,x.useRef)(null),{data:s}=(0,es.CM)(),o=(0,es.K7)(),l=(0,x.useRef)(),u=(0,x.useMemo)(()=>(null!=o?o:0)<=0?"empty":"ok",[o]);(0,G.Z)(()=>{if(!i.current)return;let e=i.current.querySelector("#open"),t=i.current.querySelector(".".concat(tW().close)),n=H.p8.timeline({paused:!0,smoothChildTiming:!0,defaults:{duration:H.th/3,ease:"power3.inOut"}});n.fromTo(e,{yPercent:0},{yPercent:-110}),n.fromTo(t,{yPercent:0},{yPercent:-100},"<50%"),l.current=n},[]),(0,G.Z)(()=>{var e,t;i.current&&(i.current.onmouseenter=()=>{if(r){var e;null===(e=i.current)||void 0===e||e.classList.add("active")}},r?(i.current.classList.add("active"),null===(e=l.current)||void 0===e||e.play()):null===(t=l.current)||void 0===t||t.reverse().then(()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.classList.remove("active")}))},[r]);let{setCursor:c,resetCursor:d}=(0,k.j)();return(0,h.jsx)(tj,{title:"YOUR CART",onOpenChange:e=>{e?t():n()},open:r,triggerChildren:(0,h.jsx)("button",{ref:i,type:"button",className:(0,P.W)("link",tW()["cart-toggle"]),children:(0,h.jsxs)("span",{className:tW().children,onPointerEnter:()=>c("pointer"),onPointerLeave:()=>d(),children:[(0,h.jsxs)("span",{id:"open",children:["Cart(",o,")"]}),(0,h.jsx)("span",{className:tW().close,children:"Close X"})]})}),children:(0,h.jsxs)("div",{className:tW().container,children:[(0,h.jsxs)("p",{className:tW()["cart-quantity"],children:["Cart(",o,")"]}),(0,h.jsx)("div",{className:tW().content,children:(0,h.jsxs)("div",{className:(0,P.W)(tW()["content-scroll"],"ok"!==u&&tW().empty),children:["ok"===u&&(null==s?void 0:s.lines.edges.map(e=>{let{node:t}=e;return(0,h.jsx)(tZ,{data:t,subtotalPriceRef:a},t.id)})),(0,h.jsx)("div",{className:(0,P.W)(tW()["empty-state"],"ok"!==u&&tW().visible),children:(0,h.jsx)("div",{children:(0,h.jsx)("p",{children:"The cart is empty."})})})]})}),(0,h.jsx)("div",{className:tW().footer,children:(0,h.jsx)("div",{className:tW().checkout__container,children:"ok"!==u?(0,h.jsx)(Y,{className:tW().checkout__button,onClick:n,children:(0,h.jsxs)("span",{className:tW().children,children:["Go shop ",(0,h.jsx)(tX,{})]})}):(0,h.jsx)("a",{href:null==s?void 0:s.checkoutUrl,className:tW().checkout__button,children:(0,h.jsxs)("span",{className:tW().children,children:[(0,h.jsxs)("span",{ref:a,className:tW().subtotal,children:["[",(0,eo.T4)(null!==(e=null==s?void 0:s.cost.subtotalAmount.amount)&&void 0!==e?e:0),"]"]}),(0,h.jsxs)("span",{className:tW().copy,children:["Checkout ",(0,h.jsx)(tX,{})]})]})})})})]})})},tX=()=>(0,h.jsx)("svg",{className:tW().arrow,width:"9",height:"8",viewBox:"0 0 9 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M6.94 2.44 1.844 7.536.85 6.528l5.082-5.082H1.9L3.146.199999h5.04V5.24l-1.26 1.246.014-4.046Z",fill:"#F6F6F6"})});function tZ(e){var t,n,r,i,a,s;let{data:o,subtotalPriceRef:l}=e,u=(0,x.useRef)(null),{mutate:c,isLoading:d}=(0,es.U)(),{mutate:p,isLoading:f}=(0,es.mJ)(),m=(0,x.useMemo)(()=>{if(ea.VW.some(e=>e.shopifyId===o.merchandise.product.id))return(0,q.mA)(I.aO.find(e=>{var t;return(null===(t=o.merchandise.selectedOptions.find(e=>"color"===e.name.toLowerCase()))||void 0===t?void 0:t.value.toLocaleLowerCase())===e.toLowerCase()}))},[o.merchandise.product.id,o.merchandise.selectedOptions]),g=(0,x.useMemo)(()=>o.merchandise.product.totalInventory===o.quantity,[o.merchandise.product.totalInventory,o.quantity]),v=(0,x.useCallback)(async()=>{p([{merchandiseId:o.id,quantity:o.quantity+1}])},[o.id,o.quantity,p]),_=(0,x.useCallback)(async()=>{c([o.id])},[o.id,c]),y=(0,x.useCallback)(async()=>{if(o.quantity<=1)return await _();p([{merchandiseId:o.id,quantity:o.quantity-1}])},[o.id,o.quantity,_,p]);(0,G.Z)(()=>{if(!l.current)return;let e=l.current;return f||d?e.classList.add(tW().changing):e.classList.remove(tW().changing),()=>{e.classList.remove(tW().changing)}},[d,f,l]);let b=(0,x.useMemo)(()=>o.merchandise.product.title,[o.merchandise.product.title]),S=(0,x.useMemo)(()=>o.merchandise.image,[o.merchandise.image]);return(0,G.Z)(()=>{var e,t,n,r;let i=document.createElement("div");i.innerHTML=o.merchandise.product.descriptionHtml;let a=i.querySelector("#information");null===(t=u.current)||void 0===t||null===(e=t.firstChild)||void 0===e||e.remove(),a?null===(n=u.current)||void 0===n||n.appendChild(a):null===(r=u.current)||void 0===r||r.appendChild(i)},[o.merchandise.product.descriptionHtml]),(0,h.jsxs)("div",{className:(0,P.W)(tW()["cart-product"],d&&tW().removing),children:[(0,h.jsx)("div",{className:tW().image__container,children:(0,h.jsx)(ei,{ratio:1,children:S&&(0,h.jsx)(er(),{className:tW().image,src:null!==(r=null==S?void 0:S.url)&&void 0!==r?r:"",width:null!==(i=null==S?void 0:S.width)&&void 0!==i?i:1,height:null!==(a=null==S?void 0:S.height)&&void 0!==a?a:1,alt:null!==(s=null==S?void 0:S.altText)&&void 0!==s?s:"",blurDataURL:el.blurDataURL})})}),(0,h.jsxs)("div",{className:tW()["cart-product__content"],children:[(0,h.jsx)("h3",{className:tW().title,children:b}),(0,h.jsx)("div",{ref:u,className:tW().description}),(0,h.jsxs)("div",{className:tW()["product-details"],children:[(0,h.jsxs)("div",{className:tW().left,children:[(0,h.jsxs)("p",{className:tW().color,children:[(0,h.jsx)("span",{className:tW().label,"aria-label":"color: ",children:"C:"}),(0,h.jsxs)("span",{className:tW().value,children:[(0,h.jsx)("span",{className:(0,P.W)(tW()["color-box"],m&&tW()[m])}),(0,h.jsx)("span",{className:tW().name,children:null===(t=o.merchandise.selectedOptions.find(e=>"color"===e.name.toLowerCase()))||void 0===t?void 0:t.value})]})]}),(0,h.jsxs)("p",{className:tW().size,children:[(0,h.jsx)("span",{className:tW().label,"aria-label":"size: ",children:"S:"})," ",(0,h.jsx)("span",{className:tW().value,children:null===(n=o.merchandise.selectedOptions.find(e=>"size"===e.name.toLowerCase()))||void 0===n?void 0:n.value})]}),(0,h.jsxs)("p",{className:tW().price,children:[(0,h.jsx)("span",{className:tW().label,"aria-label":"price: ",children:"P:"}),(0,h.jsx)("span",{className:tW().value,children:(0,eo.T4)(o.merchandise.product.priceRange.minVariantPrice.amount)})]})]}),(0,h.jsxs)("div",{className:tW().quantity,children:[(0,h.jsx)(Y,{type:"button",className:tW().quantity__button,onClick:y,variant:"unstyled",disabled:d,"aria-label":"Remove one",children:(0,h.jsx)("span",{className:(0,P.W)(tW().symbol,tW().minus),children:"-"})}),(0,h.jsx)("p",{className:(0,P.W)(tW().quantity__value,f&&tW().updating),children:(0,h.jsx)("span",{className:tW().value,children:(0,q.Bu)(o.quantity,2)})}),(0,h.jsx)(Y,{type:"button",className:tW().quantity__button,onClick:v,variant:"unstyled","aria-label":"Add one",disabled:f||g||!o.merchandise.availableForSale,children:(0,h.jsx)("span",{className:tW().symbol,children:"+"})})]})]})]})]})}var tY=n(3911),tK=n.n(tY);let tQ=()=>{let[e,t]=(0,x.useState)(!1);(0,x.useEffect)(()=>{I.C5&&t(!0)},[t]);let n=ee(),r=(0,x.useMemo)(()=>{let e=new Date,t=e.getDate(),n=e.getMonth(),r=e.getFullYear().toString().substring(2);return"".concat(n+1,".").concat(t,".").concat(r)},[]);return e?(0,h.jsxs)("div",{className:(0,P.W)(tK()["date-and-time"]),children:[(0,h.jsxs)("p",{className:(0,P.W)(tK().date),children:["BKLYN, ",r,"\xa0"]}),(0,h.jsxs)("p",{className:(0,P.W)(tK().time),suppressHydrationWarning:!0,children:[n.hours,":",n.minutes,":",n.seconds," ",n.meridiem]})]}):null};var tJ=()=>{let{toggleSound:e,isPlaying:t}=(0,j.U)(),[n,r]=(0,x.useState)(!1);return(0,G.Z)(()=>{B.tq||r(!0)},[]),(0,h.jsx)("header",{className:(0,P.W)(tK().header),id:"header",children:(0,h.jsxs)("div",{className:(0,P.W)(tK().wrapper,"container"),children:[(0,h.jsx)(tQ,{}),(0,h.jsx)(N(),{className:tK().logo,href:"/",children:(0,h.jsx)(V,{})}),(0,h.jsxs)("nav",{className:tK().nav,children:[(0,h.jsx)(et.yv.Out,{}),n&&(0,h.jsx)($,{label:"Music",onToggle:e,value:t}),(0,h.jsx)(tq,{})]})]})})},t$=n(9354);let t0=()=>null;var t1=n(5152),t2=n.n(t1),t3=n(8815),t4=n(743),t5=n(8977),t7=n(7500),t8=n.n(t7),t6=()=>{let e=(0,x.useRef)(null),t=(0,t4.R)(),{activeLandScape:n,setActiveLandScape:r,animationOpen:i,setAnimationOpen:a}=(0,t3.q)(),s=(0,x.useCallback)(e=>{r(e)},[r]),o=(0,x.useCallback)(()=>{a(!i)},[i,a]);return(0,t5.z)([{keys:["Space","space"],callback:o}]),(0,t5.z)([{keys:["l"],callback:()=>s(!0)}]),(0,t5.z)([{keys:["p"],callback:()=>s(!1)}]),(0,G.Z)(()=>{if(!e.current)return;let n=null;return n=t?H.p8.fromTo(e.current,{autoAlpha:0,yPercent:-100},{autoAlpha:1,yPercent:0,delay:H.th,duration:3*H.th}):H.p8.fromTo(e.current,{autoAlpha:1,yPercent:0},{autoAlpha:0,yPercent:-100,duration:2*H.th}),()=>{null==n||n.kill()}},[t]),(0,h.jsx)("div",{ref:e,className:(0,P.W)(t8().controls,"container"),children:(0,h.jsxs)("nav",{className:t8().nav,children:[(0,h.jsxs)("ul",{className:t8().selector,children:[(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>s(!1),selected:!n,title:"Press (P) to switch to portrait mode",children:"Portrait"})}),(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>s(!0),selected:n,title:"Press (L) to switch to portrait mode",children:"Landscape"})})]}),(0,h.jsx)("ul",{className:t8().selector,children:(0,h.jsxs)(Y,{className:t8()["toggle-button"],noFocus:!0,onClick:o,title:"Press (Space) to open/close bag",children:[i?"Close":"Open"," Bag"]})})]})})},t9=n(1804),ne=n.n(t9),nt=n(1163),nn=n(2733),nr=n(2869),ni=n(2453),na=n(3608),ns=n(8785),no=n(706),nl=n.n(no);let nu=e=>{var t,n,r;let{products:i,r3fProps:a,openCart:s}=e,[o,l]=(0,x.useState)(()=>{var e;return null!==(e=i[0].title.match(/\[([^\]]+)\]/)[1])&&void 0!==e?e:""}),u=(0,x.useRef)(null),c=(0,nt.useRouter)(),{setActiveLandScape:d,setAnimationOpen:p}=(0,t3.q)(),{activeTexture:f=0,setActiveTexture:m}=(0,nr.J)(null!==(t=ne()(a.title))&&void 0!==t?t:""),{activeTexture:g=0,setActiveTexture:v}=(0,na.$)(null!==(n=ne()(a.title))&&void 0!==n?n:""),{activeTexture:_=0,setActiveTexture:y}=(0,ni.g)(null!==(r=ne()(a.title))&&void 0!==r?r:""),{setCursor:b,resetCursor:S}=(0,k.j)(),{mutate:w,isLoading:M}=(0,es.Cf)(),{data:E}=(0,es.CM)({createCartIfNotFound:!0}),T=(0,x.useMemo)(()=>o?i.find(e=>e.title.includes("[".concat(o,"]"))):i[0],[i,o]),{selectedOptions:A,selectedVariant:C,optionsToSelect:R,handleSelectOption:L}=(0,es.TS)(T);(0,x.useEffect)(()=>{var e,t,n,r,i,a;if(!T)return;let s=null==T?void 0:T.metafields.find(e=>(null==e?void 0:e.key)==="details");if(s){let r=document.createElement("p");r.innerText=s.value,null===(t=u.current)||void 0===t||null===(e=t.firstChild)||void 0===e||e.remove(),null===(n=u.current)||void 0===n||n.appendChild(r)}else{let e=document.createElement("p");e.innerText="",null===(i=u.current)||void 0===i||null===(r=i.firstChild)||void 0===r||r.remove(),null===(a=u.current)||void 0===a||a.appendChild(e)}},[i,T]),(0,x.useEffect)(()=>{j&&j.length>0&&O(j[0].value)},[T]);let O=(0,x.useCallback)(e=>{L("Size",e)},[L]),N=(0,x.useCallback)(e=>{l(e)},[l]),D=(0,x.useMemo)(()=>i[0],[i]),U=(0,x.useMemo)(()=>D.title.includes(I.N3.miniKissingBag)?0:D.title.includes(I.N3.kissingBag)?1:0,[D]),F=(0,x.useCallback)(()=>{"/store"!==c.pathname&&(p(!1),d(!1),c.push("/store"))},[c,d,p]);(0,t5.z)([{keys:["Escape","esc"],callback:F}]);let z=(0,x.useMemo)(()=>a.title,[a]),B=(0,x.useMemo)(()=>!i.some(e=>e.availableForSale),[i]),V=(0,x.useMemo)(()=>{var e;return null!==(e=null==D?void 0:D.priceRange.minVariantPrice.amount)&&void 0!==e?e:0},[D]),H=(0,x.useMemo)(()=>{var e;return null!==(e=a.colors)&&void 0!==e?e:[]},[a]),j=(0,x.useMemo)(()=>{var e,t;return R?null!==(t=null===(e=R.find(e=>"Size"===e.name))||void 0===e?void 0:e.values)&&void 0!==t?t:void 0:[]},[R]),G=(0,x.useCallback)(()=>{if(B||!C)return;let e=C.id;w([{merchandiseId:e,quantity:1}],{onSuccess(){s(),E&&(0,ns.m8)({cartId:E.id,pageType:"Product",totalValue:parseFloat(E.cost.subtotalAmount.amount),resourceId:e})}})},[B,E,w,s,C]),W=(0,x.useCallback)(()=>H?a.title===I.N3.kissingBag||a.title===I.N3.miniKissingBag?H.map((e,t)=>{let n=I.aO[t];return(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>{N(e),m(t+1)},selector:n,selected:f===t+1,children:(0,q.mA)(n)})},t)}):a.title===I.N3.lowBootsWithSwirls?H.map((e,t)=>{let n=I.TY[t];return(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>{N(e),v(t+1)},selector:n,selected:g===t+1,children:(0,q.mA)(n)})},t)}):a.title===I.N3.kissingPuffer?H.map((e,t)=>{let n=I.Q$[t];return(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>{N(e),y(t+1)},selector:n,selected:_===t+1,children:(0,q.mA)(n)})},t)}):H?H.map((e,t)=>(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>N(e),selected:o===e,children:e})},t)):void 0:null,[H,a.title,f,N,m,g,v,_,y,o]),X=(0,x.useCallback)(()=>a.title===I.N3.kissingBag||a.title===I.N3.miniKissingBag?(0,h.jsx)("p",{children:I.lH[U]}):j?(0,h.jsx)("ul",{children:j.map((e,t)=>{let{value:n,disabled:r}=e;return(0,h.jsx)("li",{children:(0,h.jsx)(Y,{onClick:()=>O(n),selected:A.Size===n,disabled:r,children:n})},t)})}):void 0,[a,j,U,A,O]);return(0,h.jsxs)("div",{className:nl().product__information,children:[(0,h.jsxs)("div",{className:(0,P.W)(nl().product__stack,nl().name),children:[(0,h.jsx)("div",{className:nl()["stack-name"],children:(0,h.jsxs)("button",{className:nl()["go-back-button"],onClick:F,onPointerEnter:()=>b("pointer"),onPointerLeave:()=>S(),children:[(0,h.jsx)(nc,{}),(0,h.jsx)("span",{children:"Back"})]})}),(0,h.jsx)("div",{className:nl()["stack-content"],children:(0,h.jsx)("p",{children:(0,h.jsx)("b",{children:z})})})]}),H&&(null==H?void 0:H.length)>0&&(0,h.jsxs)("div",{className:(0,P.W)(nl().product__stack,nl().color),children:[(0,h.jsx)("div",{className:nl()["stack-name"],children:(0,h.jsxs)("p",{className:nl().gray,children:[(0,h.jsx)("span",{className:"desktop-only",children:"SELECT "}),"COLOR"]})}),(0,h.jsx)("div",{className:nl()["stack-content"],children:(0,h.jsx)("ul",{children:W()})})]}),(0,h.jsxs)("div",{className:(0,P.W)(nl().product__stack,nl().size),children:[(0,h.jsx)("div",{className:nl()["stack-name"],children:(0,h.jsx)("p",{className:nl().gray,children:"SIZE"})}),(0,h.jsx)("div",{className:nl()["stack-content"],children:(0,h.jsx)("ul",{children:X()})})]}),(0,h.jsxs)("div",{className:(0,P.W)(nl().product__stack,nl().price),children:[(0,h.jsx)("div",{className:nl()["stack-name"],children:(0,h.jsx)("p",{className:nl().gray,children:"PRICE"})}),(0,h.jsx)("div",{className:nl()["stack-content"],children:(0,h.jsxs)("p",{children:["USD $",(0,q.T4)(V)]})})]}),(0,h.jsxs)("div",{className:(0,P.W)(nl().product__stack,nl().details),children:[(0,h.jsx)("div",{className:nl()["stack-name"],children:(0,h.jsx)("p",{className:nl().gray,children:"DETAILS"})}),(0,h.jsx)("div",{ref:u,className:(0,P.W)(nl()["stack-content"],nl()["semi-mono"])})]}),(0,h.jsx)("div",{className:nl().cart,children:(0,h.jsx)(Y,{variant:"invert",onClick:G,disabled:null==B||B,children:B?"Sold out":(0,h.jsx)(h.Fragment,{children:M?"addding...":"Add to cart "})})})]})},nc=()=>(0,h.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsx)("path",{d:"M12.6663 8H3.33301",stroke:"black",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,h.jsx)("path",{d:"M7.99967 12.6663L3.33301 7.99967L7.99967 3.33301",stroke:"black",strokeWidth:"1.5",strokeLinejoin:"round"})]});var nh=()=>{let e=(0,x.useRef)(null),t=(0,t4.R)(),n=(0,x.useRef)(!1),r=(0,x.useRef)(),{open:i,isOpen:a}=(0,es.ef)(),s=(0,nn.i)(e=>e.isInTransition),o=t&&(!B.tq||!s);return(0,G.Z)(()=>{if(!e.current)return;let t=H.p8.timeline({paused:!0,defaults:{ease:"none"}}),n=B.tq?"yPercent":"xPercent";return t.fromTo(e.current,{autoAlpha:0,[n]:100},{autoAlpha:1,[n]:0}),r.current=t,()=>{t.kill()}},[]),(0,G.Z)(()=>{if(!r.current)return;let e=r.current,t=null;return o?a?(t=H.p8.to(e,{time:0,ease:H.QE,duration:H.th,overwrite:!0}),n.current=!0):(t=H.p8.to(e,{time:e.duration(),ease:H.QE,duration:n.current?.3:2*H.th,delay:2.25*H.th}),n.current=!1):t=H.p8.to(e,{time:0,ease:H.QE,duration:2*H.th,overwrite:!0}),()=>{null==t||t.kill()}},[o,a]),(0,h.jsx)("div",{ref:e,id:"product-drawer",className:nl().product,children:t?(0,h.jsx)(nu,{products:t.products,r3fProps:t._productR3FGroupProps,openCart:i}):null})},nd=n(843),np=n.n(nd);let nf=H.th/2,nm=x.forwardRef((e,t)=>{let{children:n,className:r,disableFadeIn:i,id:a,onBlur:s,timeline:o,contain:l=!0,style:u,inViewTriggerOnce:c=!0,inViewCallback:d}=e,p=x.useRef(null),{loaderEnded:f}=(0,t3.q)(),[m,g]=x.useState(!1);return x.useEffect(()=>{if(i)return;let e=p.current;if(!e)return;let t=new IntersectionObserver(e=>{let[t]=e;t&&g(e=>!!c&&!0===e||t.isIntersecting)},{rootMargin:"-2% 0%"});return t.observe(e),()=>{t.disconnect()}},[i,c]),(0,G.Z)(()=>{if(!m||!p.current||!f||i)return;let e=H.p8.timeline({autoRemoveChildren:!0,paused:!0,smoothChildTiming:!0,onComplete:()=>{o&&o.play()}});return e.to(p.current,{autoAlpha:1,duration:nf}),e.play(),()=>{e.kill()}},[i,m,f,o]),(0,G.Z)(()=>{"function"==typeof d&&p.current&&d(m)},[m,d]),(0,h.jsx)("section",{className:(0,P.W)(l&&"container",np().section,r),id:a,onBlur:s,ref:(0,W.l)([p,t]),style:{...u,opacity:i?void 0:0},children:n})});var ng=n(4640),nv=n.n(ng),n_=()=>(0,h.jsx)(nm,{className:nv().section,disableFadeIn:!0,children:(0,h.jsx)("div",{className:nv().wrapper})}),ny=n(1497);n(3393),n(1166),n(4648);let nb=t2()(()=>Promise.all([n.e(409),n.e(818),n.e(608)]).then(n.bind(n,1608)),{loadableGenerated:{webpack:()=>[1608]},ssr:!1}),nx=t2()(()=>n.e(102).then(n.bind(n,8102)),{loadableGenerated:{webpack:()=>[8102]},ssr:!1}),nS=e=>{let{children:t,productsCollection:n}=e,r=(0,x.useRef)(null),i=(0,t4.R)();(0,ny.w)(),(0,ea.QZ)(n);let a=(0,x.useMemo)(()=>!!i&&0!==i.products.length&&i._productR3FGroupProps.title===I.N3.kissingBag,[i]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("main",{ref:r,children:[a&&(0,h.jsx)(t6,{}),(0,h.jsx)(nb,{eventHandler:r}),(0,h.jsx)(n_,{}),t,(0,h.jsx)(et.Ov.Out,{})]}),(0,h.jsx)(nx,{}),(0,h.jsx)(nh,{})]})};var nw=n(4298),nM=n.n(nw);let nE=e=>{if(!window.gtag){console.warn("window.gtag is not defined");return}window.gtag("config",I.V7,{page_path:e})},nT=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(nM(),{strategy:"afterInteractive",async:!0,src:"https://www.googletagmanager.com/gtag/js?id=".concat(I.V7)}),(0,h.jsx)(nM(),{id:"ga-script",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:"window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', '".concat(I.V7,"');")}})]}),nA=()=>{let e=(0,nt.useRouter)();x.useEffect(()=>{let t=e=>{nE(e)};return e.events.on("routeChangeComplete",t),()=>{e.events.off("routeChangeComplete",t)}},[e.events])};var nC=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{position:"fixed",width:1,height:"100vh",left:"50%",top:0,background:"red",zIndex:1e3,pointerEvents:"none"}}),(0,h.jsx)("div",{style:{position:"fixed",width:"100vw",height:1,top:"50%",left:0,background:"red",zIndex:1e3,pointerEvents:"none"}})]});I.BB&&I.C5&&console.log(I.oW);let nR=new y.S,nP=()=>{x.useEffect(()=>{function e(e){"Tab"===e.code&&document.body.classList.add("user-is-tabbing")}function t(){document.body.classList.remove("user-is-tabbing")}return window.addEventListener("keydown",e),window.addEventListener("mousedown",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("mousedown",t)}},[])},nI=()=>{x.useEffect(()=>{let e=window.setTimeout(()=>{t()},1500);function t(){window.clearTimeout(e),t3.q.setState({fontsLoaded:!0}),document.documentElement.classList.add("fonts-loaded")}try{document.fonts.ready.then(()=>{t()}).catch(e=>{console.error(e),t()})}catch(e){console.error(e),t()}},[])},nL=()=>{(0,G.Z)(()=>{H.p8.ticker.lagSmoothing(0),H.p8.ticker.remove(H.p8.updateRoot);let e=(0,_.n)(e=>{H.p8.updateRoot(e/1e3)});return()=>{e(),H.p8.ticker.add(H.p8.updateRoot)}},[])};var nO=e=>{let{Component:t,pageProps:n,...r}=e;return I.V7&&nA(),nL(),nP(),nI(),(0,h.jsxs)(es.aH,{children:[I.V7&&(0,h.jsx)(nT,{}),(0,h.jsx)(R(),{children:(0,h.jsx)("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n              :root {\n                --font-body: ".concat(p().style.fontFamily,", var(--font-system), sans-serif;\n                --font-heading: ").concat(p().style.fontFamily,", var(--font-system), sans-serif;\n                --font-semimono: ").concat(m().style.fontFamily,", var(--font-system), sans-serif;\n                --font-display: ").concat(v().style.fontFamily,", var(--font-system), sans-serif;\n              }\n            ")}})}),(0,h.jsxs)(b.aH,{client:nR,children:[(0,h.jsxs)(k.Z,{children:[(0,h.jsx)(t$.Z,{}),(0,h.jsx)(tJ,{}),(0,h.jsxs)(nS,{productsCollection:n.productsCollection,...r,children:[(0,h.jsx)(t,{...n}),(0,h.jsx)(A,{})]}),I.r8&&(0,h.jsx)(nC,{}),(0,h.jsx)(z,{})]}),(0,h.jsx)(t0,{})]})]})}},7500:function(e){e.exports={controls:"bag-controls_controls__adN9C",selector:"bag-controls_selector__cqu0I","toggle-button":"bag-controls_toggle-button__U3Fg4"}},1845:function(e){e.exports={container:"cart_container__2JOAd","cart-toggle":"cart_cart-toggle__vHJte",children:"cart_children__W_h_j",close:"cart_close__Ss6V4","cart-quantity":"cart_cart-quantity__7LPho",content:"cart_content__ZZbdv","empty-state":"cart_empty-state__BLyVj",visible:"cart_visible__LsL_t",toon:"cart_toon__Y9ML5","content-scroll":"cart_content-scroll__Mn7RL",empty:"cart_empty___R5N_",footer:"cart_footer__LVZkn","preorder-copy":"cart_preorder-copy__30qc6",quote:"cart_quote__EXCMx",checkout__container:"cart_checkout__container__FUq6R",checkout__button:"cart_checkout__button__PutLq",subtotal:"cart_subtotal__u6SP_",changing:"cart_changing__xAS9D",copy:"cart_copy__7igl8",arrow:"cart_arrow__5p50k","cart-product":"cart_cart-product__yYsCT",removing:"cart_removing__bPfo5",image:"cart_image__YU8Ud",image__container:"cart_image__container__lRoo1","cart-product__content":"cart_cart-product__content__IQIsL",title:"cart_title__wKtF6",description:"cart_description__WfkEI","product-details":"cart_product-details__rTT8j",left:"cart_left__cfIyB",label:"cart_label__qI5Aq",value:"cart_value__h7_Ua",color:"cart_color__jkEHY","color-box":"cart_color-box__hlbWa",blue:"cart_blue__pL2lh",pink:"cart_pink__u1IVb",orange:"cart_orange__8vXhW",mint:"cart_mint__prGLc",yellow:"cart_yellow__depFh",grape:"cart_grape__JIbv_",quantity:"cart_quantity__2uSBd",symbol:"cart_symbol___NX3K",minus:"cart_minus__asYvy","nav-link":"cart_nav-link__L9lJL"}},395:function(e){e.exports={overlay:"drawer_overlay__EF6U1","fade-in":"drawer_fade-in__9Y1qy","fade-out":"drawer_fade-out__HoL_T",content:"drawer_content__qyENK","drawer-in":"drawer_drawer-in__tjRN8","drawer-in-motion-reduce":"drawer_drawer-in-motion-reduce__5ezRV","drawer-out":"drawer_drawer-out__qrk4l","drawer-out-motion-reduce":"drawer_drawer-out-motion-reduce__FFS4t",content__children:"drawer_content__children__6o5JM",content__header:"drawer_content__header__kUTtU","close-button":"drawer_close-button__9yWPx"}},5514:function(e){e.exports={footer:"footer_footer__A_3o8",wrapper:"footer_wrapper__3UnfR",date:"footer_date__ng_3L",nav:"footer_nav__2Pr_N"}},3911:function(e){e.exports={header:"header_header__RMLqJ",wrapper:"header_wrapper__Excac","date-and-time":"header_date-and-time__efAt6",date:"header_date__BTklA",time:"header_time__wymj9",logo:"header_logo__nXlyd",nav:"header_nav__KoB48"}},706:function(e){e.exports={product:"product_product__rae2y",product__information:"product_product__information__DdOxV",product__stack:"product_product__stack__jntoD","with-bg":"product_with-bg__XQA_N","with-bg--extra-top":"product_with-bg--extra-top__u3hR8",name:"product_name__wiHLO","stack-content":"product_stack-content__CX3_A",info:"product_info__GVeOn",color:"product_color__Bx47g",size:"product_size__K9aRk","stack-name":"product_stack-name__Qczmf",price:"product_price__CJ6Lk",details:"product_details__XkNvn",dimensions:"product_dimensions__fe2W8",preorder:"product_preorder__0K6ca","semi-mono":"product_semi-mono__9_ZHV",gray:"product_gray__iykOr","go-back-button":"product_go-back-button__STIyE","stack-full":"product_stack-full__gK0hQ","dimensions-img":"product_dimensions-img__51_Ur","preorder-copy":"product_preorder-copy__3vrZT",cart:"product_cart__tFx6g"}},7551:function(e){e.exports={loader:"loader_loader__sHhoP"}},6701:function(e){e.exports={base:"button_base__fwA0n",button:"button_button__d10Z2","button--unstyled":"button_button--unstyled__swBqF","button--invert":"button_button--invert___lUFw","no-focus":"button_no-focus__4RTIn",selected:"button_selected__t8uPM","button--selector":"button_button--selector__k2nnG",selector:"button_selector__Pq9nD",blue:"button_blue__gPSyI",pink:"button_pink__8N890",orange:"button_orange__7vhcQ",mint:"button_mint__wjm_j",yellow:"button_yellow__E1QfJ",grape:"button_grape__cKIlr",gold:"button_gold__hUotk","blue-grey":"button_blue-grey__uOhpX","blue-m":"button_blue-m__ynDkM","purple-m":"button_purple-m__G_kn_",tan:"button_tan__w0P6x","black-m":"button_black-m__HL3Oz"}},3651:function(e){e.exports={cursor__follower:"cursor_cursor__follower__YXHk9",inner:"cursor_inner__gl0Gm",pointer:"cursor_pointer__GXoBn",grab:"cursor_grab__6mKjn",paint:"cursor_paint__z_1j8"}},843:function(e){e.exports={section:"section_section___GzAE"}},9673:function(e){e.exports={toggle:"sound_toggle__y0THf",sound:"sound_sound__O3_PO"}},4640:function(e){e.exports={section:"hero_section__DUqEJ"}},42:function(){},5084:function(e){e.exports={style:{fontFamily:"'__abcDiatypeMono_811167', '__abcDiatypeMono_Fallback_811167'"},className:"__className_811167"}},6810:function(e){e.exports={style:{fontFamily:"'__abcDiatypeSemimono_affa96', '__abcDiatypeSemimono_Fallback_affa96'",fontWeight:500,fontStyle:"normal"},className:"__className_affa96"}},392:function(e){e.exports={style:{fontFamily:"'__neueHaasGroteskDisplay_e9e136', '__neueHaasGroteskDisplay_Fallback_e9e136'",fontWeight:800,fontStyle:"normal"},className:"__className_e9e136"}},7663:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l=[],u=!1,c=-1;function h(){u&&r&&(u=!1,r.length?l=r.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}},s=!0;try{t[e](a,a.exports,r),s=!1}finally{s&&delete n[e]}return a.exports}r.ab="//";var i=r(229);e.exports=i}()},5152:function(e,t,n){e.exports=n(9807)},9008:function(e,t,n){e.exports=n(7484)},5675:function(e,t,n){e.exports=n(1669)},1664:function(e,t,n){e.exports=n(8362)},1163:function(e,t,n){e.exports=n(3719)},4298:function(e,t,n){e.exports=n(3145)},5518:function(e,t,n){"use strict";var r,i,a,s,o,l,u=n(7294);u&&"object"==typeof u&&"default"in u&&u.default;var c=n(3451),h=new c,d=h.getBrowser(),p=h.getCPU(),f=h.getDevice(),m=h.getEngine(),g=h.getOS(),v=h.getUA(),_={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},y={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return e||t},x=function(){return!!("undefined"!=typeof window&&(window.navigator||navigator))&&(window.navigator||navigator)},S=function(e){var t=x();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},w=function(e){return e.type===_.Browser},M=function(e){return e.name===y.Edge},E=function(e){return"string"==typeof e&&-1!==e.indexOf("Edg/")},T=function(){return S("iPad")};f.type,_.SmartTv,f.type,_.Console,f.type,_.Wearable,f.type,_.Embedded;var A=d.name===y.MobileSafari||T(),C=(d.name,y.Chromium,(r=f.type)===_.Mobile||r===_.Tablet||T()),R=f.type===_.Mobile,P=f.type===_.Tablet||T(),I=w(f),L=w(f),O="Android"===g.name,N=(g.name,"iOS"===g.name||T()),k=d.name===y.Chrome,D=d.name===y.Firefox,U=(i=d.name)===y.Safari||i===y.MobileSafari,F=(d.name,y.Opera,(a=d.name)===y.InternetExplorer||y.Ie,b(g.version),b(g.name),b(d.version),b(d.major),b(d.name),b(f.vendor),b(f.model),b(m.name),b(m.version),b(v),M(d)||E(v),d.name,y.Yandex,b(f.type,"browser"),(s=x())&&(/iPad|iPhone|iPod/.test(s.platform)||"MacIntel"===s.platform&&s.maxTouchPoints>1)&&window.MSStream,T(),S("iPhone"),S("iPod"),"string"==typeof(l=(o=x())&&o.userAgent&&o.userAgent.toLowerCase())&&/electron/.test(l),E(v),M(d)&&E(v),"Windows"===g.name),z="Mac OS"===g.name;d.name,y.MIUI,d.name,y.SamsungBrowser,t.Dt=O,t.jU=I,t.i7=k,t.nI=L,t.vU=D,t.gn=N,t.Q5=z,t.tq=C,t.UA=R,t.TL=A,t.G6=U,t.Em=P,t.ED=F},6511:function(e,t){"use strict";/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},7287:function(e,t,n){/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */e.exports=function(e){"use strict";var t,r,i,a,s,o={},l=n(7294),u=n(3840),c=Object.assign;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p=Symbol.for("react.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}function C(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case f:return"Portal";case v:return"Profiler";case g:return"StrictMode";case x:return"Suspense";case S:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case y:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return C(e(t))}catch(e){}}return null}function R(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function P(e){if(R(e)!==e)throw Error(h(188))}function I(e){var t=e.alternate;if(!t){if(null===(t=R(e)))throw Error(h(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return P(i),e;if(a===r)return P(i),t;a=a.sibling}throw Error(h(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(h(189))}}if(n.alternate!==r)throw Error(h(190))}if(3!==n.tag)throw Error(h(188));return n.stateNode.current===n?e:t}function L(e){return null!==(e=I(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var O,N=Array.isArray,k=e.getPublicInstance,D=e.getRootHostContext,U=e.getChildHostContext,F=e.prepareForCommit,z=e.resetAfterCommit,B=e.createInstance,V=e.appendInitialChild,H=e.finalizeInitialChildren,j=e.prepareUpdate,G=e.shouldSetTextContent,W=e.createTextInstance,q=e.scheduleTimeout,X=e.cancelTimeout,Z=e.noTimeout,Y=e.isPrimaryRenderer,K=e.supportsMutation,Q=e.supportsPersistence,J=e.supportsHydration,$=e.getInstanceFromNode,ee=e.preparePortalMount,et=e.getCurrentEventPriority,en=e.detachDeletedInstance,er=e.supportsMicrotasks,ei=e.scheduleMicrotask,ea=e.supportsTestSelectors,es=e.findFiberRoot,eo=e.getBoundingRect,el=e.getTextContent,eu=e.isHiddenSubtree,ec=e.matchAccessibilityRole,eh=e.setFocusIfFocusable,ed=e.setupIntersectionObserver,ep=e.appendChild,ef=e.appendChildToContainer,em=e.commitTextUpdate,eg=e.commitMount,ev=e.commitUpdate,e_=e.insertBefore,ey=e.insertInContainerBefore,eb=e.removeChild,ex=e.removeChildFromContainer,eS=e.resetTextContent,ew=e.hideInstance,eM=e.hideTextInstance,eE=e.unhideInstance,eT=e.unhideTextInstance,eA=e.clearContainer,eC=e.cloneInstance,eR=e.createContainerChildSet,eP=e.appendChildToContainerChildSet,eI=e.finalizeContainerChildren,eL=e.replaceContainerChildren,eO=e.cloneHiddenInstance,eN=e.cloneHiddenTextInstance,ek=e.canHydrateInstance,eD=e.canHydrateTextInstance,eU=e.canHydrateSuspenseInstance,eF=e.isSuspenseInstancePending,ez=e.isSuspenseInstanceFallback,eB=e.registerSuspenseInstanceRetry,eV=e.getNextHydratableSibling,eH=e.getFirstHydratableChild,ej=e.getFirstHydratableChildWithinContainer,eG=e.getFirstHydratableChildWithinSuspenseInstance,eW=e.hydrateInstance,eq=e.hydrateTextInstance,eX=e.hydrateSuspenseInstance,eZ=e.getNextHydratableInstanceAfterSuspenseInstance,eY=e.commitHydratedContainer,eK=e.commitHydratedSuspenseInstance,eQ=e.clearSuspenseBoundary,eJ=e.clearSuspenseBoundaryFromContainer,e$=e.shouldDeleteUnhydratedTailInstances,e0=e.didNotMatchHydratedContainerTextInstance,e1=e.didNotMatchHydratedTextInstance;function e2(e){if(void 0===O)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var e3=!1;function e4(e,t){if(!e||e3)return"";e3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{e3=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?e2(e):""}var e5=Object.prototype.hasOwnProperty,e7=[],e8=-1;function e6(e){return{current:e}}function e9(e){0>e8||(e.current=e7[e8],e7[e8]=null,e8--)}function te(e,t){e7[++e8]=e.current,e.current=t}var tt={},tn=e6(tt),tr=e6(!1),ti=tt;function ta(e,t){var n=e.type.contextTypes;if(!n)return tt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ts(e){return null!=(e=e.childContextTypes)}function to(){e9(tr),e9(tn)}function tl(e,t,n){if(tn.current!==tt)throw Error(h(168));te(tn,t),te(tr,n)}function tu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(h(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(t);case 8:return t===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",i));return c({},n,r)}function tc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tt,ti=tn.current,te(tn,e),te(tr,tr.current),!0}function th(e,t,n){var r=e.stateNode;if(!r)throw Error(h(169));n?(e=tu(e,t,ti),r.__reactInternalMemoizedMergedChildContext=e,e9(tr),e9(tn),te(tn,e)):e9(tr),te(tr,n)}var td=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(tp(e)/tf|0)|0},tp=Math.log,tf=Math.LN2,tm=64,tg=4194304;function tv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function t_(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=tv(o):0!=(a&=s)&&(r=tv(a))}else 0!=(s=n&~i)?r=tv(s):0!==a&&(r=tv(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-td(t)),r|=e[n],t&=~i;return r}function ty(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function tb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tx(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-td(t)]=n}function tS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-td(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tw=0;function tM(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tE=u.unstable_scheduleCallback,tT=u.unstable_cancelCallback,tA=u.unstable_shouldYield,tC=u.unstable_requestPaint,tR=u.unstable_now,tP=u.unstable_ImmediatePriority,tI=u.unstable_UserBlockingPriority,tL=u.unstable_NormalPriority,tO=u.unstable_IdlePriority,tN=null,tk=null,tD="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},tU=null,tF=!1,tz=!1;function tB(e){null===tU?tU=[e]:tU.push(e)}function tV(){if(!tz&&null!==tU){tz=!0;var e=0,t=tw;try{var n=tU;for(tw=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}tU=null,tF=!1}catch(t){throw null!==tU&&(tU=tU.slice(e+1)),tE(tP,tV),t}finally{tw=t,tz=!1}}return null}var tH=d.ReactCurrentBatchConfig;function tj(e,t){if(tD(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!e5.call(t,i)||!tD(e[i],t[i]))return!1}return!0}function tG(e,t){if(e&&e.defaultProps)for(var n in t=c({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var tW=e6(null),tq=null,tX=null,tZ=null;function tY(){tZ=tX=tq=null}function tK(e,t,n){Y?(te(tW,t._currentValue),t._currentValue=n):(te(tW,t._currentValue2),t._currentValue2=n)}function tQ(e){var t=tW.current;e9(tW),Y?e._currentValue=t:e._currentValue2=t}function tJ(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function t$(e,t){tq=e,tZ=tX=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(r0=!0),e.firstContext=null)}function t0(e){var t=Y?e._currentValue:e._currentValue2;if(tZ!==e){if(e={context:e,memoizedValue:t,next:null},null===tX){if(null===tq)throw Error(h(308));tX=e,tq.dependencies={lanes:0,firstContext:e}}else tX=tX.next=e}return t}var t1=null,t2=!1;function t3(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function t5(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function t7(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==iK&&0!=(1&e.mode)&&0==(2&iY)?(null===(e=n.interleaved)?(t.next=t,null===t1?t1=[n]:t1.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function t8(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tS(e,n)}}function t6(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function t9(e,t,n,r){var i=e.updateQueue;t2=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var h=e.alternate;null!==h&&(o=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===o?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(s=0,h=u=l=null,o=a;;){var p=o.lane,f=o.eventTime;if((r&p)===p){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(p=t,f=n,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(f,d,p):m))break e;d=c({},d,p);break e;case 2:t2=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,s|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===h&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do s|=i.lane,i=i.next;while(i!==t)}else null===a&&(i.shared.lanes=0);i3|=s,e.lanes=s,e.memoizedState=d}}function ne(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(h(191,i));i.call(r)}}}var nt=(new l.Component).refs;function nn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nr={isMounted:function(e){return!!(e=e._reactInternals)&&R(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ah(),i=ad(e),a=t5(r,i);a.payload=t,null!=n&&(a.callback=n),t7(e,a),null!==(t=ap(e,i,r))&&t8(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ah(),i=ad(e),a=t5(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),t7(e,a),null!==(t=ap(e,i,r))&&t8(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ah(),r=ad(e),i=t5(n,r);i.tag=2,null!=t&&(i.callback=t),t7(e,i),null!==(t=ap(e,r,n))&&t8(t,e,r)}};function ni(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||!tj(n,r)||!tj(i,a)}function na(e,t,n){var r=!1,i=tt,a=t.contextType;return"object"==typeof a&&null!==a?a=t0(a):(i=ts(t)?ti:tn.current,a=(r=null!=(r=t.contextTypes))?ta(e,i):tt),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nr,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ns(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nr.enqueueReplaceState(t,t.state,null)}function no(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=nt,t3(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=t0(a):(a=ts(t)?ti:tn.current,i.context=ta(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(nn(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nr.enqueueReplaceState(i,i.state,null),t9(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var nl=[],nu=0,nc=null,nh=0,nd=[],np=0,nf=null,nm=1,ng="";function nv(e,t){nl[nu++]=nh,nl[nu++]=nc,nc=e,nh=t}function n_(e,t,n){nd[np++]=nm,nd[np++]=ng,nd[np++]=nf,nf=e;var r=nm;e=ng;var i=32-td(r)-1;r&=~(1<<i),n+=1;var a=32-td(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,nm=1<<32-td(t)+i|n<<i|r,ng=a+e}else nm=1<<a|n<<i|r,ng=e}function ny(e){null!==e.return&&(nv(e,1),n_(e,1,0))}function nb(e){for(;e===nc;)nc=nl[--nu],nl[nu]=null,nh=nl[--nu],nl[nu]=null;for(;e===nf;)nf=nd[--np],nd[np]=null,ng=nd[--np],nd[np]=null,nm=nd[--np],nd[np]=null}var nx=null,nS=null,nw=!1,nM=!1,nE=null;function nT(e,t){var n=az(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function nA(e,t){switch(e.tag){case 5:return null!==(t=ek(t,e.type,e.pendingProps))&&(e.stateNode=t,nx=e,nS=eH(t),!0);case 6:return null!==(t=eD(t,e.pendingProps))&&(e.stateNode=t,nx=e,nS=null,!0);case 13:if(null!==(t=eU(t))){var n=null!==nf?{id:nm,overflow:ng}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=az(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nx=e,nS=null,!0}return!1;default:return!1}}function nC(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function nR(e){if(nw){var t=nS;if(t){var n=t;if(!nA(e,t)){if(nC(e))throw Error(h(418));t=eV(n);var r=nx;t&&nA(e,t)?nT(r,n):(e.flags=-4097&e.flags|2,nw=!1,nx=e)}}else{if(nC(e))throw Error(h(418));e.flags=-4097&e.flags|2,nw=!1,nx=e}}}function nP(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nx=e}function nI(e){if(!J||e!==nx)return!1;if(!nw)return nP(e),nw=!0,!1;if(3!==e.tag&&(5!==e.tag||e$(e.type)&&!G(e.type,e.memoizedProps))){var t=nS;if(t){if(nC(e)){for(e=nS;e;)e=eV(e);throw Error(h(418))}for(;t;)nT(e,t),t=eV(t)}}if(nP(e),13===e.tag){if(!J)throw Error(h(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(h(317));nS=eZ(e)}else nS=nx?eV(e.stateNode):null;return!0}function nL(){J&&(nS=nx=null,nM=nw=!1)}function nO(e){null===nE?nE=[e]:nE.push(e)}function nN(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(h(309));var r=n.stateNode}if(!r)throw Error(h(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;t===nt&&(t=i.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(h(284));if(!n._owner)throw Error(h(290,e))}return e}function nk(e,t){throw Error(h(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nD(e){return(0,e._init)(e._payload)}function nU(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=aV(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?(t=aW(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function l(e,t,n,r){var a=n.type;return a===m?c(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&nD(a)===t.type)?(r=i(t,n.props)).ref=nN(e,t,n):(r=aH(n.type,n.key,n.props,null,e.mode,r)).ref=nN(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=aq(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function c(e,t,n,r,a){return null===t||7!==t.tag?(t=aj(n,e.mode,r,a)).return=e:(t=i(t,n)).return=e,t}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=aW(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return(n=aH(t.type,t.key,t.props,null,e.mode,n)).ref=nN(e,null,t),n.return=e,n;case f:return(t=aq(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(N(t)||A(t))return(t=aj(t,e.mode,n,null)).return=e,t;nk(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?l(e,t,n,r):null;case f:return n.key===i?u(e,t,n,r):null;case M:return g(e,t,(i=n._init)(n._payload),r)}if(N(n)||A(n))return null!==i?null:c(e,t,n,r,null);nk(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return v(e,t,n,(0,r._init)(r._payload),i)}if(N(r)||A(r))return c(t,e=e.get(n)||null,r,i,null);nk(t,r)}return null}return function o(l,u,c,_){if("object"==typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var y=c.key,b=u;null!==b;){if(b.key===y){if((y=c.type)===m){if(7===b.tag){n(l,b.sibling),(u=i(b,c.props.children)).return=l,l=u;break e}}else if(b.elementType===y||"object"==typeof y&&null!==y&&y.$$typeof===M&&nD(y)===b.type){n(l,b.sibling),(u=i(b,c.props)).ref=nN(l,b,c),u.return=l,l=u;break e}n(l,b);break}t(l,b),b=b.sibling}c.type===m?((u=aj(c.props.children,l.mode,_,c.key)).return=l,l=u):((_=aH(c.type,c.key,c.props,null,l.mode,_)).ref=nN(l,u,c),_.return=l,l=_)}return s(l);case f:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=i(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=aq(c,l.mode,_)).return=l,l=u}return s(l);case M:return o(l,u,(b=c._init)(c._payload),_)}if(N(c))return function(i,s,o,l){for(var u=null,c=null,h=s,p=s=0,f=null;null!==h&&p<o.length;p++){h.index>p?(f=h,h=null):f=h.sibling;var m=g(i,h,o[p],l);if(null===m){null===h&&(h=f);break}e&&h&&null===m.alternate&&t(i,h),s=a(m,s,p),null===c?u=m:c.sibling=m,c=m,h=f}if(p===o.length)return n(i,h),nw&&nv(i,p),u;if(null===h){for(;p<o.length;p++)null!==(h=d(i,o[p],l))&&(s=a(h,s,p),null===c?u=h:c.sibling=h,c=h);return nw&&nv(i,p),u}for(h=r(i,h);p<o.length;p++)null!==(f=v(h,i,p,o[p],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?p:f.key),s=a(f,s,p),null===c?u=f:c.sibling=f,c=f);return e&&h.forEach(function(e){return t(i,e)}),nw&&nv(i,p),u}(l,u,c,_);if(A(c))return function(i,s,o,l){var u=A(o);if("function"!=typeof u)throw Error(h(150));if(null==(o=u.call(o)))throw Error(h(151));for(var c=u=null,p=s,f=s=0,m=null,_=o.next();null!==p&&!_.done;f++,_=o.next()){p.index>f?(m=p,p=null):m=p.sibling;var y=g(i,p,_.value,l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(i,p),s=a(y,s,f),null===c?u=y:c.sibling=y,c=y,p=m}if(_.done)return n(i,p),nw&&nv(i,f),u;if(null===p){for(;!_.done;f++,_=o.next())null!==(_=d(i,_.value,l))&&(s=a(_,s,f),null===c?u=_:c.sibling=_,c=_);return nw&&nv(i,f),u}for(p=r(i,p);!_.done;f++,_=o.next())null!==(_=v(p,i,f,_.value,l))&&(e&&null!==_.alternate&&p.delete(null===_.key?f:_.key),s=a(_,s,f),null===c?u=_:c.sibling=_,c=_);return e&&p.forEach(function(e){return t(i,e)}),nw&&nv(i,f),u}(l,u,c,_);nk(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(u=i(u,c)).return=l):(n(l,u),(u=aW(c,l.mode,_)).return=l),s(l=u)):n(l,u)}}var nF=nU(!0),nz=nU(!1),nB={},nV=e6(nB),nH=e6(nB),nj=e6(nB);function nG(e){if(e===nB)throw Error(h(174));return e}function nW(e,t){te(nj,t),te(nH,e),te(nV,nB),e=D(t),e9(nV),te(nV,e)}function nq(){e9(nV),e9(nH),e9(nj)}function nX(e){var t=nG(nj.current),n=nG(nV.current);t=U(n,e.type,t),n!==t&&(te(nH,e),te(nV,t))}function nZ(e){nH.current===e&&(e9(nV),e9(nH))}var nY=e6(0);function nK(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||eF(n)||ez(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nQ=[];function nJ(){for(var e=0;e<nQ.length;e++){var t=nQ[e];Y?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}nQ.length=0}var n$=d.ReactCurrentDispatcher,n0=d.ReactCurrentBatchConfig,n1=0,n2=null,n3=null,n4=null,n5=!1,n7=!1,n8=0,n6=0;function n9(){throw Error(h(321))}function re(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tD(e[n],t[n]))return!1;return!0}function rt(e,t,n,r,i,a){if(n1=a,n2=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,n$.current=null===e||null===e.memoizedState?rU:rF,e=n(r,i),n7){a=0;do{if(n7=!1,n8=0,25<=a)throw Error(h(301));a+=1,n4=n3=null,t.updateQueue=null,n$.current=rz,e=n(r,i)}while(n7)}if(n$.current=rD,t=null!==n3&&null!==n3.next,n1=0,n4=n3=n2=null,n5=!1,t)throw Error(h(300));return e}function rn(){var e=0!==n8;return n8=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===n4?n2.memoizedState=n4=e:n4=n4.next=e,n4}function ri(){if(null===n3){var e=n2.alternate;e=null!==e?e.memoizedState:null}else e=n3.next;var t=null===n4?n2.memoizedState:n4.next;if(null!==t)n4=t,n3=e;else{if(null===e)throw Error(h(310));e={memoizedState:(n3=e).memoizedState,baseState:n3.baseState,baseQueue:n3.baseQueue,queue:n3.queue,next:null},null===n4?n2.memoizedState=n4=e:n4=n4.next=e}return n4}function ra(e,t){return"function"==typeof t?t(e):t}function rs(e){var t=ri(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=n3,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((n1&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(o=l=d,s=r):l=l.next=d,n2.lanes|=c,i3|=c}u=u.next}while(null!==u&&u!==a);null===l?s=r:l.next=o,tD(r,t.memoizedState)||(r0=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do a=i.lane,n2.lanes|=a,i3|=a,i=i.next;while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ro(e){var t=ri(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);tD(a,t.memoizedState)||(r0=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function rl(){}function ru(e,t){var n=n2,r=ri(),i=t(),a=!tD(r.memoizedState,i);if(a&&(r.memoizedState=i,r0=!0),r=r.queue,rb(rd.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==n4&&1&n4.memoizedState.tag){if(n.flags|=2048,rm(9,rh.bind(null,n,r,i,t),void 0,null),null===iK)throw Error(h(349));0!=(30&n1)||rc(n,t,i)}return i}function rc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=n2.updateQueue)?(t={lastEffect:null,stores:null},n2.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function rh(e,t,n,r){t.value=n,t.getSnapshot=r,rp(t)&&ap(e,1,-1)}function rd(e,t,n){return n(function(){rp(t)&&ap(e,1,-1)})}function rp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tD(e,n)}catch(e){return!0}}function rf(e){var t=rr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t.queue=e,e=e.dispatch=rI.bind(null,n2,e),[t.memoizedState,e]}function rm(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=n2.updateQueue)?(t={lastEffect:null,stores:null},n2.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function rg(){return ri().memoizedState}function rv(e,t,n,r){var i=rr();n2.flags|=e,i.memoizedState=rm(1|t,n,void 0,void 0===r?null:r)}function r_(e,t,n,r){var i=ri();r=void 0===r?null:r;var a=void 0;if(null!==n3){var s=n3.memoizedState;if(a=s.destroy,null!==r&&re(r,s.deps)){i.memoizedState=rm(t,n,a,r);return}}n2.flags|=e,i.memoizedState=rm(1|t,n,a,r)}function ry(e,t){return rv(8390656,8,e,t)}function rb(e,t){return r_(2048,8,e,t)}function rx(e,t){return r_(4,2,e,t)}function rS(e,t){return r_(4,4,e,t)}function rw(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function rM(e,t,n){return n=null!=n?n.concat([e]):null,r_(4,4,rw.bind(null,t,e),n)}function rE(){}function rT(e,t){var n=ri();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&re(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rA(e,t){var n=ri();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&re(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rC(e,t){var n=tw;tw=0!==n&&4>n?n:4,e(!0);var r=n0.transition;n0.transition={};try{e(!1),t()}finally{tw=n,n0.transition=r}}function rR(){return ri().memoizedState}function rP(e,t,n){var r=ad(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rL(e)?rO(t,n):(rN(e,t,n),null!==(e=ap(e,r,n=ah()))&&rk(e,t,r))}function rI(e,t,n){var r=ad(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rL(e))rO(t,i);else{rN(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,tD(o,s))return}catch(e){}finally{}null!==(e=ap(e,r,n=ah()))&&rk(e,t,r)}}function rL(e){var t=e.alternate;return e===n2||null!==t&&t===n2}function rO(e,t){n7=n5=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rN(e,t,n){null!==iK&&0!=(1&e.mode)&&0==(2&iY)?(null===(e=t.interleaved)?(n.next=n,null===t1?t1=[t]:t1.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function rk(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tS(e,n)}}var rD={readContext:t0,useCallback:n9,useContext:n9,useEffect:n9,useImperativeHandle:n9,useInsertionEffect:n9,useLayoutEffect:n9,useMemo:n9,useReducer:n9,useRef:n9,useState:n9,useDebugValue:n9,useDeferredValue:n9,useTransition:n9,useMutableSource:n9,useSyncExternalStore:n9,useId:n9,unstable_isNewReconciler:!1},rU={readContext:t0,useCallback:function(e,t){return rr().memoizedState=[e,void 0===t?null:t],e},useContext:t0,useEffect:ry,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,rv(4194308,4,rw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rv(4194308,4,e,t)},useInsertionEffect:function(e,t){return rv(4,2,e,t)},useMemo:function(e,t){var n=rr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rP.bind(null,n2,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},rr().memoizedState=e},useState:rf,useDebugValue:rE,useDeferredValue:function(e){var t=rf(e),n=t[0],r=t[1];return ry(function(){var t=n0.transition;n0.transition={};try{r(e)}finally{n0.transition=t}},[e]),n},useTransition:function(){var e=rf(!1),t=e[0];return e=rC.bind(null,e[1]),rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=n2,i=rr();if(nw){if(void 0===n)throw Error(h(407));n=n()}else{if(n=t(),null===iK)throw Error(h(349));0!=(30&n1)||rc(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ry(rd.bind(null,r,a,e),[e]),r.flags|=2048,rm(9,rh.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=rr(),t=iK.identifierPrefix;if(nw){var n=ng,r=nm;t=":"+t+"R"+(n=(r&~(1<<32-td(r)-1)).toString(32)+n),0<(n=n8++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=n6++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rF={readContext:t0,useCallback:rT,useContext:t0,useEffect:rb,useImperativeHandle:rM,useInsertionEffect:rx,useLayoutEffect:rS,useMemo:rA,useReducer:rs,useRef:rg,useState:function(){return rs(ra)},useDebugValue:rE,useDeferredValue:function(e){var t=rs(ra),n=t[0],r=t[1];return rb(function(){var t=n0.transition;n0.transition={};try{r(e)}finally{n0.transition=t}},[e]),n},useTransition:function(){return[rs(ra)[0],ri().memoizedState]},useMutableSource:rl,useSyncExternalStore:ru,useId:rR,unstable_isNewReconciler:!1},rz={readContext:t0,useCallback:rT,useContext:t0,useEffect:rb,useImperativeHandle:rM,useInsertionEffect:rx,useLayoutEffect:rS,useMemo:rA,useReducer:ro,useRef:rg,useState:function(){return ro(ra)},useDebugValue:rE,useDeferredValue:function(e){var t=ro(ra),n=t[0],r=t[1];return rb(function(){var t=n0.transition;n0.transition={};try{r(e)}finally{n0.transition=t}},[e]),n},useTransition:function(){return[ro(ra)[0],ri().memoizedState]},useMutableSource:rl,useSyncExternalStore:ru,useId:rR,unstable_isNewReconciler:!1};function rB(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return e2(e.type);case 16:return e2("Lazy");case 13:return e2("Suspense");case 19:return e2("SuspenseList");case 0:case 2:case 15:return e=e4(e.type,!1);case 11:return e=e4(e.type.render,!1);case 1:return e=e4(e.type,!0);default:return""}}(r),r=r.return;while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function rV(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var rH="function"==typeof WeakMap?WeakMap:Map;function rj(e,t,n){(n=t5(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){at||(at=!0,an=r),rV(e,t)},n}function rG(e,t,n){(n=t5(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){rV(e,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){rV(e,t),"function"!=typeof r&&(null===ar?ar=new Set([this]):ar.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function rW(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rH;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=aN.bind(null,e,t,n),t.then(e,e))}function rq(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function rX(e,t,n,r,i){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=t5(-1,1)).tag=2,t7(n,t))),n.lanes|=1):(e.flags|=65536,e.lanes=i),e}function rZ(e){e.flags|=4}function rY(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(K)t=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)V(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},r=function(){},i=function(e,t,n,r,i){(e=e.memoizedProps)!==r&&(n=j(t.stateNode,n,e,r,i,nG(nV.current)),(t.updateQueue=n)&&rZ(t))},a=function(e,t,n,r){n!==r&&rZ(t)};else if(Q){t=function(e,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var s=a.stateNode;r&&i&&(s=eO(s,a.type,a.memoizedProps,a)),V(e,s)}else if(6===a.tag)s=a.stateNode,r&&i&&(s=eN(s,a.memoizedProps,a)),V(e,s);else if(4!==a.tag){if(22===a.tag&&null!==a.memoizedState)null!==(s=a.child)&&(s.return=a),t(e,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};var rK=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=eO(a,i.type,i.memoizedProps,i)),eP(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=eN(a,i.memoizedProps,i)),eP(e,a);else if(4!==i.tag){if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),rK(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};r=function(e,t){var n=t.stateNode;if(!rY(e,t)){var r=eR(e=n.containerInfo);rK(r,t,!1,!1),n.pendingChildren=r,rZ(t),eI(e,r)}},i=function(e,n,r,i,a){var s=e.stateNode,o=e.memoizedProps;if((e=rY(e,n))&&o===i)n.stateNode=s;else{var l=n.stateNode,u=nG(nV.current),c=null;o!==i&&(c=j(l,r,o,i,a,u)),e&&null===c?n.stateNode=s:(H(s=eC(s,c,r,o,i,n,e,l),r,i,a,u)&&rZ(n),n.stateNode=s,e?rZ(n):t(s,n,!1,!1))}},a=function(e,t,n,r){n!==r?(e=nG(nj.current),n=nG(nV.current),t.stateNode=W(r,e,n,t),rZ(t)):t.stateNode=e.stateNode}}else r=function(){},i=function(){},a=function(){};function rQ(e,t){if(!nw)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rJ(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}var r$=d.ReactCurrentOwner,r0=!1;function r1(e,t,n,r){t.child=null===e?nz(t,null,n,r):nF(t,e.child,n,r)}function r2(e,t,n,r,i){n=n.render;var a=t.ref;return(t$(t,i),r=rt(e,t,n,r,a,i),n=rn(),null===e||r0)?(nw&&n&&ny(t),t.flags|=1,r1(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i))}function r3(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||aB(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=aH(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,r4(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:tj)(s,r)&&e.ref===t.ref)return ih(e,t,i)}return t.flags|=1,(e=aV(a,r)).ref=t.ref,e.return=t,t.child=e}function r4(e,t,n,r,i){if(null!==e&&tj(e.memoizedProps,r)&&e.ref===t.ref){if(r0=!1,0==(e.lanes&i))return t.lanes=e.lanes,ih(e,t,i);0!=(131072&e.flags)&&(r0=!0)}return r8(e,t,n,r,i)}function r5(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},te(i0,i$),i$|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,te(i0,i$),i$|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,te(i0,i$),i$|=r}}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,te(i0,i$),i$|=r;return r1(e,t,i,n),t.child}function r7(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function r8(e,t,n,r,i){var a=ts(n)?ti:tn.current;return(a=ta(t,a),t$(t,i),n=rt(e,t,n,r,a,i),r=rn(),null===e||r0)?(nw&&r&&ny(t),t.flags|=1,r1(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ih(e,t,i))}function r6(e,t,n,r,i){if(ts(n)){var a=!0;tc(t)}else a=!1;if(t$(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),na(t,n,r),no(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;u="object"==typeof u&&null!==u?t0(u):ta(t,u=ts(n)?ti:tn.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==u)&&ns(t,s,r,u),t2=!1;var d=t.memoizedState;s.state=d,t9(t,r,s,i),l=t.memoizedState,o!==r||d!==l||tr.current||t2?("function"==typeof c&&(nn(t,n,c,r),l=t.memoizedState),(o=t2||ni(t,n,o,r,d,l,u))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,t4(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:tG(t.type,o),s.props=u,h=t.pendingProps,d=s.context,l="object"==typeof(l=n.contextType)&&null!==l?t0(l):ta(t,l=ts(n)?ti:tn.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==h||d!==l)&&ns(t,s,r,l),t2=!1,d=t.memoizedState,s.state=d,t9(t,r,s,i);var f=t.memoizedState;o!==h||d!==f||tr.current||t2?("function"==typeof p&&(nn(t,n,p,r),f=t.memoizedState),(u=t2||ni(t,n,u,r,d,f,l)||!1)?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return r9(e,t,n,r,a,i)}function r9(e,t,n,r,i,a){r7(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&th(t,n,!1),ih(e,t,a);r=t.stateNode,r$.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=nF(t,e.child,null,a),t.child=nF(t,null,o,a)):r1(e,t,o,a),t.memoizedState=r.state,i&&th(t,n,!0),t.child}function ie(e){var t=e.stateNode;t.pendingContext?tl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tl(e,t.context,!1),nW(e,t.containerInfo)}function it(e,t,n,r,i){return nL(),nO(i),t.flags|=256,r1(e,t,n,r),t.child}var ir={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null}}function ia(e,t,n){var r,i,a,s,o,l,u,c,d,p,f,m,g,v,_=t.pendingProps,y=nY.current,b=!1,x=0!=(128&t.flags);if((v=x)||(v=(null===e||null!==e.memoizedState)&&0!=(2&y)),v?(b=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(y|=1),te(nY,1&y),null===e)return(nR(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:ez(e)?t.lanes=8:t.lanes=1073741824,null):(y=_.children,e=_.fallback,b?(_=t.mode,b=t.child,y={mode:"hidden",children:y},0==(1&_)&&null!==b?(b.childLanes=0,b.pendingProps=y):b=aG(y,_,0,null),e=aj(e,_,n,null),b.return=t,e.return=t,b.sibling=e,t.child=b,t.child.memoizedState=ii(n),t.memoizedState=ir,e):is(t,y));if(null!==(y=e.memoizedState)&&null!==(v=y.dehydrated)){if(x)return 256&t.flags?(t.flags&=-257,io(e,t,n,Error(h(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(b=_.fallback,y=t.mode,_=aG({mode:"visible",children:_.children},y,0,null),b=aj(b,y,n,null),b.flags|=2,_.return=t,b.return=t,_.sibling=b,t.child=_,0!=(1&t.mode)&&nF(t,e.child,null,n),t.child.memoizedState=ii(n),t.memoizedState=ir,b);if(0==(1&t.mode))t=io(e,t,n,null);else if(ez(v))t=io(e,t,n,Error(h(419)));else if(_=0!=(n&e.childLanes),r0||_){if(null!==(_=iK)){switch(n&-n){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}0!==(_=0!=(b&(_.suspendedLanes|n))?0:b)&&_!==y.retryLane&&(y.retryLane=_,ap(e,_,-1))}aT(),t=io(e,t,n,Error(h(421)))}else eF(v)?(t.flags|=128,t.child=e.child,eB(v,t=aD.bind(null,e)),t=null):(n=y.treeContext,J&&(nS=eG(v),nx=t,nw=!0,nE=null,nM=!1,null!==n&&(nd[np++]=nm,nd[np++]=ng,nd[np++]=nf,nm=n.id,ng=n.overflow,nf=t)),t=is(t,t.pendingProps.children),t.flags|=4096);return t}return b?(r=e,i=t,a=_.children,s=_.fallback,o=n,l=i.mode,u=(r=r.child).sibling,c={mode:"hidden",children:a},0==(1&l)&&i.child!==r?((a=i.child).childLanes=0,a.pendingProps=c,i.deletions=null):(a=aV(r,c)).subtreeFlags=14680064&r.subtreeFlags,null!==u?s=aV(u,s):(s=aj(s,l,o,null),s.flags|=2),s.return=i,a.return=i,a.sibling=s,i.child=a,_=s,b=t.child,y=e.child.memoizedState,b.memoizedState=null===y?ii(n):{baseLanes:y.baseLanes|n,cachePool:null},b.childLanes=e.childLanes&~n,t.memoizedState=ir,_):(d=e,p=t,f=_.children,m=n,d=(g=d.child).sibling,f=aV(g,{mode:"visible",children:f}),0==(1&p.mode)&&(f.lanes=m),f.return=p,f.sibling=null,null!==d&&(null===(m=p.deletions)?(p.deletions=[d],p.flags|=16):m.push(d)),n=p.child=f,t.memoizedState=null,n)}function is(e,t){return(t=aG({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function io(e,t,n,r){return null!==r&&nO(r),nF(t,e.child,null,n),e=is(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function il(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),tJ(e.return,t,n)}function iu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ic(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(r1(e,t,r.children,n),0!=(2&(r=nY.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&il(e,n,t);else if(19===e.tag)il(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(te(nY,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===nK(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),iu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===nK(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}iu(t,!0,n,null,a);break;case"together":iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ih(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),i3|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(h(153));if(null!==t.child){for(n=aV(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=aV(e,e.pendingProps)).return=t;n.sibling=null}return t.child}var id=!1,ip=!1,im="function"==typeof WeakSet?WeakSet:Set,ig=null;function iv(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){aO(e,t,n)}else n.current=null}}function i_(e,t,n){try{n()}catch(n){aO(e,t,n)}}var iy=!1;function ib(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&i_(t,n,a)}i=i.next}while(i!==r)}}function ix(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iS(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?k(n):n,"function"==typeof t?t(e):t.current=e}}function iw(e,t,n){if(tk&&"function"==typeof tk.onCommitFiberUnmount)try{tk.onCommitFiberUnmount(tN,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)?i_(t,n,a):0!=(4&i)&&i_(t,n,a)),r=r.next}while(r!==e)}break;case 1:if(iv(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){aO(t,n,e)}break;case 5:iv(t,n);break;case 4:K?iC(e,t,n):Q&&Q&&(n=eR(t=t.stateNode.containerInfo),eL(t,n))}}function iM(e,t,n){for(var r=t;;)if(iw(e,r,n),null===r.child||K&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function iE(e){return 5===e.tag||3===e.tag||4===e.tag}function iT(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iA(e){if(K){e:{for(var t=e.return;null!==t;){if(iE(t))break e;t=t.return}throw Error(h(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(eS(t),n.flags&=-33),n=iT(e),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?e_(r,t,n):ep(r,t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=iT(e),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?ey(r,t,n):ef(r,t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t);break;default:throw Error(h(161))}}}function iC(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(h(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)iM(e,a,n),i?ex(r,a.stateNode):eb(r,a.stateNode);else if(18===a.tag)i?eJ(r,a.stateNode):eQ(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(iw(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function iR(e,t){if(K){switch(t.tag){case 0:case 11:case 14:case 15:ib(3,t,t.return),ix(3,t),ib(5,t,t.return);return;case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ev(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(h(162));n=t.memoizedProps,em(t.stateNode,null!==e?e.memoizedProps:n,n);return;case 3:J&&null!==e&&e.memoizedState.isDehydrated&&eY(t.stateNode.containerInfo);return;case 13:case 19:iP(t);return}throw Error(h(163))}switch(t.tag){case 0:case 11:case 14:case 15:ib(3,t,t.return),ix(3,t),ib(5,t,t.return);return;case 12:case 22:case 23:return;case 13:case 19:iP(t);return;case 3:J&&null!==e&&e.memoizedState.isDehydrated&&eY(t.stateNode.containerInfo)}e:if(Q){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:eL((t=t.stateNode).containerInfo,t.pendingChildren);break e}throw Error(h(163))}}function iP(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new im),t.forEach(function(t){var r=aU.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function iI(e){for(;null!==ig;){var t=ig;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ip||ix(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ip){if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tG(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var a=t.updateQueue;null!==a&&ne(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=k(t.child.stateNode);break;case 1:n=t.child.stateNode}ne(t,s,n)}break;case 5:var o=t.stateNode;null===n&&4&t.flags&&eg(o,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===t.memoizedState){var l=t.alternate;if(null!==l){var u=l.memoizedState;if(null!==u){var c=u.dehydrated;null!==c&&eK(c)}}}break;default:throw Error(h(163))}ip||512&t.flags&&iS(t)}catch(e){aO(t,t.return,e)}}if(t===e){ig=null;break}if(null!==(n=t.sibling)){n.return=t.return,ig=n;break}ig=t.return}}function iL(e){for(;null!==ig;){var t=ig;if(t===e){ig=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ig=n;break}ig=t.return}}function iO(e){for(;null!==ig;){var t=ig;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ix(4,t)}catch(e){aO(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){aO(t,i,e)}}var a=t.return;try{iS(t)}catch(e){aO(t,a,e)}break;case 5:var s=t.return;try{iS(t)}catch(e){aO(t,s,e)}}}catch(e){aO(t,t.return,e)}if(t===e){ig=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ig=o;break}ig=t.return}}var iN=0,ik=1,iD=2,iU=3,iF=4;if("function"==typeof Symbol&&Symbol.for){var iz=Symbol.for;iN=iz("selector.component"),ik=iz("selector.has_pseudo_class"),iD=iz("selector.role"),iU=iz("selector.test_id"),iF=iz("selector.text")}function iB(e){var t=$(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(h(364));return t}if(null===(e=es(e)))throw Error(h(362));return e.stateNode.current}function iV(e,t){switch(t.$$typeof){case iN:if(e.type===t.value)return!0;break;case ik:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!eu(r)){for(;null!=a&&iV(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case iD:if(5===e.tag&&ec(e.stateNode,t.value))return!0;break;case iF:if((5===e.tag||6===e.tag)&&null!==(e=el(e))&&0<=e.indexOf(t.value))return!0;break;case iU:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(h(365))}return!1}function iH(e){switch(e.$$typeof){case iN:return"<"+(C(e.value)||"Unknown")+">";case ik:return":has("+(iH(e)||"")+")";case iD:return'[role="'+e.value+'"]';case iF:return'"'+e.value+'"';case iU:return'[data-testname="'+e.value+'"]';default:throw Error(h(365))}}function ij(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],s=t[a];if(5!==i.tag||!eu(i)){for(;null!=s&&iV(i,s);)s=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function iG(e,t){if(!ea)throw Error(h(363));e=ij(e=iB(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)eu(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var iW=Math.ceil,iq=d.ReactCurrentDispatcher,iX=d.ReactCurrentOwner,iZ=d.ReactCurrentBatchConfig,iY=0,iK=null,iQ=null,iJ=0,i$=0,i0=e6(0),i1=0,i2=null,i3=0,i4=0,i5=0,i7=null,i8=null,i6=0,i9=1/0;function ae(){i9=tR()+500}var at=!1,an=null,ar=null,ai=!1,aa=null,as=0,ao=0,al=null,au=-1,ac=0;function ah(){return 0!=(6&iY)?tR():-1!==au?au:au=tR()}function ad(e){return 0==(1&e.mode)?1:0!=(2&iY)&&0!==iJ?iJ&-iJ:null!==tH.transition?(0===ac&&(e=tm,0==(4194240&(tm<<=1))&&(tm=64),ac=e),ac):0!==(e=tw)?e:et()}function ap(e,t,n){if(50<ao)throw ao=0,al=null,Error(h(185));var r=af(e,t);return null===r?null:(tx(r,t,n),(0==(2&iY)||r!==iK)&&(r===iK&&(0==(2&iY)&&(i4|=t),4===i1&&ay(r,iJ)),am(r,n),1===t&&0===iY&&0==(1&e.mode)&&(ae(),tF&&tV())),r)}function af(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function am(e,t){var n,r=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-td(a),o=1<<s,l=i[s];-1===l?(0==(o&n)||0!=(o&r))&&(i[s]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var i=t_(e,e===iK?iJ:0);if(0===i)null!==r&&tT(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&tT(r),1===t)0===e.tag?(n=ab.bind(null,e),tF=!0,tB(n)):tB(ab.bind(null,e)),er?ei(function(){0===iY&&tV()}):tE(tP,tV),r=null;else{switch(tM(i)){case 1:r=tP;break;case 4:r=tI;break;case 16:default:r=tL;break;case 536870912:r=tO}r=tE(r,ag.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ag(e,t){if(au=-1,ac=0,0!=(6&iY))throw Error(h(327));var n=e.callbackNode;if(aI()&&e.callbackNode!==n)return null;var r=t_(e,e===iK?iJ:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=aA(e,r);else{t=r;var i=iY;iY|=2;var a=aE();for((iK!==e||iJ!==t)&&(ae(),aw(e,t));;)try{!function(){for(;null!==iQ&&!tA();)aC(iQ)}();break}catch(t){aM(e,t)}tY(),iq.current=a,iY=i,null!==iQ?t=0:(iK=null,iJ=0,t=i1)}if(0!==t){if(2===t&&0!==(i=ty(e))&&(r=i,t=av(e,i)),1===t)throw n=i2,aw(e,0),ay(e,r),am(e,tR()),n;if(6===t)ay(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!tD(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=aA(e,r))&&0!==(a=ty(e))&&(r=a,t=av(e,a)),1===t))throw n=i2,aw(e,0),ay(e,r),am(e,tR()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(h(345));case 2:case 5:aP(e,i8);break;case 3:if(ay(e,r),(130023424&r)===r&&10<(t=i6+500-tR())){if(0!==t_(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ah(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=q(aP.bind(null,e,i8),t);break}aP(e,i8);break;case 4:if(ay(e,r),(4194240&r)===r)break;for(i=-1,t=e.eventTimes;0<r;){var s=31-td(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=tR()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iW(r/1960))-r)){e.timeoutHandle=q(aP.bind(null,e,i8),r);break}aP(e,i8);break;default:throw Error(h(329))}}}return am(e,tR()),e.callbackNode===n?ag.bind(null,e):null}function av(e,t){var n=i7;return e.current.memoizedState.isDehydrated&&(aw(e,t).flags|=256),2!==(e=aA(e,t))&&(t=i8,i8=n,null!==t&&a_(t)),e}function a_(e){null===i8?i8=e:i8.push.apply(i8,e)}function ay(e,t){for(t&=~i5,t&=~i4,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-td(t),r=1<<n;e[n]=-1,t&=~r}}function ab(e){if(0!=(6&iY))throw Error(h(327));aI();var t=t_(e,0);if(0==(1&t))return am(e,tR()),null;var n=aA(e,t);if(0!==e.tag&&2===n){var r=ty(e);0!==r&&(t=r,n=av(e,r))}if(1===n)throw n=i2,aw(e,0),ay(e,t),am(e,tR()),n;if(6===n)throw Error(h(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,aP(e,i8),am(e,tR()),null}function ax(e){null!==aa&&0===aa.tag&&0==(6&iY)&&aI();var t=iY;iY|=1;var n=iZ.transition,r=tw;try{if(iZ.transition=null,tw=1,e)return e()}finally{tw=r,iZ.transition=n,0==(6&(iY=t))&&tV()}}function aS(){i$=i0.current,e9(i0)}function aw(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Z&&(e.timeoutHandle=Z,X(n)),null!==iQ)for(n=iQ.return;null!==n;){var r=n;switch(nb(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&to();break;case 3:nq(),e9(tr),e9(tn),nJ();break;case 5:nZ(r);break;case 4:nq();break;case 13:case 19:e9(nY);break;case 10:tQ(r.type._context);break;case 22:case 23:aS()}n=n.return}if(iK=e,iQ=e=aV(e.current,null),iJ=i$=t,i1=0,i2=null,i5=i4=i3=0,i8=i7=null,null!==t1){for(t=0;t<t1.length;t++)if(null!==(r=(n=t1[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}t1=null}return e}function aM(e,t){for(;;){var n=iQ;try{if(tY(),n$.current=rD,n5){for(var r=n2.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}n5=!1}if(n1=0,n4=n3=n2=null,n7=!1,n8=0,iX.current=null,null===n||null===n.return){i1=1,i2=t,iQ=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=iJ,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=o,d=c.tag;if(0==(1&c.mode)&&(0===d||11===d||15===d)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=rq(s);if(null!==f){f.flags&=-257,rX(f,s,o,a,t),1&f.mode&&rW(a,u,t),t=f,l=u;var m=t.updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0==(1&t)){rW(a,u,t),aT();break e}l=Error(h(426))}else if(nw&&1&o.mode){var v=rq(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),rX(v,s,o,a,t),nO(l);break e}}a=l,4!==i1&&(i1=2),null===i7?i7=[a]:i7.push(a),l=rB(l,o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=rj(o,l,t);t6(o,_);break e;case 1:a=l;var y=o.type,b=o.stateNode;if(0==(128&o.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===ar||!ar.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=rG(o,a,t);t6(o,x);break e}}o=o.return}while(null!==o)}aR(n)}catch(e){t=e,iQ===n&&null!==n&&(iQ=n=n.return);continue}break}}function aE(){var e=iq.current;return iq.current=rD,null===e?rD:e}function aT(){(0===i1||3===i1||2===i1)&&(i1=4),null===iK||0==(268435455&i3)&&0==(268435455&i4)||ay(iK,iJ)}function aA(e,t){var n=iY;iY|=2;var r=aE();for(iK===e&&iJ===t||aw(e,t);;)try{!function(){for(;null!==iQ;)aC(iQ)}();break}catch(t){aM(e,t)}if(tY(),iY=n,iq.current=r,null!==iQ)throw Error(h(261));return iK=null,iJ=0,i1}function aC(e){var t=s(e.alternate,e,i$);e.memoizedProps=e.pendingProps,null===t?aR(e):iQ=t,iX.current=null}function aR(e){var n=e;do{var s=n.alternate;if(e=n.return,0==(32768&n.flags)){if(null!==(s=function(e,n,s){var o=n.pendingProps;switch(nb(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rJ(n),null;case 1:case 17:return ts(n.type)&&to(),rJ(n),null;case 3:return o=n.stateNode,nq(),e9(tr),e9(tn),nJ(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===e||null===e.child)&&(nI(n)?rZ(n):null===e||e.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==nE&&(a_(nE),nE=null))),r(e,n),rJ(n),null;case 5:nZ(n),s=nG(nj.current);var l=n.type;if(null!==e&&null!=n.stateNode)i(e,n,l,o,s),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!o){if(null===n.stateNode)throw Error(h(166));return rJ(n),null}if(e=nG(nV.current),nI(n)){if(!J)throw Error(h(175));e=eW(n.stateNode,n.type,n.memoizedProps,s,e,n,!nM),n.updateQueue=e,null!==e&&rZ(n)}else{var u=B(l,o,s,e,n);t(u,n,!1,!1),n.stateNode=u,H(u,l,o,s,e)&&rZ(n)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return rJ(n),null;case 6:if(e&&null!=n.stateNode)a(e,n,e.memoizedProps,o);else{if("string"!=typeof o&&null===n.stateNode)throw Error(h(166));if(e=nG(nj.current),s=nG(nV.current),nI(n)){if(!J)throw Error(h(176));if((s=eq(e=n.stateNode,o=n.memoizedProps,n,!nM))&&null!==(l=nx))switch(u=0!=(1&l.mode),l.tag){case 3:e0(l.stateNode.containerInfo,e,o,u);break;case 5:e1(l.type,l.memoizedProps,l.stateNode,e,o,u)}s&&rZ(n)}else n.stateNode=W(o,e,s,n)}return rJ(n),null;case 13:if(e9(nY),o=n.memoizedState,nw&&null!==nS&&0!=(1&n.mode)&&0==(128&n.flags)){for(e=nS;e;)e=eV(e);return nL(),n.flags|=98560,n}if(null!==o&&null!==o.dehydrated){if(o=nI(n),null===e){if(!o)throw Error(h(318));if(!J)throw Error(h(344));if(!(e=null!==(e=n.memoizedState)?e.dehydrated:null))throw Error(h(317));eX(e,n)}else nL(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;return rJ(n),null}if(null!==nE&&(a_(nE),nE=null),0!=(128&n.flags))return n.lanes=s,n;return o=null!==o,s=!1,null===e?nI(n):s=null!==e.memoizedState,o&&!s&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===e||0!=(1&nY.current)?0===i1&&(i1=3):aT())),null!==n.updateQueue&&(n.flags|=4),rJ(n),null;case 4:return nq(),r(e,n),null===e&&ee(n.stateNode.containerInfo),rJ(n),null;case 10:return tQ(n.type._context),rJ(n),null;case 19:if(e9(nY),null===(l=n.memoizedState))return rJ(n),null;if(o=0!=(128&n.flags),null===(u=l.rendering)){if(o)rQ(l,!1);else{if(0!==i1||null!==e&&0!=(128&e.flags))for(e=n.child;null!==e;){if(null!==(u=nK(e))){for(n.flags|=128,rQ(l,!1),null!==(e=u.updateQueue)&&(n.updateQueue=e,n.flags|=4),n.subtreeFlags=0,e=s,o=n.child;null!==o;)s=o,l=e,s.flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,l=u.dependencies,s.dependencies=null===l?null:{lanes:l.lanes,firstContext:l.firstContext}),o=o.sibling;return te(nY,1&nY.current|2),n.child}e=e.sibling}null!==l.tail&&tR()>i9&&(n.flags|=128,o=!0,rQ(l,!1),n.lanes=4194304)}}else{if(!o){if(null!==(e=nK(u))){if(n.flags|=128,o=!0,null!==(e=e.updateQueue)&&(n.updateQueue=e,n.flags|=4),rQ(l,!0),null===l.tail&&"hidden"===l.tailMode&&!u.alternate&&!nw)return rJ(n),null}else 2*tR()-l.renderingStartTime>i9&&1073741824!==s&&(n.flags|=128,o=!0,rQ(l,!1),n.lanes=4194304)}l.isBackwards?(u.sibling=n.child,n.child=u):(null!==(e=l.last)?e.sibling=u:n.child=u,l.last=u)}if(null!==l.tail)return n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=tR(),n.sibling=null,e=nY.current,te(nY,o?1&e|2:1&e),n;return rJ(n),null;case 22:case 23:return aS(),o=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==o&&(n.flags|=8192),o&&0!=(1&n.mode)?0!=(1073741824&i$)&&(rJ(n),K&&6&n.subtreeFlags&&(n.flags|=8192)):rJ(n),null;case 24:case 25:return null}throw Error(h(156,n.tag))}(s,n,i$))){iQ=s;return}}else{if(null!==(s=function(e,t){switch(nb(t),t.tag){case 1:return ts(t.type)&&to(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nq(),e9(tr),e9(tn),nJ(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return nZ(t),null;case 13:if(e9(nY),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(h(340));nL()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return e9(nY),null;case 4:return nq(),null;case 10:return tQ(t.type._context),null;case 22:case 23:return aS(),null;default:return null}}(s,n))){s.flags&=32767,iQ=s;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{i1=6,iQ=null;return}}if(null!==(n=n.sibling)){iQ=n;return}iQ=n=e}while(null!==n);0===i1&&(i1=5)}function aP(e,t){var n=tw,r=iZ.transition;try{iZ.transition=null,tw=1,function(e,t,n){do aI();while(null!==aa);if(0!=(6&iY))throw Error(h(327));var r=e.finishedWork,i=e.finishedLanes;if(null!==r){if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(h(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-td(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===iK&&(iQ=iK=null,iJ=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||ai||(ai=!0,s=tL,o=function(){return aI(),null},tE(s,o)),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=iZ.transition,iZ.transition=null;var s,o,l,u,c=tw;tw=1;var d=iY;iY|=4,iX.current=null,function(e,t){for(F(e.containerInfo),ig=t;null!==ig;)if(t=(e=ig).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,ig=t;else for(;null!==ig;){e=ig;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:tG(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:K&&eA(e.stateNode.containerInfo);break;default:throw Error(h(163))}}catch(t){aO(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,ig=t;break}ig=e.return}n=iy,iy=!1}(e,r),function(e,t){for(ig=t;null!==ig;){var n=(t=ig).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;K?iC(a,i,t):iM(a,i,t);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(e){aO(i,t,e)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,ig=n;else for(;null!==ig;){t=ig;try{var o=t.flags;if(32&o&&K&&eS(t.stateNode),512&o){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"==typeof u?u(null):u.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;(null===c||null===c.memoizedState)&&(i6=tR())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,p=null!==d&&null!==d.memoizedState;if(n=t,K){e:if(r=n,i=h,a=null,K)for(var f=r;;){if(5===f.tag){if(null===a){a=f;var m=f.stateNode;i?ew(m):eE(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===a){var g=f.stateNode;i?eM(g):eT(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===r)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===r)break;for(;null===f.sibling;){if(null===f.return||f.return===r)break e;a===f&&(a=null),f=f.return}a===f&&(a=null),f.sibling.return=f.return,f=f.sibling}}if(h&&!p&&0!=(1&n.mode)){ig=n;for(var v=n.child;null!==v;){for(n=ig=v;null!==ig;){var _=(r=ig).child;switch(r.tag){case 0:case 11:case 14:case 15:ib(4,r,r.return);break;case 1:iv(r,r.return);var y=r.stateNode;if("function"==typeof y.componentWillUnmount){var b=r.return;try{y.props=r.memoizedProps,y.state=r.memoizedState,y.componentWillUnmount()}catch(e){aO(r,b,e)}}break;case 5:iv(r,r.return);break;case 22:if(null!==r.memoizedState){iL(n);continue}}null!==_?(_.return=r,ig=_):iL(n)}v=v.sibling}}}switch(4102&o){case 2:iA(t),t.flags&=-3;break;case 6:iA(t),t.flags&=-3,iR(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,iR(t.alternate,t);break;case 4:iR(t.alternate,t)}}catch(e){aO(t,t.return,e)}if(null!==(n=t.sibling)){n.return=t.return,ig=n;break}ig=t.return}}}(e,r,i),z(e.containerInfo),e.current=r,l=r,u=e,ig=l,function e(t,n,r){for(var i=0!=(1&t.mode);null!==ig;){var a=ig,s=a.child;if(22===a.tag&&i){var o=null!==a.memoizedState||id;if(!o){var l=a.alternate,u=null!==l&&null!==l.memoizedState||ip;l=id;var c=ip;if(id=o,(ip=u)&&!c)for(ig=a;null!==ig;)u=(o=ig).child,22===o.tag&&null!==o.memoizedState?iO(a):null!==u?(u.return=o,ig=u):iO(a);for(;null!==s;)ig=s,e(s,n,r),s=s.sibling;ig=a,id=l,ip=c}iI(t,n,r)}else 0!=(8772&a.subtreeFlags)&&null!==s?(s.return=a,ig=s):iI(t,n,r)}}(l,u,i),tC(),iY=d,tw=c,iZ.transition=a}else e.current=r;if(ai&&(ai=!1,aa=e,as=i),0===(a=e.pendingLanes)&&(ar=null),function(e){if(tk&&"function"==typeof tk.onCommitFiberRoot)try{tk.onCommitFiberRoot(tN,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode,n),am(e,tR()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(at)throw at=!1,e=an,an=null,e;0!=(1&as)&&0!==e.tag&&aI(),0!=(1&(a=e.pendingLanes))?e===al?ao++:(ao=0,al=e):ao=0,tV()}}(e,t,n)}finally{iZ.transition=r,tw=n}return null}function aI(){if(null!==aa){var e=tM(as),t=iZ.transition,n=tw;try{if(iZ.transition=null,tw=16>e?16:e,null===aa)var r=!1;else{if(e=aa,aa=null,as=0,0!=(6&iY))throw Error(h(331));var i=iY;for(iY|=4,ig=e.current;null!==ig;){var a=ig,s=a.child;if(0!=(16&ig.flags)){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var u=o[l];for(ig=u;null!==ig;){var c=ig;switch(c.tag){case 0:case 11:case 15:ib(8,c,a)}var d=c.child;if(null!==d)d.return=c,ig=d;else for(;null!==ig;){var p=(c=ig).sibling,f=c.return;if(!function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&en(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(c),c===u){ig=null;break}if(null!==p){p.return=f,ig=p;break}ig=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ig=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,ig=s;else for(;null!==ig;){if(a=ig,0!=(2048&a.flags))switch(a.tag){case 0:case 11:case 15:ib(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,ig=_;break}ig=a.return}}var y=e.current;for(ig=y;null!==ig;){var b=(s=ig).child;if(0!=(2064&s.subtreeFlags)&&null!==b)b.return=s,ig=b;else for(s=y;null!==ig;){if(o=ig,0!=(2048&o.flags))try{switch(o.tag){case 0:case 11:case 15:ix(9,o)}}catch(e){aO(o,o.return,e)}if(o===s){ig=null;break}var x=o.sibling;if(null!==x){x.return=o.return,ig=x;break}ig=o.return}}if(iY=i,tV(),tk&&"function"==typeof tk.onPostCommitFiberRoot)try{tk.onPostCommitFiberRoot(tN,e)}catch(e){}r=!0}return r}finally{tw=n,iZ.transition=t}}return!1}function aL(e,t,n){t=rj(e,t=rB(n,t),1),t7(e,t),t=ah(),null!==(e=af(e,1))&&(tx(e,1,t),am(e,t))}function aO(e,t,n){if(3===e.tag)aL(e,e,n);else for(;null!==t;){if(3===t.tag){aL(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ar||!ar.has(r))){e=rG(t,e=rB(n,e),1),t7(t,e),e=ah(),null!==(t=af(t,1))&&(tx(t,1,e),am(t,e));break}}t=t.return}}function aN(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ah(),e.pingedLanes|=e.suspendedLanes&n,iK===e&&(iJ&n)===n&&(4===i1||3===i1&&(130023424&iJ)===iJ&&500>tR()-i6?aw(e,0):i5|=n),am(e,t)}function ak(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tg,0==(130023424&(tg<<=1))&&(tg=4194304)));var n=ah();null!==(e=af(e,t))&&(tx(e,t,n),am(e,n))}function aD(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ak(e,n)}function aU(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(h(314))}null!==r&&r.delete(t),ak(e,n)}function aF(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function az(e,t,n,r){return new aF(e,t,n,r)}function aB(e){return!(!(e=e.prototype)||!e.isReactComponent)}function aV(e,t){var n=e.alternate;return null===n?((n=az(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function aH(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)aB(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case m:return aj(n.children,i,a,t);case g:s=8,i|=8;break;case v:return(e=az(12,n,t,2|i)).elementType=v,e.lanes=a,e;case x:return(e=az(13,n,t,i)).elementType=x,e.lanes=a,e;case S:return(e=az(19,n,t,i)).elementType=S,e.lanes=a,e;case E:return aG(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case y:s=9;break e;case b:s=11;break e;case w:s=14;break e;case M:s=16,r=null;break e}throw Error(h(130,null==e?e:typeof e,""))}return(t=az(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function aj(e,t,n,r){return(e=az(7,e,r,t)).lanes=n,e}function aG(e,t,n,r){return(e=az(22,e,r,t)).elementType=E,e.lanes=n,e.stateNode={},e}function aW(e,t,n){return(e=az(6,e,null,t)).lanes=n,e}function aq(e,t,n){return(t=az(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aX(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Z,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tb(0),this.expirationTimes=tb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tb(0),this.identifierPrefix=r,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function aZ(e,t,n,r,i,a,s,o,l){return e=new aX(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=az(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},t3(a),e}function aY(e){if(!e)return tt;e=e._reactInternals;e:{if(R(e)!==e||1!==e.tag)throw Error(h(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(h(171))}if(1===e.tag){var n=e.type;if(ts(n))return tu(e,n,t)}return t}function aK(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(h(188));throw Error(h(268,e=Object.keys(e).join(",")))}return null===(e=L(t))?null:e.stateNode}function aQ(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function aJ(e,t){aQ(e,t),(e=e.alternate)&&aQ(e,t)}function a$(e){return null===(e=L(e))?null:e.stateNode}function a0(){return null}return s=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||tr.current)r0=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return r0=!1,function(e,t,n){switch(t.tag){case 3:ie(t),nL();break;case 5:nX(t);break;case 1:ts(t.type)&&tc(t);break;case 4:nW(t,t.stateNode.containerInfo);break;case 10:tK(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return te(nY,1&nY.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return ia(e,t,n);return te(nY,1&nY.current),null!==(e=ih(e,t,n))?e.sibling:null}te(nY,1&nY.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return ic(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(nY,nY.current),!r)return null;break;case 22:case 23:return t.lanes=0,r5(e,t,n)}return ih(e,t,n)}(e,t,n);r0=0!=(131072&e.flags)}}else r0=!1,nw&&0!=(1048576&t.flags)&&n_(t,nh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ta(t,tn.current);t$(t,n),i=rt(null,t,r,e,i,n);var a=rn();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ts(r)?(a=!0,tc(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,t3(t),i.updater=nr,t.stateNode=i,i._reactInternals=t,no(t,r,e,n),t=r9(null,t,r,!0,a,n)):(t.tag=0,nw&&a&&ny(t),r1(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return aB(e)?1:0;if(null!=e){if((e=e.$$typeof)===b)return 11;if(e===w)return 14}return 2}(r),e=tG(r,e),i){case 0:t=r8(null,t,r,e,n);break e;case 1:t=r6(null,t,r,e,n);break e;case 11:t=r2(null,t,r,e,n);break e;case 14:t=r3(null,t,r,tG(r.type,e),n);break e}throw Error(h(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tG(r,i),r8(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tG(r,i),r6(e,t,r,i,n);case 3:e:{if(ie(t),null===e)throw Error(h(387));r=t.pendingProps,i=(a=t.memoizedState).element,t4(e,t),t9(t,r,null,n);var s=t.memoizedState;if(r=s.element,J&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=it(e,t,r,n,i=Error(h(423)));break e}if(r!==i){t=it(e,t,r,n,i=Error(h(424)));break e}for(J&&(nS=ej(t.stateNode.containerInfo),nx=t,nw=!0,nE=null,nM=!1),n=nz(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(nL(),r===i){t=ih(e,t,n);break e}r1(e,t,r,n)}t=t.child}return t;case 5:return nX(t),null===e&&nR(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,G(r,i)?s=null:null!==a&&G(r,a)&&(t.flags|=32),r7(e,t),r1(e,t,s,n),t.child;case 6:return null===e&&nR(t),null;case 13:return ia(e,t,n);case 4:return nW(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=nF(t,null,r,n):r1(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tG(r,i),r2(e,t,r,i,n);case 7:return r1(e,t,t.pendingProps,n),t.child;case 8:case 12:return r1(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,tK(t,r,s=i.value),null!==a){if(tD(a.value,s)){if(a.children===i.children&&!tr.current){t=ih(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){s=a.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=t5(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),tJ(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(h(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),tJ(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}r1(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,t$(t,n),r=r(i=t0(i)),t.flags|=1,r1(e,t,r,n),t.child;case 14:return i=tG(r=t.type,t.pendingProps),i=tG(r.type,i),r3(e,t,r,i,n);case 15:return r4(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tG(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ts(r)?(e=!0,tc(t)):e=!1,t$(t,n),na(t,r,i),no(t,r,i,n),r9(null,t,r,!0,e,n);case 19:return ic(e,t,n);case 22:return r5(e,t,n)}throw Error(h(156,t.tag))},o.attemptContinuousHydration=function(e){13===e.tag&&(ap(e,134217728,ah()),aJ(e,134217728))},o.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ah(),n=ad(e);ap(e,n,t),aJ(e,n)}},o.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tv(t.pendingLanes);0!==n&&(tS(t,1|n),am(t,tR()),0==(6&iY)&&(ae(),tV()))}break;case 13:var r=ah();ax(function(){return ap(e,1,r)}),aJ(e,1)}},o.batchedUpdates=function(e,t){var n=iY;iY|=1;try{return e(t)}finally{0===(iY=n)&&(ae(),tF&&tV())}},o.createComponentSelector=function(e){return{$$typeof:iN,value:e}},o.createContainer=function(e,t,n,r,i,a,s){return aZ(e,t,!1,null,n,r,i,a,s)},o.createHasPseudoClassSelector=function(e){return{$$typeof:ik,value:e}},o.createHydrationContainer=function(e,t,n,r,i,a,s,o,l){return(e=aZ(n,r,!0,e,i,a,s,o,l)).context=aY(null),n=e.current,(a=t5(r=ah(),i=ad(n))).callback=null!=t?t:null,t7(n,a),e.current.lanes=i,tx(e,i,r),am(e,r),e},o.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:f,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},o.createRoleSelector=function(e){return{$$typeof:iD,value:e}},o.createTestNameSelector=function(e){return{$$typeof:iU,value:e}},o.createTextSelector=function(e){return{$$typeof:iF,value:e}},o.deferredUpdates=function(e){var t=tw,n=iZ.transition;try{return iZ.transition=null,tw=16,e()}finally{tw=t,iZ.transition=n}},o.discreteUpdates=function(e,t,n,r,i){var a=tw,s=iZ.transition;try{return iZ.transition=null,tw=1,e(t,n,r,i)}finally{tw=a,iZ.transition=s,0===iY&&ae()}},o.findAllNodes=iG,o.findBoundingRects=function(e,t){if(!ea)throw Error(h(363));t=iG(e,t),e=[];for(var n=0;n<t.length;n++)e.push(eo(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,i=r+n.width,a=n.y,s=a+n.height,o=t-1;0<=o;o--)if(t!==o){var l=e[o],u=l.x,c=u+l.width,d=l.y,p=d+l.height;if(r>=u&&a>=d&&i<=c&&s<=p){e.splice(t,1);break}if(r!==u||n.width!==l.width||p<a||d>s){if(!(a!==d||n.height!==l.height||c<r||u>i)){u>r&&(l.width+=u-r,l.x=r),c<i&&(l.width=i-u),e.splice(t,1);break}}else{d>a&&(l.height+=d-a,l.y=a),p<s&&(l.height=s-d),e.splice(t,1);break}}}return e},o.findHostInstance=aK,o.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=I(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var n=e(t);if(null!==n)return n}t=t.sibling}return null}(e):null)?null:e.stateNode},o.findHostInstanceWithWarning=function(e){return aK(e)},o.flushControlled=function(e){var t=iY;iY|=1;var n=iZ.transition,r=tw;try{iZ.transition=null,tw=1,e()}finally{tw=r,iZ.transition=n,0===(iY=t)&&(ae(),tV())}},o.flushPassiveEffects=aI,o.flushSync=ax,o.focusWithin=function(e,t){if(!ea)throw Error(h(363));for(t=Array.from(t=ij(e=iB(e),t)),e=0;e<t.length;){var n=t[e++];if(!eu(n)){if(5===n.tag&&eh(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},o.getCurrentUpdatePriority=function(){return tw},o.getFindAllNodesFailureDescription=function(e,t){if(!ea)throw Error(h(363));var n=0,r=[];e=[iB(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],o=t[s];if((5!==a.tag||!eu(a))&&(iV(a,o)&&(r.push(iH(o)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(iH(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},o.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?k(e.child.stateNode):e.child.stateNode:null},o.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:a$,findFiberByHostInstance:e.findFiberByHostInstance||a0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{tN=t.inject(e),tk=t}catch(e){}e=!!t.checkDCE}}return e},o.isAlreadyRendering=function(){return!1},o.observeVisibleRects=function(e,t,n,r){if(!ea)throw Error(h(363));var i=ed(e=iG(e,t),n,r).disconnect;return{disconnect:function(){i()}}},o.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},o.runWithPriority=function(e,t){var n=tw;try{return tw=e,t()}finally{tw=n}},o.shouldError=function(){return null},o.shouldSuspend=function(){return!1},o.updateContainer=function(e,t,n,r){var i=t.current,a=ah(),s=ad(i);return n=aY(n),null===t.context?t.context=n:t.pendingContext=n,(t=t5(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),t7(i,t),null!==(e=ap(i,s,a))&&t8(e,i,s),s},o}},2576:function(e,t,n){"use strict";e.exports=n(6511)},6525:function(e,t,n){"use strict";e.exports=n(7287)},53:function(e,t){"use strict";/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s,o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],d=1,p=null,f=3,m=!1,g=!1,v=!1,_="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(h);null!==t;){if(null===t.callback)i(h);else if(t.startTime<=e)i(h),t.sortIndex=t.expirationTime,n(c,t);else break;t=r(h)}}function S(e){if(v=!1,x(e),!g){if(null!==r(c))g=!0,O(w);else{var t=r(h);null!==t&&N(S,t.startTime-e)}}}function w(e,n){g=!1,v&&(v=!1,y(T),T=-1),m=!0;var a=f;try{for(x(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!R());){var s=p.callback;if("function"==typeof s){p.callback=null,f=p.priorityLevel;var o=s(p.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?p.callback=o:p===r(c)&&i(c),x(n)}else i(c);p=r(c)}if(null!==p)var l=!0;else{var u=r(h);null!==u&&N(S,u.startTime-n),l=!1}return l}finally{p=null,f=a,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M=!1,E=null,T=-1,A=5,C=-1;function R(){return!(t.unstable_now()-C<A)}function P(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?s():(M=!1,E=null)}}else M=!1}if("function"==typeof b)s=function(){b(P)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,L=I.port2;I.port1.onmessage=P,s=function(){L.postMessage(null)}}else s=function(){_(P,0)};function O(e){E=e,M||(M=!0,s())}function N(e,n){T=_(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=a+o,e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o,sortIndex:-1},a>s?(e.sortIndex=a,n(h,e),null===r(c)&&e===r(h)&&(v?(y(T),T=-1):v=!0,N(S,a-s))):(e.sortIndex=o,n(c,e),g||m||(g=!0,O(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3840:function(e,t,n){"use strict";e.exports=n(53)},8139:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Rq:function(){return o},ZH:function(){return u}});let r=e=>"object"==typeof e&&"function"==typeof e.then,i=[];function a(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function s(e,t=null,n=!1,s={}){for(let r of(null===t&&(t=[e]),i))if(a(t,r.keys,r.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return s.lifespan&&s.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,s.lifespan)),r.response;if(!n)throw r.promise}let o={keys:t,equal:s.equal,remove:()=>{let e=i.indexOf(o);-1!==e&&i.splice(e,1)},promise:(r(e)?e:e(...t)).then(e=>{o.response=e,s.lifespan&&s.lifespan>0&&(o.timeout=setTimeout(o.remove,s.lifespan))}).catch(e=>o.error=e)};if(i.push(o),!n)throw o.promise}let o=(e,t,n)=>s(e,t,!1,n),l=(e,t,n)=>void s(e,t,!0,n),u=e=>{if(void 0===e||0===e.length)i.splice(0,i.length);else{let t=i.find(t=>a(e,t.keys,t.equal));t&&t.remove()}}},3451:function(e,t,n){var r;!function(i,a){"use strict";var s="function",o="undefined",l="object",u="string",c="major",h="model",d="name",p="type",f="vendor",m="version",g="architecture",v="console",_="mobile",y="tablet",b="smarttv",x="wearable",S="embedded",w="Amazon",M="Apple",E="ASUS",T="BlackBerry",A="Browser",C="Chrome",R="Firefox",P="Google",I="Huawei",L="Microsoft",O="Motorola",N="Opera",k="Samsung",D="Sharp",U="Sony",F="Xiaomi",z="Zebra",B="Facebook",V="Chromium OS",H="Mac OS",j=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},W=function(e,t){return typeof e===u&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},X=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},Z=function(e,t){for(var n,r,i,o,u,c,h=0;h<t.length&&!u;){var d=t[h],p=t[h+1];for(n=r=0;n<d.length&&!u&&d[n];)if(u=d[n++].exec(e))for(i=0;i<p.length;i++)c=u[++r],typeof(o=p[i])===l&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):a:this[o[0]]=c?o[1].call(this,c,o[2]):a:4===o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):a):this[o]=c||a;h+=2}},Y=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(W(t[n][r],e))return"?"===n?a:n}else if(W(t[n],e))return"?"===n?a:n;return e},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,m],[/opios[\/ ]+([\w\.]+)/i],[m,[d,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[d,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[d,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[d,"Smart Lenovo "+A]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+A],m],[/\bfocus\/([\w\.]+)/i],[m,[d,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[d,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[d,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[d,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[m,[d,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+A]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+A],m],[/samsungbrowser\/([\w\.]+)/i],[m,[d,k+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,B],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[d,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,C+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[d,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[m,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[d,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,m],[/(cobalt)\/([\w\.]+)/i],[d,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,q]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[f,k],[p,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[f,k],[p,_]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[f,M],[p,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[f,M],[p,y]],[/(macintosh);/i],[h,[f,M]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[f,D],[p,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[f,I],[p,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[f,I],[p,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[f,F],[p,_]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[f,F],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[f,"OPPO"],[p,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[f,"Vivo"],[p,_]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[f,"Realme"],[p,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[f,O],[p,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[f,O],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[f,"LG"],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[f,"LG"],[p,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[f,"Lenovo"],[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[f,"Nokia"],[p,_]],[/(pixel c)\b/i],[h,[f,P],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[f,P],[p,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[f,U],[p,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[f,U],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[f,"OnePlus"],[p,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[f,w],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[f,w],[p,_]],[/(playbook);[-\w\),; ]+(rim)/i],[h,f,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[f,T],[p,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[f,E],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[f,E],[p,_]],[/(nexus 9)/i],[h,[f,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[h,/_/g," "],[p,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[f,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[f,"Meizu"],[p,_]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[f,"Ulefone"],[p,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,h,[p,_]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,h,[p,y]],[/(surface duo)/i],[h,[f,L],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[f,"Fairphone"],[p,_]],[/(u304aa)/i],[h,[f,"AT&T"],[p,_]],[/\bsie-(\w*)/i],[h,[f,"Siemens"],[p,_]],[/\b(rct\w+) b/i],[h,[f,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[h,[f,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[h,[f,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[f,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[h,[f,"NuVision"],[p,y]],[/\b(k88) b/i],[h,[f,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[h,[f,"ZTE"],[p,_]],[/\b(gen\d{3}) b.+49h/i],[h,[f,"Swiss"],[p,_]],[/\b(zur\d{3}) b/i],[h,[f,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[h,[f,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],h,[p,y]],[/\b(ns-?\w{0,9}) b/i],[h,[f,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[f,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],h,[p,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],h,[p,_]],[/\b(ph-1) /i],[h,[f,"Essential"],[p,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[f,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[h,[f,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[h,[f,"Rotor"],[p,y]],[/(shield[\w ]+) b/i],[h,[f,"Nvidia"],[p,y]],[/(sprint) (\w+)/i],[f,h,[p,_]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[f,L],[p,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[f,z],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[f,z],[p,_]],[/smart-tv.+(samsung)/i],[f,[p,b]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[f,k],[p,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,"LG"],[p,b]],[/(apple) ?tv/i],[f,[h,M+" TV"],[p,b]],[/crkey/i],[[h,C+"cast"],[f,P],[p,b]],[/droid.+aft(\w+)( bui|\))/i],[h,[f,w],[p,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[f,D],[p,b]],[/(bravia[\w ]+)( bui|\))/i],[h,[f,U],[p,b]],[/(mitv-\w{5}) bui/i],[h,[f,F],[p,b]],[/Hbbtv.*(technisat) (.*);/i],[f,h,[p,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,X],[h,X],[p,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,h,[p,v]],[/droid.+; (shield) bui/i],[h,[f,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[h,[f,U],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[f,L],[p,v]],[/((pebble))app/i],[f,h,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[f,M],[p,x]],[/droid.+; (glass) \d/i],[h,[f,P],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[h,[f,z],[p,x]],[/(quest( 2| pro)?)/i],[h,[f,B],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,S]],[/(aeobc)\b/i],[h,[f,w],[p,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,_]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[m,Y,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Y,K],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,H],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,m],[/\(bb(10);/i],[m,[d,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[d,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[d,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,V],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,m],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,m]]},J=function(e,t){if(typeof e===l&&(t=e,e=a),!(this instanceof J))return new J(e,t).getResult();var n=typeof i!==o&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:a,b=t?j(Q,t):Q,x=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[d]=a,t[m]=a,Z.call(t,r,b.browser),t[c]=typeof(e=t[m])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a,x&&n&&n.brave&&typeof n.brave.isBrave==s&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,Z.call(e,r,b.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[h]=a,e[p]=a,Z.call(e,r,b.device),x&&!e[p]&&v&&v.mobile&&(e[p]=_),x&&"Macintosh"==e[h]&&n&&typeof n.standalone!==o&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[h]="iPad",e[p]=y),e},this.getEngine=function(){var e={};return e[d]=a,e[m]=a,Z.call(e,r,b.engine),e},this.getOS=function(){var e={};return e[d]=a,e[m]=a,Z.call(e,r,b.os),x&&!e[d]&&v&&"Unknown"!=v.platform&&(e[d]=v.platform.replace(/chrome os/i,V).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>500?X(e,500):e,this},this.setUA(r),this};J.VERSION="1.0.37",J.BROWSER=G([d,m,c]),J.CPU=G([g]),J.DEVICE=G([h,f,p,v,_,b,y,x,S]),J.ENGINE=J.OS=G([d,m]),typeof t!==o?(e.exports&&(t=e.exports=J),t.UAParser=J):n.amdO?a!==(r=(function(){return J}).call(t,n,t,e))&&(e.exports=r):typeof i!==o&&(i.UAParser=J);var $=typeof i!==o&&(i.jQuery||i.Zepto);if($&&!$.ua){var ee=new J;$.ua=ee.getResult(),$.ua.get=function(){return ee.getUA()},$.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)$.ua[n]=t[n]}}}("object"==typeof window?window:this)},3250:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,s=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return o(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),s(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i=n(1688),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var p=s(e,(h=u(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,o=n)}var s,o,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]))[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),c(p),p}},1688:function(e,t,n){"use strict";e.exports=n(3250)},2798:function(e,t,n){"use strict";e.exports=n(139)},7462:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},5761:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(3989),i=n(2161);class a extends r.l{constructor(){super(),this.setup=e=>{if(!i.sk&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}}let s=new a},819:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r=console},9886:function(e,t,n){"use strict";n.d(t,{R:function(){return l},m:function(){return o}});var r=n(819),i=n(81),a=n(9643),s=n(2379);class o extends a.F{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||r._,this.observers=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){var e,t,n,r,i,a,o,l,u,c,h,d,p,f,m,g,v,_,y,b;let x="loading"===this.state.status;try{if(!x){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(u=(c=this.mutationCache.config).onMutate)?void 0:u.call(c,this.state.variables,this));let e=await (null==(h=(d=this.options).onMutate)?void 0:h.call(d,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}let p=await (()=>{var e;return this.retryer=(0,s.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(e=(t=this.mutationCache.config).onSuccess)?void 0:e.call(t,p,this.state.variables,this.state.context,this)),await (null==(n=(r=this.options).onSuccess)?void 0:n.call(r,p,this.state.variables,this.state.context)),await (null==(i=(a=this.mutationCache.config).onSettled)?void 0:i.call(a,p,null,this.state.variables,this.state.context,this)),await (null==(o=(l=this.options).onSettled)?void 0:o.call(l,p,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:p}),p}catch(e){try{throw await (null==(p=(f=this.mutationCache.config).onError)?void 0:p.call(f,e,this.state.variables,this.state.context,this)),await (null==(m=(g=this.options).onError)?void 0:m.call(g,e,this.state.variables,this.state.context)),await (null==(v=(_=this.mutationCache.config).onSettled)?void 0:v.call(_,void 0,e,this.state.variables,this.state.context,this)),await (null==(y=(b=this.options).onSettled)?void 0:y.call(b,void 0,e,this.state.variables,this.state.context)),e}finally{this.dispatch({type:"error",error:e})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,s.Kw)(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),i.V.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},81:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(2161);let i=function(){let e=[],t=0,n=e=>{e()},i=e=>{e()},a=i=>{t?e.push(i):(0,r.A4)(()=>{n(i)})},s=()=>{let t=e;e=[],t.length&&(0,r.A4)(()=>{i(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{--t||s()}return n},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{i=e}}}()},6474:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(3989),i=n(2161);let a=["online","offline"];class s extends r.l{constructor(){super(),this.setup=e=>{if(!i.sk&&window.addEventListener){let t=()=>e();return a.forEach(e=>{window.addEventListener(e,t,!1)}),()=>{a.forEach(e=>{window.removeEventListener(e,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"==typeof e?this.setOnline(e):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}}let o=new s},3645:function(e,t,n){"use strict";n.d(t,{S:function(){return g}});var r=n(2161),i=n(819),a=n(81),s=n(2379),o=n(9643);class l extends o.F{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||i._,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){let n=(0,r.oE)(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;let n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(r.ZT).catch(r.ZT):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,r.Kp)(this.state.dataUpdatedAt,e)}onFocus(){var e;let t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;let t=this.observers.find(e=>e.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,i,a,o;if("idle"!==this.state.fetchStatus){if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise)return null==(a=this.retryer)||a.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}Array.isArray(this.options.queryKey);let l=(0,r.G9)(),u={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(l)return this.abortSignalConsumed=!0,l.signal}})};c(u);let h={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(u)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};c(h),null==(n=this.options.behavior)||n.onFetch(h),this.revertState=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(i=h.fetchOptions)?void 0:i.meta))&&this.dispatch({type:"fetch",meta:null==(o=h.fetchOptions)?void 0:o.meta});let d=e=>{if((0,s.DV)(e)&&e.silent||this.dispatch({type:"error",error:e}),!(0,s.DV)(e)){var t,n,r,i;null==(t=(n=this.cache.config).onError)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,this.state.data,e,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=(0,s.Mz)({fn:h.fetchFn,abort:null==l?void 0:l.abort.bind(l),onSuccess:e=>{var t,n,r,i;if(void 0===e){d(Error(this.queryHash+" data is undefined"));return}this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:(0,s.Kw)(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let i=e.error;if((0,s.DV)(i)&&i.revert&&this.revertState)return{...this.revertState};return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),a.V.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}var u=n(3989);class c extends u.l{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var i;let a=t.queryKey,s=null!=(i=t.queryHash)?i:(0,r.Rm)(a,t),o=this.get(s);return o||(o=new l({cache:this,logger:e.getLogger(),queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){let t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){a.V.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){let[n]=(0,r.I6)(e,t);return void 0===n.exact&&(n.exact=!0),this.queries.find(e=>(0,r._x)(n,e))}findAll(e,t){let[n]=(0,r.I6)(e,t);return Object.keys(n).length>0?this.queries.filter(e=>(0,r._x)(n,e)):this.queries}notify(e){a.V.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){a.V.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){a.V.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}var h=n(9886);class d extends u.l{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){let r=new h.m({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){a.V.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(t=>(0,r.X7)(e,t))}findAll(e){return this.mutations.filter(t=>(0,r.X7)(e,t))}notify(e){a.V.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=(null!=(e=this.resuming)?e:Promise.resolve()).then(()=>{let e=this.mutations.filter(e=>e.state.isPaused);return a.V.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(r.ZT)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}var p=n(5761),f=n(6474);function m(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}class g{constructor(e={}){this.queryCache=e.queryCache||new c,this.mutationCache=e.mutationCache||new d,this.logger=e.logger||i._,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=p.j.subscribe(()=>{p.j.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=f.N.subscribe(()=>{f.N.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){let[n]=(0,r.I6)(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}ensureQueryData(e,t,n){let i=(0,r._v)(e,t,n),a=this.getQueryData(i.queryKey);return a?Promise.resolve(a):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let i=this.queryCache.find(e),a=null==i?void 0:i.state.data,s=(0,r.SE)(t,a);if(void 0===s)return;let o=(0,r._v)(e),l=this.defaultQueryOptions(o);return this.queryCache.build(this,l).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return a.V.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){let[n]=(0,r.I6)(e,t),i=this.queryCache;a.V.batch(()=>{i.findAll(n).forEach(e=>{i.remove(e)})})}resetQueries(e,t,n){let[i,s]=(0,r.I6)(e,t,n),o=this.queryCache,l={type:"active",...i};return a.V.batch(()=>(o.findAll(i).forEach(e=>{e.reset()}),this.refetchQueries(l,s)))}cancelQueries(e,t,n){let[i,s={}]=(0,r.I6)(e,t,n);return void 0===s.revert&&(s.revert=!0),Promise.all(a.V.batch(()=>this.queryCache.findAll(i).map(e=>e.cancel(s)))).then(r.ZT).catch(r.ZT)}invalidateQueries(e,t,n){let[i,s]=(0,r.I6)(e,t,n);return a.V.batch(()=>{var e,t;if(this.queryCache.findAll(i).forEach(e=>{e.invalidate()}),"none"===i.refetchType)return Promise.resolve();let n={...i,type:null!=(e=null!=(t=i.refetchType)?t:i.type)?e:"active"};return this.refetchQueries(n,s)})}refetchQueries(e,t,n){let[i,s]=(0,r.I6)(e,t,n),o=Promise.all(a.V.batch(()=>this.queryCache.findAll(i).filter(e=>!e.isDisabled()).map(e=>{var t;return e.fetch(void 0,{...s,cancelRefetch:null==(t=null==s?void 0:s.cancelRefetch)||t,meta:{refetchPage:i.refetchPage}})}))).then(r.ZT);return null!=s&&s.throwOnError||(o=o.catch(r.ZT)),o}fetchQuery(e,t,n){let i=(0,r._v)(e,t,n),a=this.defaultQueryOptions(i);void 0===a.retry&&(a.retry=!1);let s=this.queryCache.build(this,a);return s.isStaleByTime(a.staleTime)?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(r.ZT).catch(r.ZT)}fetchInfiniteQuery(e,t,n){let i=(0,r._v)(e,t,n);return i.behavior={onFetch:e=>{e.fetchFn=()=>{var t,n,r,i,a,s,o;let l;let u=null==(t=e.fetchOptions)?void 0:null==(n=t.meta)?void 0:n.refetchPage,c=null==(r=e.fetchOptions)?void 0:null==(i=r.meta)?void 0:i.fetchMore,h=null==c?void 0:c.pageParam,d=(null==c?void 0:c.direction)==="forward",p=(null==c?void 0:c.direction)==="backward",f=(null==(a=e.state.data)?void 0:a.pages)||[],g=(null==(s=e.state.data)?void 0:s.pageParams)||[],v=g,_=!1,y=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?_=!0:null==(n=e.signal)||n.addEventListener("abort",()=>{_=!0}),e.signal}})},b=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),x=(e,t,n,r)=>(v=r?[t,...v]:[...v,t],r?[n,...e]:[...e,n]),S=(t,n,r,i)=>{if(_)return Promise.reject("Cancelled");if(void 0===r&&!n&&t.length)return Promise.resolve(t);let a={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};return y(a),Promise.resolve(b(a)).then(e=>x(t,r,e,i))};if(f.length){if(d){let t=void 0!==h,n=t?h:m(e.options,f);l=S(f,t,n)}else if(p){let t=void 0!==h,n=t?h:null==(o=e.options).getPreviousPageParam?void 0:o.getPreviousPageParam(f[0],f);l=S(f,t,n,!0)}else{v=[];let t=void 0===e.options.getNextPageParam;l=!u||!f[0]||u(f[0],0,f)?S([],t,g[0]):Promise.resolve(x([],g[0],f[0]));for(let n=1;n<f.length;n++)l=l.then(r=>{if(!u||!f[n]||u(f[n],n,f)){let i=t?g[n]:m(e.options,r);return S(r,t,i)}return Promise.resolve(x(r,g[n],f[n]))})}}else l=S([]);return l.then(e=>({pages:e,pageParams:v}))}}},this.fetchQuery(i)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(r.ZT).catch(r.ZT)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){let n=this.queryDefaults.find(t=>(0,r.yF)(e)===(0,r.yF)(t.queryKey));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;let t=this.queryDefaults.find(t=>(0,r.to)(e,t.queryKey));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){let n=this.mutationDefaults.find(t=>(0,r.yF)(e)===(0,r.yF)(t.mutationKey));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;let t=this.mutationDefaults.find(t=>(0,r.to)(e,t.mutationKey));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;let t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=(0,r.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}},9643:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(2161);class i{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,r.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:r.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},2379:function(e,t,n){"use strict";n.d(t,{DV:function(){return u},Kw:function(){return o},Mz:function(){return c}});var r=n(5761),i=n(6474),a=n(2161);function s(e){return Math.min(1e3*2**e,3e4)}function o(e){return(null!=e?e:"online")!=="online"||i.N.isOnline()}class l{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function u(e){return e instanceof l}function c(e){let t,n,u,c=!1,h=0,d=!1,p=new Promise((e,t)=>{n=e,u=t}),f=()=>!r.j.isFocused()||"always"!==e.networkMode&&!i.N.isOnline(),m=r=>{d||(d=!0,null==e.onSuccess||e.onSuccess(r),null==t||t(),n(r))},g=n=>{d||(d=!0,null==e.onError||e.onError(n),null==t||t(),u(n))},v=()=>new Promise(n=>{t=e=>{let t=d||!f();return t&&n(e),t},null==e.onPause||e.onPause()}).then(()=>{t=void 0,d||null==e.onContinue||e.onContinue()}),_=()=>{let t;if(!d){try{t=e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(m).catch(t=>{var n,r;if(d)return;let i=null!=(n=e.retry)?n:3,o=null!=(r=e.retryDelay)?r:s,l="function"==typeof o?o(h,t):o,u=!0===i||"number"==typeof i&&h<i||"function"==typeof i&&i(h,t);if(c||!u){g(t);return}h++,null==e.onFail||e.onFail(h,t),(0,a.Gh)(l).then(()=>{if(f())return v()}).then(()=>{c?g(t):_()})})}};return o(e.networkMode)?_():v().then(_),{promise:p,cancel:t=>{d||(g(new l(t)),null==e.abort||e.abort())},continue:()=>(null==t?void 0:t())?p:Promise.resolve(),cancelRetry:()=>{c=!0},continueRetry:()=>{c=!1}}}},3989:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});class r{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){let t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},2161:function(e,t,n){"use strict";n.d(t,{A4:function(){return w},G9:function(){return M},Gh:function(){return S},I6:function(){return c},Kp:function(){return o},PN:function(){return s},Rm:function(){return p},SE:function(){return a},VS:function(){return v},X7:function(){return d},ZT:function(){return i},_v:function(){return l},_x:function(){return h},lV:function(){return u},oE:function(){return E},sk:function(){return r},to:function(){return m},yF:function(){return f}});let r="undefined"==typeof window||"Deno"in window;function i(){}function a(e,t){return"function"==typeof e?e(t):e}function s(e){return"number"==typeof e&&e>=0&&e!==1/0}function o(e,t){return Math.max(e+(t||0)-Date.now(),0)}function l(e,t,n){return x(e)?"function"==typeof t?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function u(e,t,n){return x(e)?"function"==typeof t?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:"function"==typeof e?{...t,mutationFn:e}:{...e}}function c(e,t,n){return x(e)?[{...t,queryKey:e},n]:[e||{},t]}function h(e,t){let{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(x(s)){if(r){if(t.queryHash!==p(s,t.options))return!1}else{if(!g(t.queryKey,s))return!1}}if("all"!==n){let e=t.isActive();if("active"===n&&!e||"inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&(void 0===i||i===t.state.fetchStatus)&&(!a||!!a(t))}function d(e,t){let{exact:n,fetching:r,predicate:i,mutationKey:a}=e;if(x(a)){if(!t.options.mutationKey)return!1;if(n){if(f(t.options.mutationKey)!==f(a))return!1}else{if(!g(t.options.mutationKey,a))return!1}}return("boolean"!=typeof r||"loading"===t.state.status===r)&&(!i||!!i(t))}function p(e,t){return((null==t?void 0:t.queryKeyHashFn)||f)(e)}function f(e){return JSON.stringify(e,(e,t)=>y(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function m(e,t){return g(e,t)}function g(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&!Object.keys(t).some(n=>!g(e[n],t[n]))}function v(e,t){if(e&&!t||t&&!e)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}function _(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y(e){if(!b(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(b(n)&&n.hasOwnProperty("isPrototypeOf"))}function b(e){return"[object Object]"===Object.prototype.toString.call(e)}function x(e){return Array.isArray(e)}function S(e){return new Promise(t=>{setTimeout(t,e)})}function w(e){S(0).then(e)}function M(){if("function"==typeof AbortController)return new AbortController}function E(e,t,n){return null!=n.isDataEqual&&n.isDataEqual(e,t)?e:"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?function e(t,n){if(t===n)return t;let r=_(t)&&_(n);if(r||y(t)&&y(n)){let i=r?t.length:Object.keys(t).length,a=r?n:Object.keys(n),s=a.length,o=r?[]:{},l=0;for(let i=0;i<s;i++){let s=r?i:a[i];o[s]=e(t[s],n[s]),o[s]===t[s]&&l++}return i===s&&l===i?t:o}return n}(e,t):t}},5945:function(e,t,n){"use strict";n.d(t,{NL:function(){return o},aH:function(){return l}});var r=n(7294);let i=r.createContext(void 0),a=r.createContext(!1);function s(e,t){return e||(t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=i),window.ReactQueryClientContext):i)}let o=({context:e}={})=>{let t=r.useContext(s(e,r.useContext(a)));if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},l=({client:e,children:t,context:n,contextSharing:i=!1})=>{r.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);let o=s(n,i);return r.createElement(a.Provider,{value:!n&&i},r.createElement(o.Provider,{value:e},t))}},7848:function(e,t,n){"use strict";let r;n.d(t,{a:function(){return R}});var i=n(2161),a=n(81),s=n(5761),o=n(3989),l=n(2379);class u extends o.l{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),c(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,i.VS)(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();let a=this.hasListeners();a&&d(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),a&&(this.currentQuery!==r||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();let s=this.computeRefetchInterval();a&&(this.currentQuery!==r||this.options.enabled!==n.enabled||s!==this.currentRefetchInterval)&&this.updateRefetchInterval(s)}getOptimisticResult(e){let t=this.client.getQueryCache().build(this.client,e),n=this.createResult(t,e);return!e.keepPreviousData&&(void 0!==e.placeholderData?n.isPlaceholderData:this.getCurrentResult()!==n)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(i.ZT)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),i.sk||this.currentResult.isStale||!(0,i.PN)(this.options.staleTime))return;let e=(0,i.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!i.sk&&!1!==this.options.enabled&&(0,i.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||s.j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let n;let r=this.currentQuery,a=this.options,s=this.currentResult,o=this.currentResultState,u=this.currentResultOptions,h=e!==r,f=h?e.state:this.currentQueryInitialState,m=h?this.currentResult:this.previousQueryResult,{state:g}=e,{dataUpdatedAt:v,error:_,errorUpdatedAt:y,fetchStatus:b,status:x}=g,S=!1,w=!1;if(t._optimisticResults){let n=this.hasListeners(),i=!n&&c(e,t),s=n&&d(e,r,t,a);(i||s)&&(b=(0,l.Kw)(e.options.networkMode)?"fetching":"paused",v||(x="loading")),"isRestoring"===t._optimisticResults&&(b="idle")}if(t.keepPreviousData&&!g.dataUpdatedAt&&null!=m&&m.isSuccess&&"error"!==x)n=m.data,v=m.dataUpdatedAt,x=m.status,S=!0;else if(t.select&&void 0!==g.data){if(s&&g.data===(null==o?void 0:o.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(g.data),n=(0,i.oE)(null==s?void 0:s.data,n,t),this.selectResult=n,this.selectError=null}catch(e){this.selectError=e}}else n=g.data;if(void 0!==t.placeholderData&&void 0===n&&"loading"===x){let e;if(null!=s&&s.isPlaceholderData&&t.placeholderData===(null==u?void 0:u.placeholderData))e=s.data;else if(e="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(x="success",n=(0,i.oE)(null==s?void 0:s.data,e,t),w=!0)}this.selectError&&(_=this.selectError,n=this.selectResult,y=Date.now(),x="error");let M="fetching"===b,E="loading"===x,T="error"===x;return{status:x,fetchStatus:b,isLoading:E,isSuccess:"success"===x,isError:T,isInitialLoading:E&&M,data:n,dataUpdatedAt:v,error:_,errorUpdatedAt:y,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:M,isRefetching:M&&!E,isLoadingError:T&&0===g.dataUpdatedAt,isPaused:"paused"===b,isPlaceholderData:w,isPreviousData:S,isRefetchError:T&&0!==g.dataUpdatedAt,isStale:p(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){let t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,i.VS)(n,t))return;this.currentResult=n;let r={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options;if("all"===e||!e&&!this.trackedProps.size)return!0;let n=new Set(null!=e?e:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some(e=>this.currentResult[e]!==t[e]&&n.has(e))})()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,l.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){a.V.batch(()=>{var t,n,r,i,a,s,o,l;e.onSuccess?(null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null)):e.onError&&(null==(a=(s=this.options).onError)||a.call(s,this.currentResult.error),null==(o=(l=this.options).onSettled)||o.call(l,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function c(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)||e.state.dataUpdatedAt>0&&h(e,t,t.refetchOnMount)}function h(e,t,n){if(!1!==t.enabled){let r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&p(e,t)}return!1}function d(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&p(e,n)}function p(e,t){return e.isStaleByTime(t.staleTime)}var f=n(7294),m=n(464);let g=f.createContext((r=!1,{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r})),v=()=>f.useContext(g);var _=n(5945);let y=f.createContext(!1),b=()=>f.useContext(y);y.Provider;var x=n(4798);let S=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},w=e=>{f.useEffect(()=>{e.clearReset()},[e])},M=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&(0,x.L)(n,[e.error,r]),E=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},T=(e,t)=>e.isLoading&&e.isFetching&&!t,A=(e,t,n)=>(null==e?void 0:e.suspense)&&T(t,n),C=(e,t,n)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{n.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)});function R(e,t,n){return function(e,t){let n=(0,_.NL)({context:e.context}),r=b(),i=v(),s=n.defaultQueryOptions(e);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=a.V.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=a.V.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=a.V.batchCalls(s.onSettled)),E(s),S(s,i),w(i);let[o]=f.useState(()=>new t(n,s)),l=o.getOptimisticResult(s);if((0,m.$)(f.useCallback(e=>{let t=r?()=>void 0:o.subscribe(a.V.batchCalls(e));return o.updateResult(),t},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),f.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),A(s,l,r))throw C(s,o,i);if(M({result:l,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw l.error;return s.notifyOnChangeProps?l:o.trackResult(l)}((0,i._v)(e,t,n),u)}},464:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});let r=n(1688).useSyncExternalStore},4798:function(e,t,n){"use strict";function r(e,t){return"function"==typeof e?e(...t):!!e}n.d(t,{L:function(){return r}})},512:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r);else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{W:function(){return r}})},6530:function(e,t,n){"use strict";function r(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}n.d(t,{l:function(){return r}})},9477:function(e,t,n){"use strict";let r,i,a,s,o;n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return ec},AddEquation:function(){return R},AddOperation:function(){return ea},AdditiveAnimationBlendMode:function(){return tO},AdditiveBlending:function(){return E},AlphaFormat:function(){return eG},AlwaysCompare:function(){return nh},AlwaysDepth:function(){return K},AlwaysStencilFunc:function(){return nr},AmbientLight:function(){return c2},AnimationAction:function(){return hD},AnimationClip:function(){return cA},AnimationLoader:function(){return ck},AnimationMixer:function(){return hF},AnimationObjectGroup:function(){return hk},AnimationUtils:function(){return cf},ArcCurve:function(){return l8},ArrayCamera:function(){return oT},ArrowHelper:function(){return dv},AttachedBindMode:function(){return ed},Audio:function(){return h_},AudioAnalyser:function(){return hM},AudioContext:function(){return ha},AudioListener:function(){return hv},AudioLoader:function(){return hs},AxesHelper:function(){return d_},BackSide:function(){return b},BasicDepthPacking:function(){return tz},BasicShadowMap:function(){return m},BatchedMesh:function(){return lN},Bone:function(){return la},BooleanKeyframeTrack:function(){return cb},Box2:function(){return hK},Box3:function(){return rh},Box3Helper:function(){return df},BoxGeometry:function(){return ar},BoxHelper:function(){return dp},BufferAttribute:function(){return iR},BufferGeometry:function(){return iX},BufferGeometryLoader:function(){return c9},ByteType:function(){return eN},Cache:function(){return cC},Camera:function(){return au},CameraHelper:function(){return dc},CanvasTexture:function(){return l4},CapsuleGeometry:function(){return u_},CatmullRomCurve3:function(){return ur},CineonToneMapping:function(){return eu},CircleGeometry:function(){return uy},ClampToEdgeWrapping:function(){return ex},Clock:function(){return hh},Color:function(){return i_},ColorKeyframeTrack:function(){return cx},ColorManagement:function(){return n0},CompressedArrayTexture:function(){return l2},CompressedCubeTexture:function(){return l3},CompressedTexture:function(){return l1},CompressedTextureLoader:function(){return cD},ConeGeometry:function(){return ux},ConstantAlphaFactor:function(){return X},ConstantColorFactor:function(){return W},CubeCamera:function(){return ah},CubeReflectionMapping:function(){return em},CubeRefractionMapping:function(){return eg},CubeTexture:function(){return ad},CubeTextureLoader:function(){return cF},CubeUVReflectionMapping:function(){return ey},CubicBezierCurve:function(){return uo},CubicBezierCurve3:function(){return ul},CubicInterpolant:function(){return cg},CullFaceBack:function(){return d},CullFaceFront:function(){return p},CullFaceFrontBack:function(){return f},CullFaceNone:function(){return h},Curve:function(){return l5},CurvePath:function(){return um},CustomBlending:function(){return C},CustomToneMapping:function(){return eh},CylinderGeometry:function(){return ub},Cylindrical:function(){return hZ},Data3DTexture:function(){return ri},DataArrayTexture:function(){return rn},DataTexture:function(){return ls},DataTextureLoader:function(){return cz},DataUtils:function(){return iT},DecrementStencilOp:function(){return t2},DecrementWrapStencilOp:function(){return t4},DefaultLoadingManager:function(){return cP},DepthFormat:function(){return eZ},DepthStencilFormat:function(){return eY},DepthTexture:function(){return a5},DetachedBindMode:function(){return ep},DirectionalLight:function(){return c1},DirectionalLightHelper:function(){return ds},DiscreteInterpolant:function(){return c_},DisplayP3ColorSpace:function(){return tq},DodecahedronGeometry:function(){return uw},DoubleSide:function(){return x},DstAlphaFactor:function(){return B},DstColorFactor:function(){return H},DynamicCopyUsage:function(){return ny},DynamicDrawUsage:function(){return np},DynamicReadUsage:function(){return ng},EdgesGeometry:function(){return uC},EllipseCurve:function(){return l7},EqualCompare:function(){return ns},EqualDepth:function(){return $},EqualStencilFunc:function(){return t6},EquirectangularReflectionMapping:function(){return ev},EquirectangularRefractionMapping:function(){return e_},Euler:function(){return rZ},EventDispatcher:function(){return nT},ExtrudeGeometry:function(){return uY},FileLoader:function(){return cN},Float16BufferAttribute:function(){return iU},Float32BufferAttribute:function(){return iF},Float64BufferAttribute:function(){return iz},FloatType:function(){return ez},Fog:function(){return oD},FogExp2:function(){return ok},FramebufferTexture:function(){return l0},FrontSide:function(){return y},Frustum:function(){return ab},GLBufferAttribute:function(){return hj},GLSL1:function(){return nx},GLSL3:function(){return nS},GreaterCompare:function(){return nl},GreaterDepth:function(){return et},GreaterEqualCompare:function(){return nc},GreaterEqualDepth:function(){return ee},GreaterEqualStencilFunc:function(){return nn},GreaterStencilFunc:function(){return ne},GridHelper:function(){return dt},Group:function(){return oA},HalfFloatType:function(){return eB},HemisphereLight:function(){return cH},HemisphereLightHelper:function(){return de},IcosahedronGeometry:function(){return uQ},ImageBitmapLoader:function(){return hi},ImageLoader:function(){return cU},ImageUtils:function(){return n3},IncrementStencilOp:function(){return t1},IncrementWrapStencilOp:function(){return t3},InstancedBufferAttribute:function(){return lc},InstancedBufferGeometry:function(){return c6},InstancedInterleavedBuffer:function(){return hH},InstancedMesh:function(){return l_},Int16BufferAttribute:function(){return iO},Int32BufferAttribute:function(){return ik},Int8BufferAttribute:function(){return iP},IntType:function(){return eU},InterleavedBuffer:function(){return oF},InterleavedBufferAttribute:function(){return oB},Interpolant:function(){return cm},InterpolateDiscrete:function(){return tT},InterpolateLinear:function(){return tA},InterpolateSmooth:function(){return tC},InvertStencilOp:function(){return t5},KeepStencilOp:function(){return t$},KeyframeTrack:function(){return cy},LOD:function(){return o4},LatheGeometry:function(){return uv},Layers:function(){return rY},LessCompare:function(){return na},LessDepth:function(){return Q},LessEqualCompare:function(){return no},LessEqualDepth:function(){return J},LessEqualStencilFunc:function(){return t9},LessStencilFunc:function(){return t8},Light:function(){return cV},LightProbe:function(){return c5},Line:function(){return lV},Line3:function(){return h$},LineBasicMaterial:function(){return lk},LineCurve:function(){return uu},LineCurve3:function(){return uc},LineDashedMaterial:function(){return cl},LineLoop:function(){return lW},LineSegments:function(){return lG},LinearDisplayP3ColorSpace:function(){return tX},LinearEncoding:function(){return tU},LinearFilter:function(){return eC},LinearInterpolant:function(){return cv},LinearMipMapLinearFilter:function(){return eL},LinearMipMapNearestFilter:function(){return eP},LinearMipmapLinearFilter:function(){return eI},LinearMipmapNearestFilter:function(){return eR},LinearSRGBColorSpace:function(){return tW},LinearToneMapping:function(){return eo},LinearTransfer:function(){return tZ},Loader:function(){return cI},LoaderUtils:function(){return c8},LoadingManager:function(){return cR},LoopOnce:function(){return tw},LoopPingPong:function(){return tE},LoopRepeat:function(){return tM},LuminanceAlphaFormat:function(){return eX},LuminanceFormat:function(){return eq},MOUSE:function(){return u},Material:function(){return ix},MaterialLoader:function(){return c7},MathUtils:function(){return nz},Matrix3:function(){return nV},Matrix4:function(){return rF},MaxEquation:function(){return O},Mesh:function(){return at},MeshBasicMaterial:function(){return iS},MeshDepthMaterial:function(){return ob},MeshDistanceMaterial:function(){return ox},MeshLambertMaterial:function(){return cs},MeshMatcapMaterial:function(){return co},MeshNormalMaterial:function(){return ca},MeshPhongMaterial:function(){return cr},MeshPhysicalMaterial:function(){return cn},MeshStandardMaterial:function(){return ct},MeshToonMaterial:function(){return ci},MinEquation:function(){return L},MirroredRepeatWrapping:function(){return eS},MixOperation:function(){return ei},MultiplyBlending:function(){return A},MultiplyOperation:function(){return er},NearestFilter:function(){return ew},NearestMipMapLinearFilter:function(){return eA},NearestMipMapNearestFilter:function(){return eE},NearestMipmapLinearFilter:function(){return eT},NearestMipmapNearestFilter:function(){return eM},NeverCompare:function(){return ni},NeverDepth:function(){return Y},NeverStencilFunc:function(){return t7},NoBlending:function(){return w},NoColorSpace:function(){return tj},NoToneMapping:function(){return es},NormalAnimationBlendMode:function(){return tL},NormalBlending:function(){return M},NotEqualCompare:function(){return nu},NotEqualDepth:function(){return en},NotEqualStencilFunc:function(){return nt},NumberKeyframeTrack:function(){return cS},Object3D:function(){return r9},ObjectLoader:function(){return he},ObjectSpaceNormalMap:function(){return tH},OctahedronGeometry:function(){return uJ},OneFactor:function(){return k},OneMinusConstantAlphaFactor:function(){return Z},OneMinusConstantColorFactor:function(){return q},OneMinusDstAlphaFactor:function(){return V},OneMinusDstColorFactor:function(){return j},OneMinusSrcAlphaFactor:function(){return z},OneMinusSrcColorFactor:function(){return U},OrthographicCamera:function(){return aN},P3Primaries:function(){return tQ},PCFShadowMap:function(){return g},PCFSoftShadowMap:function(){return v},PMREMGenerator:function(){return aG},Path:function(){return ug},PerspectiveCamera:function(){return ac},Plane:function(){return av},PlaneGeometry:function(){return aw},PlaneHelper:function(){return dm},PointLight:function(){return c$},PointLightHelper:function(){return h7},Points:function(){return lQ},PointsMaterial:function(){return lq},PolarGridHelper:function(){return dn},PolyhedronGeometry:function(){return uS},PositionalAudio:function(){return hw},PropertyBinding:function(){return hN},PropertyMixer:function(){return hE},QuadraticBezierCurve:function(){return uh},QuadraticBezierCurve3:function(){return ud},Quaternion:function(){return ro},QuaternionKeyframeTrack:function(){return cM},QuaternionLinearInterpolant:function(){return cw},RED_GREEN_RGTC2_Format:function(){return tx},RED_RGTC1_Format:function(){return ty},REVISION:function(){return l},RGBADepthPacking:function(){return tB},RGBAFormat:function(){return eW},RGBAIntegerFormat:function(){return e0},RGBA_ASTC_10x10_Format:function(){return tp},RGBA_ASTC_10x5_Format:function(){return tc},RGBA_ASTC_10x6_Format:function(){return th},RGBA_ASTC_10x8_Format:function(){return td},RGBA_ASTC_12x10_Format:function(){return tf},RGBA_ASTC_12x12_Format:function(){return tm},RGBA_ASTC_4x4_Format:function(){return tn},RGBA_ASTC_5x4_Format:function(){return tr},RGBA_ASTC_5x5_Format:function(){return ti},RGBA_ASTC_6x5_Format:function(){return ta},RGBA_ASTC_6x6_Format:function(){return ts},RGBA_ASTC_8x5_Format:function(){return to},RGBA_ASTC_8x6_Format:function(){return tl},RGBA_ASTC_8x8_Format:function(){return tu},RGBA_BPTC_Format:function(){return tg},RGBA_ETC2_EAC_Format:function(){return tt},RGBA_PVRTC_2BPPV1_Format:function(){return e6},RGBA_PVRTC_4BPPV1_Format:function(){return e8},RGBA_S3TC_DXT1_Format:function(){return e2},RGBA_S3TC_DXT3_Format:function(){return e3},RGBA_S3TC_DXT5_Format:function(){return e4},RGB_BPTC_SIGNED_Format:function(){return tv},RGB_BPTC_UNSIGNED_Format:function(){return t_},RGB_ETC1_Format:function(){return e9},RGB_ETC2_Format:function(){return te},RGB_PVRTC_2BPPV1_Format:function(){return e7},RGB_PVRTC_4BPPV1_Format:function(){return e5},RGB_S3TC_DXT1_Format:function(){return e1},RGFormat:function(){return eJ},RGIntegerFormat:function(){return e$},RawShaderMaterial:function(){return ce},Ray:function(){return rU},Raycaster:function(){return hG},Rec709Primaries:function(){return tK},RectAreaLight:function(){return c3},RedFormat:function(){return eK},RedIntegerFormat:function(){return eQ},ReinhardToneMapping:function(){return el},RenderTarget:function(){return re},RepeatWrapping:function(){return eb},ReplaceStencilOp:function(){return t0},ReverseSubtractEquation:function(){return I},RingGeometry:function(){return u$},SIGNED_RED_GREEN_RGTC2_Format:function(){return tS},SIGNED_RED_RGTC1_Format:function(){return tb},SRGBColorSpace:function(){return tG},SRGBTransfer:function(){return tY},Scene:function(){return oU},ShaderChunk:function(){return aM},ShaderLib:function(){return aT},ShaderMaterial:function(){return al},ShadowMaterial:function(){return u9},Shape:function(){return uR},ShapeGeometry:function(){return u0},ShapePath:function(){return dy},ShapeUtils:function(){return uq},ShortType:function(){return ek},Skeleton:function(){return lu},SkeletonHelper:function(){return h5},SkinnedMesh:function(){return li},Source:function(){return n5},Sphere:function(){return rR},SphereGeometry:function(){return u1},Spherical:function(){return hX},SphericalHarmonics3:function(){return c4},SplineCurve:function(){return up},SpotLight:function(){return cZ},SpotLightHelper:function(){return h1},Sprite:function(){return o0},SpriteMaterial:function(){return oV},SrcAlphaFactor:function(){return F},SrcAlphaSaturateFactor:function(){return G},SrcColorFactor:function(){return D},StaticCopyUsage:function(){return n_},StaticDrawUsage:function(){return nd},StaticReadUsage:function(){return nm},StereoCamera:function(){return hc},StreamCopyUsage:function(){return nb},StreamDrawUsage:function(){return nf},StreamReadUsage:function(){return nv},StringKeyframeTrack:function(){return cE},SubtractEquation:function(){return P},SubtractiveBlending:function(){return T},TOUCH:function(){return c},TangentSpaceNormalMap:function(){return tV},TetrahedronGeometry:function(){return u2},Texture:function(){return n6},TextureLoader:function(){return cB},TorusGeometry:function(){return u3},TorusKnotGeometry:function(){return u4},Triangle:function(){return id},TriangleFanDrawMode:function(){return tD},TriangleStripDrawMode:function(){return tk},TrianglesDrawMode:function(){return tN},TubeGeometry:function(){return u5},TwoPassDoubleSide:function(){return S},UVMapping:function(){return ef},Uint16BufferAttribute:function(){return iN},Uint32BufferAttribute:function(){return iD},Uint8BufferAttribute:function(){return iI},Uint8ClampedBufferAttribute:function(){return iL},Uniform:function(){return hz},UniformsGroup:function(){return hV},UniformsLib:function(){return aE},UniformsUtils:function(){return ao},UnsignedByteType:function(){return eO},UnsignedInt248Type:function(){return ej},UnsignedIntType:function(){return eF},UnsignedShort4444Type:function(){return eV},UnsignedShort5551Type:function(){return eH},UnsignedShortType:function(){return eD},VSMShadowMap:function(){return _},Vector2:function(){return nB},Vector3:function(){return rl},Vector4:function(){return n9},VectorKeyframeTrack:function(){return cT},VideoTexture:function(){return l$},WebGL1Renderer:function(){return oN},WebGL3DRenderTarget:function(){return ra},WebGLArrayRenderTarget:function(){return rr},WebGLCoordinateSystem:function(){return nM},WebGLCubeRenderTarget:function(){return ap},WebGLMultipleRenderTargets:function(){return rs},WebGLRenderTarget:function(){return rt},WebGLRenderer:function(){return oO},WebGLUtils:function(){return oE},WebGPUCoordinateSystem:function(){return nE},WireframeGeometry:function(){return u7},WrapAroundEnding:function(){return tI},ZeroCurvatureEnding:function(){return tR},ZeroFactor:function(){return N},ZeroSlopeEnding:function(){return tP},ZeroStencilOp:function(){return tJ},_SRGBAFormat:function(){return nw},createCanvasElement:function(){return nX},sRGBEncoding:function(){return tF}});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */let l="159",u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},h=0,d=1,p=2,f=3,m=0,g=1,v=2,_=3,y=0,b=1,x=2,S=2,w=0,M=1,E=2,T=3,A=4,C=5,R=100,P=101,I=102,L=103,O=104,N=200,k=201,D=202,U=203,F=204,z=205,B=206,V=207,H=208,j=209,G=210,W=211,q=212,X=213,Z=214,Y=0,K=1,Q=2,J=3,$=4,ee=5,et=6,en=7,er=0,ei=1,ea=2,es=0,eo=1,el=2,eu=3,ec=4,eh=5,ed="attached",ep="detached",ef=300,em=301,eg=302,ev=303,e_=304,ey=306,eb=1e3,ex=1001,eS=1002,ew=1003,eM=1004,eE=1004,eT=1005,eA=1005,eC=1006,eR=1007,eP=1007,eI=1008,eL=1008,eO=1009,eN=1010,ek=1011,eD=1012,eU=1013,eF=1014,ez=1015,eB=1016,eV=1017,eH=1018,ej=1020,eG=1021,eW=1023,eq=1024,eX=1025,eZ=1026,eY=1027,eK=1028,eQ=1029,eJ=1030,e$=1031,e0=1033,e1=33776,e2=33777,e3=33778,e4=33779,e5=35840,e7=35841,e8=35842,e6=35843,e9=36196,te=37492,tt=37496,tn=37808,tr=37809,ti=37810,ta=37811,ts=37812,to=37813,tl=37814,tu=37815,tc=37816,th=37817,td=37818,tp=37819,tf=37820,tm=37821,tg=36492,tv=36494,t_=36495,ty=36283,tb=36284,tx=36285,tS=36286,tw=2200,tM=2201,tE=2202,tT=2300,tA=2301,tC=2302,tR=2400,tP=2401,tI=2402,tL=2500,tO=2501,tN=0,tk=1,tD=2,tU=3e3,tF=3001,tz=3200,tB=3201,tV=0,tH=1,tj="",tG="srgb",tW="srgb-linear",tq="display-p3",tX="display-p3-linear",tZ="linear",tY="srgb",tK="rec709",tQ="p3",tJ=0,t$=7680,t0=7681,t1=7682,t2=7683,t3=34055,t4=34056,t5=5386,t7=512,t8=513,t6=514,t9=515,ne=516,nt=517,nn=518,nr=519,ni=512,na=513,ns=514,no=515,nl=516,nu=517,nc=518,nh=519,nd=35044,np=35048,nf=35040,nm=35045,ng=35049,nv=35041,n_=35046,ny=35050,nb=35042,nx="100",nS="300 es",nw=1035,nM=2e3,nE=2001;class nT{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}let nA=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nC=1234567,nR=Math.PI/180,nP=180/Math.PI;function nI(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(nA[255&e]+nA[e>>8&255]+nA[e>>16&255]+nA[e>>24&255]+"-"+nA[255&t]+nA[t>>8&255]+"-"+nA[t>>16&15|64]+nA[t>>24&255]+"-"+nA[63&n|128]+nA[n>>8&255]+"-"+nA[n>>16&255]+nA[n>>24&255]+nA[255&r]+nA[r>>8&255]+nA[r>>16&255]+nA[r>>24&255]).toLowerCase()}function nL(e,t,n){return Math.max(t,Math.min(n,e))}function nO(e,t){return(e%t+t)%t}function nN(e,t,n){return(1-n)*e+n*t}function nk(e){return(e&e-1)==0&&0!==e}function nD(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function nU(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function nF(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}let nz={DEG2RAD:nR,RAD2DEG:nP,generateUUID:nI,clamp:nL,euclideanModulo:nO,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:nN,damp:function(e,t,n,r){return nN(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(nO(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(nC=e);let t=nC+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*nR},radToDeg:function(e){return e*nP},isPowerOfTwo:nk,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:nD,setQuaternionFromProperEuler:function(e,t,n,r,i){let a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),u=a((t+r)/2),c=s((t+r)/2),h=a((t-r)/2),d=s((t-r)/2),p=a((r-t)/2),f=s((r-t)/2);switch(i){case"XYX":e.set(o*c,l*h,l*d,o*u);break;case"YZY":e.set(l*d,o*c,l*h,o*u);break;case"ZXZ":e.set(l*h,l*d,o*c,o*u);break;case"XZX":e.set(o*c,l*f,l*p,o*u);break;case"YXY":e.set(l*p,o*c,l*f,o*u);break;case"ZYZ":e.set(l*f,l*p,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:nF,denormalize:nU};class nB{constructor(e=0,t=0){nB.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nL(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nV{constructor(e,t,n,r,i,a,s,o,l){nV.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l)}set(e,t,n,r,i,a,s,o,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=s,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],b=r[2],x=r[5],S=r[8];return i[0]=a*f+s*v+o*b,i[3]=a*m+s*_+o*x,i[6]=a*g+s*y+o*S,i[1]=l*f+u*v+c*b,i[4]=l*m+u*_+c*x,i[7]=l*g+u*y+c*S,i[2]=h*f+d*v+p*b,i[5]=h*m+d*_+p*x,i[8]=h*g+d*y+p*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-n*i*u+n*s*o+r*i*l-r*a*o}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=u*a-s*l,h=s*o-u*i,d=l*i-a*o,p=t*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=c*f,e[1]=(r*l-u*n)*f,e[2]=(s*n-r*a)*f,e[3]=h*f,e[4]=(u*t-r*o)*f,e[5]=(r*i-s*t)*f,e[6]=d*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){let o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(nH.makeScale(e,t)),this}rotate(e){return this.premultiply(nH.makeRotation(-e)),this}translate(e,t){return this.premultiply(nH.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let nH=new nV;function nj(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}let nG={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function nW(e,t){return new nG[e](t)}function nq(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function nX(){let e=nq("canvas");return e.style.display="block",e}let nZ={};function nY(e){e in nZ||(nZ[e]=!0,console.warn(e))}let nK=new nV().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),nQ=new nV().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),nJ={[tW]:{transfer:tZ,primaries:tK,toReference:e=>e,fromReference:e=>e},[tG]:{transfer:tY,primaries:tK,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[tX]:{transfer:tZ,primaries:tQ,toReference:e=>e.applyMatrix3(nQ),fromReference:e=>e.applyMatrix3(nK)},[tq]:{transfer:tY,primaries:tQ,toReference:e=>e.convertSRGBToLinear().applyMatrix3(nQ),fromReference:e=>e.applyMatrix3(nK).convertLinearToSRGB()}},n$=new Set([tW,tX]),n0={enabled:!0,_workingColorSpace:tW,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(legacyMode){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!legacyMode},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(colorSpace){if(!n$.has(colorSpace))throw Error(`Unsupported working color space, "${colorSpace}".`);this._workingColorSpace=colorSpace},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;let r=nJ[t].toReference;return(0,nJ[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return nJ[e].primaries},getTransfer:function(e){return e===tj?tZ:nJ[e].transfer}};function n1(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function n2(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class n3{static getDataURL(e){let t;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=nq("canvas")),r.width=e.width,r.height=e.height;let n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=nq("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*n1(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*n1(t[e]/255)):t[e]=n1(t[e]);return{data:t,width:e.width,height:e.height}}}}let n4=0;class n5{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n4++}),this.uuid=nI(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(n7(r[t].image)):e.push(n7(r[t]))}else e=n7(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function n7(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?n3.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let n8=0;class n6 extends nT{constructor(e=n6.DEFAULT_IMAGE,t=n6.DEFAULT_MAPPING,n=ex,r=ex,i=eC,a=eI,s=eW,o=eO,l=n6.DEFAULT_ANISOTROPY,u=tj){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:n8++}),this.uuid=nI(),this.name="",this.source=new n5(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new nB(0,0),this.repeat=new nB(1,1),this.center=new nB(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nV,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(nY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===tF?tG:tj),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ef)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case eb:e.x=e.x-Math.floor(e.x);break;case ex:e.x=e.x<0?0:1;break;case eS:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case eb:e.y=e.y-Math.floor(e.y);break;case ex:e.y=e.y<0?0:1;break;case eS:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===tG?tF:tU}set encoding(e){nY("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===tF?tG:tj}}n6.DEFAULT_IMAGE=null,n6.DEFAULT_MAPPING=ef,n6.DEFAULT_ANISOTROPY=1;class n9{constructor(e=0,t=0,n=0,r=1){n9.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r;let i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],p=i[10];if(.01>Math.abs(s-l)&&.01>Math.abs(o-h)&&.01>Math.abs(c-d)){if(.1>Math.abs(s+l)&&.1>Math.abs(o+h)&&.1>Math.abs(c+d)&&.1>Math.abs(a+u+p-3))return this.set(1,0,0,0),this;let e=(a+1)/2,i=(u+1)/2,f=(p+1)/2,m=(s+l)/4,g=(o+h)/4,v=(c+d)/4;return e>i&&e>f?e<.01?(t=0,n=.707106781,r=.707106781):(n=m/(t=Math.sqrt(e)),r=g/t):i>f?i<.01?(t=.707106781,n=0,r=.707106781):(t=m/(n=Math.sqrt(i)),r=v/n):f<.01?(t=.707106781,n=.707106781,r=0):(t=g/(r=Math.sqrt(f)),n=v/r),this.set(t,n,r,Math.PI),this}let f=Math.sqrt((d-c)*(d-c)+(o-h)*(o-h)+(l-s)*(l-s));return .001>Math.abs(f)&&(f=1),this.x=(d-c)/f,this.y=(o-h)/f,this.z=(l-s)/f,this.w=Math.acos((a+u+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class re extends nT{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new n9(0,0,e,t),this.scissorTest=!1,this.viewport=new n9(0,0,e,t),void 0!==n.encoding&&(nY("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===tF?tG:tj),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:eC,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new n6({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new n5(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rt extends re{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class rn extends n6{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ew,this.minFilter=ew,this.wrapR=ex,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rr extends rt{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new rn(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ri extends n6{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ew,this.minFilter=ew,this.wrapR=ex,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ra extends rt{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ri(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class rs extends rt{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ro{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],p=i[a+2],f=i[a+3];if(0===s){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===s){e[t+0]=h,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(c!==f||o!==h||l!==d||u!==p){let e=1-s,t=o*h+l*d+u*p+c*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}let i=s*n;if(o=o*e+h*i,l=l*e+d*i,u=u*e+p*i,c=c*e+f*i,e===1-s){let e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){let s=n[r],o=n[r+1],l=n[r+2],u=n[r+3],c=i[a],h=i[a+1],d=i[a+2],p=i[a+3];return e[t]=s*p+u*c+o*d-l*h,e[t+1]=o*p+u*h+l*c-s*d,e[t+2]=l*p+u*d+s*h-o*c,e[t+3]=u*p-s*c-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(r/2),c=s(i/2),h=o(n/2),d=o(r/2),p=o(i/2);switch(a){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=n+s+c;if(h>0){let e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>c){let e=2*Math.sqrt(1+n-s-c);this._w=(u-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>c){let e=2*Math.sqrt(1+s-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+u)/e}else{let e=2*Math.sqrt(1+c-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nL(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);return 0===n||this.slerp(e,Math.min(1,t/n)),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+a*s+r*l-i*o,this._y=r*u+a*o+i*s-n*l,this._z=i*u+a*l+n*o-r*s,this._w=a*u-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let o=1-s*s;if(o<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),u=Math.atan2(l,s),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=a*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class rl{constructor(e=0,t=0,n=0){rl.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rc.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rc.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*r-s*n),u=2*(s*t-i*r),c=2*(i*n-a*t);return this.x=t+o*l+a*c-s*u,this.y=n+o*u+s*l-i*c,this.z=r+o*c+i*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ru.copy(this).projectOnVector(e),this.sub(ru)}reflect(e){return this.sub(ru.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nL(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let ru=new rl,rc=new ro;class rh{constructor(e=new rl(Infinity,Infinity,Infinity),t=new rl(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(rp.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(rp.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=rp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){let r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,rp):rp.fromBufferAttribute(r,t),rp.applyMatrix4(e.matrixWorld),this.expandByPoint(rp);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),rf.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),rf.copy(n.boundingBox)),rf.applyMatrix4(e.matrixWorld),this.union(rf)}let r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)&&!(e.z<this.min.z)&&!(e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)&&!(e.max.z<this.min.z)&&!(e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rp),rp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rx),rS.subVectors(this.max,rx),rm.subVectors(e.a,rx),rg.subVectors(e.b,rx),rv.subVectors(e.c,rx),r_.subVectors(rg,rm),ry.subVectors(rv,rg),rb.subVectors(rm,rv);let t=[0,-r_.z,r_.y,0,-ry.z,ry.y,0,-rb.z,rb.y,r_.z,0,-r_.x,ry.z,0,-ry.x,rb.z,0,-rb.x,-r_.y,r_.x,0,-ry.y,ry.x,0,-rb.y,rb.x,0];return!!(rE(t,rm,rg,rv,rS)&&rE(t=[1,0,0,0,1,0,0,0,1],rm,rg,rv,rS))&&(rw.crossVectors(r_,ry),rE(t=[rw.x,rw.y,rw.z],rm,rg,rv,rS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rp).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(rp).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(rd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rd)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let rd=[new rl,new rl,new rl,new rl,new rl,new rl,new rl,new rl],rp=new rl,rf=new rh,rm=new rl,rg=new rl,rv=new rl,r_=new rl,ry=new rl,rb=new rl,rx=new rl,rS=new rl,rw=new rl,rM=new rl;function rE(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){rM.fromArray(e,a);let s=i.x*Math.abs(rM.x)+i.y*Math.abs(rM.y)+i.z*Math.abs(rM.z),o=t.dot(rM),l=n.dot(rM),u=r.dot(rM);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>s)return!1}return!0}let rT=new rh,rA=new rl,rC=new rl;class rR{constructor(e=new rl,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):rT.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;rA.subVectors(e,this.center);let t=rA.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(rA,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(rC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(rA.copy(e.center).add(rC)),this.expandByPoint(rA.copy(e.center).sub(rC)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let rP=new rl,rI=new rl,rL=new rl,rO=new rl,rN=new rl,rk=new rl,rD=new rl;class rU{constructor(e=new rl,t=new rl(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rP)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=rP.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rP.copy(this.origin).addScaledVector(this.direction,t),rP.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){let i,a,s,o;rI.copy(e).add(t).multiplyScalar(.5),rL.copy(t).sub(e).normalize(),rO.copy(this.origin).sub(rI);let l=.5*e.distanceTo(t),u=-this.direction.dot(rL),c=rO.dot(this.direction),h=-rO.dot(rL),d=rO.lengthSq(),p=Math.abs(1-u*u);if(p>0){if(i=u*h-c,a=u*c-h,o=l*p,i>=0){if(a>=-o){if(a<=o){let e=1/p;i*=e,a*=e,s=i*(i+u*a+2*c)+a*(u*i+a+2*h)+d}else s=-(i=Math.max(0,-(u*(a=l)+c)))*i+a*(a+2*h)+d}else s=-(i=Math.max(0,-(u*(a=-l)+c)))*i+a*(a+2*h)+d}else a<=-o?(a=(i=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-h),l),s=-i*i+a*(a+2*h)+d):a<=o?(i=0,s=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):(a=(i=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-h),l),s=-i*i+a*(a+2*h)+d)}else a=u>0?-l:l,s=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(rI).addScaledVector(rL,a),s}intersectSphere(e,t){rP.subVectors(e.center,this.origin);let n=rP.dot(this.direction),r=rP.dot(rP)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let n,r,i,a,s,o;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return(l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(s=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||s>r)?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,rP)}intersectTriangle(e,t,n,r,i){let a;rN.subVectors(t,e),rk.subVectors(n,e),rD.crossVectors(rN,rk);let s=this.direction.dot(rD);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}rO.subVectors(this.origin,e);let o=a*this.direction.dot(rk.crossVectors(rO,rk));if(o<0)return null;let l=a*this.direction.dot(rN.cross(rO));if(l<0||o+l>s)return null;let u=-a*rO.dot(rD);return u<0?null:this.at(u/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rF{constructor(e,t,n,r,i,a,s,o,l,u,c,h,d,p,f,m){rF.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l,u,c,h,d,p,f,m)}set(e,t,n,r,i,a,s,o,l,u,c,h,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rF().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/rz.setFromMatrixColumn(e,0).length(),i=1/rz.setFromMatrixColumn(e,1).length(),a=1/rz.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){let e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){let e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e-i*s,t[4]=-a*c,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*u,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=o*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){let e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){let e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=s*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rV,e,rH)}lookAt(e,t,n){let r=this.elements;return rW.subVectors(e,t),0===rW.lengthSq()&&(rW.z=1),rW.normalize(),rj.crossVectors(n,rW),0===rj.lengthSq()&&(1===Math.abs(n.z)?rW.x+=1e-4:rW.z+=1e-4,rW.normalize(),rj.crossVectors(n,rW)),rj.normalize(),rG.crossVectors(rW,rj),r[0]=rj.x,r[4]=rG.x,r[8]=rW.x,r[1]=rj.y,r[5]=rG.y,r[9]=rW.y,r[2]=rj.z,r[6]=rG.z,r[10]=rW.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],b=n[15],x=r[0],S=r[4],w=r[8],M=r[12],E=r[1],T=r[5],A=r[9],C=r[13],R=r[2],P=r[6],I=r[10],L=r[14],O=r[3],N=r[7],k=r[11],D=r[15];return i[0]=a*x+s*E+o*R+l*O,i[4]=a*S+s*T+o*P+l*N,i[8]=a*w+s*A+o*I+l*k,i[12]=a*M+s*C+o*L+l*D,i[1]=u*x+c*E+h*R+d*O,i[5]=u*S+c*T+h*P+d*N,i[9]=u*w+c*A+h*I+d*k,i[13]=u*M+c*C+h*L+d*D,i[2]=p*x+f*E+m*R+g*O,i[6]=p*S+f*T+m*P+g*N,i[10]=p*w+f*A+m*I+g*k,i[14]=p*M+f*C+m*L+g*D,i[3]=v*x+_*E+y*R+b*O,i[7]=v*S+_*T+y*P+b*N,i[11]=v*w+_*A+y*I+b*k,i[15]=v*M+_*C+y*L+b*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14],p=e[3];return p*(+i*o*c-r*l*c-i*s*h+n*l*h+r*s*d-n*o*d)+e[7]*(+t*o*d-t*l*h+i*a*h-r*a*d+r*l*u-i*o*u)+e[11]*(+t*l*c-t*s*d-i*a*c+n*a*d+i*s*u-n*l*u)+e[15]*(-r*s*u-t*o*c+t*s*h+r*a*c-n*a*h+n*o*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*h*l+f*o*d-s*m*d-c*o*g+s*h*g,_=p*h*l-u*m*l-p*o*d+a*m*d+u*o*g-a*h*g,y=u*f*l-p*c*l+p*s*d-a*f*d-u*s*g+a*c*g,b=p*c*o-u*f*o-p*s*h+a*f*h+u*s*m-a*c*m,x=t*v+n*_+r*y+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/x;return e[0]=v*S,e[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*S,e[2]=(s*m*i-f*o*i+f*r*l-n*m*l-s*r*g+n*o*g)*S,e[3]=(c*o*i-s*h*i-c*r*l+n*h*l+s*r*d-n*o*d)*S,e[4]=_*S,e[5]=(u*m*i-p*h*i+p*r*d-t*m*d-u*r*g+t*h*g)*S,e[6]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*g-t*o*g)*S,e[7]=(a*h*i-u*o*i+u*r*l-t*h*l-a*r*d+t*o*d)*S,e[8]=y*S,e[9]=(p*c*i-u*f*i-p*n*d+t*f*d+u*n*g-t*c*g)*S,e[10]=(a*f*i-p*s*i+p*n*l-t*f*l-a*n*g+t*s*g)*S,e[11]=(u*s*i-a*c*i-u*n*l+t*c*l+a*n*d-t*s*d)*S,e[12]=b*S,e[13]=(u*f*r-p*c*r+p*n*h-t*f*h-u*n*m+t*c*m)*S,e[14]=(p*s*r-a*f*r-p*n*o+t*f*o+a*n*m-t*s*m)*S,e[15]=(a*c*r-u*s*r+u*n*o-t*c*o-a*n*h+t*s*h)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,u=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+n,u*o-r*a,0,l*o-r*s,u*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,u=a+a,c=s+s,h=i*l,d=i*u,p=i*c,f=a*u,m=a*c,g=s*c,v=o*l,_=o*u,y=o*c,b=n.x,x=n.y,S=n.z;return r[0]=(1-(f+g))*b,r[1]=(d+y)*b,r[2]=(p-_)*b,r[3]=0,r[4]=(d-y)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(p+_)*S,r[9]=(m-v)*S,r[10]=(1-(h+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=rz.set(r[0],r[1],r[2]).length(),a=rz.set(r[4],r[5],r[6]).length(),s=rz.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],rB.copy(this);let o=1/i,l=1/a,u=1/s;return rB.elements[0]*=o,rB.elements[1]*=o,rB.elements[2]*=o,rB.elements[4]*=l,rB.elements[5]*=l,rB.elements[6]*=l,rB.elements[8]*=u,rB.elements[9]*=u,rB.elements[10]*=u,t.setFromRotationMatrix(rB),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a,s=nM){let o,l;let u=this.elements;if(s===nM)o=-(a+i)/(a-i),l=-2*a*i/(a-i);else if(s===nE)o=-a/(a-i),l=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return u[0]=2*i/(t-e),u[4]=0,u[8]=(t+e)/(t-e),u[12]=0,u[1]=0,u[5]=2*i/(n-r),u[9]=(n+r)/(n-r),u[13]=0,u[2]=0,u[6]=0,u[10]=o,u[14]=l,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,i,a,s=nM){let o,l;let u=this.elements,c=1/(t-e),h=1/(n-r),d=1/(a-i);if(s===nM)o=(a+i)*d,l=-2*d;else if(s===nE)o=i*d,l=-1*d;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-((t+e)*c),u[1]=0,u[5]=2*h,u[9]=0,u[13]=-((n+r)*h),u[2]=0,u[6]=0,u[10]=l,u[14]=-o,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let rz=new rl,rB=new rF,rV=new rl(0,0,0),rH=new rl(1,1,1),rj=new rl,rG=new rl,rW=new rl,rq=new rF,rX=new ro;class rZ{constructor(e=0,t=0,n=0,r=rZ.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(nL(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-nL(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(nL(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-nL(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(nL(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-nL(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return rq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rq,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rX.setFromEuler(this),this.setFromQuaternion(rX,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}rZ.DEFAULT_ORDER="XYZ";class rY{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let rK=0,rQ=new rl,rJ=new ro,r$=new rF,r0=new rl,r1=new rl,r2=new rl,r3=new ro,r4=new rl(1,0,0),r5=new rl(0,1,0),r7=new rl(0,0,1),r8={type:"added"},r6={type:"removed"};class r9 extends nT{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rK++}),this.uuid=nI(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=r9.DEFAULT_UP.clone();let e=new rl,t=new rZ,n=new ro,r=new rl(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rF},normalMatrix:{value:new nV}}),this.matrix=new rF,this.matrixWorld=new rF,this.matrixAutoUpdate=r9.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=r9.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rY,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return rJ.setFromAxisAngle(e,t),this.quaternion.multiply(rJ),this}rotateOnWorldAxis(e,t){return rJ.setFromAxisAngle(e,t),this.quaternion.premultiply(rJ),this}rotateX(e){return this.rotateOnAxis(r4,e)}rotateY(e){return this.rotateOnAxis(r5,e)}rotateZ(e){return this.rotateOnAxis(r7,e)}translateOnAxis(e,t){return rQ.copy(e).applyQuaternion(this.quaternion),this.position.add(rQ.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(r4,e)}translateY(e){return this.translateOnAxis(r5,e)}translateZ(e){return this.translateOnAxis(r7,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(r$.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?r0.copy(e):r0.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),r1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?r$.lookAt(r1,r0,this.up):r$.lookAt(r0,r1,this.up),this.quaternion.setFromRotationMatrix(r$),r&&(r$.extractRotation(r.matrixWorld),rJ.setFromRotationMatrix(r$),this.quaternion.premultiply(rJ.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(r8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(r6)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),r$.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),r$.multiply(e.parent.matrixWorld)),e.applyMatrix4(r$),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r1,e,r2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r1,r3,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++){let r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++){let n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}r9.DEFAULT_UP=new rl(0,1,0),r9.DEFAULT_MATRIX_AUTO_UPDATE=!0,r9.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let ie=new rl,it=new rl,ir=new rl,ii=new rl,ia=new rl,is=new rl,io=new rl,il=new rl,iu=new rl,ic=new rl,ih=!1;class id{constructor(e=new rl,t=new rl,n=new rl){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ie.subVectors(e,t),r.cross(ie);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ie.subVectors(r,t),it.subVectors(n,t),ir.subVectors(e,t);let a=ie.dot(ie),s=ie.dot(it),o=ie.dot(ir),l=it.dot(it),u=it.dot(ir),c=a*l-s*s;if(0===c)return i.set(-2,-1,-1);let h=1/c,d=(l*o-s*u)*h,p=(a*u-s*o)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(e,t,n,r,i,a,s,o){return!1===ih&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ih=!0),this.getInterpolation(e,t,n,r,i,a,s,o)}static getInterpolation(e,t,n,r,i,a,s,o){return this.getBarycoord(e,t,n,r,ii),o.setScalar(0),o.addScaledVector(i,ii.x),o.addScaledVector(a,ii.y),o.addScaledVector(s,ii.z),o}static isFrontFacing(e,t,n,r){return ie.subVectors(n,t),it.subVectors(e,t),0>ie.cross(it).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ie.subVectors(this.c,this.b),it.subVectors(this.a,this.b),.5*ie.cross(it).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return id.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return id.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===ih&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ih=!0),id.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return id.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return id.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return id.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,s=this.c;ia.subVectors(a,i),is.subVectors(s,i),il.subVectors(e,i);let o=ia.dot(il),l=is.dot(il);if(o<=0&&l<=0)return t.copy(i);iu.subVectors(e,a);let u=ia.dot(iu),c=is.dot(iu);if(u>=0&&c<=u)return t.copy(a);let h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return n=o/(o-u),t.copy(i).addScaledVector(ia,n);ic.subVectors(e,s);let d=ia.dot(ic),p=is.dot(ic);if(p>=0&&d<=p)return t.copy(s);let f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(is,r);let m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return io.subVectors(s,a),r=(c-u)/(c-u+(d-p)),t.copy(a).addScaledVector(io,r);let g=1/(m+f+h);return n=f*g,r=h*g,t.copy(i).addScaledVector(ia,n).addScaledVector(is,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ip={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},im={h:0,s:0,l:0},ig={h:0,s:0,l:0};function iv(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class i_{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tG){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,n0.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=n0.workingColorSpace){return this.r=e,this.g=t,this.b=n,n0.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=n0.workingColorSpace){if(e=nO(e,1),t=nL(t,0,1),n=nL(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=iv(i,r,e+1/3),this.g=iv(i,r,e),this.b=iv(i,r,e-1/3)}return n0.toWorkingColorSpace(this,r),this}setStyle(e,t=tG){let n;function r(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;let a=n[1],s=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=n[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=tG){let n=ip[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=n1(e.r),this.g=n1(e.g),this.b=n1(e.b),this}copyLinearToSRGB(e){return this.r=n2(e.r),this.g=n2(e.g),this.b=n2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tG){return n0.fromWorkingColorSpace(iy.copy(this),e),65536*Math.round(nL(255*iy.r,0,255))+256*Math.round(nL(255*iy.g,0,255))+Math.round(nL(255*iy.b,0,255))}getHexString(e=tG){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=n0.workingColorSpace){let n,r;n0.fromWorkingColorSpace(iy.copy(this),t);let i=iy.r,a=iy.g,s=iy.b,o=Math.max(i,a,s),l=Math.min(i,a,s),u=(l+o)/2;if(l===o)n=0,r=0;else{let e=o-l;switch(r=u<=.5?e/(o+l):e/(2-o-l),o){case i:n=(a-s)/e+(a<s?6:0);break;case a:n=(s-i)/e+2;break;case s:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=u,e}getRGB(e,t=n0.workingColorSpace){return n0.fromWorkingColorSpace(iy.copy(this),t),e.r=iy.r,e.g=iy.g,e.b=iy.b,e}getStyle(e=tG){n0.fromWorkingColorSpace(iy.copy(this),e);let t=iy.r,n=iy.g,r=iy.b;return e!==tG?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(im),this.setHSL(im.h+e,im.s+t,im.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(im),e.getHSL(ig);let n=nN(im.h,ig.h,t),r=nN(im.s,ig.s,t),i=nN(im.l,ig.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let iy=new i_;i_.NAMES=ip;let ib=0;class ix extends nT{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ib++}),this.uuid=nI(),this.name="",this.type="Material",this.blending=M,this.side=y,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=F,this.blendDst=z,this.blendEquation=R,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new i_(0,0,0),this.blendAlpha=0,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=t$,this.stencilZFail=t$,this.stencilZPass=t$,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(void 0===r){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==M&&(n.blending=this.blending),this.side!==y&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==F&&(n.blendSrc=this.blendSrc),this.blendDst!==z&&(n.blendDst=this.blendDst),this.blendEquation!==R&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==J&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==nr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==t$&&(n.stencilFail=this.stencilFail),this.stencilZFail!==t$&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==t$&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class iS extends ix{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new i_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=er,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let iw=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}let a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;(8388608&t)==0;)t<<=1,n-=8388608;t&=-8388609,n+=947912704,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=1199570944,s[32]=2147483648;for(let e=33;e<63;++e)s[e]=2147483648+(e-32<<23);s[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}();function iM(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=nL(e,-65504,65504),iw.floatView[0]=e;let t=iw.uint32View[0],n=t>>23&511;return iw.baseTable[n]+((8388607&t)>>iw.shiftTable[n])}function iE(e){let t=e>>10;return iw.uint32View[0]=iw.mantissaTable[iw.offsetTable[t]+(1023&e)]+iw.exponentTable[t],iw.floatView[0]}let iT={toHalfFloat:iM,fromHalfFloat:iE},iA=new rl,iC=new nB;class iR{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=nd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ez,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)iC.fromBufferAttribute(this,t),iC.applyMatrix3(e),this.setXY(t,iC.x,iC.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)iA.fromBufferAttribute(this,t),iA.applyMatrix3(e),this.setXYZ(t,iA.x,iA.y,iA.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)iA.fromBufferAttribute(this,t),iA.applyMatrix4(e),this.setXYZ(t,iA.x,iA.y,iA.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)iA.fromBufferAttribute(this,t),iA.applyNormalMatrix(e),this.setXYZ(t,iA.x,iA.y,iA.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)iA.fromBufferAttribute(this,t),iA.transformDirection(e),this.setXYZ(t,iA.x,iA.y,iA.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=nU(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nF(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nU(t,this.array)),t}setX(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nU(t,this.array)),t}setY(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nU(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nU(t,this.array)),t}setW(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array),i=nF(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==nd&&(e.usage=this.usage),e}}class iP extends iR{constructor(e,t,n){super(new Int8Array(e),t,n)}}class iI extends iR{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class iL extends iR{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class iO extends iR{constructor(e,t,n){super(new Int16Array(e),t,n)}}class iN extends iR{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ik extends iR{constructor(e,t,n){super(new Int32Array(e),t,n)}}class iD extends iR{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class iU extends iR{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=iE(this.array[e*this.itemSize]);return this.normalized&&(t=nU(t,this.array)),t}setX(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize]=iM(t),this}getY(e){let t=iE(this.array[e*this.itemSize+1]);return this.normalized&&(t=nU(t,this.array)),t}setY(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+1]=iM(t),this}getZ(e){let t=iE(this.array[e*this.itemSize+2]);return this.normalized&&(t=nU(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+2]=iM(t),this}getW(e){let t=iE(this.array[e*this.itemSize+3]);return this.normalized&&(t=nU(t,this.array)),t}setW(e,t){return this.normalized&&(t=nF(t,this.array)),this.array[e*this.itemSize+3]=iM(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this.array[e+2]=iM(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array),i=nF(i,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this.array[e+2]=iM(r),this.array[e+3]=iM(i),this}}class iF extends iR{constructor(e,t,n){super(new Float32Array(e),t,n)}}class iz extends iR{constructor(e,t,n){super(new Float64Array(e),t,n)}}let iB=0,iV=new rF,iH=new r9,ij=new rl,iG=new rh,iW=new rh,iq=new rl;class iX extends nT{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iB++}),this.uuid=nI(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nj(e)?iD:iN)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new nV().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return iV.makeRotationFromQuaternion(e),this.applyMatrix4(iV),this}rotateX(e){return iV.makeRotationX(e),this.applyMatrix4(iV),this}rotateY(e){return iV.makeRotationY(e),this.applyMatrix4(iV),this}rotateZ(e){return iV.makeRotationZ(e),this.applyMatrix4(iV),this}translate(e,t,n){return iV.makeTranslation(e,t,n),this.applyMatrix4(iV),this}scale(e,t,n){return iV.makeScale(e,t,n),this.applyMatrix4(iV),this}lookAt(e){return iH.lookAt(e),iH.updateMatrix(),this.applyMatrix4(iH.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ij).negate(),this.translate(ij.x,ij.y,ij.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new iF(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new rh);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new rl(-1/0,-1/0,-1/0),new rl(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iG.setFromBufferAttribute(n),this.morphTargetsRelative?(iq.addVectors(this.boundingBox.min,iG.min),this.boundingBox.expandByPoint(iq),iq.addVectors(this.boundingBox.max,iG.max),this.boundingBox.expandByPoint(iq)):(this.boundingBox.expandByPoint(iG.min),this.boundingBox.expandByPoint(iG.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rR);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new rl,1/0);return}if(e){let n=this.boundingSphere.center;if(iG.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iW.setFromBufferAttribute(n),this.morphTargetsRelative?(iq.addVectors(iG.min,iW.min),iG.expandByPoint(iq),iq.addVectors(iG.max,iW.max),iG.expandByPoint(iq)):(iG.expandByPoint(iW.min),iG.expandByPoint(iW.max))}iG.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)iq.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(iq));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)iq.fromBufferAttribute(a,t),s&&(ij.fromBufferAttribute(e,t),iq.add(ij)),r=Math.max(r,n.distanceToSquared(iq))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new iR(new Float32Array(4*s),4));let o=this.getAttribute("tangent").array,l=[],u=[];for(let e=0;e<s;e++)l[e]=new rl,u[e]=new rl;let c=new rl,h=new rl,d=new rl,p=new nB,f=new nB,m=new nB,g=new rl,v=new rl,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let e=0,t=_.length;e<t;++e){let t=_[e],i=t.start,s=t.count;for(let e=i,t=i+s;e<t;e+=3)!function(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(c),d.sub(c),f.sub(p),m.sub(p);let i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}(n[e+0],n[e+1],n[e+2])}let y=new rl,b=new rl,x=new rl,S=new rl;function w(e){x.fromArray(i,3*e),S.copy(x);let t=l[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),b.crossVectors(S,t);let n=b.dot(u[e]);o[4*e]=y.x,o[4*e+1]=y.y,o[4*e+2]=y.z,o[4*e+3]=n<0?-1:1}for(let e=0,t=_.length;e<t;++e){let t=_[e],r=t.start,i=t.count;for(let e=r,t=r+i;e<t;e+=3)w(n[e+0]),w(n[e+1]),w(n[e+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new iR(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new rl,i=new rl,a=new rl,s=new rl,o=new rl,l=new rl,u=new rl,c=new rl;if(e)for(let h=0,d=e.count;h<d;h+=3){let d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(u),o.add(u),l.add(u),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)iq.fromBufferAttribute(e,t),iq.normalize(),e.setXYZ(t,iq.x,iq.y,iq.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),s=0,o=0;for(let i=0,l=t.length;i<l;i++){s=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new iR(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new iX,n=this.index.array,r=this.attributes;for(let i in r){let a=e(r[i],n);t.setAttribute(i,a)}let i=this.morphAttributes;for(let r in i){let a=[],s=i[r];for(let t=0,r=s.length;t<r;t++){let r=e(s[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let iZ=new rF,iY=new rU,iK=new rR,iQ=new rl,iJ=new rl,i$=new rl,i0=new rl,i1=new rl,i2=new rl,i3=new nB,i4=new nB,i5=new nB,i7=new rl,i8=new rl,i6=new rl,i9=new rl,ae=new rl;class at extends r9{constructor(e=new iX,t=new iS){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let s=this.morphTargetInfluences;if(i&&s){i2.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=s[n],o=i[n];0!==r&&(i1.fromBufferAttribute(o,e),a?i2.addScaledVector(i1,r):i2.addScaledVector(i1.sub(t),r))}t.add(i2)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),iK.copy(n.boundingSphere),iK.applyMatrix4(i),iY.copy(e.ray).recast(e.near),!1===iK.containsPoint(iY.origin)&&(null===iY.intersectSphere(iK,iQ)||iY.origin.distanceToSquared(iQ)>(e.far-e.near)**2)||(iZ.copy(i).invert(),iY.copy(e.ray).applyMatrix4(iZ),null!==n.boundingBox&&!1===iY.intersectsBox(n.boundingBox)))return;this._computeIntersections(e,t,iY)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,s=i.index,o=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==s){if(Array.isArray(a))for(let i=0,o=h.length;i<o;i++){let o=h[i],p=a[o.materialIndex],f=Math.max(o.start,d.start),m=Math.min(s.count,Math.min(o.start+o.count,d.start+d.count));for(let i=f;i<m;i+=3)(r=an(this,p,e,n,l,u,c,s.getX(i),s.getX(i+1),s.getX(i+2)))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else{let i=Math.max(0,d.start),o=Math.min(s.count,d.start+d.count);for(let h=i;h<o;h+=3)(r=an(this,a,e,n,l,u,c,s.getX(h),s.getX(h+1),s.getX(h+2)))&&(r.faceIndex=Math.floor(h/3),t.push(r))}}else if(void 0!==o){if(Array.isArray(a))for(let i=0,s=h.length;i<s;i++){let s=h[i],p=a[s.materialIndex],f=Math.max(s.start,d.start),m=Math.min(o.count,Math.min(s.start+s.count,d.start+d.count));for(let i=f;i<m;i+=3)(r=an(this,p,e,n,l,u,c,i,i+1,i+2))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else{let i=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);for(let o=i;o<s;o+=3)(r=an(this,a,e,n,l,u,c,o,o+1,o+2))&&(r.faceIndex=Math.floor(o/3),t.push(r))}}}}function an(e,t,n,r,i,a,s,o,l,u){e.getVertexPosition(o,iJ),e.getVertexPosition(l,i$),e.getVertexPosition(u,i0);let c=function(e,t,n,r,i,a,s,o){if(null===(t.side===b?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,t.side===y,o)))return null;ae.copy(o),ae.applyMatrix4(e.matrixWorld);let l=n.ray.origin.distanceTo(ae);return l<n.near||l>n.far?null:{distance:l,point:ae.clone(),object:e}}(e,t,n,r,iJ,i$,i0,i9);if(c){i&&(i3.fromBufferAttribute(i,o),i4.fromBufferAttribute(i,l),i5.fromBufferAttribute(i,u),c.uv=id.getInterpolation(i9,iJ,i$,i0,i3,i4,i5,new nB)),a&&(i3.fromBufferAttribute(a,o),i4.fromBufferAttribute(a,l),i5.fromBufferAttribute(a,u),c.uv1=id.getInterpolation(i9,iJ,i$,i0,i3,i4,i5,new nB),c.uv2=c.uv1),s&&(i7.fromBufferAttribute(s,o),i8.fromBufferAttribute(s,l),i6.fromBufferAttribute(s,u),c.normal=id.getInterpolation(i9,iJ,i$,i0,i7,i8,i6,new rl),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));let e={a:o,b:l,c:u,normal:new rl,materialIndex:0};id.getNormal(iJ,i$,i0,e.normal),c.face=e}return c}class ar extends iX{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let s=this;r=Math.floor(r),i=Math.floor(i);let o=[],l=[],u=[],c=[],h=0,d=0;function p(e,t,n,r,i,a,p,f,m,g,v){let _=a/m,y=p/g,b=a/2,x=p/2,S=f/2,w=m+1,M=g+1,E=0,T=0,A=new rl;for(let a=0;a<M;a++){let s=a*y-x;for(let o=0;o<w;o++){let h=o*_-b;A[e]=h*r,A[t]=s*i,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,u.push(A.x,A.y,A.z),c.push(o/m),c.push(1-a/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=h+t+w*e,r=h+t+w*(e+1),i=h+(t+1)+w*(e+1),a=h+(t+1)+w*e;o.push(n,r,a),o.push(r,i,a),T+=6}s.addGroup(d,T,v),d+=T,h+=E}p("z","y","x",-1,-1,n,t,e,a=Math.floor(a),i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new iF(l,3)),this.setAttribute("normal",new iF(u,3)),this.setAttribute("uv",new iF(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ar(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ai(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function aa(e){let t={};for(let n=0;n<e.length;n++){let r=ai(e[n]);for(let e in r)t[e]=r[e]}return t}function as(e){return null===e.getRenderTarget()?e.outputColorSpace:n0.workingColorSpace}let ao={clone:ai,merge:aa};class al extends ix{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ai(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class au extends r9{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rF,this.projectionMatrix=new rF,this.projectionMatrixInverse=new rF,this.coordinateSystem=nM}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ac extends au{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*nP*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*nR*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*nP*Math.atan(Math.tan(.5*nR*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*nR*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}let s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ah extends r9{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new ac(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new ac(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new ac(-90,1,e,t);a.layers=this.layers,this.add(a);let s=new ac(-90,1,e,t);s.layers=this.layers,this.add(s);let o=new ac(-90,1,e,t);o.layers=this.layers,this.add(o);let l=new ac(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,o]=t;for(let e of t)this.remove(e);if(e===nM)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else if(e===nE)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[i,a,s,o,l,u]=this.children,c=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class ad extends n6{constructor(e,t,n,r,i,a,s,o,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:em,n,r,i,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ap extends rt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};void 0!==t.encoding&&(nY("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===tF?tG:tj),this.texture=new ad([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:eC}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ar(5,5,5),i=new al({name:"CubemapFromEquirect",uniforms:ai(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:b,blending:w});i.uniforms.tEquirect.value=t;let a=new at(r,i),s=t.minFilter;return t.minFilter===eI&&(t.minFilter=eC),new ah(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}let af=new rl,am=new rl,ag=new nV;class av{constructor(e=new rl(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=af.subVectors(n,t).cross(am.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(af),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||ag.getNormalMatrix(e),r=this.coplanarPoint(af).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let a_=new rR,ay=new rl;class ab{constructor(e=new av,t=new av,n=new av,r=new av,i=new av,a=new av){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=nM){let n=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],_=r[14],y=r[15];if(n[0].setComponents(o-i,h-l,m-d,y-g).normalize(),n[1].setComponents(o+i,h+l,m+d,y+g).normalize(),n[2].setComponents(o+a,h+u,m+p,y+v).normalize(),n[3].setComponents(o-a,h-u,m-p,y-v).normalize(),n[4].setComponents(o-s,h-c,m-f,y-_).normalize(),t===nM)n[5].setComponents(o+s,h+c,m+f,y+_).normalize();else if(t===nE)n[5].setComponents(s,c,f,_).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),a_.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),a_.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(a_)}intersectsSprite(e){return a_.center.set(0,0,0),a_.radius=.7071067811865476,a_.applyMatrix4(e.matrixWorld),this.intersectsSphere(a_)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(ay.x=r.normal.x>0?e.max.x:e.min.x,ay.y=r.normal.y>0?e.max.y:e.min.y,ay.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(ay))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function ax(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function aS(e,t){let n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){let e=r.get(t);(!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version});return}t.isInterleavedBufferAttribute&&(t=t.data);let a=r.get(t);if(void 0===a)r.set(t,function(t,r){let i;let a=t.array,s=t.usage,o=a.byteLength,l=e.createBuffer();if(e.bindBuffer(r,l),e.bufferData(r,a,s),t.onUploadCallback(),a instanceof Float32Array)i=e.FLOAT;else if(a instanceof Uint16Array){if(t.isFloat16BufferAttribute){if(n)i=e.HALF_FLOAT;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.")}else i=e.UNSIGNED_SHORT}else if(a instanceof Int16Array)i=e.SHORT;else if(a instanceof Uint32Array)i=e.UNSIGNED_INT;else if(a instanceof Int32Array)i=e.INT;else if(a instanceof Int8Array)i=e.BYTE;else if(a instanceof Uint8Array)i=e.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)i=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:l,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version,size:o}}(t,i));else if(a.version<t.version){if(a.size!==t.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){let a=r.array,s=r._updateRange,o=r.updateRanges;if(e.bindBuffer(i,t),-1===s.count&&0===o.length&&e.bufferSubData(i,0,a),0!==o.length){for(let t=0,r=o.length;t<r;t++){let r=o[t];n?e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a,r.start,r.count):e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a.subarray(r.start,r.start+r.count))}r.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(a.buffer,t,i),a.version=t.version}}}}class aw extends iX{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,u=o+1,c=e/s,h=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<u;e++){let t=e*h-a;for(let n=0;n<l;n++){let r=n*c-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){let n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;d.push(n,r,a),d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new iF(p,3)),this.setAttribute("normal",new iF(f,3)),this.setAttribute("uv",new iF(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aw(e.width,e.height,e.widthSegments,e.heightSegments)}}let aM={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	if ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	attribute float batchId;\n	uniform highp sampler2D batchingTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#pragma unroll_loop_end\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop_start\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		#pragma unroll_loop_end\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n	return dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_v0 0.339\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_v1 0.276\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_v4 0.046\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_v5 0.016\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_v6 0.0038\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n	vec3( 0.8224621, 0.177538, 0.0 ),\n	vec3( 0.0331941, 0.9668058, 0.0 ),\n	vec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n	vec3( 1.2249401, - 0.2249404, 0.0 ),\n	vec3( - 0.0420569, 1.0420571, 0.0 ),\n	vec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n	reflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	#if defined ( LEGACY_LIGHTS )\n		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n		}\n		return 1.0;\n	#else\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		if ( cutoffDistance > 0.0 ) {\n			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		}\n		return distanceFalloff;\n	#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n		varying float vIsPerspective;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n	#else\n		if ( isPerspectiveMatrix( projectionMatrix ) ) {\n			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n			gl_Position.z *= gl_Position.w;\n		}\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n	#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	uniform float morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n		uniform sampler2DArray morphTargetsTexture;\n		uniform ivec2 morphTargetsTextureSize;\n		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n			int y = texelIndex / morphTargetsTextureSize.x;\n			int x = texelIndex - y * morphTargetsTextureSize.x;\n			ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n			return texelFetch( morphTargetsTexture, morphUV, 0 );\n		}\n	#else\n		#ifndef USE_MORPHNORMALS\n			uniform float morphTargetInfluences[ 8 ];\n		#else\n			uniform float morphTargetInfluences[ 4 ];\n		#endif\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n		transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n		transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n		transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n		#ifndef USE_MORPHNORMALS\n			transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n			transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n			transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n			transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n		#endif\n	#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n	return packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n		vec3 refractedRayExit = position + transmissionRay;\n		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n		vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n		refractionCoords += 1.0;\n		refractionCoords /= 2.0;\n		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},aE={common:{diffuse:{value:new i_(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new nV},alphaMap:{value:null},alphaMapTransform:{value:new nV},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new nV}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new nV}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new nV}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new nV},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new nV},normalScale:{value:new nB(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new nV},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new nV}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new nV}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new nV}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new i_(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new i_(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new nV},alphaTest:{value:0},uvTransform:{value:new nV}},sprite:{diffuse:{value:new i_(16777215)},opacity:{value:1},center:{value:new nB(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new nV},alphaMap:{value:null},alphaMapTransform:{value:new nV},alphaTest:{value:0}}},aT={basic:{uniforms:aa([aE.common,aE.specularmap,aE.envmap,aE.aomap,aE.lightmap,aE.fog]),vertexShader:aM.meshbasic_vert,fragmentShader:aM.meshbasic_frag},lambert:{uniforms:aa([aE.common,aE.specularmap,aE.envmap,aE.aomap,aE.lightmap,aE.emissivemap,aE.bumpmap,aE.normalmap,aE.displacementmap,aE.fog,aE.lights,{emissive:{value:new i_(0)}}]),vertexShader:aM.meshlambert_vert,fragmentShader:aM.meshlambert_frag},phong:{uniforms:aa([aE.common,aE.specularmap,aE.envmap,aE.aomap,aE.lightmap,aE.emissivemap,aE.bumpmap,aE.normalmap,aE.displacementmap,aE.fog,aE.lights,{emissive:{value:new i_(0)},specular:{value:new i_(1118481)},shininess:{value:30}}]),vertexShader:aM.meshphong_vert,fragmentShader:aM.meshphong_frag},standard:{uniforms:aa([aE.common,aE.envmap,aE.aomap,aE.lightmap,aE.emissivemap,aE.bumpmap,aE.normalmap,aE.displacementmap,aE.roughnessmap,aE.metalnessmap,aE.fog,aE.lights,{emissive:{value:new i_(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:aM.meshphysical_vert,fragmentShader:aM.meshphysical_frag},toon:{uniforms:aa([aE.common,aE.aomap,aE.lightmap,aE.emissivemap,aE.bumpmap,aE.normalmap,aE.displacementmap,aE.gradientmap,aE.fog,aE.lights,{emissive:{value:new i_(0)}}]),vertexShader:aM.meshtoon_vert,fragmentShader:aM.meshtoon_frag},matcap:{uniforms:aa([aE.common,aE.bumpmap,aE.normalmap,aE.displacementmap,aE.fog,{matcap:{value:null}}]),vertexShader:aM.meshmatcap_vert,fragmentShader:aM.meshmatcap_frag},points:{uniforms:aa([aE.points,aE.fog]),vertexShader:aM.points_vert,fragmentShader:aM.points_frag},dashed:{uniforms:aa([aE.common,aE.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:aM.linedashed_vert,fragmentShader:aM.linedashed_frag},depth:{uniforms:aa([aE.common,aE.displacementmap]),vertexShader:aM.depth_vert,fragmentShader:aM.depth_frag},normal:{uniforms:aa([aE.common,aE.bumpmap,aE.normalmap,aE.displacementmap,{opacity:{value:1}}]),vertexShader:aM.meshnormal_vert,fragmentShader:aM.meshnormal_frag},sprite:{uniforms:aa([aE.sprite,aE.fog]),vertexShader:aM.sprite_vert,fragmentShader:aM.sprite_frag},background:{uniforms:{uvTransform:{value:new nV},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:aM.background_vert,fragmentShader:aM.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:aM.backgroundCube_vert,fragmentShader:aM.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:aM.cube_vert,fragmentShader:aM.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:aM.equirect_vert,fragmentShader:aM.equirect_frag},distanceRGBA:{uniforms:aa([aE.common,aE.displacementmap,{referencePosition:{value:new rl},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:aM.distanceRGBA_vert,fragmentShader:aM.distanceRGBA_frag},shadow:{uniforms:aa([aE.lights,aE.fog,{color:{value:new i_(0)},opacity:{value:1}}]),vertexShader:aM.shadow_vert,fragmentShader:aM.shadow_frag}};aT.physical={uniforms:aa([aT.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new nV},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new nV},clearcoatNormalScale:{value:new nB(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new nV},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new nV},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new nV},sheen:{value:0},sheenColor:{value:new i_(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new nV},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new nV},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new nV},transmissionSamplerSize:{value:new nB},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new nV},attenuationDistance:{value:0},attenuationColor:{value:new i_(0)},specularColor:{value:new i_(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new nV},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new nV},anisotropyVector:{value:new nB},anisotropyMap:{value:null},anisotropyMapTransform:{value:new nV}}]),vertexShader:aM.meshphysical_vert,fragmentShader:aM.meshphysical_frag};let aA={r:0,b:0,g:0};function aC(e,t,n,r,i,a,s){let o,l;let u=new i_(0),c=!0===a?0:1,h=null,d=0,p=null;function f(t,n){t.getRGB(aA,as(e)),r.buffers.color.setClear(aA.r,aA.g,aA.b,n,s)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),f(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){f(u,c=e)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;v&&v.isTexture&&(v=(m.backgroundBlurriness>0?n:t).get(v)),null===v?f(u,c):v&&v.isColor&&(f(v,1),g=!0);let _=e.xr.getEnvironmentBlendMode();"additive"===_?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===_&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===ey)?(void 0===l&&((l=new at(new ar(1,1,1),new al({name:"BackgroundCubeMaterial",uniforms:ai(aT.backgroundCube.uniforms),vertexShader:aT.backgroundCube.vertexShader,fragmentShader:aT.backgroundCube.fragmentShader,side:b,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=n0.getTransfer(v.colorSpace)!==tY,(h!==v||d!==v.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===o&&((o=new at(new aw(2,2),new al({name:"BackgroundMaterial",uniforms:ai(aT.background.uniforms),vertexShader:aT.background.vertexShader,fragmentShader:aT.background.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=v,o.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,o.material.toneMapped=n0.getTransfer(v.colorSpace)!==tY,!0===v.matrixAutoUpdate&&v.updateMatrix(),o.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||d!==v.version||p!==e.toneMapping)&&(o.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),o.layers.enableAll(),a.unshift(o,o.geometry,o.material,0,0,null))}}}function aR(e,t,n,r){let i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=p(null),u=l,c=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){let t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){let e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){let a=u.newAttributes,s=u.enabledAttributes,o=u.attributeDivisors;a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function v(){let t=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function _(t,n,r,i,a,s,o){!0===o?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function y(){b(),c=!0,u!==l&&h((u=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,y,b){let x=!1;if(s){let t=function(t,n,i){let s=!0===i.wireframe,l=o[t.id];void 0===l&&(l={},o[t.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[s];return void 0===c&&(c=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[s]=c),c}(y,d,l);u!==t&&h((u=t).object),(x=function(e,t,n,r){let i=u.attributes,a=t.attributes,s=0,o=n.getAttributes();for(let t in o)if(o[t].location>=0){let n=i[t],r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;s++}return u.attributesNum!==s||u.index!==r}(i,y,d,b))&&function(e,t,n,r){let i={},a=t.attributes,s=0,o=n.getAttributes();for(let t in o)if(o[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,s++}u.attributes=i,u.attributesNum=s,u.index=r}(i,y,d,b)}else{let e=!0===l.wireframe;(u.geometry!==y.id||u.program!==d.id||u.wireframe!==e)&&(u.geometry=y.id,u.program=d.id,u.wireframe=e,x=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(x||c)&&(c=!1,function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();let l=o.attributes,u=s.getAttributes(),c=a.defaultAttributeValues;for(let t in u){let a=u[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){let t=s.normalized,l=s.itemSize,u=n.get(s);if(void 0===u)continue;let c=u.buffer,h=u.type,d=u.bytesPerElement,p=!0===r.isWebGL2&&(h===e.INT||h===e.UNSIGNED_INT||s.gpuType===eU);if(s.isInterleavedBufferAttribute){let n=s.data,r=n.stride,u=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)_(a.location+e,l/a.locationSize,h,t,r*d,(u+l/a.locationSize*e)*d,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)_(a.location+e,l/a.locationSize,h,t,l*d,l/a.locationSize*e*d,p)}}else if(void 0!==c){let n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(i,l,d,y),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(let e in y(),o){let t=o[e];for(let e in t){let n=t[e];for(let e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;let t=o[e.id];for(let e in t){let n=t[e];for(let e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(let t in o){let n=o[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function aP(e,t,n,r){let i;let a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,s,o){let l,u;if(0!==o){if(a)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[u](i,r,s,o),n.update(s,i,o)}},this.renderMultiDraw=function(e,r,a){if(0===a)return;let s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<a;t++)this.render(e[t],r[t]);else{s.multiDrawArraysWEBGL(i,e,0,r,0,a);let t=0;for(let e=0;e<a;e++)t+=r[e];n.update(t,i,1)}}}function aI(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,s=void 0!==n.precision?n.precision:"highp",o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);let l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,y=a||t.has("OES_texture_float"),b=a?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:_&&y,maxSamples:b}}function aL(e){let t=this,n=null,r=0,i=!1,a=!1,s=new av,o=new nV,l={value:null,needsUpdate:!1};function u(e,n,r,i){let a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){let t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,o),s.normal.toArray(u,n),u[n+3]=s.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(s,o,c){let h=s.clippingPlanes,d=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(i&&null!==h&&0!==h.length&&(!a||p)){let e=a?0:r,t=4*e,i=f.clippingState||null;l.value=i,i=u(h,o,t,c);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}else a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0)}}function aO(e){let t=new WeakMap;function n(e,t){return t===ev?e.mapping=em:t===e_&&(e.mapping=eg),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping;if(a===ev||a===e_){if(t.has(i))return n(t.get(i).texture,i.mapping);{let a=i.image;if(!a||!(a.height>0))return null;{let s=new ap(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}}}}return i},dispose:function(){t=new WeakMap}}}class aN extends au{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}let ak=[.125,.215,.35,.446,.526,.582],aD=new aN,aU=new i_,aF=null,az=0,aB=0,aV=(1+Math.sqrt(5))/2,aH=1/aV,aj=[new rl(1,1,1),new rl(-1,1,1),new rl(1,1,-1),new rl(-1,1,-1),new rl(0,aV,aH),new rl(0,aV,-aH),new rl(aH,0,aV),new rl(-aH,0,aV),new rl(aV,aH,0),new rl(-aV,aH,0)];class aG{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){aF=this._renderer.getRenderTarget(),az=this._renderer.getActiveCubeFace(),aB=this._renderer.getActiveMipmapLevel(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=aZ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=aX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(aF,az,aB),e.scissorTest=!1,aq(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===em||e.mapping===eg?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),aF=this._renderer.getRenderTarget(),az=this._renderer.getActiveCubeFace(),aB=this._renderer.getActiveMipmapLevel();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:eC,minFilter:eC,generateMipmaps:!1,type:eB,format:eW,colorSpace:tW,depthBuffer:!1},r=aW(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=aW(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,a=e-4+1+ak.length;for(let s=0;s<a;s++){let a=Math.pow(2,i);n.push(a);let o=1/a;s>e-4?o=ak[s-e+4-1]:0===s&&(o=0),r.push(o);let l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=new Float32Array(108),p=new Float32Array(72),f=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];d.set(r,18*e),p.set(h,12*e);let i=[e,e,e,e,e,e];f.set(i,6*e)}let m=new iX;m.setAttribute("position",new iR(d,3)),m.setAttribute("uv",new iR(p,2)),m.setAttribute("faceIndex",new iR(f,1)),t.push(m),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=new al({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new rl(0,1,0)}},vertexShader:aY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:w,depthTest:!1,depthWrite:!1})}return r}_compileMaterial(e){let t=new at(this._lodPlanes[0],e);this._renderer.compile(t,aD)}_sceneToCubeUV(e,t,n,r){let i=new ac(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(aU),o.toneMapping=es,o.autoClear=!1;let c=new iS({name:"PMREM.Background",side:b,depthWrite:!1,depthTest:!1}),h=new at(new ar,c),d=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,d=!0):(c.color.copy(aU),d=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(s[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,s[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,s[t]));let l=this._cubeSize;aq(r,n*l,t>2?l:0,l,l),o.setRenderTarget(r),d&&o.render(h,i),o.render(e,i)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===em||e.mapping===eg;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=aZ()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=aX());let i=r?this._cubemapMaterial:this._equirectMaterial,a=new at(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let s=this._cubeSize;aq(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,aD)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=aj[(t-1)%aj.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");let u=new at(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);let m=[],g=0;for(let e=0;e<20;++e){let t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s);let{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-n;let _=this._sizeLods[r],y=4*(this._cubeSize-_);aq(t,3*_*(r>v-4?r-v+4:0),y,3*_,2*_),o.setRenderTarget(t),o.render(u,aD)}}function aW(e,t,n){let r=new rt(e,t,n);return r.texture.mapping=ey,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function aq(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function aX(){return new al({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:aY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:w,depthTest:!1,depthWrite:!1})}function aZ(){return new al({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:aY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:w,depthTest:!1,depthWrite:!1})}function aY(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aK(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping,s=a===ev||a===e_,o=a===em||a===eg;if(s||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new aG(e)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{let a=i.image;if(!(s&&a&&a.height>0||o&&a&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(a)))return null;{null===n&&(n=new aG(e));let a=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function aQ(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function aJ(e,t,n,r){let i={},a=new WeakMap;function s(e){let o=e.target;for(let e in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[e]);for(let e in o.morphAttributes){let n=o.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}o.removeEventListener("dispose",s),delete i[o.id];let l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){let n=[],r=e.index,i=e.attributes.position,s=0;if(null!==r){let e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;let e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let o=new(nj(n)?iD:iN)(n,1);o.version=s;let l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){let r=n.attributes;for(let n in r)t.update(r[n],e.ARRAY_BUFFER);let i=n.morphAttributes;for(let n in i){let r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){let t=a.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function a$(e,t,n,r){let i,a,s;let o=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*s),n.update(r,i,1)},this.renderInstances=function(r,l,u){let c,h;if(0!==u){if(o)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[h](i,l,a,r*s,u),n.update(l,i,u)}},this.renderMultiDraw=function(e,r,o){if(0===o)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<o;t++)this.render(e[t]/s,r[t]);else{l.multiDrawElementsWEBGL(i,r,0,a,e,0,o);let t=0;for(let e=0;e<o;e++)t+=r[e];n.update(t,i,1)}}}function a0(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function a1(e,t){return e[0]-t[0]}function a2(e,t){return Math.abs(t[1])-Math.abs(e[1])}function a3(e,t,n){let r={},i=new Float32Array(8),a=new WeakMap,s=new n9,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,u,c){let h=l.morphTargetInfluences;if(!0===t.isWebGL2){let r=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,i=void 0!==r?r.length:0,o=a.get(u);if(void 0===o||o.count!==i){void 0!==o&&o.texture.dispose();let e=void 0!==u.morphAttributes.position,n=void 0!==u.morphAttributes.normal,r=void 0!==u.morphAttributes.color,l=u.morphAttributes.position||[],c=u.morphAttributes.normal||[],h=u.morphAttributes.color||[],d=0;!0===e&&(d=1),!0===n&&(d=2),!0===r&&(d=3);let p=u.attributes.position.count*d,f=1;p>t.maxTextureSize&&(f=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let m=new Float32Array(p*f*4*i),g=new rn(m,p,f,i);g.type=ez,g.needsUpdate=!0;let v=4*d;for(let t=0;t<i;t++){let i=l[t],a=c[t],o=h[t],u=p*f*4*t;for(let t=0;t<i.count;t++){let l=t*v;!0===e&&(s.fromBufferAttribute(i,t),m[u+l+0]=s.x,m[u+l+1]=s.y,m[u+l+2]=s.z,m[u+l+3]=0),!0===n&&(s.fromBufferAttribute(a,t),m[u+l+4]=s.x,m[u+l+5]=s.y,m[u+l+6]=s.z,m[u+l+7]=0),!0===r&&(s.fromBufferAttribute(o,t),m[u+l+8]=s.x,m[u+l+9]=s.y,m[u+l+10]=s.z,m[u+l+11]=4===o.itemSize?s.w:1)}}o={count:i,texture:g,size:new nB(p,f)},a.set(u,o),u.addEventListener("dispose",function e(){g.dispose(),a.delete(u),u.removeEventListener("dispose",e)})}let l=0;for(let e=0;e<h.length;e++)l+=h[e];let d=u.morphTargetsRelative?1:1-l;c.getUniforms().setValue(e,"morphTargetBaseInfluence",d),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{let t=void 0===h?0:h.length,n=r[u.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[u.id]=n}for(let e=0;e<t;e++){let t=n[e];t[0]=e,t[1]=h[e]}n.sort(a2);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(a1);let a=u.morphAttributes.position,s=u.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=o[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(a&&u.getAttribute("morphTarget"+e)!==a[n]&&u.setAttribute("morphTarget"+e,a[n]),s&&u.getAttribute("morphNormal"+e)!==s[n]&&u.setAttribute("morphNormal"+e,s[n]),i[e]=r,l+=r):(a&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),s&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}let d=u.morphTargetsRelative?1:1-l;c.getUniforms().setValue(e,"morphTargetBaseInfluence",d),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function a4(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){let o=r.render.frame,l=s.geometry,u=t.get(s,l);if(i.get(u)!==o&&(t.update(u),i.set(u,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,o))),s.isSkinnedMesh){let e=s.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return u},dispose:function(){i=new WeakMap}}}class a5 extends n6{constructor(e,t,n,r,i,a,s,o,l,u){if((u=void 0!==u?u:eZ)!==eZ&&u!==eY)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===eZ&&(n=eF),void 0===n&&u===eY&&(n=ej),super(null,r,i,a,s,o,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:ew,this.minFilter=void 0!==o?o:ew,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}let a7=new n6,a8=new a5(1,1);a8.compareFunction=no;let a6=new rn,a9=new ri,se=new ad,st=[],sn=[],sr=new Float32Array(16),si=new Float32Array(9),sa=new Float32Array(4);function ss(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,a=st[i];if(void 0===a&&(a=new Float32Array(i),st[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function so(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sl(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function su(e,t){let n=sn[t];void 0===n&&(n=new Int32Array(t),sn[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function sc(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function sh(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(so(n,t))return;e.uniform2fv(this.addr,t),sl(n,t)}}function sd(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(so(n,t))return;e.uniform3fv(this.addr,t),sl(n,t)}}function sp(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(so(n,t))return;e.uniform4fv(this.addr,t),sl(n,t)}}function sf(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(so(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),sl(n,t)}else{if(so(n,r))return;sa.set(r),e.uniformMatrix2fv(this.addr,!1,sa),sl(n,r)}}function sm(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(so(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),sl(n,t)}else{if(so(n,r))return;si.set(r),e.uniformMatrix3fv(this.addr,!1,si),sl(n,r)}}function sg(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(so(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),sl(n,t)}else{if(so(n,r))return;sr.set(r),e.uniformMatrix4fv(this.addr,!1,sr),sl(n,r)}}function sv(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function s_(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(so(n,t))return;e.uniform2iv(this.addr,t),sl(n,t)}}function sy(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(so(n,t))return;e.uniform3iv(this.addr,t),sl(n,t)}}function sb(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(so(n,t))return;e.uniform4iv(this.addr,t),sl(n,t)}}function sx(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function sS(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(so(n,t))return;e.uniform2uiv(this.addr,t),sl(n,t)}}function sw(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(so(n,t))return;e.uniform3uiv(this.addr,t),sl(n,t)}}function sM(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(so(n,t))return;e.uniform4uiv(this.addr,t),sl(n,t)}}function sE(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);let a=this.type===e.SAMPLER_2D_SHADOW?a8:a7;n.setTexture2D(t||a,i)}function sT(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||a9,i)}function sA(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||se,i)}function sC(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||a6,i)}function sR(e,t){e.uniform1fv(this.addr,t)}function sP(e,t){let n=ss(t,this.size,2);e.uniform2fv(this.addr,n)}function sI(e,t){let n=ss(t,this.size,3);e.uniform3fv(this.addr,n)}function sL(e,t){let n=ss(t,this.size,4);e.uniform4fv(this.addr,n)}function sO(e,t){let n=ss(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sN(e,t){let n=ss(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function sk(e,t){let n=ss(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function sD(e,t){e.uniform1iv(this.addr,t)}function sU(e,t){e.uniform2iv(this.addr,t)}function sF(e,t){e.uniform3iv(this.addr,t)}function sz(e,t){e.uniform4iv(this.addr,t)}function sB(e,t){e.uniform1uiv(this.addr,t)}function sV(e,t){e.uniform2uiv(this.addr,t)}function sH(e,t){e.uniform3uiv(this.addr,t)}function sj(e,t){e.uniform4uiv(this.addr,t)}function sG(e,t,n){let r=this.cache,i=t.length,a=su(n,i);so(r,a)||(e.uniform1iv(this.addr,a),sl(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||a7,a[e])}function sW(e,t,n){let r=this.cache,i=t.length,a=su(n,i);so(r,a)||(e.uniform1iv(this.addr,a),sl(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||a9,a[e])}function sq(e,t,n){let r=this.cache,i=t.length,a=su(n,i);so(r,a)||(e.uniform1iv(this.addr,a),sl(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||se,a[e])}function sX(e,t,n){let r=this.cache,i=t.length,a=su(n,i);so(r,a)||(e.uniform1iv(this.addr,a),sl(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||a6,a[e])}class sZ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return sc;case 35664:return sh;case 35665:return sd;case 35666:return sp;case 35674:return sf;case 35675:return sm;case 35676:return sg;case 5124:case 35670:return sv;case 35667:case 35671:return s_;case 35668:case 35672:return sy;case 35669:case 35673:return sb;case 5125:return sx;case 36294:return sS;case 36295:return sw;case 36296:return sM;case 35678:case 36198:case 36298:case 36306:case 35682:return sE;case 35679:case 36299:case 36307:return sT;case 35680:case 36300:case 36308:case 36293:return sA;case 36289:case 36303:case 36311:case 36292:return sC}}(t.type)}}class sY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return sR;case 35664:return sP;case 35665:return sI;case 35666:return sL;case 35674:return sO;case 35675:return sN;case 35676:return sk;case 5124:case 35670:return sD;case 35667:case 35671:return sU;case 35668:case 35672:return sF;case 35669:case 35673:return sz;case 5125:return sB;case 36294:return sV;case 36295:return sH;case 36296:return sj;case 35678:case 36198:case 36298:case 36306:case 35682:return sG;case 35679:case 36299:case 36307:return sW;case 35680:case 36300:case 36308:case 36293:return sq;case 36289:case 36303:case 36311:case 36292:return sX}}(t.type)}}class sK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}let sQ=/(\w+)(\])?(\[|\.)?/g;function sJ(e,t){e.seq.push(t),e.map[t.id]=t}class s${constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(sQ.lastIndex=0;;){let a=sQ.exec(r),s=sQ.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===i){sJ(n,void 0===u?new sZ(o,e,t):new sY(o,e,t));break}{let e=n.map[o];void 0===e&&sJ(n,e=new sK(o)),n=e}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function s0(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let s1=0;function s2(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}function s3(e){return""!==e}function s4(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function s5(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let s7=/^[ \t]*#include +<([\w\d./]+)>/gm;function s8(e){return e.replace(s7,s9)}let s6=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function s9(e,t){let n=aM[t];if(void 0===n){let e=s6.get(t);if(void 0!==e)n=aM[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return s8(n)}let oe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ot(e){return e.replace(oe,on)}function on(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function or(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function oi(e,t,n,r){let i,a,s,o,l,u;let c=e.getContext(),h=n.defines,d=n.vertexShader,p=n.fragmentShader,f=(l="SHADOWMAP_TYPE_BASIC",n.shadowMapType===g?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===v?l="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===_&&(l="SHADOWMAP_TYPE_VSM"),l),m=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case em:case eg:t="ENVMAP_TYPE_CUBE";break;case ey:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),y=(u="ENVMAP_MODE_REFLECTION",n.envMap&&n.envMapMode===eg&&(u="ENVMAP_MODE_REFRACTION"),u),b=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case er:t="ENVMAP_BLENDING_MULTIPLY";break;case ei:t="ENVMAP_BLENDING_MIX";break;case ea:t="ENVMAP_BLENDING_ADD"}return t}(n),x=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}(n),S=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(s3).join("\n"),w=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(h),M=c.createProgram(),E=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(s3).join("\n")).length>0&&(i+="\n"),(a=[S,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(s3).join("\n")).length>0&&(a+="\n")):(i=[or(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(s3).join("\n"),a=[S,or(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+y:"",n.envMap?"#define "+b:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==es?"#define TONE_MAPPING":"",n.toneMapping!==es?aM.tonemapping_pars_fragment:"",n.toneMapping!==es?function(e,t){let n;switch(t){case eo:n="Linear";break;case el:n="Reinhard";break;case eu:n="OptimizedCineon";break;case ec:n="ACESFilmic";break;case eh:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",aM.colorspace_pars_fragment,function(e,t){let n=function(e){let t;let n=n0.getPrimaries(n0.workingColorSpace),r=n0.getPrimaries(e);switch(n===r?t="":n===tQ&&r===tK?t="LinearDisplayP3ToLinearSRGB":n===tK&&r===tQ&&(t="LinearSRGBToLinearDisplayP3"),e){case tW:case tX:return[t,"LinearTransferOETF"];case tG:case tq:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[t,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(s3).join("\n")),d=s5(d=s4(d=s8(d),n),n),p=s5(p=s4(p=s8(p),n),n),d=ot(d),p=ot(p),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(E="#version 300 es\n",i="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+i,a=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===nS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===nS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let T=E+i+d,A=E+a+p,C=s0(c,c.VERTEX_SHADER,T),R=s0(c,c.FRAGMENT_SHADER,A);function P(t){if(e.debug.checkShaderErrors){let n=c.getProgramInfoLog(M).trim(),r=c.getShaderInfoLog(C).trim(),s=c.getShaderInfoLog(R).trim(),o=!0,l=!0;if(!1===c.getProgramParameter(M,c.LINK_STATUS)){if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(c,M,C,R);else{let e=s2(c,C,"vertex"),t=s2(c,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(M,c.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):(""===r||""===s)&&(l=!1);l&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:i},fragmentShader:{log:s,prefix:a}})}c.deleteShader(C),c.deleteShader(R),s=new s$(c,M),o=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(c,M)}c.attachShader(M,C),c.attachShader(M,R),void 0!==n.index0AttributeName?c.bindAttribLocation(M,0,n.index0AttributeName):!0===n.morphTargets&&c.bindAttribLocation(M,0,"position"),c.linkProgram(M),this.getUniforms=function(){return void 0===s&&P(this),s},this.getAttributes=function(){return void 0===o&&P(this),o};let I=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===I&&(I=c.getProgramParameter(M,37297)),I},this.destroy=function(){r.releaseStatesOfProgram(this),c.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=s1++,this.cacheKey=t,this.usedTimes=1,this.program=M,this.vertexShader=C,this.fragmentShader=R,this}let oa=0;class os{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new oo(e),t.set(e,n)),n}}class oo{constructor(e){this.id=oa++,this.code=e,this.usedTimes=0}}function ol(e,t,n,r,i,a,s){let o=new rY,l=new os,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures,p=i.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(a,o,u,g,v){let _,y,S,w;let E=g.fog,T=v.geometry,A=a.isMeshStandardMaterial?g.environment:null,C=(a.isMeshStandardMaterial?n:t).get(a.envMap||A),R=C&&C.mapping===ey?C.image.height:null,P=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead.");let I=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,L=void 0!==I?I.length:0,O=0;if(void 0!==T.morphAttributes.position&&(O=1),void 0!==T.morphAttributes.normal&&(O=2),void 0!==T.morphAttributes.color&&(O=3),P){let e=aT[P];_=e.vertexShader,y=e.fragmentShader}else _=a.vertexShader,y=a.fragmentShader,l.update(a),S=l.getVertexShaderID(a),w=l.getFragmentShaderID(a);let N=e.getRenderTarget(),k=!0===v.isInstancedMesh,D=!0===v.isBatchedMesh,U=!!a.map,F=!!a.matcap,z=!!C,B=!!a.aoMap,V=!!a.lightMap,H=!!a.bumpMap,j=!!a.normalMap,G=!!a.displacementMap,W=!!a.emissiveMap,q=!!a.metalnessMap,X=!!a.roughnessMap,Z=a.anisotropy>0,Y=a.clearcoat>0,K=a.iridescence>0,Q=a.sheen>0,J=a.transmission>0,$=Z&&!!a.anisotropyMap,ee=Y&&!!a.clearcoatMap,et=Y&&!!a.clearcoatNormalMap,en=Y&&!!a.clearcoatRoughnessMap,er=K&&!!a.iridescenceMap,ei=K&&!!a.iridescenceThicknessMap,ea=Q&&!!a.sheenColorMap,eo=Q&&!!a.sheenRoughnessMap,el=!!a.specularMap,eu=!!a.specularColorMap,ec=!!a.specularIntensityMap,eh=J&&!!a.transmissionMap,ed=J&&!!a.thicknessMap,ep=!!a.gradientMap,ef=!!a.alphaMap,em=a.alphaTest>0,eg=!!a.alphaHash,ev=!!a.extensions,e_=!!T.attributes.uv1,eb=!!T.attributes.uv2,ex=!!T.attributes.uv3,eS=es;return a.toneMapped&&(null===N||!0===N.isXRRenderTarget)&&(eS=e.toneMapping),{isWebGL2:c,shaderID:P,shaderType:a.type,shaderName:a.name,vertexShader:_,fragmentShader:y,defines:a.defines,customVertexShaderID:S,customFragmentShaderID:w,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:D,instancing:k,instancingColor:k&&null!==v.instanceColor,supportsVertexTextures:d,outputColorSpace:null===N?e.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:tW,map:U,matcap:F,envMap:z,envMapMode:z&&C.mapping,envMapCubeUVHeight:R,aoMap:B,lightMap:V,bumpMap:H,normalMap:j,displacementMap:d&&G,emissiveMap:W,normalMapObjectSpace:j&&a.normalMapType===tH,normalMapTangentSpace:j&&a.normalMapType===tV,metalnessMap:q,roughnessMap:X,anisotropy:Z,anisotropyMap:$,clearcoat:Y,clearcoatMap:ee,clearcoatNormalMap:et,clearcoatRoughnessMap:en,iridescence:K,iridescenceMap:er,iridescenceThicknessMap:ei,sheen:Q,sheenColorMap:ea,sheenRoughnessMap:eo,specularMap:el,specularColorMap:eu,specularIntensityMap:ec,transmission:J,transmissionMap:eh,thicknessMap:ed,gradientMap:ep,opaque:!1===a.transparent&&a.blending===M,alphaMap:ef,alphaTest:em,alphaHash:eg,combine:a.combine,mapUv:U&&m(a.map.channel),aoMapUv:B&&m(a.aoMap.channel),lightMapUv:V&&m(a.lightMap.channel),bumpMapUv:H&&m(a.bumpMap.channel),normalMapUv:j&&m(a.normalMap.channel),displacementMapUv:G&&m(a.displacementMap.channel),emissiveMapUv:W&&m(a.emissiveMap.channel),metalnessMapUv:q&&m(a.metalnessMap.channel),roughnessMapUv:X&&m(a.roughnessMap.channel),anisotropyMapUv:$&&m(a.anisotropyMap.channel),clearcoatMapUv:ee&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:et&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:en&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:er&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:ei&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ea&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:eo&&m(a.sheenRoughnessMap.channel),specularMapUv:el&&m(a.specularMap.channel),specularColorMapUv:eu&&m(a.specularColorMap.channel),specularIntensityMapUv:ec&&m(a.specularIntensityMap.channel),transmissionMapUv:eh&&m(a.transmissionMap.channel),thicknessMapUv:ed&&m(a.thicknessMap.channel),alphaMapUv:ef&&m(a.alphaMap.channel),vertexTangents:!!T.attributes.tangent&&(j||Z),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,vertexUv1s:e_,vertexUv2s:eb,vertexUv3s:ex,pointsUvs:!0===v.isPoints&&!!T.attributes.uv&&(U||ef),fog:!!E,useFog:!0===a.fog,fogExp2:E&&E.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:L,morphTextureStride:O,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:eS,useLegacyLights:e._useLegacyLights,decodeVideoTexture:U&&!0===a.map.isVideoTexture&&n0.getTransfer(a.map.colorSpace)===tY,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===x,flipSided:a.side===b,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ev&&!0===a.extensions.derivatives,extensionFragDepth:ev&&!0===a.extensions.fragDepth,extensionDrawBuffers:ev&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ev&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(n.push(t.precision),n.push(t.outputColorSpace),n.push(t.envMapMode),n.push(t.envMapCubeUVHeight),n.push(t.mapUv),n.push(t.alphaMapUv),n.push(t.lightMapUv),n.push(t.aoMapUv),n.push(t.bumpMapUv),n.push(t.normalMapUv),n.push(t.displacementMapUv),n.push(t.emissiveMapUv),n.push(t.metalnessMapUv),n.push(t.roughnessMapUv),n.push(t.anisotropyMapUv),n.push(t.clearcoatMapUv),n.push(t.clearcoatNormalMapUv),n.push(t.clearcoatRoughnessMapUv),n.push(t.iridescenceMapUv),n.push(t.iridescenceThicknessMapUv),n.push(t.sheenColorMapUv),n.push(t.sheenRoughnessMapUv),n.push(t.specularMapUv),n.push(t.specularColorMapUv),n.push(t.specularIntensityMapUv),n.push(t.transmissionMapUv),n.push(t.thicknessMapUv),n.push(t.combine),n.push(t.fogExp2),n.push(t.sizeAttenuation),n.push(t.morphTargetsCount),n.push(t.morphAttributeCount),n.push(t.numDirLights),n.push(t.numPointLights),n.push(t.numSpotLights),n.push(t.numSpotLightMaps),n.push(t.numHemiLights),n.push(t.numRectAreaLights),n.push(t.numDirLightShadows),n.push(t.numPointLightShadows),n.push(t.numSpotLightShadows),n.push(t.numSpotLightShadowsWithMaps),n.push(t.numLightProbes),n.push(t.shadowMapType),n.push(t.toneMapping),n.push(t.numClippingPlanes),n.push(t.numClipIntersection),n.push(t.depthPacking),o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),t.alphaHash&&o.enable(18),t.batching&&o.enable(19),n.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),t.decodeVideoTexture&&o.enable(19),n.push(o.mask),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=f[e.type];if(n){let e=aT[n];t=ao.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,t=u.length;e<t;e++){let t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new oi(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function ou(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function oc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function oh(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function od(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?r.push(c):!0===s.transparent?i.push(c):n.push(c)},unshift:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?r.unshift(c):!0===s.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||oc),r.length>1&&r.sort(t||oh),i.length>1&&i.sort(t||oh)}}}function op(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new od,e.set(t,[r])):n>=i.length?(r=new od,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function of(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new rl,color:new i_};break;case"SpotLight":n={position:new rl,direction:new rl,color:new i_,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new rl,color:new i_,distance:0,decay:0};break;case"HemisphereLight":n={direction:new rl,skyColor:new i_,groundColor:new i_};break;case"RectAreaLight":n={color:new i_,position:new rl,halfWidth:new rl,halfHeight:new rl}}return e[t.id]=n,n}}}let om=0;function og(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ov(e,t){let n=new of,r=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nB};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nB,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)i.probe.push(new rl);let a=new rl,s=new rF,o=new rF;return{setup:function(a,s){let o=0,l=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,_=0,y=0,b=0;a.sort(og);let x=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){let t=a[e],s=t.color,S=t.intensity,w=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*S*x,l+=s.g*S*x,u+=s.b*S*x;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],S);b++}else if(t.isDirectionalLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=M,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){let e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(S*x),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;let a=t.shadow;if(t.map&&(i.spotLightMap[_]=t.map,_++,a.updateMatrices(t),t.castShadow&&y++),i.spotLightMatrix[d]=a.matrix,t.castShadow){let e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=M,v++}d++}else if(t.isRectAreaLight){let e=n.get(t);e.color.copy(s).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=M,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){let e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*x),e.groundColor.copy(t.groundColor).multiplyScalar(S*x),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2?(i.rectAreaLTC1=aE.LTC_FLOAT_1,i.rectAreaLTC2=aE.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=aE.LTC_FLOAT_1,i.rectAreaLTC2=aE.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=aE.LTC_HALF_1,i.rectAreaLTC2=aE.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=u;let S=i.hash;(S.directionalLength!==c||S.pointLength!==h||S.spotLength!==d||S.rectAreaLength!==p||S.hemiLength!==f||S.numDirectionalShadows!==m||S.numPointShadows!==g||S.numSpotShadows!==v||S.numSpotMaps!==_||S.numLightProbes!==b)&&(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+_-y,i.spotLightMap.length=_,i.numSpotLightShadowsWithMaps=y,i.numLightProbes=b,S.directionalLength=c,S.pointLength=h,S.spotLength=d,S.rectAreaLength=p,S.hemiLength=f,S.numDirectionalShadows=m,S.numPointShadows=g,S.numSpotShadows=v,S.numSpotMaps=_,S.numLightProbes=b,i.version=om++)},setupView:function(e,t){let n=0,r=0,l=0,u=0,c=0,h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){let d=e[t];if(d.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),n++}else if(d.isSpotLight){let e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){let e=i.rectArea[u];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),u++}else if(d.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){let e=i.hemi[c];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),c++}}},state:i}}function o_(e,t){let n=new ov(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function oy(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;let s=n.get(r);return void 0===s?(a=new o_(e,t),n.set(r,[a])):i>=s.length?(a=new o_(e,t),s.push(a)):a=s[i],a},dispose:function(){n=new WeakMap}}}class ob extends ix{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tz,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ox extends ix{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function oS(e,t,n){let r=new ab,i=new nB,a=new nB,s=new n9,o=new ob({depthPacking:tB}),l=new ox,u={},c=n.maxTextureSize,h={[y]:b,[b]:y,[x]:x},d=new al({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nB},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new iX;f.setAttribute("position",new iR(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new at(f,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=g;let S=this.type;function M(t,n,r,i){let a=null,s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=a.uuid,t=n.uuid,r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i),a=i}return a.visible=n.visible,a.wireframe=n.wireframe,i===_?a.side=null!==n.shadowSide?n.shadowSide:n.side:a.side=null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=r),a}this.render=function(n,o,l){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===n.length)return;let u=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),g=e.state;g.setBlending(w),g.buffers.color.setClear(1,1,1,1),g.buffers.depth.setTest(!0),g.setScissorTest(!1);let y=S!==_&&this.type===_,b=S===_&&this.type!==_;for(let u=0,h=n.length;u<h;u++){let h=n[u],f=h.shadow;if(void 0===f){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===f.autoUpdate&&!1===f.needsUpdate)continue;i.copy(f.mapSize);let v=f.getFrameExtents();if(i.multiply(v),a.copy(f.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/v.x),i.x=a.x*v.x,f.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/v.y),i.y=a.y*v.y,f.mapSize.y=a.y)),null===f.map||!0===y||!0===b){let e=this.type!==_?{minFilter:ew,magFilter:ew}:{};null!==f.map&&f.map.dispose(),f.map=new rt(i.x,i.y,e),f.map.texture.name=h.name+".shadowMap",f.camera.updateProjectionMatrix()}e.setRenderTarget(f.map),e.clear();let x=f.getViewportCount();for(let n=0;n<x;n++){let i=f.getViewport(n);s.set(a.x*i.x,a.y*i.y,a.x*i.z,a.y*i.w),g.viewport(s),f.updateMatrices(h,n),r=f.getFrustum(),function n(i,a,s,o,l){if(!1===i.visible)return;if(i.layers.test(a.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&l===_)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);let n=t.update(i),r=i.material;if(Array.isArray(r)){let t=n.groups;for(let u=0,c=t.length;u<c;u++){let c=t[u],h=r[c.materialIndex];if(h&&h.visible){let t=M(i,h,o,l);i.onBeforeShadow(e,i,a,s,n,t,c),e.renderBufferDirect(s,null,n,t,i,c),i.onAfterShadow(e,i,a,s,n,t,c)}}}else if(r.visible){let t=M(i,r,o,l);i.onBeforeShadow(e,i,a,s,n,t,null),e.renderBufferDirect(s,null,n,t,i,null),i.onAfterShadow(e,i,a,s,n,t,null)}}let u=i.children;for(let e=0,t=u.length;e<t;e++)n(u[e],a,s,o,l)}(o,l,f.camera,h,this.type)}!0!==f.isPointLightShadow&&this.type===_&&function(n,r){let a=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new rt(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}(f,l),f.needsUpdate=!1}S=this.type,v.needsUpdate=!1,e.setRenderTarget(u,h,f)}}function ow(e,t,n){let r=n.isWebGL2,i=new function(){let t=!1,n=new n9,r=null,i=new n9(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?eT(e.DEPTH_TEST):eA(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case Y:e.depthFunc(e.NEVER);break;case K:e.depthFunc(e.ALWAYS);break;case Q:e.depthFunc(e.LESS);break;case J:e.depthFunc(e.LEQUAL);break;case $:e.depthFunc(e.EQUAL);break;case ee:e.depthFunc(e.GEQUAL);break;case et:e.depthFunc(e.GREATER);break;case en:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(n){t||(n?eT(e.STENCIL_TEST):eA(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){(r!==t||i!==n||a!==s)&&(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){(s!==t||o!==n||l!==r)&&(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,u=null}}},o=new WeakMap,l=new WeakMap,u={},c={},f=new WeakMap,m=[],g=null,v=!1,_=null,y=null,S=null,er=null,ei=null,ea=null,es=null,eo=new i_(0,0,0),el=0,eu=!1,ec=null,eh=null,ed=null,ep=null,ef=null,em=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),eg=!1,ev=e.getParameter(e.VERSION);-1!==ev.indexOf("WebGL")?eg=parseFloat(/^WebGL (\d)/.exec(ev)[1])>=1:-1!==ev.indexOf("OpenGL ES")&&(eg=parseFloat(/^OpenGL ES (\d)/.exec(ev)[1])>=2);let e_=null,ey={},eb=e.getParameter(e.SCISSOR_BOX),ex=e.getParameter(e.VIEWPORT),eS=new n9().fromArray(eb),ew=new n9().fromArray(ex);function eM(t,n,i,a){let s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<i;o++)r&&(t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY)?e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}let eE={};function eT(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function eA(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}eE[e.TEXTURE_2D]=eM(e.TEXTURE_2D,e.TEXTURE_2D,1),eE[e.TEXTURE_CUBE_MAP]=eM(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(eE[e.TEXTURE_2D_ARRAY]=eM(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),eE[e.TEXTURE_3D]=eM(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),eT(e.DEPTH_TEST),a.setFunc(J),eI(!1),eL(d),eT(e.CULL_FACE),eP(w);let eC={[R]:e.FUNC_ADD,[P]:e.FUNC_SUBTRACT,[I]:e.FUNC_REVERSE_SUBTRACT};if(r)eC[L]=e.MIN,eC[O]=e.MAX;else{let e=t.get("EXT_blend_minmax");null!==e&&(eC[L]=e.MIN_EXT,eC[O]=e.MAX_EXT)}let eR={[N]:e.ZERO,[k]:e.ONE,[D]:e.SRC_COLOR,[F]:e.SRC_ALPHA,[G]:e.SRC_ALPHA_SATURATE,[H]:e.DST_COLOR,[B]:e.DST_ALPHA,[U]:e.ONE_MINUS_SRC_COLOR,[z]:e.ONE_MINUS_SRC_ALPHA,[j]:e.ONE_MINUS_DST_COLOR,[V]:e.ONE_MINUS_DST_ALPHA,[W]:e.CONSTANT_COLOR,[q]:e.ONE_MINUS_CONSTANT_COLOR,[X]:e.CONSTANT_ALPHA,[Z]:e.ONE_MINUS_CONSTANT_ALPHA};function eP(t,n,r,i,a,s,o,l,u,c){if(t===w){!0===v&&(eA(e.BLEND),v=!1);return}if(!1===v&&(eT(e.BLEND),v=!0),t!==C){if(t!==_||c!==eu){if((y!==R||ei!==R)&&(e.blendEquation(e.FUNC_ADD),y=R,ei=R),c)switch(t){case M:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case E:e.blendFunc(e.ONE,e.ONE);break;case T:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case A:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case M:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case E:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case T:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case A:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}S=null,er=null,ea=null,es=null,eo.set(0,0,0),el=0,_=t,eu=c}return}a=a||n,s=s||r,o=o||i,(n!==y||a!==ei)&&(e.blendEquationSeparate(eC[n],eC[a]),y=n,ei=a),(r!==S||i!==er||s!==ea||o!==es)&&(e.blendFuncSeparate(eR[r],eR[i],eR[s],eR[o]),S=r,er=i,ea=s,es=o),(!1===l.equals(eo)||u!==el)&&(e.blendColor(l.r,l.g,l.b,u),eo.copy(l),el=u),_=t,eu=!1}function eI(t){ec!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ec=t)}function eL(t){t!==h?(eT(e.CULL_FACE),t!==eh&&(t===d?e.cullFace(e.BACK):t===p?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):eA(e.CULL_FACE),eh=t}function eO(t,n,r){t?(eT(e.POLYGON_OFFSET_FILL),(ep!==n||ef!==r)&&(e.polygonOffset(n,r),ep=n,ef=r)):eA(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:s},enable:eT,disable:eA,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=m,s=!1;if(r){if(void 0===(a=f.get(i))&&(a=[],f.set(i,a)),r.isWebGLMultipleRenderTargets){let t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0)}else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return g!==t&&(e.useProgram(t),g=t,!0)},setBlending:eP,setMaterial:function(t,n){t.side===x?eA(e.CULL_FACE):eT(e.CULL_FACE);let r=t.side===b;n&&(r=!r),eI(r),t.blending===M&&!1===t.transparent?eP(w):eP(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);let o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),eO(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?eT(e.SAMPLE_ALPHA_TO_COVERAGE):eA(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:eI,setCullFace:eL,setLineWidth:function(t){t!==ed&&(eg&&e.lineWidth(t),ed=t)},setPolygonOffset:eO,setScissorTest:function(t){t?eT(e.SCISSOR_TEST):eA(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+em-1),e_!==t&&(e.activeTexture(t),e_=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===e_?e.TEXTURE0+em-1:e_);let i=ey[r];void 0===i&&(i={type:void 0,texture:void 0},ey[r]=i),(i.type!==t||i.texture!==n)&&(e_!==r&&(e.activeTexture(r),e_=r),e.bindTexture(t,n||eE[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=ey[e_];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=l.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===eS.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),eS.copy(t))},viewport:function(t){!1===ew.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ew.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},e_=null,ey={},c={},f=new WeakMap,m=[],g=null,v=!1,_=null,y=null,S=null,er=null,ei=null,ea=null,es=null,eo=new i_(0,0,0),el=0,eu=!1,ec=null,eh=null,ed=null,ep=null,ef=null,eS.set(0,0,e.canvas.width,e.canvas.height),ew.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),s.reset()}}}function oM(e,t,n,r,i,a,s){let o;let l=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function _(e,t){return v?new OffscreenCanvas(e,t):nq("canvas")}function y(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let r=t?nD:Math.floor,a=r(i*e.width),s=r(i*e.height);void 0===o&&(o=_(a,s));let l=n?_(a,s):o;return l.width=a,l.height=s,l.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),l}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function b(e){return nk(e.width)&&nk(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==ew&&e.minFilter!==eC}function S(t){e.generateMipmap(t)}function w(n,r,i,a,s=!1){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(i===e.FLOAT&&(o=e.R32F),i===e.HALF_FLOAT&&(o=e.R16F),i===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.R8UI),i===e.UNSIGNED_SHORT&&(o=e.R16UI),i===e.UNSIGNED_INT&&(o=e.R32UI),i===e.BYTE&&(o=e.R8I),i===e.SHORT&&(o=e.R16I),i===e.INT&&(o=e.R32I)),r===e.RG&&(i===e.FLOAT&&(o=e.RG32F),i===e.HALF_FLOAT&&(o=e.RG16F),i===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RGBA){let t=s?tZ:n0.getTransfer(a);i===e.FLOAT&&(o=e.RGBA32F),i===e.HALF_FLOAT&&(o=e.RGBA16F),i===e.UNSIGNED_BYTE&&(o=t===tY?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return(o===e.R16F||o===e.R32F||o===e.RG16F||o===e.RG32F||o===e.RGBA16F||o===e.RGBA32F)&&t.get("EXT_color_buffer_float"),o}function M(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&e.minFilter!==ew&&e.minFilter!==eC?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(t){return t===ew||t===eM||t===eT?e.NEAREST:e.LINEAR}function T(e){let t=e.target;t.removeEventListener("dispose",T),function(e){let t=r.get(e);if(void 0===t.__webglInit)return;let n=e.source,i=g.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function A(t){let n=t.target;n.removeEventListener("dispose",A),function(t){let n=t.texture,i=r.get(t),a=r.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(i.__webglFramebuffer[t]))for(let n=0;n<i.__webglFramebuffer[t].length;n++)e.deleteFramebuffer(i.__webglFramebuffer[t][n]);else e.deleteFramebuffer(i.__webglFramebuffer[t]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),s.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function C(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source,a=g.get(i);delete a[n.__cacheKey],s.memory.textures--}let R=0;function P(t,i){let a=r.get(t);if(t.isVideoTexture&&function(e){let t=s.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{D(a,t,i);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}let I={[eb]:e.REPEAT,[ex]:e.CLAMP_TO_EDGE,[eS]:e.MIRRORED_REPEAT},L={[ew]:e.NEAREST,[eM]:e.NEAREST_MIPMAP_NEAREST,[eT]:e.NEAREST_MIPMAP_LINEAR,[eC]:e.LINEAR,[eR]:e.LINEAR_MIPMAP_NEAREST,[eI]:e.LINEAR_MIPMAP_LINEAR},O={[ni]:e.NEVER,[nh]:e.ALWAYS,[na]:e.LESS,[no]:e.LEQUAL,[ns]:e.EQUAL,[nc]:e.GEQUAL,[nl]:e.GREATER,[nu]:e.NOTEQUAL};function N(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,I[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,I[a.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,I[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,L[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,L[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),(a.wrapS!==ex||a.wrapT!==ex)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,E(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,E(a.minFilter)),a.minFilter!==ew&&a.minFilter!==eC&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,O[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){let s=t.get("EXT_texture_filter_anisotropic");a.magFilter!==ew&&(a.minFilter===eT||a.minFilter===eI)&&(a.type!==ez||!1!==t.has("OES_texture_float_linear"))&&(!1!==l||a.type!==eB||!1!==t.has("OES_texture_half_float_linear"))&&(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function k(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));let i=n.source,a=g.get(i);void 0===a&&(a={},g.set(i,a));let o=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function D(t,i,s){let o=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(o=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(o=e.TEXTURE_3D);let u=k(t,i),c=i.source;n.bindTexture(o,t.__webglTexture,e.TEXTURE0+s);let d=r.get(c);if(c.version!==d.__version||!0===u){let t;n.activeTexture(e.TEXTURE0+s);let r=n0.getPrimaries(n0.workingColorSpace),p=i.colorSpace===tj?null:n0.getPrimaries(i.colorSpace),f=i.colorSpace===tj||r===p?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);let m=!l&&(i.wrapS!==ex||i.wrapT!==ex||i.minFilter!==ew&&i.minFilter!==eC)&&!1===b(i.image),g=y(i.image,m,!1,h),v=b(g=H(i,g))||l,_=a.convert(i.format,i.colorSpace),E=a.convert(i.type),T=w(i.internalFormat,_,E,i.colorSpace,i.isVideoTexture);N(o,i,v);let A=i.mipmaps,C=l&&!0!==i.isVideoTexture&&T!==e9,R=void 0===d.__version||!0===u,P=M(i,g,v);if(i.isDepthTexture)T=e.DEPTH_COMPONENT,l?T=i.type===ez?e.DEPTH_COMPONENT32F:i.type===eF?e.DEPTH_COMPONENT24:i.type===ej?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===ez&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===eZ&&T===e.DEPTH_COMPONENT&&i.type!==eD&&i.type!==eF&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=eF,E=a.convert(i.type)),i.format===eY&&T===e.DEPTH_COMPONENT&&(T=e.DEPTH_STENCIL,i.type!==ej&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ej,E=a.convert(i.type))),R&&(C?n.texStorage2D(e.TEXTURE_2D,1,T,g.width,g.height):n.texImage2D(e.TEXTURE_2D,0,T,g.width,g.height,0,_,E,null));else if(i.isDataTexture){if(A.length>0&&v){C&&R&&n.texStorage2D(e.TEXTURE_2D,P,T,A[0].width,A[0].height);for(let r=0,i=A.length;r<i;r++)t=A[r],C?n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,_,E,t.data):n.texImage2D(e.TEXTURE_2D,r,T,t.width,t.height,0,_,E,t.data);i.generateMipmaps=!1}else C?(R&&n.texStorage2D(e.TEXTURE_2D,P,T,g.width,g.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,g.width,g.height,_,E,g.data)):n.texImage2D(e.TEXTURE_2D,0,T,g.width,g.height,0,_,E,g.data)}else if(i.isCompressedTexture){if(i.isCompressedArrayTexture){C&&R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,T,A[0].width,A[0].height,g.depth);for(let r=0,a=A.length;r<a;r++)t=A[r],i.format!==eW?null!==_?C?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,g.depth,_,t.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,r,T,t.width,t.height,g.depth,0,t.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,g.depth,_,E,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,r,T,t.width,t.height,g.depth,0,_,E,t.data)}else{C&&R&&n.texStorage2D(e.TEXTURE_2D,P,T,A[0].width,A[0].height);for(let r=0,a=A.length;r<a;r++)t=A[r],i.format!==eW?null!==_?C?n.compressedTexSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,_,t.data):n.compressedTexImage2D(e.TEXTURE_2D,r,T,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,_,E,t.data):n.texImage2D(e.TEXTURE_2D,r,T,t.width,t.height,0,_,E,t.data)}}else if(i.isDataArrayTexture)C?(R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,T,g.width,g.height,g.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,g.width,g.height,g.depth,_,E,g.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,T,g.width,g.height,g.depth,0,_,E,g.data);else if(i.isData3DTexture)C?(R&&n.texStorage3D(e.TEXTURE_3D,P,T,g.width,g.height,g.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,g.width,g.height,g.depth,_,E,g.data)):n.texImage3D(e.TEXTURE_3D,0,T,g.width,g.height,g.depth,0,_,E,g.data);else if(i.isFramebufferTexture){if(R){if(C)n.texStorage2D(e.TEXTURE_2D,P,T,g.width,g.height);else{let t=g.width,r=g.height;for(let i=0;i<P;i++)n.texImage2D(e.TEXTURE_2D,i,T,t,r,0,_,E,null),t>>=1,r>>=1}}}else if(A.length>0&&v){C&&R&&n.texStorage2D(e.TEXTURE_2D,P,T,A[0].width,A[0].height);for(let r=0,i=A.length;r<i;r++)t=A[r],C?n.texSubImage2D(e.TEXTURE_2D,r,0,0,_,E,t):n.texImage2D(e.TEXTURE_2D,r,T,_,E,t);i.generateMipmaps=!1}else C?(R&&n.texStorage2D(e.TEXTURE_2D,P,T,g.width,g.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,_,E,g)):n.texImage2D(e.TEXTURE_2D,0,T,_,E,g);x(i,v)&&S(o),d.__version=c.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function U(t,i,s,o,l,u){let c=a.convert(s.format,s.colorSpace),h=a.convert(s.type),d=w(s.internalFormat,c,h,s.colorSpace);if(!r.get(i).__hasExternalTextures){let t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,u,d,t,r,i.depth,0,c,h,null):n.texImage2D(l,u,d,t,r,0,c,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),V(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,r.get(s).__webglTexture,0,B(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,r.get(s).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===l?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||V(n)){let t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ez?i=e.DEPTH_COMPONENT32F:t.type===eF&&(i=e.DEPTH_COMPONENT24));let r=B(n);V(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){let i=B(n);r&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):V(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{let t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){let s=t[i],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),u=w(s.internalFormat,o,l,s.colorSpace),c=B(n);r&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,u,n.width,n.height):V(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function z(t){let i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);let a=r.get(i.depthTexture).__webglTexture,s=B(i);if(i.depthTexture.format===eZ)V(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else if(i.depthTexture.format===eY)V(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0);else throw Error("Unknown depthTexture format")}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),F(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(e){return Math.min(d,e.samples)}function V(e){let n=r.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){let r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===nw||r!==tW&&r!==tj&&(n0.getTransfer(r)===tY?!1===l?!0===t.has("EXT_sRGB")&&i===eW?(e.format=nw,e.minFilter=eC,e.generateMipmaps=!1):n=n3.sRGBToLinear(n):(i!==eW||a!==eO)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){let e=R;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=P,this.setTexture2DArray=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){D(a,t,i);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){D(a,t,i);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){let s=r.get(t);if(t.version>0&&s.__version!==t.version){(function(t,i,s){if(6!==i.image.length)return;let o=k(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);let h=r.get(u);if(u.version!==h.__version||!0===o){let t;n.activeTexture(e.TEXTURE0+s);let r=n0.getPrimaries(n0.workingColorSpace),d=i.colorSpace===tj?null:n0.getPrimaries(i.colorSpace),p=i.colorSpace===tj||r===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let f=i.isCompressedTexture||i.image[0].isCompressedTexture,m=i.image[0]&&i.image[0].isDataTexture,g=[];for(let e=0;e<6;e++)f||m?g[e]=m?i.image[e].image:i.image[e]:g[e]=y(i.image[e],!1,!0,c),g[e]=H(i,g[e]);let v=g[0],_=b(v)||l,E=a.convert(i.format,i.colorSpace),T=a.convert(i.type),A=w(i.internalFormat,E,T,i.colorSpace),C=l&&!0!==i.isVideoTexture,R=void 0===h.__version||!0===o,P=M(i,v,_);if(N(e.TEXTURE_CUBE_MAP,i,_),f){C&&R&&n.texStorage2D(e.TEXTURE_CUBE_MAP,P,A,v.width,v.height);for(let r=0;r<6;r++){t=g[r].mipmaps;for(let a=0;a<t.length;a++){let s=t[a];i.format!==eW?null!==E?C?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,0,0,s.width,s.height,E,s.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,A,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,0,0,s.width,s.height,E,T,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,A,s.width,s.height,0,E,T,s.data)}}}else{t=i.mipmaps,C&&R&&(t.length>0&&P++,n.texStorage2D(e.TEXTURE_CUBE_MAP,P,A,g[0].width,g[0].height));for(let r=0;r<6;r++)if(m){C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,g[r].width,g[r].height,E,T,g[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,A,g[r].width,g[r].height,0,E,T,g[r].data);for(let i=0;i<t.length;i++){let a=t[i].image[r].image;C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,a.width,a.height,E,T,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,A,a.width,a.height,0,E,T,a.data)}}else{C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,E,T,g[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,A,E,T,g[r]);for(let i=0;i<t.length;i++){let a=t[i];C?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,E,T,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,A,E,T,a.image[r])}}}x(i,_)&&S(e.TEXTURE_CUBE_MAP),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version})(s,t,i);return}n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=function(t,n,i){let a=r.get(t);void 0!==n&&U(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&z(t)},this.setupRenderTarget=function(t){let o=t.texture,u=r.get(t),c=r.get(o);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=o.version,s.memory.textures++);let h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=b(t)||l;if(h){u.__webglFramebuffer=[];for(let t=0;t<6;t++)if(l&&o.mipmaps&&o.mipmaps.length>0){u.__webglFramebuffer[t]=[];for(let n=0;n<o.mipmaps.length;n++)u.__webglFramebuffer[t][n]=e.createFramebuffer()}else u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(l&&o.mipmaps&&o.mipmaps.length>0){u.__webglFramebuffer=[];for(let t=0;t<o.mipmaps.length;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else u.__webglFramebuffer=e.createFramebuffer();if(d){if(i.drawBuffers){let n=t.texture;for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.")}if(l&&t.samples>0&&!1===V(t)){let r=d?o:[o];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){let i=r[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);let s=a.convert(i.format,i.colorSpace),o=a.convert(i.type),l=w(i.internalFormat,s,o,i.colorSpace,!0===t.isXRRenderTarget),c=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),F(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),N(e.TEXTURE_CUBE_MAP,o,p);for(let n=0;n<6;n++)if(l&&o.mipmaps&&o.mipmaps.length>0)for(let r=0;r<o.mipmaps.length;r++)U(u.__webglFramebuffer[n][r],t,o,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else U(u.__webglFramebuffer[n],t,o,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);x(o,p)&&S(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){let i=t.texture;for(let a=0,s=i.length;a<s;a++){let s=i[a],o=r.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),N(e.TEXTURE_2D,s,p),U(u.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),x(s,p)&&S(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,c.__webglTexture),N(r,o,p),l&&o.mipmaps&&o.mipmaps.length>0)for(let n=0;n<o.mipmaps.length;n++)U(u.__webglFramebuffer[n],t,o,e.COLOR_ATTACHMENT0,r,n);else U(u.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0,r,0);x(o,p)&&S(r),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(t){let i=b(t)||l,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){let o=a[s];if(x(o,i)){let i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(o).__webglTexture;n.bindTexture(i,a),S(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===V(t)){let i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height,o=e.COLOR_BUFFER_BIT,l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);let d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),f&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);let a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=U,this.useMultisampledRTT=V}function oE(e,t,n){let r=n.isWebGL2;return{convert:function(n,i=tj){let a;let s=n0.getTransfer(i);if(n===eO)return e.UNSIGNED_BYTE;if(n===eV)return e.UNSIGNED_SHORT_4_4_4_4;if(n===eH)return e.UNSIGNED_SHORT_5_5_5_1;if(n===eN)return e.BYTE;if(n===ek)return e.SHORT;if(n===eD)return e.UNSIGNED_SHORT;if(n===eU)return e.INT;if(n===eF)return e.UNSIGNED_INT;if(n===ez)return e.FLOAT;if(n===eB)return r?e.HALF_FLOAT:null!==(a=t.get("OES_texture_half_float"))?a.HALF_FLOAT_OES:null;if(n===eG)return e.ALPHA;if(n===eW)return e.RGBA;if(n===eq)return e.LUMINANCE;if(n===eX)return e.LUMINANCE_ALPHA;if(n===eZ)return e.DEPTH_COMPONENT;if(n===eY)return e.DEPTH_STENCIL;if(n===nw)return null!==(a=t.get("EXT_sRGB"))?a.SRGB_ALPHA_EXT:null;if(n===eK)return e.RED;if(n===eQ)return e.RED_INTEGER;if(n===eJ)return e.RG;if(n===e$)return e.RG_INTEGER;if(n===e0)return e.RGBA_INTEGER;if(n===e1||n===e2||n===e3||n===e4){if(s===tY){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===e1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===e2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===e3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===e4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===e1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===e2)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===e3)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===e4)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(n===e5||n===e7||n===e8||n===e6){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===e5)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===e7)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===e8)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===e6)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===e9)return null!==(a=t.get("WEBGL_compressed_texture_etc1"))?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===te||n===tt){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(n===te)return s===tY?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===tt)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===tn||n===tr||n===ti||n===ta||n===ts||n===to||n===tl||n===tu||n===tc||n===th||n===td||n===tp||n===tf||n===tm){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(n===tn)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===tr)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===ti)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ta)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ts)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===to)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===tl)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===tu)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===tc)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===th)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===td)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===tp)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===tf)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===tm)return s===tY?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===tg||n===tv||n===t_){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(n===tg)return s===tY?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===tv)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===t_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===ty||n===tb||n===tx||n===tS){if(null===(a=t.get("EXT_texture_compression_rgtc")))return null;if(n===tg)return a.COMPRESSED_RED_RGTC1_EXT;if(n===tb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===tx)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===tS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===ej?r?e.UNSIGNED_INT_24_8:null!==(a=t.get("WEBGL_depth_texture"))?a.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}class oT extends ac{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class oA extends r9{constructor(){super(),this.isGroup=!0,this.type="Group"}}let oC={type:"move"};class oR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new oA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new oA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new rl,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new rl),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new oA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new rl,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new rl),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let r of(a=!0,e.hand.values())){let e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position);l.inputState.pinching&&s>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1);null!==s&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(oC)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new oA;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class oP extends nT{constructor(e,t){super();let n=this,r=null,i=1,a=null,s="local-floor",o=1,l=null,u=null,c=null,h=null,d=null,p=null,f=t.getContextAttributes(),m=null,g=null,v=[],_=[],y=new nB,b=null,x=new ac;x.layers.enable(1),x.viewport=new n9;let S=new ac;S.layers.enable(2),S.viewport=new n9;let w=[x,S],M=new oT;M.layers.enable(1),M.layers.enable(2);let E=null,T=null;function A(e){let t=_.indexOf(e.inputSource);if(-1===t)return;let n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",R);for(let e=0;e<v.length;e++){let t=_[e];null!==t&&(_[e]=null,v[e].disconnect(t))}E=null,T=null,e.setRenderTarget(m),d=null,h=null,c=null,r=null,g=null,N.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(y.width,y.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=_.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=_.length){_.push(n),r=e;break}if(null===_[e]){_[e]=n,r=e;break}}if(-1===r)break}let i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new oR,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new oR,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new oR,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(u){if(null!==(r=u)){if(m=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",C),r.addEventListener("inputsourceschange",R),!0!==f.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(y),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),g=new rt(d.framebufferWidth,d.framebufferHeight,{format:eW,type:eO,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?eY:eZ,a=f.stencil?ej:eF);let o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};h=(c=new XRWebGLBinding(r,t)).createProjectionLayer(o),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),g=new rt(h.textureWidth,h.textureHeight,{format:eW,type:eO,depthTexture:new a5(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};let P=new rl,I=new rl;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;M.near=S.near=x.near=e.near,M.far=S.far=x.far=e.far,(E!==M.near||T!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),E=M.near,T=M.far);let t=e.parent,n=M.cameras;L(M,t);for(let e=0;e<n.length;e++)L(n[e],t);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);let r=P.distanceTo(I),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=r/(-c+h),p=-(d*c);t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(p),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let f=s+d,m=o+d;e.projectionMatrix.makePerspective(s*c-p,s*h+(r-p),l*o/m*f,u*o/m*f,f,m),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(M,x,S):M.projectionMatrix.copy(x.projectionMatrix),null===t?e.matrix.copy(M.matrixWorld):(e.matrix.copy(t.matrixWorld),e.matrix.invert(),e.matrix.multiply(M.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(M.projectionMatrix),e.projectionMatrixInverse.copy(M.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*nP*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let O=null,N=new ax;N.setAnimationLoop(function(t,r){if(u=r.getViewerPose(l||a),p=r,null!==u){let t=u.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],a=null;if(null!==d)a=d.getViewport(i);else{let t=c.getViewSubImage(h,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=w[r];void 0===s&&((s=new ac).layers.enable(r),s.viewport=new n9,w[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(M.matrix.copy(s.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===n&&M.cameras.push(s)}}for(let e=0;e<v.length;e++){let t=_[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}O&&O(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function oI(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===b&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===b&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);let a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;let t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,as(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){i.isMeshBasicMaterial?r(e,i):i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),i.gradientMap&&(e.gradientMap.value=i.gradientMap)):i.isMeshPhongMaterial?(r(e,i),e.specular.value.copy(i.specular),e.shininess.value=Math.max(i.shininess,1e-4)):i.isMeshStandardMaterial?(r(e,i),e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform)),e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform)),t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity),i.isMeshPhysicalMaterial&&(e.ior.value=i.ior,i.sheen>0&&(e.sheenColor.value.copy(i.sheenColor).multiplyScalar(i.sheen),e.sheenRoughness.value=i.sheenRoughness,i.sheenColorMap&&(e.sheenColorMap.value=i.sheenColorMap,n(i.sheenColorMap,e.sheenColorMapTransform)),i.sheenRoughnessMap&&(e.sheenRoughnessMap.value=i.sheenRoughnessMap,n(i.sheenRoughnessMap,e.sheenRoughnessMapTransform))),i.clearcoat>0&&(e.clearcoat.value=i.clearcoat,e.clearcoatRoughness.value=i.clearcoatRoughness,i.clearcoatMap&&(e.clearcoatMap.value=i.clearcoatMap,n(i.clearcoatMap,e.clearcoatMapTransform)),i.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap,n(i.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),i.clearcoatNormalMap&&(e.clearcoatNormalMap.value=i.clearcoatNormalMap,n(i.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),i.side===b&&e.clearcoatNormalScale.value.negate())),i.iridescence>0&&(e.iridescence.value=i.iridescence,e.iridescenceIOR.value=i.iridescenceIOR,e.iridescenceThicknessMinimum.value=i.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=i.iridescenceThicknessRange[1],i.iridescenceMap&&(e.iridescenceMap.value=i.iridescenceMap,n(i.iridescenceMap,e.iridescenceMapTransform)),i.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=i.iridescenceThicknessMap,n(i.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),i.transmission>0&&(e.transmission.value=i.transmission,e.transmissionSamplerMap.value=o.texture,e.transmissionSamplerSize.value.set(o.width,o.height),i.transmissionMap&&(e.transmissionMap.value=i.transmissionMap,n(i.transmissionMap,e.transmissionMapTransform)),e.thickness.value=i.thickness,i.thicknessMap&&(e.thicknessMap.value=i.thicknessMap,n(i.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=i.attenuationDistance,e.attenuationColor.value.copy(i.attenuationColor)),i.anisotropy>0&&(e.anisotropyVector.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation)),i.anisotropyMap&&(e.anisotropyMap.value=i.anisotropyMap,n(i.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=i.specularIntensity,e.specularColor.value.copy(i.specularColor),i.specularColorMap&&(e.specularColorMap.value=i.specularColorMap,n(i.specularColorMap,e.specularColorMapTransform)),i.specularIntensityMap&&(e.specularIntensityMap.value=i.specularIntensityMap,n(i.specularIntensityMap,e.specularIntensityMapTransform)))):i.isMeshMatcapMaterial?(r(e,i),i.matcap&&(e.matcap.value=i.matcap)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.isLineDashedMaterial&&(e.dashSize.value=i.dashSize,e.totalSize.value=i.dashSize+i.gapSize,e.scale.value=i.scale)):i.isPointsMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.size.value=i.size*a,e.scale.value=.5*s,i.map&&(e.map.value=i.map,n(i.map,e.uvTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isSpriteMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.rotation.value=i.rotation,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function oL(e,t,n,r){let i={},a={},s=[],o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e){let t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,c){let h=i[n.id];void 0===h&&(function(e){let t=e.uniforms,n=0,r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e],a={boundary:0,storage:0},s=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=s.length;e<t;e++){let t=l(s[e]);a.boundary+=t.boundary,a.storage+=t.storage}if(i.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){let e=16-(r=n%16);0!==r&&e-a.boundary<0&&(n+=16-r,i.__offset=n)}n+=a.storage}(r=n%16)>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){let n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));let d=c.program;r.updateUBOMapping(n,d);let p=t.render.frame;a[n.id]!==p&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=r[t];if(!0===function(e,t,n){let r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{let e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{let e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){let n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}(n,t,a)){let t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value],i=0;for(let a=0;a<r.length;a++){let s=r[a],o=l(s);"number"==typeof s?(n.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,n.__data)):s.isMatrix3?(n.__data[0]=s.elements[0],n.__data[1]=s.elements[1],n.__data[2]=s.elements[2],n.__data[3]=s.elements[0],n.__data[4]=s.elements[3],n.__data[5]=s.elements[4],n.__data[6]=s.elements[5],n.__data[7]=s.elements[0],n.__data[8]=s.elements[6],n.__data[9]=s.elements[7],n.__data[10]=s.elements[8],n.__data[11]=s.elements[0]):(s.toArray(n.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class oO{constructor(e={}){let t,n,r,i,a,s,o,u,c,h,d,p,f,m,g,v,_,S,w,M,E,T,A,C,R;let{canvas:P=nX(),context:I=null,depth:L=!0,stencil:O=!0,alpha:N=!1,antialias:k=!1,premultipliedAlpha:D=!0,preserveDrawingBuffer:U=!1,powerPreference:F="default",failIfMajorPerformanceCaveat:z=!1}=e;this.isWebGLRenderer=!0,t=null!==I?I.getContextAttributes().alpha:N;let B=new Uint32Array(4),V=new Int32Array(4),H=null,j=null,G=[],W=[];this.domElement=P,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=tG,this._useLegacyLights=!1,this.toneMapping=es,this.toneMappingExposure=1;let q=this,X=!1,Z=0,Y=0,K=null,Q=-1,J=null,$=new n9,ee=new n9,et=null,en=new i_(0),er=0,ei=P.width,ea=P.height,eo=1,el=null,eu=null,ec=new n9(0,0,ei,ea),eh=new n9(0,0,ei,ea),ed=!1,ep=new ab,ef=!1,em=!1,eg=null,ev=new rF,e_=new nB,ey=new rl,eb={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ex(){return null===K?eo:1}let eS=I;function ew(e,t){for(let n=0;n<e.length;n++){let r=e[n],i=P.getContext(r,t);if(null!==i)return i}return null}try{if("setAttribute"in P&&P.setAttribute("data-engine",`three.js r${l}`),P.addEventListener("webglcontextlost",eT,!1),P.addEventListener("webglcontextrestored",eA,!1),P.addEventListener("webglcontextcreationerror",eC,!1),null===eS){let e=["webgl2","webgl","experimental-webgl"];if(!0===q.isWebGL1Renderer&&e.shift(),eS=ew(e,{alpha:!0,depth:L,stencil:O,antialias:k,premultipliedAlpha:D,preserveDrawingBuffer:U,powerPreference:F,failIfMajorPerformanceCaveat:z}),null===eS){if(ew(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}"undefined"!=typeof WebGLRenderingContext&&eS instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===eS.getShaderPrecisionFormat&&(eS.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eM(){n=new aQ(eS),r=new aI(eS,n,e),n.init(r),A=new oE(eS,n,r),i=new ow(eS,n,r),a=new a0(eS),s=new ou,o=new oM(eS,n,i,s,r,A,a),u=new aO(q),c=new aK(q),h=new aS(eS,r),C=new aR(eS,n,h,r),d=new aJ(eS,h,a,C),p=new a4(eS,d,h,a),M=new a3(eS,r,o),_=new aL(s),f=new ol(q,u,c,n,r,C,_),m=new oI(q,s),g=new op,v=new oy(n,r),w=new aC(q,u,c,i,p,t,D),S=new oS(q,p,r),R=new oL(eS,a,r,i),E=new aP(eS,n,a,r),T=new a$(eS,n,a,r),a.programs=f.programs,q.capabilities=r,q.extensions=n,q.properties=s,q.renderLists=g,q.shadowMap=S,q.state=i,q.info=a}eM();let eE=new oP(q,eS);function eT(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function eA(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;let e=a.autoReset,t=S.enabled,n=S.autoUpdate,r=S.needsUpdate,i=S.type;eM(),a.autoReset=e,S.enabled=t,S.autoUpdate=n,S.needsUpdate=r,S.type=i}function eC(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eR(e){let t=e.target;t.removeEventListener("dispose",eR),function(e){let t=s.get(e).programs;void 0!==t&&(t.forEach(function(e){f.releaseProgram(e)}),e.isShaderMaterial&&f.releaseShaderCache(e))}(t),s.remove(t)}function eP(e,t,n){!0===e.transparent&&e.side===x&&!1===e.forceSinglePass?(e.side=b,e.needsUpdate=!0,eZ(e,t,n),e.side=y,e.needsUpdate=!0,eZ(e,t,n),e.side=x):eZ(e,t,n)}this.xr=eE,this.getContext=function(){return eS},this.getContextAttributes=function(){return eS.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return eo},this.setPixelRatio=function(e){void 0!==e&&(eo=e,this.setSize(ei,ea,!1))},this.getSize=function(e){return e.set(ei,ea)},this.setSize=function(e,t,n=!0){if(eE.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ei=e,ea=t,P.width=Math.floor(e*eo),P.height=Math.floor(t*eo),!0===n&&(P.style.width=e+"px",P.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(ei*eo,ea*eo).floor()},this.setDrawingBufferSize=function(e,t,n){ei=e,ea=t,eo=n,P.width=Math.floor(e*n),P.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy($)},this.getViewport=function(e){return e.copy(ec)},this.setViewport=function(e,t,n,r){e.isVector4?ec.set(e.x,e.y,e.z,e.w):ec.set(e,t,n,r),i.viewport($.copy(ec).multiplyScalar(eo).floor())},this.getScissor=function(e){return e.copy(eh)},this.setScissor=function(e,t,n,r){e.isVector4?eh.set(e.x,e.y,e.z,e.w):eh.set(e,t,n,r),i.scissor(ee.copy(eh).multiplyScalar(eo).floor())},this.getScissorTest=function(){return ed},this.setScissorTest=function(e){i.setScissorTest(ed=e)},this.setOpaqueSort=function(e){el=e},this.setTransparentSort=function(e){eu=e},this.getClearColor=function(e){return e.copy(w.getClearColor())},this.setClearColor=function(){w.setClearColor.apply(w,arguments)},this.getClearAlpha=function(){return w.getClearAlpha()},this.setClearAlpha=function(){w.setClearAlpha.apply(w,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==K){let t=K.texture.format;e=t===e0||t===e$||t===eQ}if(e){let e=K.texture.type,t=e===eO||e===eF||e===eD||e===ej||e===eV||e===eH,n=w.getClearColor(),r=w.getClearAlpha(),i=n.r,a=n.g,s=n.b;t?(B[0]=i,B[1]=a,B[2]=s,B[3]=r,eS.clearBufferuiv(eS.COLOR,0,B)):(V[0]=i,V[1]=a,V[2]=s,V[3]=r,eS.clearBufferiv(eS.COLOR,0,V))}else r|=eS.COLOR_BUFFER_BIT}t&&(r|=eS.DEPTH_BUFFER_BIT),n&&(r|=eS.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),eS.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){P.removeEventListener("webglcontextlost",eT,!1),P.removeEventListener("webglcontextrestored",eA,!1),P.removeEventListener("webglcontextcreationerror",eC,!1),g.dispose(),v.dispose(),s.dispose(),u.dispose(),c.dispose(),p.dispose(),C.dispose(),R.dispose(),f.dispose(),eE.dispose(),eE.removeEventListener("sessionstart",eN),eE.removeEventListener("sessionend",ek),eg&&(eg.dispose(),eg=null),eU.stop()},this.renderBufferDirect=function(e,t,n,a,l,p){let f;null===t&&(t=eb);let g=l.isMesh&&0>l.matrixWorld.determinant(),v=function(e,t,n,a,l){var h;!0!==t.isScene&&(t=eb),o.resetTextureUnits();let d=t.fog,p=a.isMeshStandardMaterial?t.environment:null,f=null===K?q.outputColorSpace:!0===K.isXRRenderTarget?K.texture.colorSpace:tW,g=(a.isMeshStandardMaterial?c:u).get(a.envMap||p),v=!0===a.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,y=!!n.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),b=!!n.morphAttributes.position,x=!!n.morphAttributes.normal,S=!!n.morphAttributes.color,w=es;a.toneMapped&&(null===K||!0===K.isXRRenderTarget)&&(w=q.toneMapping);let E=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,T=void 0!==E?E.length:0,A=s.get(a),C=j.state.lights;if(!0===ef&&(!0===em||e!==J)){let t=e===J&&a.id===Q;_.setState(a,e,t)}let P=!1;a.version===A.__version?A.needsLights&&A.lightsStateVersion!==C.state.version?P=!0:A.outputColorSpace!==f?P=!0:l.isBatchedMesh&&!1===A.batching?P=!0:l.isBatchedMesh||!0!==A.batching?l.isInstancedMesh&&!1===A.instancing?P=!0:l.isInstancedMesh||!0!==A.instancing?l.isSkinnedMesh&&!1===A.skinning?P=!0:l.isSkinnedMesh||!0!==A.skinning?l.isInstancedMesh&&!0===A.instancingColor&&null===l.instanceColor?P=!0:l.isInstancedMesh&&!1===A.instancingColor&&null!==l.instanceColor?P=!0:A.envMap!==g?P=!0:!0===a.fog&&A.fog!==d?P=!0:void 0!==A.numClippingPlanes&&(A.numClippingPlanes!==_.numPlanes||A.numIntersection!==_.numIntersection)?P=!0:A.vertexAlphas!==v?P=!0:A.vertexTangents!==y?P=!0:A.morphTargets!==b?P=!0:A.morphNormals!==x?P=!0:A.morphColors!==S?P=!0:A.toneMapping!==w?P=!0:!0===r.isWebGL2&&A.morphTargetsCount!==T&&(P=!0):P=!0:P=!0:P=!0:(P=!0,A.__version=a.version);let I=A.currentProgram;!0===P&&(I=eZ(a,t,l));let L=!1,O=!1,N=!1,k=I.getUniforms(),D=A.uniforms;if(i.useProgram(I.program)&&(L=!0,O=!0,N=!0),a.id!==Q&&(Q=a.id,O=!0),L||J!==e){k.setValue(eS,"projectionMatrix",e.projectionMatrix),k.setValue(eS,"viewMatrix",e.matrixWorldInverse);let t=k.map.cameraPosition;void 0!==t&&t.setValue(eS,ey.setFromMatrixPosition(e.matrixWorld)),r.logarithmicDepthBuffer&&k.setValue(eS,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&k.setValue(eS,"isOrthographic",!0===e.isOrthographicCamera),J!==e&&(J=e,O=!0,N=!0)}if(l.isSkinnedMesh){k.setOptional(eS,l,"bindMatrix"),k.setOptional(eS,l,"bindMatrixInverse");let e=l.skeleton;e&&(r.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(eS,"boneTexture",e.boneTexture,o)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}l.isBatchedMesh&&(k.setOptional(eS,l,"batchingTexture"),k.setValue(eS,"batchingTexture",l._matricesTexture,o));let U=n.morphAttributes;if((void 0!==U.position||void 0!==U.normal||void 0!==U.color&&!0===r.isWebGL2)&&M.update(l,n,I),(O||A.receiveShadow!==l.receiveShadow)&&(A.receiveShadow=l.receiveShadow,k.setValue(eS,"receiveShadow",l.receiveShadow)),a.isMeshGouraudMaterial&&null!==a.envMap&&(D.envMap.value=g,D.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),O&&(k.setValue(eS,"toneMappingExposure",q.toneMappingExposure),A.needsLights&&(h=N,D.ambientLightColor.needsUpdate=h,D.lightProbe.needsUpdate=h,D.directionalLights.needsUpdate=h,D.directionalLightShadows.needsUpdate=h,D.pointLights.needsUpdate=h,D.pointLightShadows.needsUpdate=h,D.spotLights.needsUpdate=h,D.spotLightShadows.needsUpdate=h,D.rectAreaLights.needsUpdate=h,D.hemisphereLights.needsUpdate=h),d&&!0===a.fog&&m.refreshFogUniforms(D,d),m.refreshMaterialUniforms(D,a,eo,ea,eg),s$.upload(eS,eY(A),D,o)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(s$.upload(eS,eY(A),D,o),a.uniformsNeedUpdate=!1),a.isSpriteMaterial&&k.setValue(eS,"center",l.center),k.setValue(eS,"modelViewMatrix",l.modelViewMatrix),k.setValue(eS,"normalMatrix",l.normalMatrix),k.setValue(eS,"modelMatrix",l.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){let e=a.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(r.isWebGL2){let n=e[t];R.update(n,I),R.bind(n,I)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return I}(e,t,n,a,l);i.setMaterial(a,g);let y=n.index,b=1;if(!0===a.wireframe){if(void 0===(y=d.getWireframeAttribute(n)))return;b=2}let x=n.drawRange,S=n.attributes.position,w=x.start*b,A=(x.start+x.count)*b;null!==p&&(w=Math.max(w,p.start*b),A=Math.min(A,(p.start+p.count)*b)),null!==y?(w=Math.max(w,0),A=Math.min(A,y.count)):null!=S&&(w=Math.max(w,0),A=Math.min(A,S.count));let P=A-w;if(P<0||P===1/0)return;C.setup(l,a,v,n,y);let I=E;if(null!==y&&(f=h.get(y),(I=T).setIndex(f)),l.isMesh)!0===a.wireframe?(i.setLineWidth(a.wireframeLinewidth*ex()),I.setMode(eS.LINES)):I.setMode(eS.TRIANGLES);else if(l.isLine){let e=a.linewidth;void 0===e&&(e=1),i.setLineWidth(e*ex()),l.isLineSegments?I.setMode(eS.LINES):l.isLineLoop?I.setMode(eS.LINE_LOOP):I.setMode(eS.LINE_STRIP)}else l.isPoints?I.setMode(eS.POINTS):l.isSprite&&I.setMode(eS.TRIANGLES);if(l.isBatchedMesh)I.renderMultiDraw(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount);else if(l.isInstancedMesh)I.renderInstances(w,P,l.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);I.renderInstances(w,P,t)}else I.render(w,P)},this.compile=function(e,t,n=null){null===n&&(n=e),(j=v.get(n)).init(),W.push(j),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(j.pushLight(e),e.castShadow&&j.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(j.pushLight(e),e.castShadow&&j.pushShadow(e))}),j.setupLights(q._useLegacyLights);let r=new Set;return e.traverse(function(e){let t=e.material;if(t){if(Array.isArray(t))for(let i=0;i<t.length;i++){let a=t[i];eP(a,n,e),r.add(a)}else eP(t,n,e),r.add(t)}}),W.pop(),j=null,r},this.compileAsync=function(e,t,r=null){let i=this.compile(e,t,r);return new Promise(t=>{function r(){if(i.forEach(function(e){s.get(e).currentProgram.isReady()&&i.delete(e)}),0===i.size){t(e);return}setTimeout(r,10)}null!==n.get("KHR_parallel_shader_compile")?r():setTimeout(r,10)})};let eL=null;function eN(){eU.stop()}function ek(){eU.start()}let eU=new ax;function eG(e,t,a,s){let l=e.opaque,u=e.transmissive,c=e.transparent;j.setupLightsView(a),!0===ef&&_.setGlobalState(q.clippingPlanes,a),u.length>0&&function(e,t,i,a){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;let s=r.isWebGL2;null===eg&&(eg=new rt(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")?eB:eO,minFilter:eI,samples:s?4:0})),q.getDrawingBufferSize(e_),s?eg.setSize(e_.x,e_.y):eg.setSize(nD(e_.x),nD(e_.y));let l=q.getRenderTarget();q.setRenderTarget(eg),q.getClearColor(en),(er=q.getClearAlpha())<1&&q.setClearColor(16777215,.5),q.clear();let u=q.toneMapping;q.toneMapping=es,eq(e,i,a),o.updateMultisampleRenderTarget(eg),o.updateRenderTargetMipmap(eg);let c=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e],r=n.object,s=n.geometry,o=n.material,l=n.group;if(o.side===x&&r.layers.test(a.layers)){let e=o.side;o.side=b,o.needsUpdate=!0,eX(r,i,a,s,o,l),o.side=e,o.needsUpdate=!0,c=!0}}!0===c&&(o.updateMultisampleRenderTarget(eg),o.updateRenderTargetMipmap(eg)),q.setRenderTarget(l),q.setClearColor(en,er),q.toneMapping=u}(l,u,t,a),s&&i.viewport($.copy(s)),l.length>0&&eq(l,t,a),u.length>0&&eq(u,t,a),c.length>0&&eq(c,t,a),i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),i.setPolygonOffset(!1)}function eq(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],s=a.object,o=a.geometry,l=null===r?a.material:r,u=a.group;s.layers.test(n.layers)&&eX(s,t,n,o,l,u)}}function eX(e,t,n,r,i,a){e.onBeforeRender(q,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(q,t,n,r,e,a),!0===i.transparent&&i.side===x&&!1===i.forceSinglePass?(i.side=b,i.needsUpdate=!0,q.renderBufferDirect(n,t,r,i,e,a),i.side=y,i.needsUpdate=!0,q.renderBufferDirect(n,t,r,i,e,a),i.side=x):q.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(q,t,n,r,i,a)}function eZ(e,t,n){!0!==t.isScene&&(t=eb);let r=s.get(e),i=j.state.lights,a=j.state.shadowsArray,o=i.state.version,l=f.getParameters(e,i.state,a,t,n),h=f.getProgramCacheKey(l),d=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?c:u).get(e.envMap||r.environment),void 0===d&&(e.addEventListener("dispose",eR),d=new Map,r.programs=d);let p=d.get(h);if(void 0!==p){if(r.currentProgram===p&&r.lightsStateVersion===o)return eK(e,l),p}else l.uniforms=f.getUniforms(e),e.onBuild(n,l,q),e.onBeforeCompile(l,q),p=f.acquireProgram(l,h),d.set(h,p),r.uniforms=l.uniforms;let m=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(m.clippingPlanes=_.uniform),eK(e,l),r.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=o,r.needsLights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.directionalLightShadows.value=i.state.directionalShadow,m.spotLights.value=i.state.spot,m.spotLightShadows.value=i.state.spotShadow,m.rectAreaLights.value=i.state.rectArea,m.ltc_1.value=i.state.rectAreaLTC1,m.ltc_2.value=i.state.rectAreaLTC2,m.pointLights.value=i.state.point,m.pointLightShadows.value=i.state.pointShadow,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotLightMatrix.value=i.state.spotLightMatrix,m.spotLightMap.value=i.state.spotLightMap,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=p,r.uniformsList=null,p}function eY(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=s$.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function eK(e,t){let n=s.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}eU.setAnimationLoop(function(e){eL&&eL(e)}),"undefined"!=typeof self&&eU.setContext(self),this.setAnimationLoop=function(e){eL=e,eE.setAnimationLoop(e),null===e?eU.stop():eU.start()},eE.addEventListener("sessionstart",eN),eE.addEventListener("sessionend",ek),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===X)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eE.enabled&&!0===eE.isPresenting&&(!0===eE.cameraAutoUpdate&&eE.updateCamera(t),t=eE.getCamera()),!0===e.isScene&&e.onBeforeRender(q,e,t,K),(j=v.get(e,W.length)).init(),W.push(j),ev.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ep.setFromProjectionMatrix(ev),em=this.localClippingEnabled,ef=_.init(this.clippingPlanes,em),(H=g.get(e,G.length)).init(),G.push(H),function e(t,n,r,i){if(!1===t.visible)return;if(t.layers.test(n.layers)){if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)j.pushLight(t),t.castShadow&&j.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ep.intersectsSprite(t)){i&&ey.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ev);let e=p.update(t),n=t.material;n.visible&&H.push(t,e,n,r,ey.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||ep.intersectsObject(t))){let e=p.update(t),n=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),ey.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),ey.copy(e.boundingSphere.center)),ey.applyMatrix4(t.matrixWorld).applyMatrix4(ev)),Array.isArray(n)){let i=e.groups;for(let a=0,s=i.length;a<s;a++){let s=i[a],o=n[s.materialIndex];o&&o.visible&&H.push(t,e,o,r,ey.z,s)}}else n.visible&&H.push(t,e,n,r,ey.z,null)}}let a=t.children;for(let t=0,s=a.length;t<s;t++)e(a[t],n,r,i)}(e,t,0,q.sortObjects),H.finish(),!0===q.sortObjects&&H.sort(el,eu),this.info.render.frame++,!0===ef&&_.beginShadows();let n=j.state.shadowsArray;if(S.render(n,e,t),!0===ef&&_.endShadows(),!0===this.info.autoReset&&this.info.reset(),w.render(H,e),j.setupLights(q._useLegacyLights),t.isArrayCamera){let n=t.cameras;for(let t=0,r=n.length;t<r;t++){let r=n[t];eG(H,e,r,r.viewport)}}else eG(H,e,t);null!==K&&(o.updateMultisampleRenderTarget(K),o.updateRenderTargetMipmap(K)),!0===e.isScene&&e.onAfterRender(q,e,t),C.resetDefaultState(),Q=-1,J=null,W.pop(),j=W.length>0?W[W.length-1]:null,G.pop(),H=G.length>0?G[G.length-1]:null},this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return Y},this.getRenderTarget=function(){return K},this.setRenderTargetTextures=function(e,t,r){s.get(e.texture).__webglTexture=t,s.get(e.depthTexture).__webglTexture=r;let i=s.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let n=s.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){K=e,Z=t,Y=n;let a=!0,l=null,u=!1,c=!1;if(e){let h=s.get(e);void 0!==h.__useDefaultFramebuffer?(i.bindFramebuffer(eS.FRAMEBUFFER,null),a=!1):void 0===h.__webglFramebuffer?o.setupRenderTarget(e):h.__hasExternalTextures&&o.rebindTextures(e,s.get(e.texture).__webglTexture,s.get(e.depthTexture).__webglTexture);let d=e.texture;(d.isData3DTexture||d.isDataArrayTexture||d.isCompressedArrayTexture)&&(c=!0);let p=s.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(l=Array.isArray(p[t])?p[t][n]:p[t],u=!0):l=r.isWebGL2&&e.samples>0&&!1===o.useMultisampledRTT(e)?s.get(e).__webglMultisampledFramebuffer:Array.isArray(p)?p[n]:p,$.copy(e.viewport),ee.copy(e.scissor),et=e.scissorTest}else $.copy(ec).multiplyScalar(eo).floor(),ee.copy(eh).multiplyScalar(eo).floor(),et=ed;if(i.bindFramebuffer(eS.FRAMEBUFFER,l)&&r.drawBuffers&&a&&i.drawBuffers(e,l),i.viewport($),i.scissor(ee),i.setScissorTest(et),u){let r=s.get(e.texture);eS.framebufferTexture2D(eS.FRAMEBUFFER,eS.COLOR_ATTACHMENT0,eS.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(c){let r=s.get(e.texture);eS.framebufferTextureLayer(eS.FRAMEBUFFER,eS.COLOR_ATTACHMENT0,r.__webglTexture,n||0,t||0)}Q=-1},this.readRenderTargetPixels=function(e,t,a,o,l,u,c){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let h=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){i.bindFramebuffer(eS.FRAMEBUFFER,h);try{let i=e.texture,s=i.format,c=i.type;if(s!==eW&&A.convert(s)!==eS.getParameter(eS.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let h=c===eB&&(n.has("EXT_color_buffer_half_float")||r.isWebGL2&&n.has("EXT_color_buffer_float"));if(c!==eO&&A.convert(c)!==eS.getParameter(eS.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===ez&&(r.isWebGL2||n.has("OES_texture_float")||n.has("WEBGL_color_buffer_float")))&&!h){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-o&&a>=0&&a<=e.height-l&&eS.readPixels(t,a,o,l,A.convert(s),A.convert(c),u)}finally{let e=null!==K?s.get(K).__webglFramebuffer:null;i.bindFramebuffer(eS.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){let r=Math.pow(2,-n),a=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);o.setTexture2D(t,0),eS.copyTexSubImage2D(eS.TEXTURE_2D,n,0,0,e.x,e.y,a,s),i.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){let a=t.image.width,s=t.image.height,l=A.convert(n.format),u=A.convert(n.type);o.setTexture2D(n,0),eS.pixelStorei(eS.UNPACK_FLIP_Y_WEBGL,n.flipY),eS.pixelStorei(eS.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),eS.pixelStorei(eS.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?eS.texSubImage2D(eS.TEXTURE_2D,r,e.x,e.y,a,s,l,u,t.image.data):t.isCompressedTexture?eS.compressedTexSubImage2D(eS.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,l,t.mipmaps[0].data):eS.texSubImage2D(eS.TEXTURE_2D,r,e.x,e.y,l,u,t.image),0===r&&n.generateMipmaps&&eS.generateMipmap(eS.TEXTURE_2D),i.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,a=0){let s;if(q.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let l=e.max.x-e.min.x+1,u=e.max.y-e.min.y+1,c=e.max.z-e.min.z+1,h=A.convert(r.format),d=A.convert(r.type);if(r.isData3DTexture)o.setTexture3D(r,0),s=eS.TEXTURE_3D;else if(r.isDataArrayTexture)o.setTexture2DArray(r,0),s=eS.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}eS.pixelStorei(eS.UNPACK_FLIP_Y_WEBGL,r.flipY),eS.pixelStorei(eS.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),eS.pixelStorei(eS.UNPACK_ALIGNMENT,r.unpackAlignment);let p=eS.getParameter(eS.UNPACK_ROW_LENGTH),f=eS.getParameter(eS.UNPACK_IMAGE_HEIGHT),m=eS.getParameter(eS.UNPACK_SKIP_PIXELS),g=eS.getParameter(eS.UNPACK_SKIP_ROWS),v=eS.getParameter(eS.UNPACK_SKIP_IMAGES),_=n.isCompressedTexture?n.mipmaps[0]:n.image;eS.pixelStorei(eS.UNPACK_ROW_LENGTH,_.width),eS.pixelStorei(eS.UNPACK_IMAGE_HEIGHT,_.height),eS.pixelStorei(eS.UNPACK_SKIP_PIXELS,e.min.x),eS.pixelStorei(eS.UNPACK_SKIP_ROWS,e.min.y),eS.pixelStorei(eS.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?eS.texSubImage3D(s,a,t.x,t.y,t.z,l,u,c,h,d,_.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),eS.compressedTexSubImage3D(s,a,t.x,t.y,t.z,l,u,c,h,_.data)):eS.texSubImage3D(s,a,t.x,t.y,t.z,l,u,c,h,d,_),eS.pixelStorei(eS.UNPACK_ROW_LENGTH,p),eS.pixelStorei(eS.UNPACK_IMAGE_HEIGHT,f),eS.pixelStorei(eS.UNPACK_SKIP_PIXELS,m),eS.pixelStorei(eS.UNPACK_SKIP_ROWS,g),eS.pixelStorei(eS.UNPACK_SKIP_IMAGES,v),0===a&&r.generateMipmaps&&eS.generateMipmap(s),i.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?o.setTextureCube(e,0):e.isData3DTexture?o.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?o.setTexture2DArray(e,0):o.setTexture2D(e,0),i.unbindTexture()},this.resetState=function(){Z=0,Y=0,K=null,i.reset(),C.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nM}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===tq?"display-p3":"srgb",t.unpackColorSpace=n0.workingColorSpace===tX?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===tG?tF:tU}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===tF?tG:tW}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class oN extends oO{}oN.prototype.isWebGL1Renderer=!0;class ok{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new i_(e),this.density=t}clone(){return new ok(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class oD{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new i_(e),this.near=t,this.far=n}clone(){return new oD(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class oU extends r9{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class oF{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=nd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=nI()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let oz=new rl;class oB{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)oz.fromBufferAttribute(this,t),oz.applyMatrix4(e),this.setXYZ(t,oz.x,oz.y,oz.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)oz.fromBufferAttribute(this,t),oz.applyNormalMatrix(e),this.setXYZ(t,oz.x,oz.y,oz.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)oz.fromBufferAttribute(this,t),oz.transformDirection(e),this.setXYZ(t,oz.x,oz.y,oz.z);return this}setX(e,t){return this.normalized&&(t=nF(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nF(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nF(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nF(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=nU(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=nU(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=nU(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=nU(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nF(t,this.array),n=nF(n,this.array),r=nF(r,this.array),i=nF(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new oB(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new iR(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}class oV extends ix{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new i_(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let oH=new rl,oj=new rl,oG=new rl,oW=new nB,oq=new nB,oX=new rF,oZ=new rl,oY=new rl,oK=new rl,oQ=new nB,oJ=new nB,o$=new nB;class o0 extends r9{constructor(e=new oV){if(super(),this.isSprite=!0,this.type="Sprite",void 0===i){i=new iX;let e=new oF(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new oB(e,3,0,!1)),i.setAttribute("uv",new oB(e,2,3,!1))}this.geometry=i,this.material=e,this.center=new nB(.5,.5)}raycast(e,t){let n,r;null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),oj.setFromMatrixScale(this.matrixWorld),oX.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),oG.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&oj.multiplyScalar(-oG.z);let i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));let a=this.center;o1(oZ.set(-.5,-.5,0),oG,a,oj,n,r),o1(oY.set(.5,-.5,0),oG,a,oj,n,r),o1(oK.set(.5,.5,0),oG,a,oj,n,r),oQ.set(0,0),oJ.set(1,0),o$.set(1,1);let s=e.ray.intersectTriangle(oZ,oY,oK,!1,oH);if(null===s&&(o1(oY.set(-.5,.5,0),oG,a,oj,n,r),oJ.set(0,1),null===(s=e.ray.intersectTriangle(oZ,oK,oY,!1,oH))))return;let o=e.ray.origin.distanceTo(oH);o<e.near||o>e.far||t.push({distance:o,point:oH.clone(),uv:id.getInterpolation(oH,oZ,oY,oK,oQ,oJ,o$,new nB),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function o1(e,t,n,r,i,a){oW.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(oq.x=a*oW.x-i*oW.y,oq.y=i*oW.x+a*oW.y):oq.copy(oW),e.copy(t),e.x+=oq.x,e.y+=oq.y,e.applyMatrix4(oX)}let o2=new rl,o3=new rl;class o4 extends r9{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let e=0,n=t.length;e<n;e++){let n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){let r;t=Math.abs(t);let i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){o2.setFromMatrixPosition(this.matrixWorld);let n=e.ray.origin.distanceTo(o2);this.getObjectForDistance(n).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){let n,r;o2.setFromMatrixPosition(e.matrixWorld),o3.setFromMatrixPosition(this.matrixWorld);let i=o2.distanceTo(o3)/e.zoom;for(n=1,t[0].object.visible=!0,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),i>=e)t[n-1].object.visible=!1,t[n].object.visible=!0;else break}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){let t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let e=0,r=n.length;e<r;e++){let r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}let o5=new rl,o7=new n9,o8=new n9,o6=new rl,o9=new rF,le=new rl,lt=new rR,ln=new rF,lr=new rU;class li extends at{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ed,this.bindMatrix=new rF,this.bindMatrixInverse=new rF,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;null===this.boundingBox&&(this.boundingBox=new rh),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,le),this.boundingBox.expandByPoint(le)}computeBoundingSphere(){let e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new rR),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,le),this.boundingSphere.expandByPoint(le)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,r=this.matrixWorld;if(void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),lt.copy(this.boundingSphere),lt.applyMatrix4(r),!1!==e.ray.intersectsSphere(lt))){if(ln.copy(r).invert(),lr.copy(e.ray).applyMatrix4(ln),null!==this.boundingBox&&!1===lr.intersectsBox(this.boundingBox))return;this._computeIntersections(e,t,lr)}}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new n9,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ed?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ep?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;o7.fromBufferAttribute(r.attributes.skinIndex,e),o8.fromBufferAttribute(r.attributes.skinWeight,e),o5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let r=o8.getComponent(e);if(0!==r){let i=o7.getComponent(e);o9.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(o6.copy(o5).applyMatrix4(o9),r)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class la extends r9{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ls extends n6{constructor(e=null,t=1,n=1,r,i,a,s,o,l=ew,u=ew,c,h){super(null,a,s,o,l,u,r,i,c,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let lo=new rF,ll=new rF;class lu{constructor(e=[],t=[]){this.uuid=nI(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new rF)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new rF;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){let i=e[r]?e[r].matrixWorld:ll;lo.multiplyMatrices(i,t[r]),lo.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new lu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Math.max(e=4*Math.ceil(e/4),4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let n=new ls(t,e,e,eW,ez);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=e.bones[n],i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new la),this.bones.push(i),this.boneInverses.push(new rF().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){let i=t[r];e.bones.push(i.uuid);let a=n[r];e.boneInverses.push(a.toArray())}return e}}class lc extends iR{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let lh=new rF,ld=new rF,lp=[],lf=new rh,lm=new rF,lg=new at,lv=new rR;class l_ extends at{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lc(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,lm)}computeBoundingBox(){let e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new rh),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lh),lf.copy(e.boundingBox).applyMatrix4(lh),this.boundingBox.union(lf)}computeBoundingSphere(){let e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new rR),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lh),lv.copy(e.boundingSphere).applyMatrix4(lh),this.boundingSphere.union(lv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){let n=this.matrixWorld,r=this.count;if(lg.geometry=this.geometry,lg.material=this.material,void 0!==lg.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),lv.copy(this.boundingSphere),lv.applyMatrix4(n),!1!==e.ray.intersectsSphere(lv)))for(let i=0;i<r;i++){this.getMatrixAt(i,lh),ld.multiplyMatrices(n,lh),lg.matrixWorld=ld,lg.raycast(e,lp);for(let e=0,n=lp.length;e<n;e++){let n=lp[e];n.instanceId=i,n.object=this,t.push(n)}lp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new lc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function ly(e,t){return e.z-t.z}function lb(e,t){return t.z-e.z}class lx{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){let n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});let i=n[this.index];r.push(i),this.index++,i.start=e.start,i.count=e.count,i.z=t}reset(){this.list.length=0,this.index=0}}let lS="batchId",lw=new rF,lM=new rF,lE=new rF,lT=new rF,lA=new ab,lC=new rh,lR=new rR,lP=new rl,lI=new lx,lL=new at,lO=[];class lN extends at{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,n=2*t,r){super(new iX,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxGeometryCount);e=Math.max(e=4*Math.ceil(e/4),4);let t=new ls(new Float32Array(e*e*4),e,e,eW,ez);this._matricesTexture=t}_initializeGeometry(e){let t=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(let r in e.attributes){let i=e.getAttribute(r),{array:a,itemSize:s,normalized:o}=i,l=new a.constructor(n*s),u=new i.constructor(l,s,o);u.setUsage(i.usage),t.setAttribute(r,u)}if(null!==e.getIndex()){let e=n>65536?new Uint32Array(i):new Uint16Array(i);t.setIndex(new iR(e,1))}let a=r>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(lS,new iR(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(lS))throw Error(`BatchedMesh: Geometry cannot use attribute "${lS}"`);let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw Error('BatchedMesh: All geometries must consistently have "index".');for(let n in t.attributes){if(n===lS)continue;if(!e.hasAttribute(n))throw Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);let r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new rh);let e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,lw),this.getBoundingBoxAt(r,lC).applyMatrix4(lw),t.union(lC))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rR);let e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,lw),this.getBoundingSphereAt(r,lR).applyMatrix4(lw),t.union(lR))}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");let r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1},i=null,a=this._reservedRanges,s=this._drawRanges,o=this._bounds;0!==this._geometryCount&&(i=a[a.length-1]),-1===t?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,null===i?r.vertexStart=0:r.vertexStart=i.vertexStart+i.vertexCount;let l=e.getIndex(),u=null!==l;if(u&&(-1===n?r.indexCount=l.count:r.indexCount=n,null===i?r.indexStart=0:r.indexStart=i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c=this._visibility,h=this._active,d=this._matricesTexture,p=this._matricesTexture.image.data;c.push(!0),h.push(!0);let f=this._geometryCount;this._geometryCount++,lE.toArray(p,16*f),d.needsUpdate=!0,a.push(r),s.push({start:u?r.indexStart:r.vertexStart,count:-1}),o.push({boxInitialized:!1,box:new rh,sphereInitialized:!1,sphere:new rR});let m=this.geometry.getAttribute(lS);for(let e=0;e<r.vertexCount;e++)m.setX(r.vertexStart+e,f);return m.needsUpdate=!0,this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),s=this._reservedRanges[e];if(r&&a.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw Error("BatchedMesh: Reserved space not large enough for provided geometry.");let o=s.vertexStart,l=s.vertexCount;for(let e in n.attributes){if(e===lS)continue;let r=t.getAttribute(e),i=n.getAttribute(e);!function(e,t,n=0){let r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){let i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}(r,i,o);let a=r.itemSize;for(let e=r.count;e<l;e++){let t=o+e;for(let e=0;e<a;e++)i.setComponent(t,e,0)}i.needsUpdate=!0}if(r){let e=s.indexStart;for(let t=0;t<a.count;t++)i.setX(e+t,o+a.getX(t));for(let t=a.count,n=s.indexCount;t<n;t++)i.setX(e+t,o);i.needsUpdate=!0}let u=this._bounds[e];null!==t.boundingBox?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,null!==t.boundingSphere?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;let c=this._drawRanges[e],h=t.getAttribute("position");return c.count=r?a.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._active;return e>=t.length||!1===t[e]||(t[e]=!1,this._visibilityChanged=!0),this}getBoundingBoxAt(e,t){if(!1===this._active[e])return this;let n=this._bounds[e],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();let t=i.index,a=i.attributes.position,s=this._drawRanges[e];for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),r.expandByPoint(lP.fromBufferAttribute(a,n))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(!1===this._active[e])return this;let n=this._bounds[e],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(e,lC),lC.getCenter(r.center);let t=i.index,a=i.attributes.position,s=this._drawRanges[e],o=0;for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),lP.fromBufferAttribute(a,n),o=Math.max(o,r.center.distanceToSquared(lP))}r.radius=Math.sqrt(o),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){let n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(i,16*e),r.needsUpdate=!0),this}getMatrixAt(e,t){let n=this._active,r=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(r,16*e)}setVisibleAt(e,t){let n=this._visibility,r=this._active;return e>=this._geometryCount||!1===r[e]||n[e]===t||(n[e]=t,this._visibilityChanged=!0),this}getVisibleAt(e){let t=this._visibility,n=this._active;return!(e>=this._geometryCount)&&!1!==n[e]&&t[e]}raycast(e,t){let n=this._visibility,r=this._active,i=this._drawRanges,a=this._geometryCount,s=this.matrixWorld,o=this.geometry;lL.material=this.material,lL.geometry.index=o.index,lL.geometry.attributes=o.attributes,null===lL.geometry.boundingBox&&(lL.geometry.boundingBox=new rh),null===lL.geometry.boundingSphere&&(lL.geometry.boundingSphere=new rR);for(let o=0;o<a;o++){if(!n[o]||!r[o])continue;let a=i[o];lL.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(o,lL.matrixWorld).premultiply(s),this.getBoundingBoxAt(o,lL.geometry.boundingBox),this.getBoundingSphereAt(o,lL.geometry.boundingSphere),lL.raycast(e,lO);for(let e=0,n=lO.length;e<n;e++){let n=lO[e];n.object=this,n.batchId=o,t.push(n)}lO.length=0}lL.material=null,lL.geometry.index=null,lL.geometry.attributes={},lL.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(e=>({...e})),this._reservedRanges=e._reservedRanges.map(e=>({...e})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let a=r.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,o=this._visibility,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._drawRanges,h=this.perObjectFrustumCulled;h&&(lT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),lA.setFromProjectionMatrix(lT,e.isWebGPURenderer?nE:nM));let d=0;if(this.sortObjects){lM.copy(this.matrixWorld).invert(),lP.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lM);for(let e=0,t=o.length;e<t;e++)if(o[e]){this.getMatrixAt(e,lw),this.getBoundingSphereAt(e,lR).applyMatrix4(lw);let t=!1;if(h&&(t=!lA.intersectsSphere(lR)),!t){let t=lP.distanceTo(lR.center);lI.push(c[e],t)}}let e=lI.list,t=this.customSort;null===t?e.sort(i.transparent?lb:ly):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){let n=e[t];l[d]=n.start*s,u[d]=n.count,d++}lI.reset()}else for(let e=0,t=o.length;e<t;e++)if(o[e]){let t=!1;if(h&&(this.getMatrixAt(e,lw),this.getBoundingSphereAt(e,lR).applyMatrix4(lw),t=!lA.intersectsSphere(lR)),!t){let t=c[e];l[d]=t.start*s,u[d]=t.count,d++}}this._multiDrawCount=d,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class lk extends ix{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new i_(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let lD=new rl,lU=new rl,lF=new rF,lz=new rU,lB=new rR;class lV extends r9{constructor(e=new iX,t=new lk){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)lD.fromBufferAttribute(t,e-1),lU.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=lD.distanceTo(lU);e.setAttribute("lineDistance",new iF(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lB.copy(n.boundingSphere),lB.applyMatrix4(r),lB.radius+=i,!1===e.ray.intersectsSphere(lB))return;lF.copy(r).invert(),lz.copy(e.ray).applyMatrix4(lF);let s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new rl,u=new rl,c=new rl,h=new rl,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=d){let n=p.getX(i),r=p.getX(i+1);if(l.fromBufferAttribute(f,n),u.fromBufferAttribute(f,r),lz.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);let a=e.ray.origin.distanceTo(h);a<e.near||a>e.far||t.push({distance:a,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=d){if(l.fromBufferAttribute(f,i),u.fromBufferAttribute(f,i+1),lz.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);let n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}let lH=new rl,lj=new rl;class lG extends lV{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)lH.fromBufferAttribute(t,e),lj.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+lH.distanceTo(lj);e.setAttribute("lineDistance",new iF(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lW extends lV{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class lq extends ix{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new i_(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lX=new rF,lZ=new rU,lY=new rR,lK=new rl;class lQ extends r9{constructor(e=new iX,t=new lq){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lY.copy(n.boundingSphere),lY.applyMatrix4(r),lY.radius+=i,!1===e.ray.intersectsSphere(lY))return;lX.copy(r).invert(),lZ.copy(e.ray).applyMatrix4(lX);let s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,u=n.attributes.position;if(null!==l){let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);for(let a=n;a<i;a++){let n=l.getX(a);lK.fromBufferAttribute(u,n),lJ(lK,n,o,r,e,t,this)}}else{let n=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);for(let a=n;a<i;a++)lK.fromBufferAttribute(u,a),lJ(lK,a,o,r,e,t,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function lJ(e,t,n,r,i,a,s){let o=lZ.distanceSqToPoint(e);if(o<n){let n=new rl;lZ.closestPointToPoint(e,n),n.applyMatrix4(r);let l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class l$ extends n6{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:eC,this.magFilter=void 0!==i?i:eC,this.generateMipmaps=!1;let u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class l0 extends n6{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ew,this.minFilter=ew,this.generateMipmaps=!1,this.needsUpdate=!0}}class l1 extends n6{constructor(e,t,n,r,i,a,s,o,l,u,c,h){super(null,a,s,o,l,u,r,i,c,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class l2 extends l1{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ex}}class l3 extends l1{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,em),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class l4 extends n6{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class l5{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)t.push(i+=(n=this.getPoint(a/e)).distanceTo(r)),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n;let r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];let s=0,o=a-1,l;for(;s<=o;)if((l=r[i=Math.floor(s+(o-s)/2)]-n)<0)s=i+1;else if(l>0)o=i-1;else{o=i;break}if(r[i=o]===n)return i/(a-1);let u=r[i],c=r[i+1];return(i+(n-u)/(c-u))/(a-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),s=t||(i.isVector2?new nB:new rl);return s.copy(a).sub(i).normalize(),s}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new rl,r=[],i=[],a=[],s=new rl,o=new rF;for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new rl)}i[0]=new rl,a[0]=new rl;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(nL(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(nL(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class l7 extends l5{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let n=t||new nB,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);let s=this.aStartAngle+e*i,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class l8 extends l7{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function l6(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,u=(n-t)/s-(r-t)/(s+o)+(r-n)/o;i(t,n,l*=s,u*=s)},calc:function(i){let a=i*i;return e+t*i+n*a+a*i*r}}}let l9=new rl,ue=new l6,ut=new l6,un=new l6;class ur extends l5{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new rl){let n,r;let i=this.points,a=i.length,s=(a-(this.closed?0:1))*e,o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:0===l&&o===a-1&&(o=a-2,l=1),this.closed||o>0?n=i[(o-1)%a]:(l9.subVectors(i[0],i[1]).add(i[0]),n=l9);let u=i[o%a],c=i[(o+1)%a];if(this.closed||o+2<a?r=i[(o+2)%a]:(l9.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=l9),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),ue.initNonuniformCatmullRom(n.x,u.x,c.x,r.x,t,i,a),ut.initNonuniformCatmullRom(n.y,u.y,c.y,r.y,t,i,a),un.initNonuniformCatmullRom(n.z,u.z,c.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(ue.initCatmullRom(n.x,u.x,c.x,r.x,this.tension),ut.initCatmullRom(n.y,u.y,c.y,r.y,this.tension),un.initCatmullRom(n.z,u.z,c.z,r.z,this.tension));return t.set(ue.calc(l),ut.calc(l),un.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new rl().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ui(e,t,n,r,i){let a=(r-t)*.5,s=(i-n)*.5,o=e*e;return e*o*(2*n-2*r+a+s)+(-3*n+3*r-2*a-s)*o+a*e+n}function ua(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-e)*e*n+e*e*r}function us(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-e)*e*e*r+e*e*e*i}class uo extends l5{constructor(e=new nB,t=new nB,n=new nB,r=new nB){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new nB){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(us(e,n.x,r.x,i.x,a.x),us(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ul extends l5{constructor(e=new rl,t=new rl,n=new rl,r=new rl){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new rl){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(us(e,n.x,r.x,i.x,a.x),us(e,n.y,r.y,i.y,a.y),us(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uu extends l5{constructor(e=new nB,t=new nB){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nB){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nB){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uc extends l5{constructor(e=new rl,t=new rl){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new rl){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new rl){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uh extends l5{constructor(e=new nB,t=new nB,n=new nB){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new nB){let n=this.v0,r=this.v1,i=this.v2;return t.set(ua(e,n.x,r.x,i.x),ua(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ud extends l5{constructor(e=new rl,t=new rl,n=new rl){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new rl){let n=this.v0,r=this.v1,i=this.v2;return t.set(ua(e,n.x,r.x,i.x),ua(e,n.y,r.y,i.y),ua(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class up extends l5{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nB){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],o=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(ui(a,s.x,o.x,l.x,u.x),ui(a,s.y,o.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new nB().fromArray(n))}return this}}var uf=Object.freeze({__proto__:null,ArcCurve:l8,CatmullRomCurve3:ur,CubicBezierCurve:uo,CubicBezierCurve3:ul,EllipseCurve:l7,LineCurve:uu,LineCurve3:uc,QuadraticBezierCurve:uh,QuadraticBezierCurve3:ud,SplineCurve:up});class um extends l5{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new uf[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){let r=o[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new uf[n.type]().fromJSON(n))}return this}}class ug extends um{constructor(e){super(),this.type="Path",this.currentPoint=new nB,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new uu(this.currentPoint.clone(),new nB(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new uh(this.currentPoint.clone(),new nB(e,t),new nB(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let s=new uo(this.currentPoint.clone(),new nB(e,t),new nB(n,r),new nB(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){let t=new up([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){let l=new l7(e,t,n,r,i,a,s,o);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class uv extends iX{constructor(e=[new nB(0,-.5),new nB(.5,0),new nB(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=nL(r,0,2*Math.PI);let i=[],a=[],s=[],o=[],l=[],u=1/t,c=new rl,h=new nB,d=new rl,p=new rl,f=new rl,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let i=0;i<=t;i++){let d=n+i*u*r,p=Math.sin(d),f=Math.cos(d);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*p,c.y=e[n].y,c.z=e[n].x*f,a.push(c.x,c.y,c.z),h.x=i/t,h.y=n/(e.length-1),s.push(h.x,h.y);let r=o[3*n+0]*p,u=o[3*n+1],d=o[3*n+0]*f;l.push(r,u,d)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,s=r+e.length+1,o=r+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new iF(a,3)),this.setAttribute("uv",new iF(s,2)),this.setAttribute("normal",new iF(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uv(e.points,e.segments,e.phiStart,e.phiLength)}}class u_ extends uv{constructor(e=1,t=1,n=4,r=8){let i=new ug;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new u_(e.radius,e.length,e.capSegments,e.radialSegments)}}class uy extends iX{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let i=[],a=[],s=[],o=[],l=new rl,u=new nB;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){let h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,o.push(u.x,u.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new iF(a,3)),this.setAttribute("normal",new iF(s,3)),this.setAttribute("uv",new iF(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ub extends iX{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};let l=this;r=Math.floor(r),i=Math.floor(i);let u=[],c=[],h=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){let i=p,a=new nB,f=new rl,v=0,_=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),p++;let b=p;for(let e=0;e<=r;e++){let t=e/r*o+s,n=Math.cos(t),i=Math.sin(t);f.x=_*i,f.y=m*y,f.z=_*n,c.push(f.x,f.y,f.z),h.push(0,y,0),a.x=.5*n+.5,a.y=.5*i*y+.5,d.push(a.x,a.y),p++}for(let e=0;e<r;e++){let t=i+e,r=b+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let a=new rl,v=new rl,_=0,y=(t-e)/n;for(let l=0;l<=i;l++){let u=[],g=l/i,_=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*o+s,l=Math.sin(i),f=Math.cos(i);v.x=_*l,v.y=-g*n+m,v.z=_*f,c.push(v.x,v.y,v.z),a.set(l,y,f).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),u.push(p++)}f.push(u)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){let n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],a=f[t][e+1];u.push(n,r,a),u.push(r,i,a),_+=6}l.addGroup(g,_,0),g+=_})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new iF(c,3)),this.setAttribute("normal",new iF(h,3)),this.setAttribute("uv",new iF(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ub(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ux extends ub{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,s=2*Math.PI){super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new ux(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uS extends iX{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],a=[];function s(e){i.push(e.x,e.y,e.z)}function o(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}(function(e){let n=new rl,r=new rl,i=new rl;for(let a=0;a<t.length;a+=3)o(t[a+0],n),o(t[a+1],r),o(t[a+2],i),function(e,t,n,r){let i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];let s=e.clone().lerp(n,r/i),o=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)0===e&&r===i?a[r][e]=s:a[r][e]=s.clone().lerp(o,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}(n,r,i,e)})(r),function(e){let t=new rl;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new rl;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;a.push(n,1-r)}(function(){let e=new rl,t=new rl,n=new rl,r=new rl,s=new nB,o=new nB,c=new nB;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),c.set(a[d+4],a[d+5]),r.copy(e).add(t).add(n).divideScalar(3);let p=u(r);l(s,d+0,e,p),l(o,d+2,t,p),l(c,d+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new iF(i,3)),this.setAttribute("normal",new iF(i.slice(),3)),this.setAttribute("uv",new iF(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uS(e.vertices,e.indices,e.radius,e.details)}}class uw extends uS{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uw(e.radius,e.detail)}}let uM=new rl,uE=new rl,uT=new rl,uA=new id;class uC extends iX{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){let n=Math.cos(nR*t),r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,s=[0,0,0],o=["a","b","c"],l=[,,,],u={},c=[];for(let e=0;e<a;e+=3){r?(s[0]=r.getX(e),s[1]=r.getX(e+1),s[2]=r.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);let{a:t,b:a,c:h}=uA;if(t.fromBufferAttribute(i,s[0]),a.fromBufferAttribute(i,s[1]),h.fromBufferAttribute(i,s[2]),uA.getNormal(uT),l[0]=`${Math.round(1e4*t.x)},${Math.round(1e4*t.y)},${Math.round(1e4*t.z)}`,l[1]=`${Math.round(1e4*a.x)},${Math.round(1e4*a.y)},${Math.round(1e4*a.z)}`,l[2]=`${Math.round(1e4*h.x)},${Math.round(1e4*h.y)},${Math.round(1e4*h.z)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let e=0;e<3;e++){let t=(e+1)%3,r=l[e],i=l[t],a=uA[o[e]],h=uA[o[t]],d=`${r}_${i}`,p=`${i}_${r}`;p in u&&u[p]?(uT.dot(u[p].normal)<=n&&(c.push(a.x,a.y,a.z),c.push(h.x,h.y,h.z)),u[p]=null):d in u||(u[d]={index0:s[e],index1:s[t],normal:uT.clone()})}}for(let e in u)if(u[e]){let{index0:t,index1:n}=u[e];uM.fromBufferAttribute(i,t),uE.fromBufferAttribute(i,n),c.push(uM.x,uM.y,uM.z),c.push(uE.x,uE.y,uE.z)}this.setAttribute("position",new iF(c,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class uR extends ug{constructor(e){super(e),this.uuid=nI(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new ug().fromJSON(n))}return this}}let uP={triangulate:function(e,t,n=2){let r,i,a,s,o,l,u;let c=t&&t.length,h=c?t[0]*n:e.length,d=uI(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,n,r){let i,a,s,o,l;let u=[];for(i=0,a=t.length;i<a;i++)s=t[i]*r,o=i<a-1?t[i+1]*r:e.length,(l=uI(e,s,o,r,!1))===l.next&&(l.steiner=!0),u.push(function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(l));for(u.sort(uO),i=0;i<u.length;i++)n=function(e,t){let n=function(e,t){let n=t,r=-1/0,i,a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let o=i,l=i.x,u=i.y,c=1/0,h;n=i;do{var d,p;a>=n.x&&n.x>=l&&a!==n.x&&uk(s<u?a:r,s,l,u,s<u?r:a,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(a-n.x),uV(n,e)&&(h<c||h===c&&(n.x>i.x||n.x===i.x&&(d=i,p=n,0>uD(d.prev,d,p.prev)&&0>uD(p.next,d,d.next))))&&(i=n,c=h)),n=n.next}while(n!==o);return i}(e,t);if(!n)return t;let r=uH(n,e);return uL(r,r.next),uL(n,n.next)}(u[i],n);return n}(e,t,d,n)),e.length>80*n){r=a=e[0],i=s=e[1];for(let t=n;t<h;t+=n)o=e[t],l=e[t+1],o<r&&(r=o),l<i&&(i=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-r,s-i))?32767/u:0}return function e(t,n,r,i,a,s,o){if(!t)return;!o&&s&&function(e,t,n,r){let i=e;do 0===i.z&&(i.z=uN(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,o,l,u=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<u&&(o++,r=r.nextZ);t++);for(l=u;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(s>1)}(i)}(t,i,a,s);let l=t,u,c;for(;t.prev!==t.next;){if(u=t.prev,c=t.next,s?function(e,t,n,r){let i=e.prev,a=e.next;if(uD(i,e,a)>=0)return!1;let s=i.x,o=e.x,l=a.x,u=i.y,c=e.y,h=a.y,d=s<o?s<l?s:l:o<l?o:l,p=u<c?u<h?u:h:c<h?c:h,f=s>o?s>l?s:l:o>l?o:l,m=u>c?u>h?u:h:c>h?c:h,g=uN(d,p,t,n,r),v=uN(f,m,t,n,r),_=e.prevZ,y=e.nextZ;for(;_&&_.z>=g&&y&&y.z<=v;){if(_.x>=d&&_.x<=f&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&uk(s,u,o,c,l,h,_.x,_.y)&&uD(_.prev,_,_.next)>=0||(_=_.prevZ,y.x>=d&&y.x<=f&&y.y>=p&&y.y<=m&&y!==i&&y!==a&&uk(s,u,o,c,l,h,y.x,y.y)&&uD(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=f&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&uk(s,u,o,c,l,h,_.x,_.y)&&uD(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=v;){if(y.x>=d&&y.x<=f&&y.y>=p&&y.y<=m&&y!==i&&y!==a&&uk(s,u,o,c,l,h,y.x,y.y)&&uD(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}(t,i,a,s):function(e){let t=e.prev,n=e.next;if(uD(t,e,n)>=0)return!1;let r=t.x,i=e.x,a=n.x,s=t.y,o=e.y,l=n.y,u=r<i?r<a?r:a:i<a?i:a,c=s<o?s<l?s:l:o<l?o:l,h=r>i?r>a?r:a:i>a?i:a,d=s>o?s>l?s:l:o>l?o:l,p=n.next;for(;p!==t;){if(p.x>=u&&p.x<=h&&p.y>=c&&p.y<=d&&uk(r,s,i,o,a,l,p.x,p.y)&&uD(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(t)){n.push(u.i/r|0),n.push(t.i/r|0),n.push(c.i/r|0),uG(t),t=c.next,l=c.next;continue}if((t=c)===l){o?1===o?e(t=function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!uU(i,a)&&uF(i,r,r.next,a)&&uV(i,a)&&uV(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),uG(r),uG(r.next),r=e=a),r=r.next}while(r!==e);return uL(r)}(uL(t),n,r),n,r,i,a,s,2):2===o&&function(t,n,r,i,a,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){var l,u;if(o.i!==t.i&&(l=o,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&uF(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(l,u)&&(uV(l,u)&&uV(u,l)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}(l,u)&&(uD(l.prev,l,u.prev)||uD(l,u.prev,u))||uU(l,u)&&uD(l.prev,l,l.next)>0&&uD(u.prev,u,u.next)>0))){let l=uH(o,t);o=uL(o,o.next),l=uL(l,l.next),e(o,n,r,i,a,s,0),e(l,n,r,i,a,s,0);return}t=t.next}o=o.next}while(o!==t)}(t,n,r,i,a,s):e(uL(t),n,r,i,a,s,1);break}}}(d,p,n,r,i,u,0),p}};function uI(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=uj(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=uj(a,e[a],e[a+1],s);return s&&uU(s,s.next)&&(uG(s),s=s.next),s}function uL(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(uU(n,n.next)||0===uD(n.prev,n,n.next))){if(uG(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function uO(e,t){return e.x-t.x}function uN(e,t,n,r,i){return(e=((e=((e=((e=((e=(e-n)*i|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)<<1}function uk(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function uD(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function uU(e,t){return e.x===t.x&&e.y===t.y}function uF(e,t,n,r){let i=uB(uD(e,t,n)),a=uB(uD(e,t,r)),s=uB(uD(n,r,e)),o=uB(uD(n,r,t));return!!(i!==a&&s!==o||0===i&&uz(e,n,t)||0===a&&uz(e,r,t)||0===s&&uz(n,e,r)||0===o&&uz(n,t,r))}function uz(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function uB(e){return e>0?1:e<0?-1:0}function uV(e,t){return 0>uD(e.prev,e,e.next)?uD(e,t,e.next)>=0&&uD(e,e.prev,t)>=0:0>uD(e,t,e.prev)||0>uD(e,e.next,t)}function uH(e,t){let n=new uW(e.i,e.x,e.y),r=new uW(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function uj(e,t,n,r){let i=new uW(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function uG(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uW(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class uq{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>uq.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];uX(e),uZ(n,e);let a=e.length;t.forEach(uX);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,uZ(n,t[e]);let s=uP.triangulate(n,r);for(let e=0;e<s.length;e+=3)i.push(s.slice(e,e+3));return i}}function uX(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function uZ(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class uY extends iX{constructor(e=new uR([new nB(.5,.5),new nB(-.5,.5),new nB(-.5,-.5),new nB(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++)!function(e){let a,s,o,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,h=void 0!==t.steps?t.steps:1,d=void 0!==t.depth?t.depth:1,p=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,_=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:uK,b,x=!1;_&&(b=_.getSpacedPoints(h),x=!0,p=!1,a=_.computeFrenetFrames(h,!1),s=new rl,o=new rl,l=new rl),p||(v=0,f=0,m=0,g=0);let S=e.extractPoints(c),w=S.shape,M=S.holes;if(!uq.isClockWise(w)){w=w.reverse();for(let e=0,t=M.length;e<t;e++){let t=M[e];uq.isClockWise(t)&&(M[e]=t.reverse())}}let E=uq.triangulateShape(w,M),T=w;for(let e=0,t=M.length;e<t;e++){let t=M[e];w=w.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}let C=w.length,R=E.length;function P(e,t,n){let r,i,a;let s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=s*s+o*o;if(Math.abs(s*u-o*l)>Number.EPSILON){let h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=t.x-o/h,f=t.y+s/h,m=((n.x-u/d-p)*u-(n.y+l/d-f)*l)/(s*u-o*l),g=(r=p+s*m-e.x)*r+(i=f+o*m-e.y)*i;if(g<=2)return new nB(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(u)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(c)):(r=s,i=o,a=Math.sqrt(c/2))}return new nB(r/a,i/a)}let I=[];for(let e=0,t=T.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=P(T[e],T[n],T[r]);let L=[],O,N=I.concat();for(let e=0,t=M.length;e<t;e++){let t=M[e];O=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[e]=P(t[e],t[r],t[i]);L.push(O),N=N.concat(O)}for(let e=0;e<v;e++){let t=e/v,n=f*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=T.length;e<t;e++){let t=A(T[e],I[e],r);U(t.x,t.y,-n)}for(let e=0,t=M.length;e<t;e++){let t=M[e];O=L[e];for(let e=0,i=t.length;e<i;e++){let i=A(t[e],O[e],r);U(i.x,i.y,-n)}}}let k=m+g;for(let e=0;e<C;e++){let t=p?A(w[e],N[e],k):w[e];x?(o.copy(a.normals[0]).multiplyScalar(t.x),s.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(b[0]).add(o).add(s),U(l.x,l.y,l.z)):U(t.x,t.y,0)}for(let e=1;e<=h;e++)for(let t=0;t<C;t++){let n=p?A(w[t],N[t],k):w[t];x?(o.copy(a.normals[e]).multiplyScalar(n.x),s.copy(a.binormals[e]).multiplyScalar(n.y),l.copy(b[e]).add(o).add(s),U(l.x,l.y,l.z)):U(n.x,n.y,d/h*e)}for(let e=v-1;e>=0;e--){let t=e/v,n=f*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=T.length;e<t;e++){let t=A(T[e],I[e],r);U(t.x,t.y,d+n)}for(let e=0,t=M.length;e<t;e++){let t=M[e];O=L[e];for(let e=0,i=t.length;e<i;e++){let i=A(t[e],O[e],r);x?U(i.x,i.y+b[h-1].y,b[h-1].x+n):U(i.x,i.y,d+n)}}}function D(e,t){let i=e.length;for(;--i>=0;){let a=i,s=i-1;s<0&&(s=e.length-1);for(let e=0,i=h+2*v;e<i;e++){let i=C*e,o=C*(e+1);!function(e,t,i,a){z(e),z(t),z(a),z(t),z(i),z(a);let s=r.length/3,o=y.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);B(o[0]),B(o[1]),B(o[3]),B(o[1]),B(o[2]),B(o[3])}(t+a+i,t+s+i,t+s+o,t+a+o)}}}function U(e,t,n){u.push(e),u.push(t),u.push(n)}function F(e,t,i){z(e),z(t),z(i);let a=r.length/3,s=y.generateTopUV(n,r,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[2])}function z(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function B(e){i.push(e.x),i.push(e.y)}(function(){let e=r.length/3;if(p){let e=0*C;for(let t=0;t<R;t++){let n=E[t];F(n[2]+e,n[1]+e,n[0]+e)}e=C*(h+2*v);for(let t=0;t<R;t++){let n=E[t];F(n[0]+e,n[1]+e,n[2]+e)}}else{for(let e=0;e<R;e++){let t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<R;e++){let t=E[e];F(t[0]+C*h,t[1]+C*h,t[2]+C*h)}}n.addGroup(e,r.length/3-e,0)})(),function(){let e=r.length/3,t=0;D(T,0),t+=T.length;for(let e=0,n=M.length;e<n;e++){let n=M[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}(e[a]);this.setAttribute("position",new iF(r,3)),this.setAttribute("uv",new iF(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new uf[r.type]().fromJSON(r)),new uY(n,e.options)}}let uK={generateTopUV:function(e,t,n,r,i){let a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new nB(a,s),new nB(o,l),new nB(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){let s=t[3*n],o=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-c)<Math.abs(s-u)?[new nB(s,1-l),new nB(u,1-h),new nB(d,1-f),new nB(m,1-v)]:[new nB(o,1-l),new nB(c,1-h),new nB(p,1-f),new nB(g,1-v)]}};class uQ extends uS{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uQ(e.radius,e.detail)}}class uJ extends uS{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uJ(e.radius,e.detail)}}class u$ extends iX{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);let s=[],o=[],l=[],u=[],c=e,h=(t-e)/(r=Math.max(1,r)),d=new rl,p=new nB;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){let r=i+e/n*a;d.x=c*Math.cos(r),d.y=c*Math.sin(r),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,u.push(p.x,p.y)}c+=h}for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,o=r+1;s.push(r,i,o),s.push(i,a,o)}}this.setIndex(s),this.setAttribute("position",new iF(o,3)),this.setAttribute("normal",new iF(l,3)),this.setAttribute("uv",new iF(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u$(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class u0 extends iX{constructor(e=new uR([new nB(0,.5),new nB(-.5,-.5),new nB(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],i=[],a=[],s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){let s=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===uq.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===uq.isClockWise(t)&&(c[e]=t.reverse())}let h=uq.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){let t=h[e],r=t[0]+s,i=t[1]+s,a=t[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new iF(r,3)),this.setAttribute("normal",new iF(i,3)),this.setAttribute("uv",new iF(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new u0(n,e.curveSegments)}}class u1 extends iX{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let o=Math.min(a+s,Math.PI),l=0,u=[],c=new rl,h=new rl,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){let g=[],v=d/n,_=0;0===d&&0===a?_=.5/t:d===n&&o===Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){let o=n/t;c.x=-e*Math.cos(r+o*i)*Math.sin(a+v*s),c.y=e*Math.cos(a+v*s),c.z=e*Math.sin(r+o*i)*Math.sin(a+v*s),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(o+_,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=u[e][r+1],i=u[e][r],s=u[e+1][r],l=u[e+1][r+1];(0!==e||a>0)&&d.push(t,i,l),(e!==n-1||o<Math.PI)&&d.push(i,s,l)}this.setIndex(d),this.setAttribute("position",new iF(p,3)),this.setAttribute("normal",new iF(f,3)),this.setAttribute("uv",new iF(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class u2 extends uS{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new u2(e.radius,e.detail)}}class u3 extends iX{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let a=[],s=[],o=[],l=[],u=new rl,c=new rl,h=new rl;for(let a=0;a<=n;a++)for(let d=0;d<=r;d++){let p=d/r*i,f=a/n*Math.PI*2;c.x=(e+t*Math.cos(f))*Math.cos(p),c.y=(e+t*Math.cos(f))*Math.sin(p),c.z=t*Math.sin(f),s.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(c,u).normalize(),o.push(h.x,h.y,h.z),l.push(d/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,o=(r+1)*e+t;a.push(n,i,o),a.push(i,s,o)}this.setIndex(a),this.setAttribute("position",new iF(s,3)),this.setAttribute("normal",new iF(o,3)),this.setAttribute("uv",new iF(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u3(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class u4 extends iX{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);let s=[],o=[],l=[],u=[],c=new rl,h=new rl,d=new rl,p=new rl,f=new rl,m=new rl,g=new rl;for(let s=0;s<=n;++s){let _=s/n*i*Math.PI*2;v(_,i,a,e,d),v(_+.01,i,a,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,a=-t*Math.cos(i),p=t*Math.sin(i);c.x=d.x+(a*g.x+p*f.x),c.y=d.y+(a*g.y+p*f.y),c.z=d.z+(a*g.z+p*f.z),o.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(s/n),u.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;s.push(n,i,o),s.push(i,a,o)}function v(e,t,n,r,i){let a=n/t*e,s=Math.cos(a);i.x=r*(2+s)*.5*Math.cos(e),i.y=r*(2+s)*Math.sin(e)*.5,i.z=r*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new iF(o,3)),this.setAttribute("normal",new iF(l,3)),this.setAttribute("uv",new iF(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u4(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class u5 extends iX{constructor(e=new ud(new rl(-1,-1,0),new rl(-1,1,0),new rl(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let s=new rl,o=new rl,l=new nB,u=new rl,c=[],h=[],d=[],p=[];function f(i){u=e.getPointAt(i/t,u);let l=a.normals[i],d=a.binormals[i];for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+i*d.x,o.y=a*l.y+i*d.y,o.z=a*l.z+i*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=u.x+n*o.x,s.y=u.y+n*o.y,s.z=u.z+n*o.z,c.push(s.x,s.y,s.z)}}(function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;p.push(n,i,s),p.push(i,a,s)}}()})(),this.setIndex(p),this.setAttribute("position",new iF(c,3)),this.setAttribute("normal",new iF(h,3)),this.setAttribute("uv",new iF(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new u5(new uf[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class u7 extends iX{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){let t=[],n=new Set,r=new rl,i=new rl;if(null!==e.index){let a=e.attributes.position,s=e.index,o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){let l=o[e],u=l.start,c=l.count;for(let e=u,o=u+c;e<o;e+=3)for(let o=0;o<3;o++){let l=s.getX(e+o),u=s.getX(e+(o+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,u),!0===u8(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{let a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let s=0;s<3;s++){let o=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,l),!0===u8(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new iF(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function u8(e,t,n){let r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var u6=Object.freeze({__proto__:null,BoxGeometry:ar,CapsuleGeometry:u_,CircleGeometry:uy,ConeGeometry:ux,CylinderGeometry:ub,DodecahedronGeometry:uw,EdgesGeometry:uC,ExtrudeGeometry:uY,IcosahedronGeometry:uQ,LatheGeometry:uv,OctahedronGeometry:uJ,PlaneGeometry:aw,PolyhedronGeometry:uS,RingGeometry:u$,ShapeGeometry:u0,SphereGeometry:u1,TetrahedronGeometry:u2,TorusGeometry:u3,TorusKnotGeometry:u4,TubeGeometry:u5,WireframeGeometry:u7});class u9 extends ix{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new i_(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ce extends al{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ct extends ix{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new i_(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cn extends ct{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nB(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nL(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new i_(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new i_(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new i_(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cr extends ix{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new i_(16777215),this.specular=new i_(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=er,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ci extends ix{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new i_(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ca extends ix{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cs extends ix{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new i_(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new i_(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=er,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class co extends ix{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new i_(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tV,this.normalScale=new nB(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cl extends lk{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function cu(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function cc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ch(e){let t=e.length,n=Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function cd(e,t,n){let r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){let r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function cp(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s){if(Array.isArray(s))do void 0!==(s=a[r])&&(t.push(a.time),n.push.apply(n,s)),a=e[i++];while(void 0!==a);else if(void 0!==s.toArray)do void 0!==(s=a[r])&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++];while(void 0!==a);else do void 0!==(s=a[r])&&(t.push(a.time),n.push(s)),a=e[i++];while(void 0!==a)}}let cf={convertArray:cu,isTypedArray:cc,getKeyframeOrder:ch,sortedArray:cd,flattenJSON:cp,subclip:function(e,t,n,r,i=30){let a=e.clone();a.name=t;let s=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],o=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*i;if(!(a<n)&&!(a>=r)){l.push(t.times[e]);for(let n=0;n<o;++n)u.push(t.values[e*o+n])}}0!==l.length&&(t.times=cu(l,t.times.constructor),t.values=cu(u,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);let i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){let r;let i=n.tracks[t],s=i.ValueTypeName;if("bool"===s||"string"===s)continue;let o=e.tracks.find(function(e){return e.name===i.name&&e.ValueTypeName===s});if(void 0===o)continue;let l=0,u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);let c=0,h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=i.times.length-1;if(a<=i.times[0]){let e=l,t=u-l;r=i.values.slice(e,t)}else if(a>=i.times[d]){let e=d*u+l,t=e+u-l;r=i.values.slice(e,t)}else{let e=i.createInterpolant(),t=l,n=u-l;e.evaluate(a),r=e.resultBuffer.slice(t,n)}"quaternion"===s&&new ro().fromArray(r).normalize().conjugate().toArray(r);let p=o.times.length;for(let e=0;e<p;++e){let t=e*h+c;if("quaternion"===s)ro.multiplyQuaternionsFlat(o.values,t,r,0,o.values,t);else{let e=h-2*c;for(let n=0;n<e;++n)o.values[t+n]-=r[n]}}}return e.blendMode=tO,e}};class cm{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];t:{n:{let a;r:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,e<(r=t[++n]))break n}a=t.length;break r}if(!(e>=i)){let s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break n}a=n,n=0;break r}break t}for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class cg extends cm{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tR,endingEnd:tR}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case tP:i=e,s=2*t-n;break;case tI:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case tP:a=e,o=2*n-t;break;case tI:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let e=0;e!==s;++e)i[e]=g*a[u+e]+v*a[l+e]+_*a[o+e]+y*a[c+e];return i}}class cv extends cm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==s;++e)i[e]=a[l+e]*c+a[o+e]*u;return i}}class c_ extends cm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class cy{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cu(t,this.TimeBufferType),this.values=cu(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:cu(e.times,Array),values:cu(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new c_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cg(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tT:t=this.InterpolantFactoryMethodDiscrete;break;case tA:t=this.InterpolantFactoryMethodLinear;break;case tC:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tT;case this.InterpolantFactoryMethodLinear:return tA;case this.InterpolantFactoryMethodSmooth:return tC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&cc(r))for(let t=0,n=r.length;t!==n;++t){let n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===tC,i=e.length-1,a=1;for(let s=1;s<i;++s){let i=!1,o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0])){if(r)i=!0;else{let e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){let n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}}if(i){if(s!==a){e[a]=e[s];let r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}cy.prototype.TimeBufferType=Float32Array,cy.prototype.ValueBufferType=Float32Array,cy.prototype.DefaultInterpolation=tA;class cb extends cy{}cb.prototype.ValueTypeName="bool",cb.prototype.ValueBufferType=Array,cb.prototype.DefaultInterpolation=tT,cb.prototype.InterpolantFactoryMethodLinear=void 0,cb.prototype.InterpolantFactoryMethodSmooth=void 0;class cx extends cy{}cx.prototype.ValueTypeName="color";class cS extends cy{}cS.prototype.ValueTypeName="number";class cw extends cm{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t),l=e*s;for(let e=l+s;l!==e;l+=4)ro.slerpFlat(i,0,a,l-s,a,l,o);return i}}class cM extends cy{InterpolantFactoryMethodLinear(e){return new cw(this.times,this.values,this.getValueSize(),e)}}cM.prototype.ValueTypeName="quaternion",cM.prototype.DefaultInterpolation=tA,cM.prototype.InterpolantFactoryMethodSmooth=void 0;class cE extends cy{}cE.prototype.ValueTypeName="string",cE.prototype.ValueBufferType=Array,cE.prototype.DefaultInterpolation=tT,cE.prototype.InterpolantFactoryMethodLinear=void 0,cE.prototype.InterpolantFactoryMethodSmooth=void 0;class cT extends cy{}cT.prototype.ValueTypeName="vector";class cA{constructor(e,t=-1,n,r=tL){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=nI(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cS;case"vector":case"vector2":case"vector3":case"vector4":return cT;case"color":return cx;case"quaternion":return cM;case"bool":case"boolean":return cb;case"string":return cE}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],n=[];cp(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)})(n[e]).scale(r));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(cy.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let i=t.length,a=[];for(let e=0;e<i;e++){let s=[],o=[];s.push((e+i-1)%i,e,(e+1)%i),o.push(0,1,0);let l=ch(s);s=cd(s,1,l),o=cd(o,1,l),r||0!==s[0]||(s.push(i),o.push(o[0])),a.push(new cS(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.name.match(i);if(a&&a.length>1){let e=a[1],t=r[e];t||(r[e]=t=[]),t.push(n)}}let a=[];for(let e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(e,t,n,r,i){if(0!==n.length){let a=[],s=[];cp(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let e=0;e<l.length;e++){let i=l[e].keys;if(i&&0!==i.length){if(i[0].morphTargets){let e;let t={};for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(let n in t){let t=[],a=[];for(let r=0;r!==i[e].morphTargets.length;++r){let r=i[e];t.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new cS(".morphTargetInfluence["+n+"]",t,a))}o=t.length*a}else{let a=".bones["+t[e].name+"]";n(cT,a+".position",i,"pos",r),n(cM,a+".quaternion",i,"rot",r),n(cT,a+".scale",i,"scl",r)}}}return 0===r.length?null:new this(i,o,r,s)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let cC={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class cR{constructor(e,t,n){let r;let i=this,a=!1,s=0,o=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}let cP=new cR;class cI{constructor(e){this.manager=void 0!==e?e:cP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}cI.DEFAULT_MATERIAL_NAME="__DEFAULT";let cL={};class cO extends Error{constructor(e,t){super(e),this.response=t}}class cN extends cI{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=cC.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==cL[e]){cL[e].push({onLoad:t,onProgress:n,onError:r});return}cL[e]=[],cL[e].push({onLoad:t,onProgress:n,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let n=cL[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,s=0!==a,o=0,l=new ReadableStream({start(e){(function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{o+=i.byteLength;let r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}})})()}});return new Response(l)}throw new cO(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>new DOMParser().parseFromString(e,s));case"json":return e.json();default:if(void 0===s)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{cC.add(e,t);let n=cL[e];delete cL[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{let n=cL[e];if(void 0===n)throw this.manager.itemError(e),t;delete cL[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ck extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new cN(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=[];for(let n=0;n<e.length;n++){let r=cA.parse(e[n]);t.push(r)}return t}}class cD extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=[],s=new l1,o=new cN(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;if(Array.isArray(e))for(let u=0,c=e.length;u<c;++u)!function(u){o.load(e[u],function(e){let n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(s.minFilter=eC),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}(u);else o.load(e,function(e){let n=i.parse(e,!0);if(n.isCubemap){let e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=eC),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s}}class cU extends cI{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=cC.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let s=nq("img");function o(){u(),cC.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class cF extends cI{constructor(e){super(e)}load(e,t,n,r){let i=new ad;i.colorSpace=tG;let a=new cU(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;for(let n=0;n<e.length;++n)!function(n){a.load(e[n],function(e){i.images[n]=e,6==++s&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(n);return i}}class cz extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new ls,s=new cN(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,function(e){let n;try{n=i.parse(e)}catch(e){if(void 0!==r)r(e);else{console.error(e);return}}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:ex,a.wrapT=void 0!==n.wrapT?n.wrapT:ex,a.magFilter=void 0!==n.magFilter?n.magFilter:eC,a.minFilter=void 0!==n.minFilter?n.minFilter:eC,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=eI),1===n.mipmapCount&&(a.minFilter=eC),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class cB extends cI{constructor(e){super(e)}load(e,t,n,r){let i=new n6,a=new cU(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class cV extends r9{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new i_(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class cH extends cV{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(r9.DEFAULT_UP),this.updateMatrix(),this.groundColor=new i_(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let cj=new rF,cG=new rl,cW=new rl;class cq{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nB(512,512),this.map=null,this.mapPass=null,this.matrix=new rF,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ab,this._frameExtents=new nB(1,1),this._viewportCount=1,this._viewports=[new n9(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;cG.setFromMatrixPosition(e.matrixWorld),t.position.copy(cG),cW.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cW),t.updateMatrixWorld(),cj.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cj),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(cj)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cX extends cq{constructor(){super(new ac(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*nP*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class cZ extends cV{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(r9.DEFAULT_UP),this.updateMatrix(),this.target=new r9,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new cX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let cY=new rF,cK=new rl,cQ=new rl;class cJ extends cq{constructor(){super(new ac(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nB(4,2),this._viewportCount=6,this._viewports=[new n9(2,1,1,1),new n9(0,1,1,1),new n9(3,1,1,1),new n9(1,1,1,1),new n9(3,0,1,1),new n9(1,0,1,1)],this._cubeDirections=[new rl(1,0,0),new rl(-1,0,0),new rl(0,0,1),new rl(0,0,-1),new rl(0,1,0),new rl(0,-1,0)],this._cubeUps=[new rl(0,1,0),new rl(0,1,0),new rl(0,1,0),new rl(0,1,0),new rl(0,0,1),new rl(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),cK.setFromMatrixPosition(e.matrixWorld),n.position.copy(cK),cQ.copy(n.position),cQ.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(cQ),n.updateMatrixWorld(),r.makeTranslation(-cK.x,-cK.y,-cK.z),cY.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cY)}}class c$ extends cV{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new cJ}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class c0 extends cq{constructor(){super(new aN(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class c1 extends cV{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(r9.DEFAULT_UP),this.updateMatrix(),this.target=new r9,this.shadow=new c0}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class c2 extends cV{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class c3 extends cV{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class c4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new rl)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){let n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class c5 extends cV{constructor(e=new c4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class c7 extends cI{constructor(e){super(e),this.textures={}}load(e,t,n,r){let i=this,a=new cN(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}let r=c7.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=new i_().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(let t in e.uniforms){let i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=new i_().setHex(i.value);break;case"v2":r.uniforms[t].value=new nB().fromArray(i.value);break;case"v3":r.uniforms[t].value=new rl().fromArray(i.value);break;case"v4":r.uniforms[t].value=new n9().fromArray(i.value);break;case"m3":r.uniforms[t].value=new nV().fromArray(i.value);break;case"m4":r.uniforms[t].value=new rF().fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(let t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=new nB().fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new nB().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new({ShadowMaterial:u9,SpriteMaterial:oV,RawShaderMaterial:ce,ShaderMaterial:al,PointsMaterial:lq,MeshPhysicalMaterial:cn,MeshStandardMaterial:ct,MeshPhongMaterial:cr,MeshToonMaterial:ci,MeshNormalMaterial:ca,MeshLambertMaterial:cs,MeshDepthMaterial:ob,MeshDistanceMaterial:ox,MeshBasicMaterial:iS,MeshMatcapMaterial:co,LineDashedMaterial:cl,LineBasicMaterial:lk,Material:ix})[e]}}class c8{static decodeText(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}class c6 extends iX{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class c9 extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new cN(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];let r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),s=new oF(nW(i.type,a),i.stride);return s.uuid=i.uuid,t[r]=s,s}let i=e.isInstancedBufferGeometry?new c6:new iX,a=e.data.index;if(void 0!==a){let e=nW(a.type,a.array);i.setIndex(new iR(e,1))}let s=e.data.attributes;for(let t in s){let n;let a=s[t];if(a.isInterleavedBufferAttribute)n=new oB(r(e.data,a.data),a.itemSize,a.offset,a.normalized);else{let e=nW(a.type,a.array);n=new(a.isInstancedBufferAttribute?lc:iR)(e,a.itemSize,a.normalized)}void 0!==a.name&&(n.name=a.name),void 0!==a.usage&&n.setUsage(a.usage),i.setAttribute(t,n)}let o=e.data.morphAttributes;if(o)for(let t in o){let n=o[t],a=[];for(let t=0,i=n.length;t<i;t++){let i;let s=n[t];i=s.isInterleavedBufferAttribute?new oB(r(e.data,s.data),s.itemSize,s.offset,s.normalized):new iR(nW(s.type,s.array),s.itemSize,s.normalized),void 0!==s.name&&(i.name=s.name),a.push(i)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){let t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}let u=e.data.boundingSphere;if(void 0!==u){let e=new rl;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new rR(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class he extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=""===this.path?c8.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let s=new cN(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(t){void 0!==r&&r(t),console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}let s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase()){void 0!==r&&r(Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(a,t)},n,r)}async loadAsync(e,t){let n=""===this.path?c8.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;let r=new cN(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);let i=JSON.parse(await r.loadAsync(e,t)),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){let n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){let e=!1;for(let t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){let t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){let r=new uR().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){let n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let t=0,i=e.length;t<i;t++){let i=new lu().fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){let n={};if(void 0!==e){let r=new c9;for(let i=0,a=e.length;i<a;i++){let a;let s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in u6?a=u6[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){let n={},r={};if(void 0!==e){let i=new c7;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){let a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){let t={};if(void 0!==e)for(let n=0;n<e.length;n++){let r=e[n],i=cA.parse(r);t[i.uuid]=i}return t}parseImages(e,t){let n;let r=this,i={};function a(e){if("string"==typeof e){var t;return t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e,r.manager.itemStart(t),n.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}return e.data?{data:nW(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(n=new cU(new cR(t))).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],r=n.url;if(Array.isArray(r)){let e=[];for(let t=0,n=r.length;t<n;t++){let n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ls(n.data,n.width,n.height)))}i[n.uuid]=new n5(e)}else{let e=a(n.url);i[n.uuid]=new n5(e)}}}return i}async parseImagesAsync(e){let t;let n=this,r={};async function i(e){if("string"==typeof e){let r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;return await t.loadAsync(r)}return e.data?{data:nW(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(t=new cU(this.manager)).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.url;if(Array.isArray(a)){let e=[];for(let t=0,n=a.length;t<n;t++){let n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new ls(r.data,r.width,r.height)))}r[n.uuid]=new n5(e)}else{let e=await i(n.url);r[n.uuid]=new n5(e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}let r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){let a;let s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);let o=t[s.image],l=o.data;Array.isArray(l)?(a=new ad,6===l.length&&(a.needsUpdate=!0)):(a=l&&l.data?new ls:new n6,l&&(a.needsUpdate=!0)),a.source=o,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,ht)),void 0!==s.channel&&(a.channel=s.channel),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],hn),a.wrapT=n(s.wrap[1],hn)),void 0!==s.format&&(a.format=s.format),void 0!==s.internalFormat&&(a.internalFormat=s.internalFormat),void 0!==s.type&&(a.type=s.type),void 0!==s.colorSpace&&(a.colorSpace=s.colorSpace),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,hr)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,hr)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.generateMipmaps&&(a.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(a.compareFunction=s.compareFunction),void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}return r}parseObject(e,t,n,r,i){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new oU,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new i_(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new oD(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ok(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new ac(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new aN(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new c2(e.color,e.intensity);break;case"DirectionalLight":a=new c1(e.color,e.intensity);break;case"PointLight":a=new c$(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new c3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new cZ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new cH(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new c5().fromJSON(e);break;case"SkinnedMesh":a=new li(s=l(e.geometry),o=u(e.material)),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":a=new at(s=l(e.geometry),o=u(e.material));break;case"InstancedMesh":s=l(e.geometry),o=u(e.material);let h=e.count,d=e.instanceMatrix,p=e.instanceColor;(a=new l_(s,o,h)).instanceMatrix=new lc(new Float32Array(d.array),16),void 0!==p&&(a.instanceColor=new lc(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":s=l(e.geometry),o=u(e.material),(a=new lN(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,o)).geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(e=>{let t=new rh;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);let n=new rR;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":a=new o4;break;case"Line":a=new lV(l(e.geometry),u(e.material));break;case"LineLoop":a=new lW(l(e.geometry),u(e.material));break;case"LineSegments":a=new lG(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new lQ(l(e.geometry),u(e.material));break;case"Sprite":a=new o0(u(e.material));break;case"Group":a=new oA;break;case"Bone":a=new la;break;default:a=new r9}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){let s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){let t=e.animations;for(let e=0;e<t.length;e++){let n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);let t=e.levels;for(let e=0;e<t.length;e++){let n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){let n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}}let ht={UVMapping:ef,CubeReflectionMapping:em,CubeRefractionMapping:eg,EquirectangularReflectionMapping:ev,EquirectangularRefractionMapping:e_,CubeUVReflectionMapping:ey},hn={RepeatWrapping:eb,ClampToEdgeWrapping:ex,MirroredRepeatWrapping:eS},hr={NearestFilter:ew,NearestMipmapNearestFilter:eM,NearestMipmapLinearFilter:eT,LinearFilter:eC,LinearMipmapNearestFilter:eR,LinearMipmapLinearFilter:eI};class hi extends cI{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=cC.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){cC.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}class ha{static getContext(){return void 0===a&&(a=new(window.AudioContext||window.webkitAudioContext)),a}static setContext(e){a=e}}class hs extends cI{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new cN(this.manager);function s(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{let n=e.slice(0);ha.getContext().decodeAudioData(n,function(e){t(e)}).catch(s)}catch(e){s(e)}},n,r)}}let ho=new rF,hl=new rF,hu=new rF;class hc{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ac,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ac,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){let n,r;t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hu.copy(e.projectionMatrix);let i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(nR*t.fov*.5)/t.zoom;hl.elements[12]=-i,ho.elements[12]=i,n=-s*t.aspect+a,r=s*t.aspect+a,hu.elements[0]=2*t.near/(r-n),hu.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(hu),n=-s*t.aspect-a,r=s*t.aspect-a,hu.elements[0]=2*t.near/(r-n),hu.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(hu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(hl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ho)}}class hh{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=hd();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hd(){return("undefined"==typeof performance?Date:performance).now()}let hp=new rl,hf=new ro,hm=new rl,hg=new rl;class hv extends r9{constructor(){super(),this.type="AudioListener",this.context=ha.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new hh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hp,hf,hm),hg.set(0,0,-1).applyQuaternion(hf),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hp.x,e),t.positionY.linearRampToValueAtTime(hp.y,e),t.positionZ.linearRampToValueAtTime(hp.z,e),t.forwardX.linearRampToValueAtTime(hg.x,e),t.forwardY.linearRampToValueAtTime(hg.y,e),t.forwardZ.linearRampToValueAtTime(hg.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(hp.x,hp.y,hp.z),t.setOrientation(hg.x,hg.y,hg.z,n.x,n.y,n.z)}}class h_ extends r9{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.");return}if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}let hy=new rl,hb=new ro,hx=new rl,hS=new rl;class hw extends h_{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(hy,hb,hx),hS.set(0,0,1).applyQuaternion(hb);let t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hy.x,e),t.positionY.linearRampToValueAtTime(hy.y,e),t.positionZ.linearRampToValueAtTime(hy.z,e),t.orientationX.linearRampToValueAtTime(hS.x,e),t.orientationY.linearRampToValueAtTime(hS.y,e),t.orientationZ.linearRampToValueAtTime(hS.z,e)}else t.setPosition(hy.x,hy.y,hy.z),t.setOrientation(hS.x,hS.y,hS.z)}}class hM{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class hE{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){s.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n;e!==r;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ro.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){let a=this._workIndex*i;ro.multiplyQuaternionsFlat(e,a,e,t,e,n),ro.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){let a=1-r;for(let s=0;s!==i;++s){let i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]+e[n+a]*r}}}let hT="\\[\\]\\.:\\/",hA=RegExp("["+hT+"]","g"),hC="[^"+hT+"]",hR="[^"+hT.replace("\\.","")+"]",hP=/((?:WC+[\/:])*)/.source.replace("WC",hC),hI=RegExp("^"+hP+/(WCOD+)?/.source.replace("WCOD",hR)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hC)+"$"),hL=["material","materials","bones","map"];class hO{constructor(e,t,n){let r=n||hN.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class hN{constructor(e,t,n){this.path=t,this.parsedPath=n||hN.parseTrackName(t),this.node=hN.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new hN.Composite(e,t,n):new hN(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hA,"")}static parseTrackName(e){let t=hI.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==hL.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=hN.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==r){if(void 0===e[r]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[r]}}let a=e[r];if(void 0===a){console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hN.Composite=hO,hN.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},hN.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},hN.prototype.GetterByBindingType=[hN.prototype._getValue_direct,hN.prototype._getValue_array,hN.prototype._getValue_arrayElement,hN.prototype._getValue_toArray],hN.prototype.SetterByBindingTypeAndVersioning=[[hN.prototype._setValue_direct,hN.prototype._setValue_direct_setNeedsUpdate,hN.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hN.prototype._setValue_array,hN.prototype._setValue_array_setNeedsUpdate,hN.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hN.prototype._setValue_arrayElement,hN.prototype._setValue_arrayElement_setNeedsUpdate,hN.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hN.prototype._setValue_fromArray,hN.prototype._setValue_fromArray_setNeedsUpdate,hN.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class hk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=nI(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,s,o=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){let c=arguments[u],h=c.uuid,d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(c);for(let e=0;e!==a;++e)i[e].push(new hN(c,n[e],r[e]))}else if(d<l){s=e[d];let o=--l,u=e[o];t[u.uuid]=d,e[d]=u,t[h]=o,e[o]=c;for(let e=0;e!==a;++e){let t=i[e],a=t[o],s=t[d];t[d]=a,void 0===s&&(s=new hN(c,n[e],r[e])),t[o]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){let s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=i){let a=i++,u=e[a];t[u.uuid]=l,e[l]=u,t[o]=a,e[a]=s;for(let e=0;e!==r;++e){let t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){let o=arguments[s],l=o.uuid,u=t[l];if(void 0!==u){if(delete t[l],u<i){let s=--i,o=e[s],l=--a,c=e[l];t[o.uuid]=u,e[u]=o,t[c.uuid]=s,e[s]=c,e.pop();for(let e=0;e!==r;++e){let t=n[e],r=t[s],i=t[l];t[u]=r,t[s]=i,t.pop()}}else{let i=--a,s=e[i];i>0&&(t[s.uuid]=u),e[u]=s,e.pop();for(let e=0;e!==r;++e){let t=n[e];t[u]=t[i],t.pop()}}}}this.nCachedObjects_=i}subscribe_(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];let a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=Array(l);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(c);for(let n=u,r=o.length;n!==r;++n){let r=o[n];c[n]=new hN(r,e,t)}return c}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){let r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class hD{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let i=t.tracks,a=i.length,s=Array(a),o={endingStart:tR,endingEnd:tR};for(let e=0;e!==a;++e){let t=i[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let n=this._clip.duration,r=e._clip.duration;e.warp(1,r/n,t),this.warp(n/r,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,i=r.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(null!==i){let r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let e=this._interpolants,t=this._propertyBindings;if(this.blendMode===tO)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===tE;if(0===e)return -1===i?r:a&&(1&i)==1?t-r:r;if(n===tw){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));a:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);let s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&(1&i)==1)return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=tP,r.endingEnd=tP):(e?r.endingStart=this.zeroSlopeAtStart?tP:tR:r.endingStart=tI,t?r.endingEnd=this.zeroSlopeAtEnd?tP:tR:r.endingEnd=tI)}_scheduleFading(e,t,n){let r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}let hU=new Float32Array(1);class hF extends nT{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName,u=l[o];void 0===u&&(u={},l[o]=u);for(let e=0;e!==i;++e){let i=r[e],l=i.name,c=u[l];if(void 0!==c)++c.referenceCount,a[e]=c;else{if(void 0!==(c=a[e])){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,o,l));continue}let r=t&&t._propertyBindings[e].binding.parsedPath;c=new hE(hN.create(n,l,r),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,o,l),a[e]=c}s[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null;let c=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new cv(new Float32Array(2),new Float32Array(2),1,hU)).__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){let r=t||this._root,i=r.uuid,a="string"==typeof e?cA.findByName(r,e):e,s=null!==a?a.uuid:e,o=this._actionsByClip[s],l=null;if(void 0===n&&(n=null!==a?a.blendMode:tL),void 0!==o){let e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let u=new hD(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,s,i),u}existingAction(e,t){let n=t||this._root,r=n.uuid,i="string"==typeof e?cA.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==n;++s)t[s]._update(r,e,i,a);let s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){let e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){let r=e[n];this._deactivateAction(r);let i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let e in n){let r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let e in r){let t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class hz{constructor(e){this.value=e}clone(){return new hz(void 0===this.value.clone?this.value:this.value.clone())}}let hB=0;class hV extends nT{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hB++}),this.name="",this.usage=nd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return new this.constructor().copy(this)}}class hH extends oF{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class hj{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class hG{constructor(e,t,n=0,r=1/0){this.ray=new rU(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new rY,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return hq(e,this,n,t),n.sort(hW),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)hq(e[r],this,n,t);return n.sort(hW),n}}function hW(e,t){return e.distance-t.distance}function hq(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)hq(r[e],t,n,!0)}}class hX{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(nL(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class hZ{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}let hY=new nB;class hK{constructor(e=new nB(Infinity,Infinity),t=new nB(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=hY.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hY).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let hQ=new rl,hJ=new rl;class h${constructor(e=new rl,t=new rl){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hQ.subVectors(e,this.start),hJ.subVectors(this.end,this.start);let n=hJ.dot(hJ),r=hJ.dot(hQ)/n;return t&&(r=nL(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let h0=new rl;class h1 extends r9{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new iX,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1;e<32;e++,t++){let n=e/32*Math.PI*2,i=t/32*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(i),Math.sin(i),1)}n.setAttribute("position",new iF(r,3));let i=new lk({fog:!1,toneMapped:!1});this.cone=new lG(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),h0.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h0),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let h2=new rl,h3=new rF,h4=new rF;class h5 extends lG{constructor(e){let t=function e(t){let n=[];!0===t.isBone&&n.push(t);for(let r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new iX,r=[],i=[],a=new i_(0,0,1),s=new i_(0,1,0);for(let e=0;e<t.length;e++){let n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new iF(r,3)),n.setAttribute("color",new iF(i,3)),super(n,new lk({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,r=n.getAttribute("position");h4.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){let i=t[e];i.parent&&i.parent.isBone&&(h3.multiplyMatrices(h4,i.matrixWorld),h2.setFromMatrixPosition(h3),r.setXYZ(n,h2.x,h2.y,h2.z),h3.multiplyMatrices(h4,i.parent.matrixWorld),h2.setFromMatrixPosition(h3),r.setXYZ(n+1,h2.x,h2.y,h2.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}class h7 extends at{constructor(e,t,n){super(new u1(t,4,2),new iS({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let h8=new rl,h6=new i_,h9=new i_;class de extends r9{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let r=new uJ(t);r.rotateY(.5*Math.PI),this.material=new iS({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);let i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new iR(a,3)),this.add(new at(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");h6.copy(this.light.color),h9.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){let r=e<n/2?h6:h9;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(h8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class dt extends lG{constructor(e=10,t=10,n=4473924,r=8947848){n=new i_(n),r=new i_(r);let i=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,u=0,c=-s;e<=t;e++,c+=a){o.push(-s,0,c,s,0,c),o.push(c,0,-s,c,0,s);let t=e===i?n:r;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}let u=new iX;u.setAttribute("position",new iF(o,3)),u.setAttribute("color",new iF(l,3)),super(u,new lk({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class dn extends lG{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new i_(i),a=new i_(a);let s=[],o=[];if(t>1)for(let n=0;n<t;n++){let r=n/t*(2*Math.PI),l=Math.sin(r)*e,u=Math.cos(r)*e;s.push(0,0,0),s.push(l,0,u);let c=1&n?i:a;o.push(c.r,c.g,c.b),o.push(c.r,c.g,c.b)}for(let t=0;t<n;t++){let l=1&t?i:a,u=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*u,i=Math.cos(t)*u;s.push(n,0,i),o.push(l.r,l.g,l.b),n=Math.sin(t=(e+1)/r*(2*Math.PI))*u,i=Math.cos(t)*u,s.push(n,0,i),o.push(l.r,l.g,l.b)}}let l=new iX;l.setAttribute("position",new iF(s,3)),l.setAttribute("color",new iF(o,3)),super(l,new lk({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let dr=new rl,di=new rl,da=new rl;class ds extends r9{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new iX;r.setAttribute("position",new iF([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new lk({fog:!1,toneMapped:!1});this.lightPlane=new lV(r,i),this.add(this.lightPlane),(r=new iX).setAttribute("position",new iF([0,0,0,0,0,1],3)),this.targetLine=new lV(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dr.setFromMatrixPosition(this.light.matrixWorld),di.setFromMatrixPosition(this.light.target.matrixWorld),da.subVectors(di,dr),this.lightPlane.lookAt(di),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(di),this.targetLine.scale.z=da.length()}}let dl=new rl,du=new au;class dc extends lG{constructor(e){let t=new iX,n=new lk({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new iF(r,3)),t.setAttribute("color",new iF(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new i_(16755200),u=new i_(16711680),c=new i_(43775),h=new i_(16777215),d=new i_(3355443);this.setColors(l,u,c,h,d)}setColors(e,t,n,r,i){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;du.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),dh("c",t,e,du,0,0,-1),dh("t",t,e,du,0,0,1),dh("n1",t,e,du,-1,-1,-1),dh("n2",t,e,du,1,-1,-1),dh("n3",t,e,du,-1,1,-1),dh("n4",t,e,du,1,1,-1),dh("f1",t,e,du,-1,-1,1),dh("f2",t,e,du,1,-1,1),dh("f3",t,e,du,-1,1,1),dh("f4",t,e,du,1,1,1),dh("u1",t,e,du,.7,1.1,-1),dh("u2",t,e,du,-.7,1.1,-1),dh("u3",t,e,du,0,2,-1),dh("cf1",t,e,du,-1,0,1),dh("cf2",t,e,du,1,0,1),dh("cf3",t,e,du,0,-1,1),dh("cf4",t,e,du,0,1,1),dh("cn1",t,e,du,-1,0,-1),dh("cn2",t,e,du,1,0,-1),dh("cn3",t,e,du,0,-1,-1),dh("cn4",t,e,du,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function dh(e,t,n,r,i,a,s){dl.set(i,a,s).unproject(r);let o=t[e];if(void 0!==o){let e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],dl.x,dl.y,dl.z)}}let dd=new rh;class dp extends lG{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new iX;i.setIndex(new iR(n,1)),i.setAttribute("position",new iR(r,3)),super(i,new lk({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&dd.setFromObject(this.object),dd.isEmpty())return;let t=dd.min,n=dd.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class df extends lG{constructor(e,t=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new iX;r.setIndex(new iR(n,1)),r.setAttribute("position",new iF([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new lk({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class dm extends lV{constructor(e,t=1,n=16776960){let r=new iX;r.setAttribute("position",new iF([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new lk({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let i=new iX;i.setAttribute("position",new iF([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new at(i,new iS({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let dg=new rl;class dv extends r9{constructor(e=new rl(0,0,1),t=new rl(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===s&&((s=new iX).setAttribute("position",new iF([0,0,0,0,1,0],3)),(o=new ub(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new lV(s,new lk({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new at(o,new iS({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dg.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(dg,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class d_ extends lG{constructor(e=1){let t=new iX;t.setAttribute("position",new iF([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],3)),t.setAttribute("color",new iF([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new lk({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new i_,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dy{constructor(){this.type="ShapePath",this.color=new i_,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ug,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){let t,n,r,i,a;let s=uq.isClockWise,o=this.subPaths;if(0===o.length)return[];let l=[];if(1===o.length)return n=o[0],(r=new uR).curves=n.curves,l.push(r),l;let u=!s(o[0].getPoints());u=e?!u:u;let c=[],h=[],d=[],p=0;h[0]=void 0,d[p]=[];for(let r=0,a=o.length;r<a;r++)t=s(i=(n=o[r]).getPoints()),(t=e?!t:t)?(!u&&h[p]&&p++,h[p]={s:new uR,p:i},h[p].s.curves=n.curves,u&&p++,d[p]=[]):d[p].push({h:n,p:i[0]});if(!h[0])return function(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=new uR;i.curves=r.curves,t.push(i)}return t}(o);if(h.length>1){let e=!1,t=0;for(let e=0,t=h.length;e<t;e++)c[e]=[];for(let n=0,r=h.length;n<r;n++){let r=d[n];for(let i=0;i<r.length;i++){let a=r[i],s=!0;for(let r=0;r<h.length;r++)(function(e,t){let n=t.length,r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{let t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r})(a.p,h[r].p)&&(n!==r&&t++,s?(s=!1,c[r].push(a)):e=!0);s&&c[n].push(a)}}t>0&&!1===e&&(d=c)}for(let e=0,t=h.length;e<t;e++){r=h[e].s,l.push(r),a=d[e];for(let e=0,t=a.length;e<t;e++)r.holes.push(a[e].h)}return l}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:l}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=l)},9542:function(e,t,n){"use strict";n.d(t,{Id:function(){return a},uZ:function(){return i}});let r=Math.PI/180;function i(e,t,n){return Math.max(t,Math.min(n,e))}function a(e){return e*r}},4529:function(e,t,n){"use strict";n.d(t,{Ue:function(){return h}});let r=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,a),a},i=e=>e?r(e):r;var a=n(7294),s=n(2798);let{useDebugValue:o}=a,{useSyncExternalStoreWithSelector:l}=s,u=!1,c=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?i(e):e,n=(e,n)=>(function(e,t=e.getState,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let r=l(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return o(r),r})(t,e,n);return Object.assign(n,t),n},h=e=>e?c(e):c}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(3719)}),_N_E=e.O()}]);