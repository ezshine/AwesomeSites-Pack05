"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{9995:function(e,t,r){r.d(t,{h:function(){return v}});var n=r(5893),o=r(7433),a=r(7294),i=r(6530),s=r(9477),l=r(9542),u=r(1497),c=r(4918),p=r(2686);let m=new s.Vector3(0,1,0),d=e=>(e-.5)*2,v=(0,a.forwardRef)((e,t)=>{let{cameraApi:r,children:v,fov:f=26,...h}=e,g=(0,a.useRef)(null),x=(0,a.useRef)(null),M=r(e=>e.raf),y=(0,u.k)(e=>e.uv),j=(0,a.useMemo)(()=>new s.Vector2().copy(y),[y]),b=r(e=>e.currentConfig.position),S=r(e=>e.currentConfig.target),C=r(e=>e.currentConfig.rotationAngle),w=r(e=>e.rotationLerp),R=r(e=>e.currentConfig.targetUv),P=(0,a.useMemo)(()=>new s.Vector3(0,0,0),[]),T=(0,a.useMemo)(()=>new s.Vector3(0,0,0),[]),k=(0,a.useMemo)(()=>new s.Vector2(0,0),[]),F=(0,a.useCallback)(()=>{var e,t;let r=(null===(e=g.current)||void 0===e?void 0:e.fov)||90,n=(null===(t=g.current)||void 0===t?void 0:t.aspect)||1,o=(0,l.Id)(r);k.set(2*Math.atan(Math.tan(o/2)*n)*.5*d(R.x),.5*o*d(R.y))},[k,R]);return(0,p.BE)(e=>{let{state:t,delta:r,frame:n}=e;if(!g.current)return;j.lerp(y,Math.min(w*r*100,1)),M(t,r,n),F();let o=(0,l.Id)(C.x*d(j.x)),a=(0,l.Id)(C.y*d(j.y));if(P.subVectors(b,S),T.copy(P).cross(m).normalize(),P.applyAxisAngle(T,a).applyAxisAngle(m,-o).add(S),g.current.position.copy(P),g.current.lookAt(S),g.current.rotateY(k.x),g.current.rotateX(k.y),c.r8&&x.current){var i;null===(i=x.current)||void 0===i||i.position.copy(S)}},2),(0,n.jsxs)(n.Fragment,{children:[c.r8&&(0,n.jsx)("axesHelper",{ref:x,renderOrder:2,"material-depthTest":!1}),(0,n.jsx)(o.c,{fov:f,far:400,near:.01,...h,makeDefault:!0,manual:void 0!==h.aspect,ref:(0,i.l)([g,t]),children:v})]})})},4807:function(e,t,r){r.d(t,{G:function(){return u}});var n=r(4011),o=r(9477),a=r(4529),i=r(9012);let s=n.Ll.easeInOut,l=()=>({position:new o.Vector3(0,0,0),target:new o.Vector3(0,0,0),rotationAngle:new o.Vector2(0,0),targetUv:new o.Vector2(.5,.5),far:1e3,near:.1,fov:75}),u=e=>(0,a.Ue)((t,r)=>({name:e,tl:i.p8.timeline(),currentConfig:l(),prevConfig:l(),targetConfig:l(),isTransitioning:!1,firstSetup:!0,positionEasing:s,targetEasing:s,rotationLerp:.03,setCamera:(e,n)=>{let{targetConfig:o,currentConfig:a,prevConfig:l,tl:u,setCameraNoTransition:c,firstSetup:p}=r();if(n||p)return c(e);u.clear();let{position:m,target:d,positionEasing:v=s,targetEasing:f=s,rotationAngle:h=[0,0],rotationLerp:g=.03,targetUv:x=[.5,.5],duration:M=3*i.th,onComplete:y}=e;m&&o.position.set(...m),d&&o.target.set(...d),h&&o.rotationAngle.set(...h),x&&o.targetUv.set(...x),l.position.copy(a.position),l.target.copy(a.target),l.rotationAngle.copy(a.rotationAngle),l.targetUv.copy(a.targetUv);let j={value:0};u.to(j,{value:1,duration:M,ease:e=>e,onStart:()=>{t({rotationLerp:g,isTransitioning:!0})},onUpdate:()=>{let e=j.value;a.position.lerpVectors(l.position,o.position,v(e)),a.target.lerpVectors(l.target,o.target,f(e)),a.rotationAngle.lerpVectors(l.rotationAngle,o.rotationAngle,v(e)),a.targetUv.lerpVectors(l.targetUv,o.targetUv,f(e))},onComplete:()=>{l.position.copy(a.position),l.target.copy(a.target),l.rotationAngle.copy(a.rotationAngle),l.targetUv.copy(a.targetUv),t({isTransitioning:!1}),y&&y()}}),u.play()},setCameraNoTransition:e=>{let{position:n,target:o,rotationAngle:a=[0,0],targetUv:i=[.5,.5],positionEasing:l=s,targetEasing:u=s,rotationLerp:c=.03}=e,{tl:p,currentConfig:m,prevConfig:d,targetConfig:v}=r();p.clear(),[m,d,v].forEach(e=>{n&&e.position.set(...n),o&&e.target.set(...o),a&&e.rotationAngle.set(...a),i&&e.targetUv.set(...i)}),t({isTransitioning:!1,firstSetup:!1,positionEasing:l,targetEasing:u,rotationLerp:c})},raf:(e,t)=>{}}))},6396:function(e,t,r){r.d(t,{C$:function(){return s},Fj:function(){return i},Mm:function(){return l}});var n=r(4011),o=r(4529),a=r(4587);let i=(0,o.Ue)((e,t)=>({width:10,height:10,activeScene:"shop",scenes:a.Dk,setActiveScene:r=>{let{activeScene:o,scenes:a}=t();if(r===o)return;let i=a[o],s=i.cameraStore.getState(),l=a[r],u=l.cameraStore.getState();u.setCamera({...l.cameraConfig,rotationAngle:[0,0]},!0),e({activeScene:r}),setTimeout(()=>{u.setCamera({...l.cameraConfig,targetEasing:n.Ll.easeOut,positionEasing:n.Ll.easeOut,duration:1}),s.setCamera({...i.cameraConfig,rotationAngle:[0,0]},!0)},100)}})),s=i.getState().scenes.intro.cameraStore,l=i.getState().scenes.shop.cameraStore},4587:function(e,t,r){r.d(t,{S:function(){return eY},Dk:function(){return eK},DR:function(){return eG}});var n=r(5893),o=r(5918),a=r(793),i=r(990),s=r(1163),l=r(7294),u=r(9477),c=r(4529),p=r(9354),m=r(2653),d=r(6396),v=r(6772);let f=(e,t,r,n)=>r.clone().add(n.clone().multiplyScalar(t/2/Math.tan(Math.PI/180*e/2)));var h=r(2686),g=r(5769),x=r(9040),M=r(6688),y=r(6103),j=r(5914),b=r(1497),S=r(295);let C="\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\nuniform sampler2D drawMap;\nuniform sampler2D brushTexture;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform float revealFactor;\nuniform float aspectRatio;\nuniform sampler2D canvasNormal;\nuniform float normalInfluence;\nuniform vec2 uResolution;\nuniform bool renderReveal;\n\n".concat(S.ol,"\n").concat(S.TR,"\n\nfloat getEdges(vec2 uv) {\n  vec2 onePixel = vec2(1.0 / uResolution.x, 1.0 / uResolution.y);\n  vec3 tc = texture2D(tDiffuse, uv).rgb;\n  vec3 tcRight = texture2D(tDiffuse, uv + vec2(onePixel.x, 0.0)).rgb;\n  vec3 tcUp = texture2D(tDiffuse, uv + vec2(0.0, onePixel.y)).rgb;\n  \n  float dx = length(tcRight - tc);\n  float dy = length(tcUp - tc);\n  float edges = dx * dx + dy * dy;\n\n  float edgeThreshold = 0.25;\n  edgeThreshold *= edgeThreshold;\n\n  // Antialiasing\n  float aa = fwidth(edges);\n  return 1.0 - smoothstep(edgeThreshold, edgeThreshold + aa, edges) * 0.6;\n}\n\nfloat easeInQuad(float t) {\n  return t * t;\n}\n\nfloat getRevealSdf(float radius) {\n  vec2 center = vec2(-0.3, -0.4);\n  vec2 uv = vUv * 2.0 - vec2(1., 1.);\n  uv.x *= aspectRatio;\n  float sdf = length(uv - center) - radius;\n  return sdf;\n}\n\nstruct Reveal {\n  vec3 color;\n  float factor;\n};\n\nReveal getReveal() {\n  vec3 color = texture2D(tDiffuse, vUv).rgb;\n  if (!renderReveal) {\n    return Reveal(color, 1.0);\n  }\n  // edges\n  float edges = getEdges(vUv);\n  vec3 edgesColor = vec3(edges);\n\n  // brush\n  vec2 brushUv = vUv * 4.0 * vec2(aspectRatio, 1.0);\n  float brush = 1.0 - length(texture2D(brushTexture, brushUv).rgb);\n\n  float depthBrushTransition = 0.2;\n  float revealTransition = 0.1;\n\n  float revealDepth = getRevealSdf(0.1) + brush * depthBrushTransition;\n  float revealF = valueRemap(revealFactor, 0.0, 1.0, 0.0 - depthBrushTransition, 1.7 + depthBrushTransition);\n  float reveal = smoothstep(revealF, revealF + revealTransition, revealDepth);\n  \n  vec2 drawUv = vUv + vec2(brush * 0.04);\n  float drawFactor = texture2D(drawMap, drawUv).r;\n  reveal = 1. - clamp(reveal - drawFactor, 0.0, 1.0);\n  \n  return Reveal(mix(edgesColor, color, reveal), reveal);\n}\n\nvoid main() {\n  Reveal reveal = getReveal();\n  vec3 color = reveal.color;\n  float revealFactor = reveal.factor;\n\n  vec3 normalMap = texture2D(canvasNormal, vUv * 2.3).rgb;\n  vec3 normal = normalize(normalMap * 2.0 - 1.0);\n  vec3 lightDir = normalize(vec3(1.0, 1.5, 1.4));\n  float diff = max(dot(normal, lightDir), 0.0);\n  diff = valueRemap(diff, 0.0, 1.0, -0.15, 1.0);\n\n  float normalFactor = normalInfluence * valueRemap(revealFactor, 0.0, 1.0, 1.0, 0.6);\n  diff = mix(1.0, diff, normalFactor);\n\n  color *= diff;\n  color = clamp3(color);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"),w="\nvarying vec2 vUv;\nvarying vec3 vPos;\n\nuniform float time;\nuniform float transitionOpacity;\n\n".concat(S.ol,"\n\nfloat easeInOutQuad(float t) {\n  return t<.5 ? 2.*t*t : -1.+(4.-2.*t)*t;\n}\n\n// p: pixel position\n// position: 0. to 1. (0.5 is the center)\nfloat getHighlightSdf(vec3 p, float position) {\n  \n  float maxOffset = 1.3;\n\n  float offset = valueRemap(position, 0.0, 1.0, maxOffset, -maxOffset);\n\n  float lineWith = 0.1;\n  float sdf = abs(p.x + offset + p.y * -0.3) - lineWith;\n  sdf = clamp(sdf, 0.0, 1.0);\n  float factor = sdf > 0.0 ? 0.0 : 1.0;\n  return factor;\n}\n\nvoid main() {\n\n  float displacement = mod(time, 2.5);\n  displacement = clamp(displacement, 0., 1.);\n  displacement = easeInOutQuad(displacement);\n\n  float highlight = getHighlightSdf(vPos, displacement);\n\n  vec3 color = vec3(1.0);\n  float alpha = highlight * 0.5;\n  alpha *= transitionOpacity;\n  \n  gl_FragColor = vec4(color, alpha);\n  \n}\n"),R=(0,c.Ue)((e,t)=>{let r={tDiffuse:{value:null},cameraNear:{value:.1},cameraFar:{value:90},revealFactor:{value:0},brushTexture:{value:null},aspectRatio:{value:1},drawMap:{value:null},mouseUv:{value:new u.Vector2(.5,.5)},delta:{value:0},brushSize:{value:0},canvasNormal:{value:null},normalInfluence:{value:1},uResolution:{value:new u.Vector2(0,0)},renderReveal:{value:!1}};return{renderReveal:!1,uniforms:r,revealMainPass:new y.T({uniforms:r,vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:C}),setUniforms:e=>{let{uniforms:r,revealMainPass:n}=t();Object.entries(e).forEach(e=>{let[t,o]=e;n.uniforms[t].value=o,r[t].value=o})},setRenderReveal:r=>{let{revealMainPass:n}=t();n.uniforms.renderReveal.value=r,e({renderReveal:r})}}}),P=new u.Vector3(-.78,-2.1,-1.48),T=new u.Vector3(0,0,0),k=new u.Vector3(0,0,1),F=new u.Euler(T.x,T.y,T.z,"XYZ"),U=k.clone().applyEuler(F),_=()=>{let e=(0,a.A)(e=>e.size),t=e.width/e.height,r=(0,d.Fj)(e=>e.scenes.shop.portalRenderTexture);return(0,n.jsxs)("mesh",{position:P,children:[(0,n.jsx)("meshBasicMaterial",{attach:"material",map:r}),(0,n.jsx)("planeGeometry",{attach:"geometry",args:[.3*t,.3]})]})};(0,c.Ue)(()=>({opacity:0}));var E=r(9594),A=r(4648),D=r(9542),B=r(604),O=r(5323),I=r(4918),z=r(9012),V=r(7854),L=r(743),N=e=>{let{hover:t,isPlaying:r}=e,o=(0,L.R)(),a=(0,l.useMemo)(()=>!r&&t&&!o,[r,t,o]);return(0,n.jsx)(V.V,{center:!0,position:[0,1.2,0],wrapperClass:"product-wrapper",style:{transition:"all 0.5s",opacity:a?1:0,visibility:a?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product la-casa",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:"LA CASA DENIM JACKET"})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"BY KIDSUPER"})})]})})};let W=(e,t)=>{let[r,n]=(0,l.useState)(!1),{setCursor:o,resetCursor:a}=(0,m.j)();return{hover:r,handlePointerOut:(0,l.useCallback)(t=>{e&&(t.stopPropagation(),n(!1),a())},[e,a]),handlePointerOver:(0,l.useCallback)(r=>{e&&(r.stopPropagation(),n(!0),t?o("default"):o("pointer"))},[t,e,o])}},Z="\nfloat getRevealFactor(vec3 wPos, float transition) {\n  float yMin = -1.7;\n  float yMax = 0.1;\n\n  float topMask = valueRemap(revealTop, 0.0, 1.0, yMin, yMax);\n  float bottomMask = valueRemap(revealBottom, 0.0, 1.0, yMin, yMax);\n\n  float revealTopFactor = 1.0 - clamp((wPos.y - topMask) * transition, 0.0, 1.0);\n\n  float revealBottomFactor = 1.0 - clamp((bottomMask - wPos.y)  * transition, 0.0, 1.0);\n\n  float revealFactor = min(revealTopFactor, revealBottomFactor);\n\n  return revealFactor;\n}\n",G="\n// uniforms\nuniform float revealTop;\nuniform float revealBottom;\nuniform sampler2D map;\nuniform sampler2D brushMap;\n\n// varyings\nvarying vec3 wPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n// utils\n".concat(S.ol,"\n").concat(Z,"\n\nvoid main() {\n  vNormal = normal;\n  vUv = uv;\n\n  // calcualte world position\n  wPos = (modelMatrix * vec4(position, 1.0)).xyz;\n\n  // calculate offset\n  float revealFactor =  1.0 - getRevealFactor(wPos, 5.0);\n\n  // transform pos with offset\n  vec3 pos = position;\n  pos += normalize(normal) * revealFactor * 100.0;\n\n  // recalculate world pos after transform\n  wPos = (modelMatrix * vec4(pos, 1.0)).xyz;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"),Y="\n// uniforms\nuniform float revealTop;\nuniform float revealBottom;\nuniform sampler2D map;\nuniform sampler2D brushMap;\n\n// varyings\nvarying vec3 wPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n// utils\n".concat(S.ol,"\n").concat(Z,"\n\nvoid main() {\n\n  vec2 brushUv = vUv * 5.0;\n  float brushFactor = texture2D(brushMap, brushUv).r;\n  brushFactor = valueRemap(brushFactor, 0.0, 1.0, -0.1, 0.1);\n  float revealFactor =  getRevealFactor(wPos + brushFactor, 30.);\n\n  vec3 color = texture2D(map, vUv).rgb;\n  gl_FragColor = vec4(color, revealFactor);\n}\n"),K=e=>{let{src:t,isActive:r}=e,a=(0,d.Mm)(e=>e.setCamera),c=(0,l.useRef)(r),{scene:p}=(0,o.L)(t),m=(0,O.cB)(),f=(0,s.useRouter)(),h=(0,l.useMemo)(()=>"lacasa-jacket",[]),x=(0,l.useMemo)(()=>f.asPath==="/store/product/"+h,[h,f.asPath]),M=(0,g.m)("/textures/paint-brush-mask.webp",e=>{e.wrapS=e.wrapT=u.RepeatWrapping,e.repeat.set(3,3)}),y=(0,l.useCallback)(()=>{},[h,r,f]),[j,b]=(0,v.U)({revealTop:r||x?1:0,revealBottom:0,map:null,brushMap:M}),S=(0,l.useMemo)(()=>{let e=p.clone(!0);return e.traverse(e=>{if("Mesh"===e.type){var t;let r=e.material;e.material=new u.ShaderMaterial({uniforms:{...j,map:{value:null===(t=r.map)||void 0===t?void 0:t.clone()}},vertexShader:G,fragmentShader:Y,transparent:!0})}}),e},[p,j]),{hover:C,handlePointerOut:w,handlePointerOver:R}=W(r&&!1,x);(0,l.useEffect)(()=>{c.current!==r&&(c.current=r,b({revealTop:r||x?0:1,revealBottom:0}),i.ZP.to(j.revealTop,{value:1,delay:1.5,duration:6*z.th}),i.ZP.to(j.revealBottom,{value:r||x?0:1,delay:1.5,duration:6*z.th}))},[x,r,b,j]);let P=(0,l.useMemo)(()=>[.8,-.4,3.7],[]);return(0,l.useEffect)(()=>{x&&a({position:P,target:A.Fu,targetUv:m?[.5,.3]:[.5,.5]})},[x,m,P,a]),(0,n.jsxs)("group",{children:[r&&!m&&(0,n.jsx)(N,{hover:C,isPlaying:!1}),(0,n.jsx)("primitive",{onClick:y,object:S}),(0,n.jsxs)("mesh",{position:[0,1,0],onPointerOut:e=>m?null:w(e),onPointerOver:e=>m?null:R(e),children:[(0,n.jsx)("boxGeometry",{args:[.6,1.4,.6]}),(0,n.jsx)("meshBasicMaterial",{color:"#fff",visible:I.r8,wireframe:I.r8})]})]})};var q=e=>{let{hover:t,isPlaying:r}=e,o=(0,L.R)(),a=(0,l.useMemo)(()=>!r&&t&&!o,[r,t,o]);return(0,n.jsx)(V.V,{center:!0,wrapperClass:"product-wrapper",style:{transition:"all 0.5s",opacity:a?1:0,visibility:a?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product la-casa",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:"la casaâ„¢"})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"Run!"})})]})})};let X=e=>{let[t,r]=(0,l.useState)(!1),{setCursor:n,resetCursor:o}=(0,m.j)();return{hover:t,handlePointerOut:(0,l.useCallback)(e=>{e.stopPropagation(),r(!1),o()},[o]),handlePointerOver:(0,l.useCallback)(t=>{t.stopPropagation(),r(!0),e?o():n("pointer")},[e,o,n])}},Q=new u.Vector3(0,0,-1),H=e=>{let{slug:t,canvasPosition:r,canvasRotation:o,canvasSize:a,CanvasScene:i}=e,[c,p]=(0,l.useState)(!1),m=(0,s.useRouter)(),v=(0,O.cB)(),f=(0,g.m)("/textures/canvas-normal.webp",e=>{e.wrapS=e.wrapT=u.RepeatWrapping,e.repeat.set(1.5,1.5)}),x=(0,d.Mm)(e=>e.setCamera),M=(0,l.useCallback)(()=>{if("/store"!==m.asPath)return;let e=new AbortController;m.push("/store"),setTimeout(()=>{if(e.signal.aborted)return;p(!0);let t=new u.Euler(o[0],o[1],o[2],"XYZ");x({target:r,position:Q.clone().applyEuler(t).multiplyScalar(2.3*a[1]).add(new u.Vector3().set(...r)).toArray(),rotationAngle:[5,5],rotationLerp:.02})},10);let n=B.q.getState().active!==t;return n&&setTimeout(()=>{e.signal.aborted||(B.q.setState({active:t}),p(!1),x({position:[1.5,-.6,3],target:[1.3,-.6,9.6],rotationAngle:[2,2],targetUv:[.33,.5],rotationLerp:.03}))},6e3),setTimeout(()=>{p(!1),e.signal.aborted||x(eG)},n?9e3:6e3),()=>{e.abort(),p(!1)}},[x,r,o,a,m,t]),{hover:y,handlePointerOut:j,handlePointerOver:b}=X(c);return(0,n.jsxs)("mesh",{onClick:M,onPointerEnter:b,onPointerLeave:j,position:r,rotation:o.map(e=>(0,D.Id)(e)),children:[!v&&(0,n.jsx)(q,{hover:y,isPlaying:c}),(0,n.jsx)("boxGeometry",{args:[a[0],a[1],.01]}),(0,n.jsx)("meshPhysicalMaterial",{normalMap:f,normalScale:J,children:(0,n.jsx)(h.TI,{width:500*a[0],height:500*a[1],isPlaying:c,attach:"map",children:(0,n.jsx)(i,{aspectRatio:a[0]/a[1]})})})]})},J=new u.Vector2(2,2);var $=()=>{let e=(0,B.q)(e=>e.active);return(0,n.jsx)(n.Fragment,{children:B.k.map(t=>(0,n.jsxs)("group",{children:[(0,n.jsx)("group",{position:[1.29,-1.7,9.595],rotation:[0,(0,D.Id)(180),0],children:(0,n.jsx)(K,{src:t.collectionModel,isActive:t.slug===e})}),(0,n.jsx)(H,{...t})]},t.slug))})},ee=r(3442),et=r(3857),er=r(9e3),en=r(3346),eo=r(8815),ea=r(5876),ei=r(9946),es=r(3493),el=r.n(es),eu=r(8446),ec=r.n(eu),ep=r(7485);(0,a.e)({MeshLineGeometry:ep.Rt,MeshLineMaterial:ep.r7});let em={lineWidth:.12,color:"#0c0936",brushes:5,dots:2},ed=Array.from({length:em.brushes},(e,t)=>"/textures/brushes/brush-".concat(t+1,".png")),ev=Array.from({length:em.dots},(e,t)=>"/textures/brushes/dot-".concat(t+1,".png")),ef=e=>{let{position:t,rotation:r,active:o,handleUIButtonsHover:a,...i}=e,c=(0,l.useRef)(null),p=(0,l.useRef)(null),d=(0,l.useRef)(null),[v,f]=(0,l.useState)(!1),[h,x]=(0,l.useState)([]),M=(0,l.useRef)(null),[y,j]=(0,l.useState)({points:[],color:em.color,lineWidth:em.lineWidth}),b=(0,g.m)(ed),S=(0,g.m)(ev),C=(0,s.useRouter)(),{setCursor:w,resetCursor:R}=(0,m.j)(),P=(0,l.useCallback)(e=>({onPointerEnter:()=>{a(e,!0),w("pointer")},onPointerLeave:()=>{a(e,!1),R()}}),[a,R,w]),T=(0,l.useCallback)(()=>({onPointerEnter:()=>{w("paint")}}),[w]),k=(0,l.useCallback)(()=>{C.push("/store")},[C]);(0,l.useEffect)(()=>{d.current&&d.current.geometry.computeBoundingBox()},[]),(0,ea.Z)(()=>{c.current&&p.current&&(o?(z.p8.set(p.current,{visible:!0,delay:2.7}),z.p8.set(c.current,{visible:!0,delay:2.7})):(z.p8.set(c.current,{visible:!1,delay:.5}),z.p8.set(p.current,{visible:!1})))},[o]);let F=(0,l.useCallback)(e=>{if(!d.current)return;let t=d.current.geometry.boundingBox.getSize(new u.Vector3),r=(e.x-.5)*t.x,n=(e.y-.5)*t.y;return new u.Vector3(r,n,0)},[]),U=(0,l.useCallback)(e=>{var t;if(!e.uv)return;let r=b[Math.floor(Math.random()*em.brushes)],n=null!==(t=F(e.uv))&&void 0!==t?t:new u.Vector3(0,0,0);M.current=n,f(!0),j(e=>({...e,brushTexture:r,points:[n]}))},[b,F]),_=(0,l.useCallback)(()=>{0!==y.points.length&&(f(!1),!ec()(y,h[h.length-1])&&y.points.length>0&&x(e=>[...e,y]),j(()=>({color:em.color,lineWidth:em.lineWidth,points:[]})))},[y,h]),E=(0,l.useCallback)(()=>{R(),_()},[_,R]),A=(0,l.useMemo)(()=>el()(e=>{if(v){if(!e.uv)return;let t=F(e.uv);t&&j(e=>({...e,points:[...e.points,t]}))}},20),[F,v]),D=(0,l.useCallback)(()=>{0!==h.length&&(x([]),j(e=>({...e,points:[]})))},[h.length]),B=(0,l.useCallback)(()=>{0!==h.length&&(h.length>0&&x(e=>e.slice(0,e.length-1)),j(e=>({...e,points:[]})))},[h.length]);return(0,n.jsxs)("group",{position:t,rotation:r,children:[(0,n.jsxs)("group",{ref:c,name:"lines",children:[h.map((e,t)=>(0,n.jsx)(eh,{dotsTextures:S,...e},t)),(0,n.jsx)(eh,{isCurrentLine:!0,...y}),(0,n.jsxs)("mesh",{position:[-.05,0,0],ref:d,...i,onPointerDown:U,onPointerUp:_,onPointerLeave:E,onPointerMove:A,...T(),children:[(0,n.jsx)("planeGeometry",{args:[1.15,1.05]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]})]}),(0,n.jsxs)("group",{ref:p,name:"ui",children:[(0,n.jsxs)("mesh",{name:"delete",onClick:D,position:[-.54,.595,0],raycast:en.l,...P("_DELETE"),children:[(0,n.jsx)("planeGeometry",{args:[.1,.1]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]}),(0,n.jsxs)("mesh",{name:"undo",onClick:B,...P("_UNDO"),position:[-.35,.6,0],raycast:en.l,children:[(0,n.jsx)("planeGeometry",{args:[.1,.1]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]}),(0,n.jsx)("group",{name:"close-button",onClick:k,...P("_CLOSE"),position:[.55,.67,0],raycast:en.l,children:(0,n.jsxs)("mesh",{position:[-.06,-.08,0],children:[(0,n.jsx)("planeGeometry",{args:[.07,.07]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]})})]})]})},eh=(0,l.memo)(e=>{let{points:t,brushTexture:r,isCurrentLine:o,dotsTextures:a,...i}=e,s=(0,l.useMemo)(()=>{if(1!==t.length||o)return{points:t};{let e=10*em.lineWidth*.01;return{points:[new u.Vector3(t[0].x,t[0].y,0),new u.Vector3(t[0].x+e,t[0].y,0),new u.Vector3(t[0].x,t[0].y+e,0),new u.Vector3(t[0].x+e,t[0].y+e,0)]}}},[o,t]),c=(0,l.useMemo)(()=>{let e={useMap:1,blending:u.NormalBlending,resolution:new u.Vector2(100,100),alphaTest:.1,transparent:!0,depthTest:!1,opacity:1,toneMapped:!1,sizeAttenuation:1,...i};return 1===t.length&&!o&&a?{map:a[Math.floor(Math.random()*em.dots)],repeat:new u.Vector2(1.6,1),...e}:{map:r,repeat:new u.Vector2(.8,1.3),...e}},[r,a,o,t.length,i]);return(0,n.jsxs)("mesh",{raycast:ep.sP,position:[0,0,.01],...i,children:[(0,n.jsx)("meshLineGeometry",{...s}),(0,n.jsx)("meshLineMaterial",{...c})]})}),eg=()=>{let e=(0,l.useRef)(!0),t=(0,l.useRef)(null),r=(0,l.useRef)(null),{scene:a,animations:i}=(0,o.L)("/models/notebook.glb"),{actions:c}=(0,et.v)(i,t),p=(0,s.useRouter)(),[m,d]=(0,l.useState)(!1),v=(0,l.useMemo)(()=>"/store/notebook"===p.pathname,[p.pathname]);(0,l.useEffect)(()=>{d(v)},[v,d]);let f=(0,l.useCallback)(()=>{p.push("/store")},[p]);(0,ea.Z)(()=>{i.forEach(e=>{let t=c[e.name];t&&(t.reset(),t.clampWhenFinished=!0,t.timeScale=2,t.setLoop(u.LoopOnce,1))})},[c,i]);let h=r.current;(0,l.useEffect)(()=>{if(!h)return;let t=null,r=c.Open,n=c.Close;if(r&&n)return n.isRunning()||n.reset(),n.crossFadeFrom(r,.8,!0),n.play(),m?(e.current=!1,t=z.p8.timeline({onStart:()=>{eo.q.setState({canvasEventsEnabled:!1})},defaults:{duration:z.th,ease:"power3.out"}}).fromTo(h.position,{y:-4},{y:.7}).fromTo(h.rotation,{y:Math.PI/2},{y:0,duration:1.4*z.th},"<").fromTo(h.position,{x:-1,z:-1},{x:.017,z:-2},"<").fromTo(h.position,{z:-2},{z:0,onStart:()=>{r.isRunning()||r.reset(),r.crossFadeFrom(n,.8,!0),r.play()}}).delay(1.3)):t=z.p8.timeline({onStart:()=>{n.isRunning()||n.reset(),n.crossFadeFrom(r,.8,!0),n.play()},onComplete:()=>{eo.q.setState({canvasEventsEnabled:!0}),e.current=!1},defaults:{duration:z.th,ease:"power3.in"}}).fromTo(h.position,{x:.017,z:0},{x:-.87,z:-1}).fromTo(h.rotation,{y:0},{y:Math.PI/2},"<").fromTo(h.position,{y:.7},{y:-4,delay:.3}).timeScale(e.current?10:1),()=>{null==t||t.revert()}},[c,m,h]);let g=(0,l.useCallback)(e=>{e.intersections.some(e=>"notebook-zone"===e.object.name)||e.intersections.find(e=>{"close-zone"===e.object.name&&f()})},[f]);(0,l.useEffect)(()=>{t.current&&t.current.traverse(e=>{("_DELETE"===e.name||"_UNDO"===e.name||"_CLOSE"===e.name)&&(e.visible=!1)})},[]);let x=(0,l.useCallback)((e,r)=>{if(!t.current)return;let n=t.current.getObjectByName(e);n&&(n.visible=r)},[]);return(0,n.jsxs)("group",{ref:r,position:[-.87,-4,-2],rotation:[0,Math.PI/2,0],children:[(0,n.jsx)(er.M,{children:(0,n.jsx)("primitive",{ref:t,object:a})}),(0,n.jsx)(ef,{active:m,position:[.8,-.7,.4],handleUIButtonsHover:x}),(0,n.jsx)(ex,{position:[.8,-1.585,.4]}),(0,n.jsxs)("group",{name:"overlay",onClick:g,raycast:en.l,children:[(0,n.jsxs)("mesh",{name:"notebook-zone",position:[-.02,-.88,0],children:[(0,n.jsx)("planeGeometry",{args:[3.18,1.93]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]}),(0,n.jsxs)("mesh",{name:"close-zone",position:[0,-1,-.1],children:[(0,n.jsx)("planeGeometry",{args:[10,5]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]})]})]})},ex=e=>{let t=(0,a.A)(e=>e.gl),r=(0,a.A)(e=>e.scene),o=(0,a.A)(e=>e.camera),{setCursor:i,resetCursor:s}=(0,m.j)(),u=(0,l.useCallback)(async()=>{if(!o||!r)return;t.render(r,o);let e=t.domElement.toDataURL("image/jpeg",.8),n=(0,ei.OP)(e),a=await fetch("/api/store?filename=screenshot.jpg",{method:"POST",body:n}),i=await a.json(),s={text:encodeURIComponent("#KidsuperWorld is a space to share my art and unreal ideas. \n\n".concat(I.f7,"api/screenshot?imageUrl=").concat(i.url))};window.open("https://twitter.com/intent/tweet?text=".concat(s.text),"_blank")},[o,t,r]);return(0,n.jsxs)("mesh",{onClick:u,onPointerEnter:()=>i("pointer"),onPointerLeave:()=>s(),...e,children:[(0,n.jsx)("planeGeometry",{args:[1.12,.15]}),(0,n.jsx)("meshBasicMaterial",{transparent:!0,opacity:0})]})};var eM=()=>(0,n.jsxs)(ee._K.In,{children:[(0,n.jsx)(E.qA,{preset:"forest"}),(0,n.jsx)(eg,{})]}),ey=r(1804),ej=r.n(ey),eb=r(6509),eS=r(6913),eC=r(7833),ew=r(2201),eR=()=>{let{products:e}=(0,eb.GS)(),t=(0,s.useRouter)(),r=(0,l.useCallback)(async(e,r)=>{e.stopPropagation(),await t.push("/store/product/"+r)},[t]);return e?Object.keys(e).map(t=>{if(!e[t]||!e[t]._productR3FGroupProps)return null;let{title:o,...a}=e[t]._productR3FGroupProps;switch(t){case"kissingBag":return(0,n.jsx)(eS.Z,{onClick:e=>r(e,ej()(o)),handle:ej()(o),title:o,...a},o);case"miniKissingBag":return(0,n.jsx)(eS.Z,{onClick:e=>r(e,ej()(o)),handle:ej()(o),title:o,...a},o);case"lowBootsWithSwirls":return(0,n.jsx)(ew.Z,{onClick:e=>r(e,ej()(o)),handle:ej()(o),title:o,...a},o);case"kissingPuffer":return(0,n.jsx)(eC.Z,{onClick:e=>r(e,ej()(o)),handle:ej()(o),title:o,...a},o);default:return null}}):null},eP=r(2977),eT=r(1182);let ek=e=>{let{actions:t,isPlaying:r}=e;(0,ea.Z)(()=>{[t.Start,t.Stop].forEach(e=>{e&&(e.reset(),e.clampWhenFinished=!0,e.timeScale=2,e.setLoop(u.LoopOnce,1))})},[t]),(0,ea.Z)(()=>{let e=t.Start,n=t.Stop,o=t["Play-Loop"];null==o||o.setLoop(u.LoopRepeat,1/0),e&&n&&o&&(r?(!o.isRunning()&&o.reset()&&o.play(),!e.isRunning()&&e.reset()&&e.crossFadeFrom(n,z.th,!0)&&e.play()):(o.isRunning()&&o.stop(),!n.isRunning()&&n.reset()&&n.crossFadeFrom(e,z.th,!0)&&n.play()))},[t,r])};var eF=e=>{let{children:t,...r}=e,a=(0,l.useRef)(null),{nodes:i,materials:u,animations:c}=(0,o.L)("/models/winco.glb"),{actions:p}=(0,et.v)(c,a),{pauseAllTracks:m,isPlaying:d,isOpen:v}=(0,eP.U)();ek({actions:p,isPlaying:d});let f=(0,s.useRouter)(),h=(0,l.useCallback)(()=>{m(),f.push("/store")},[m,f]);return(0,n.jsx)("group",{...r,dispose:null,onClick:()=>v?h():f.push("/winco"),ref:a,children:(0,n.jsxs)("group",{name:"Scene",children:[t,(0,n.jsxs)("group",{name:"BOX",children:[(0,n.jsx)("mesh",{name:"BOX",geometry:i.BOX.geometry,material:u["Material.001"],scale:[1,.2,1]}),(0,n.jsxs)("group",{name:"Armature",position:[.725,.329,-.717],children:[(0,n.jsxs)("group",{name:"PASTA",children:[(0,n.jsx)("skinnedMesh",{name:"Cube001",geometry:i.Cube001.geometry,material:u["Material.002"],skeleton:i.Cube001.skeleton}),(0,n.jsx)("skinnedMesh",{name:"Cube001_1",geometry:i.Cube001_1.geometry,material:u["Material.005"],skeleton:i.Cube001_1.skeleton})]}),(0,n.jsx)("skinnedMesh",{name:"Pua",geometry:i.Pua.geometry,material:u["Material.001"],skeleton:i.Pua.skeleton}),(0,n.jsx)("primitive",{object:i.base}),(0,n.jsx)("primitive",{object:i.neutral_bone})]}),(0,n.jsx)("mesh",{name:"METAL",geometry:i.METAL.geometry,scale:[1,.2,1],children:(0,n.jsx)(eT.a,{})})]})]})})},eU=e=>{let{active:t,hover:r}=e;return(0,n.jsx)(V.V,{wrapperClass:"product-wrapper",center:!0,style:{transition:"all 0.5s",opacity:!t&&r?1:0,visibility:!t&&r?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:"Player"})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"Inspiring music"})})]})})};let e_=()=>{let[e,t]=(0,l.useState)(!1),{setCursor:r,resetCursor:n}=(0,m.j)();return{hover:e,handlePointerOut:(0,l.useCallback)(e=>{e.stopPropagation(),t(!1),n()},[n]),handlePointerOver:(0,l.useCallback)(e=>{e.stopPropagation(),t(!0),r("pointer")},[r])}};var eE=e=>{let{setOpen:t}=(0,eP.U)(),r=(0,s.useRouter)(),o=(0,l.useMemo)(()=>"/winco"===r.route,[r.route]),a=(0,O.cB)(),{hover:i,handlePointerOut:u,handlePointerOver:c}=e_();return(0,ea.Z)(()=>{o?t(!0):t(!1)},[o,t]),(0,n.jsxs)(eF,{...e,onPointerOut:e=>!a&&o?u(e):null,onPointerOver:e=>!a&&o?c(e):null,children:[!a&&(0,n.jsx)(eU,{active:o,hover:i}),!o&&(0,n.jsxs)("mesh",{position:[0,0,0],onPointerOut:e=>a?null:u(e),onPointerOver:e=>a?null:c(e),children:[(0,n.jsx)("boxGeometry",{args:[3,2,3]}),(0,n.jsx)("meshBasicMaterial",{color:"#fff",visible:I.r8,wireframe:I.r8})]})]})},eA=e=>{let{hover:t}=e,r=(0,L.R)(),o=(0,s.useRouter)(),a=(0,l.useMemo)(()=>"/store/notebook"===o.pathname,[o.pathname]),i=(0,l.useMemo)(()=>t&&!r&&!a,[t,r,a]);return(0,n.jsx)(V.V,{center:!0,position:[0,.1,0],wrapperClass:"product-wrapper",style:{transition:"all 0.5s",opacity:i?1:0,visibility:i?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product notebook",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:"Notebook"})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"Draw"})})]})})};let eD=()=>{let[e,t]=(0,l.useState)(!1),{setCursor:r,resetCursor:n}=(0,m.j)();return{hover:e,handlePointerOut:(0,l.useCallback)(e=>{e.stopPropagation(),t(!1),n()},[n]),handlePointerOver:(0,l.useCallback)(e=>{e.stopPropagation(),t(!0),r("pointer")},[r])}},eB="/store/notebook";var eO=e=>{let t=(0,l.useRef)(null),{nodes:r,materials:a}=(0,o.L)("/models/KS_Book.glb"),i=(0,O.cB)(),u=(0,s.useRouter)(),c=(0,l.useCallback)(()=>{u.push(eB)},[u]),{hover:p,handlePointerOut:m,handlePointerOver:d}=eD(),v=(0,l.useMemo)(()=>u.pathname===eB,[u]);return(0,l.useEffect)(()=>{v?z.p8.to(t.current.scale,{x:0,y:0,z:0,delay:1}):z.p8.to(t.current.scale,{x:1,y:1,z:1})},[v]),(0,n.jsxs)("group",{...e,onClick:c,onPointerEnter:d,onPointerLeave:m,position:[1,1.22,-13.9],scale:1,children:[!i&&(0,n.jsx)(eA,{hover:p}),(0,n.jsx)("mesh",{ref:t,geometry:r.SM_Book.geometry,material:a["M_BookBake.001"],position:[0,0,0],scale:1})]})},eI=e=>{let{nodes:t,materials:r}=(0,o.L)("/models/room/KS_Sky.glb");return(0,n.jsx)("group",{...e,dispose:null,children:(0,n.jsx)("mesh",{geometry:t.SM_Sky.geometry,material:r.M_Sky,position:[18.465,1.428,-25.862],rotation:[Math.PI/2,0,.913],scale:[33,16.466,16.466]})})};let ez=e=>{let{desktopModel:t,mobileModel:r}=e,o=(0,l.useRef)(null),i=(0,l.useRef)("high"),[s,c]=(0,l.useState)("high"),p=(0,eo.q)(e=>e.appQuality);(0,l.useEffect)(()=>{let e=i.current,t=p>0?"high":"low";e!==t&&(i.current=t,c(t))},[p]);let m=(0,a.A)(e=>e.gl),{nodes:d,materials:v}=(0,l.useMemo)(()=>{let e=m.capabilities.getMaxAnisotropy()||1,{nodes:n,materials:o}=t,{nodes:a,materials:i}=r;return Object.values(o).forEach(t=>{t.map&&(t.map.anisotropy=e)}),Object.values(i).forEach(t=>{t.map&&(t.map.anisotropy=Math.min(e,4))}),{nodes:"low"===s?a:n,materials:"low"===s?i:o}},[t,r,s,m]),f=(0,l.useMemo)(()=>{var e;let t=null===(e=v.M_PaintsPoster.map)||void 0===e?void 0:e.clone();return t&&(t.anisotropy=8),new u.MeshBasicMaterial({map:t,color:v.M_PaintsPoster.color.clone(),transparent:v.M_PaintsPoster.transparent,opacity:v.M_PaintsPoster.opacity})},[v.M_PaintsPoster]);return(0,n.jsxs)("group",{dispose:null,position:[-.4,-1.7,0],ref:o,rotation:[0,Math.PI,0],children:[(0,n.jsxs)("group",{rotation:[Math.PI/2,0,.088],children:[(0,n.jsx)("mesh",{geometry:d.SM_Assets01001.geometry,material:v.M_Asset01}),(0,n.jsx)("mesh",{geometry:d.SM_Assets_Base.geometry,material:v.M_Asset01,position:[-2.531,-9.414,.019]}),(0,n.jsx)("mesh",{geometry:d.SM_Assets_Naza.geometry,material:v.M_Asset01,position:[-2.531,-9.414,.019]})]}),(0,n.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,n.jsx)("mesh",{geometry:d.SM_BoxPaint002.geometry,material:v.M_PaintsPoster}),(0,n.jsx)("mesh",{geometry:d.SM_BoxPaint_FIX.geometry,material:f})]}),(0,n.jsx)("mesh",{geometry:d.M_Floor02001.geometry,material:v.M_Floor02}),(0,n.jsx)("mesh",{geometry:d.Cylinder.geometry,material:v.M_Ink,rotation:[-3.01,.626,1.521]}),(0,n.jsx)("mesh",{geometry:d.SM_Fafric01001.geometry,material:v.M_Fabric01,rotation:[Math.PI/2,0,0]}),(0,n.jsx)("mesh",{geometry:d.SM_Floor.geometry,material:v.M_Floor01}),(0,n.jsx)("mesh",{geometry:d.SM_Furniture001.geometry,material:v.M_Furniture01}),(0,n.jsx)("mesh",{geometry:d.SM_Furniture02001.geometry,material:v.M_Furniture02,rotation:[Math.PI/2,-Math.PI/2,0]}),(0,n.jsx)("mesh",{geometry:d.SM_MosteraFlowerpot001.geometry,material:v.M_Plants}),(0,n.jsx)("mesh",{geometry:d.SM_PaintCasa001.geometry,material:v.DefaultMaterial,rotation:[Math.PI/2,0,0]}),(0,n.jsx)("mesh",{geometry:d.SM_BoxPaint001.geometry,material:v["M_Vinyl-Roll"],rotation:[Math.PI/2,0,0]}),(0,n.jsx)("mesh",{geometry:d.SM_Plinth001.geometry,material:v.M_Plinth}),(0,n.jsx)("mesh",{geometry:d.SM_Roof001.geometry,material:v.M_Roof}),(0,n.jsx)("mesh",{geometry:d.SM_Table001.geometry,material:v.M_Table02,rotation:[0,0,-1.889]}),(0,n.jsx)("mesh",{geometry:d.SM_Vinyls001.geometry,material:v.M_Vinyl,rotation:[0,-.845,0]}),(0,n.jsx)("mesh",{geometry:d.Plane.geometry,material:v.M_Vinyls02}),(0,n.jsx)("mesh",{geometry:d.SM_Wall01001.geometry,material:v.M_Wall01}),(0,n.jsx)("mesh",{geometry:d.SM_Wall02001.geometry,material:v.M_Wall02}),(0,n.jsx)("mesh",{geometry:d.SM_Wall03001.geometry,material:v.M_Wall03}),(0,n.jsx)("mesh",{geometry:d.SM_Wall04001.geometry,material:v.M_Wall04}),(0,n.jsx)("mesh",{geometry:d.SM_Wall04002.geometry,material:v.M_Pictures,position:[-3.855,1.278,-6.189],scale:.364}),(0,n.jsx)("mesh",{geometry:d.SM_Windows001.geometry,material:v.M_Windows}),(0,n.jsx)(eO,{}),(0,n.jsx)(eI,{})]})};var eV=()=>{let e=(0,o.L)("/models/Atelier-2k-fix2.glb"),t=(0,o.L)("/models/KS_Atelier-mobile.glb");return(0,n.jsx)(ez,{desktopModel:e,mobileModel:t})},eL=r(1402);let eN=new u.Color("#FFFFFF");var eW=r(4807);let eZ=e=>{let{sceneKey:t,cameraConfig:r,SceneComponent:n,RendererContainer:o}=e;return{RendererContainer:o,mainRenderTexture:new u.Texture,portalRenderTexture:new u.Texture,sceneKey:t,cameraConfig:r,cameraStore:(0,eW.G)(t),SceneComponent:n,isRendering:!1,isRenderingPortal:!1}},eG={position:[0,-.4,0],target:[0,-.45,1],rotationAngle:[20,1.65],fov:26},eY={position:[-9.5,-1.5,6],target:[0,-.6,-1],rotationAngle:[2,1],fov:24,near:.1,far:90},eK={intro:eZ({sceneKey:"intro",cameraConfig:eY,SceneComponent:()=>{let{scene:e,nodes:t}=(0,o.L)("/models/exterior.glb"),r=(0,s.useRouter)(),c="/"===r.route,{setCursor:g,resetCursor:x}=(0,m.j)(),M=R(e=>e.setUniforms),y=R(e=>e.setRenderReveal),j=(0,p.f)(e=>e.isLoaded),b=(0,l.useMemo)(()=>i.ZP.timeline(),[]);(0,l.useEffect)(()=>{if(j){if(c){let e=R.getState().uniforms.revealFactor.value;if(0!==e)return;y(!0);let t={value:e};b.to(t,{value:1,duration:2.6,delay:2,ease:"power2.inOut",onUpdate:()=>{M({revealFactor:.2*t.value,brushSize:.4*t.value})}})}else M({revealFactor:1.4}),y(!1)}},[c,M,j,b,y]);let S=(0,d.C$)(e=>e.setCamera);(0,l.useEffect)(()=>{S(eY)},[S]);let[C,T]=(0,v.U)({time:0,transitionOpacity:1}),k=(0,l.useMemo)(()=>new u.ShaderMaterial({transparent:!0,uniforms:C,vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vPos;\n\nvoid main() {\n  vUv = uv;\n  vPos = position;\n  vec4 clipSpacePosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  gl_Position = clipSpacePosition;\n}\n",fragmentShader:w}),[C]);(0,h.BE)(e=>{let{elapsedTime:t}=e;T({time:t})});let F=t.ENTER,E=(0,l.useRef)(!1),A=(0,a.A)(e=>e.camera.fov),D=(0,l.useCallback)(()=>{if(E.current)return;E.current=!0,b.kill(),S({position:f(A,.3,P,U).toArray(),target:P.clone().toArray()});let e={value:R.getState().uniforms.revealFactor.value};i.ZP.to(e,{value:1.4,duration:2,ease:"power2.out",onUpdate:()=>{M({revealFactor:e.value})},onComplete:()=>{y(!1)}});let t=i.ZP.timeline(),n={value:0};return t.to(n,{delay:2,value:1,duration:1,ease:"power2.inOut",onUpdate:()=>{F.position.y=-1.038+.8*n.value,M({normalInfluence:1-n.value})},onComplete:()=>{E.current=!1,r.push("/store").then(()=>{i.ZP.to(F.position,{y:-1.038,delay:.3,duration:.3,onComplete:()=>{M({brushSize:0,normalInfluence:1}),T({transitionOpacity:1})}})})}}),t.to(C.transitionOpacity,{value:0,duration:.3},"<"),()=>{t.kill()}},[b,S,A,C.transitionOpacity,M,y,F.position,-1.038,r,T]),B=(0,l.useCallback)(()=>{E.current||i.ZP.timeline().to(F.position,{y:-.988,duration:.2,ease:"power2.out"}).to(F.position,{y:-1.038,duration:.2,ease:"power2.in"})},[-1.038,F.position]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("color",{attach:"background",args:["#6da5bd"]}),(0,n.jsx)("ambientLight",{intensity:3.5}),(0,n.jsx)("primitive",{object:e}),(0,n.jsx)(_,{}),(0,n.jsxs)("mesh",{onPointerOver:()=>{g("pointer"),B()},onPointerOut:()=>x(),onClick:D,position:[-.79,-2.1,-1.47],children:[(0,n.jsx)("planeGeometry",{args:[1.15,1]}),(0,n.jsx)("primitive",{object:k})]})]})},RendererContainer:e=>{let{children:t,sceneKey:r,isPlaying:o,scene:i}=e,s=R(e=>e.renderReveal),{brushTexture:c,canvasNormal:p}=(0,g.m)({brushTexture:"/textures/paint-brush-mask.webp",canvasNormal:"/textures/canvas-normal.webp"},e=>{let[t,r]=e;t.wrapS=t.wrapT=u.RepeatWrapping,t.repeat.set(3,3),r.wrapS=r.wrapT=u.RepeatWrapping,r.repeat.set(3,3)}),m=(0,a.A)(e=>e.camera),v=(0,l.useRef)(null),f=R(e=>e.revealMainPass),S=R(e=>e.setUniforms),C=(0,l.useMemo)(()=>new y.T(j.C),[]),w=(0,a.A)(e=>e.size),P=w.width/w.height;(0,l.useEffect)(()=>{S({uResolution:new u.Vector2(w.width,w.height),aspectRatio:P})},[S,w,P]),(0,l.useEffect)(()=>{S({canvasNormal:p,brushTexture:c})},[S,c,p]),(0,l.useEffect)(()=>{if(!v.current)return;let e=v.current;d.Fj.setState(t=>({scenes:{...t.scenes,[r]:{...t.scenes[r],mainRenderTexture:e.readBuffer.texture,portalRenderTexture:e.readBuffer.texture}}}))},[v.current,r]);let T=(0,l.useMemo)(()=>new u.ShaderMaterial({uniforms:R.getState().uniforms,vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  vec4 clipSpacePosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  gl_Position = clipSpacePosition;\n}\n",fragmentShader:"\nvarying vec2 vUv;\nuniform highp sampler2D drawMap;\nuniform vec2 mouseUv;\nuniform float aspectRatio;\nuniform float delta;\nuniform float brushSize; \n\nfloat getSdf(vec2 p, vec2 center, float radius) {\n  return length(p - center) - radius;\n}\n\nvoid main() {\n\n  vec2 uv = vUv * 2.0 - vec2(1., 1.);\n  uv.x *= aspectRatio;\n  vec2 mousePos = vec2(1. - mouseUv.x, mouseUv.y);\n  mousePos = mousePos * 2.0 - vec2(1., 1.);\n  mousePos.x *= aspectRatio;\n\n  vec2 mapUv = vUv;\n  mapUv.x = 1. - mapUv.x;\n  mapUv.y = 1. - mapUv.y;\n  float alpha = texture2D(drawMap, mapUv).r;\n  float sdf = getSdf(uv, mousePos, brushSize);\n  float brush = clamp( -sdf/fwidth(sdf), 0., 1. );\n\n  alpha += brush;\n  alpha = clamp(alpha, 0.0, 1.0);\n\n  vec3 color = vec3(alpha);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n\n"}),[]),k=(0,b.k)(e=>e.uv),F=R(e=>e.uniforms.mouseUv);return(0,h.BE)(e=>{let{delta:t}=e;S({delta:t}),F.value.lerp(k,Math.min(.1*t*100,1))}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.TI,{onMapTexture:e=>{S({drawMap:e})},isPlaying:s,useGlobalPointer:!0,width:Math.floor(.2*w.width),height:Math.floor(.2*w.height),children:[(0,n.jsx)(x.i,{top:.5,bottom:-.5,left:P/2,right:-P/2,near:.1,far:5,position:[0,0,1],makeDefault:!0}),(0,n.jsxs)("mesh",{rotation:[Math.PI,0,0],children:[(0,n.jsx)("planeGeometry",{args:[P,1]}),(0,n.jsx)("primitive",{object:T})]})]}),(0,n.jsxs)(M.z,{ref:v,disableRender:!o,disableGamma:!0,disableRenderPass:!0,renderToScreen:!1,depthBuffer:!0,children:[(0,n.jsx)("renderPass",{args:[i,m]}),(0,n.jsx)("primitive",{object:C}),(0,n.jsx)("primitive",{object:f})]}),t]})}}),shop:eZ({sceneKey:"shop",cameraConfig:eG,SceneComponent:()=>{let e=(0,l.useRef)(null),t=(0,g.m)("/textures/360.webp",e=>{e.mapping=u.EquirectangularReflectionMapping,e.colorSpace=u.SRGBColorSpace});return(0,n.jsxs)("group",{ref:e,children:[(0,n.jsx)("color",{attach:"background",args:[eN.r,eN.g,eN.b]}),(0,n.jsx)("ambientLight",{color:A.p0,intensity:A.TQ}),(0,n.jsx)("directionalLight",{position:A.yD,color:A.p1,intensity:A.pT}),(0,n.jsx)(E.qA,{map:t}),(0,n.jsx)(eV,{}),(0,n.jsx)(eE,{scale:.168,position:[-2.35,-.83,5.275],rotation:[0,1.57,0]}),(0,n.jsx)(eL.ZP,{}),(0,n.jsx)(eR,{}),(0,n.jsx)($,{}),(0,n.jsx)(eM,{}),(0,n.jsx)(ee.td.Out,{})]})}})}},5323:function(e,t,r){r.d(t,{cB:function(){return i}});var n=r(7294),o=r(9946);let a=(e,t)=>{let[r,a]=n.useState(null!=t?t:window.matchMedia(e).matches);return n.useEffect(()=>{if(!(0,o.Q3)("matchMedia")){console.warn("matchMedia is not supported by your current browser");return}let t=window.matchMedia(e),r=()=>a(t.matches),n=t.addEventListener||t.addListener,i=t.removeEventListener||t.removeListener;return r(),n.call(t,"change",r),()=>{i.call(t,"change",r)}},[e]),r},i=()=>a("(max-width: 1024px)")},6772:function(e,t,r){r.d(t,{U:function(){return o}});var n=r(7294);let o=e=>{let t=(0,n.useMemo)(()=>{let t={};return Object.entries("function"==typeof e?e():e).forEach(e=>{let[r,n]=e;t[r]={value:n}}),t},[]),r=(0,n.useRef)(t),o=(0,n.useCallback)(e=>{Object.entries(e).forEach(e=>{let[t,n]=e;r.current[t].value=n})},[]);return[r.current,o]}},6913:function(e,t,r){r.d(t,{Z:function(){return L}});var n=r(5893),o=r(1804),a=r.n(o),i=r(7294),s=r(8815),l=r(2869),u=r(743),c=r(5323),p=r(4918),m=r(5918),d=r(3857),v=r(6530),f=r(9477),h=r(5876),g=r(9012),x=r(5769),M=r(6772),y=r(295);let j={1:{x:0,y:0},2:{x:.3333,y:0},3:{x:.6666,y:0},4:{x:0,y:.5},5:{x:.3333,y:.5},6:{x:.6666,y:.5}},b=(0,i.memo)(e=>{let{texture:t,...r}=e,o=(0,i.useRef)(null),{aoMap:a,map:s,normalMap:l}=(0,x.m)({aoMap:"/textures/bag-ao.jpg",map:"/textures/bag-color.webp",normalMap:"/textures/bag-leather.jpg"}),[u,c]=(0,M.U)({colorTransition:1,textureCoordsFrom:[0,0],textureCoordsTo:[0,0],transitionMin:.3,transitionMax:.9,transitionDistance:.3,transitionTextureCoords:[.6666,0]}),p=(0,i.useCallback)((e,t)=>{g.p8.fromTo(u.colorTransition,{value:0},{value:1,duration:2*g.th,onStart:()=>{c({textureCoordsFrom:u.textureCoordsTo.value,textureCoordsTo:[e,t]})},onComplete:()=>{c({textureCoordsFrom:[e,t],colorTransition:0})}})},[u,c]);(0,h.Z)(()=>{if(!t||!j[t])return;let e=j[t];p(e.x,e.y)},[p,t]);let m=(0,i.useCallback)(e=>{e.fragmentShader=e.fragmentShader.replace("void main() {","\n          uniform float colorTransition;\n          uniform vec2 textureCoordsFrom;\n          uniform vec2 textureCoordsTo;\n          uniform float transitionMin;\n          uniform float transitionMax;\n          uniform float transitionDistance;\n          uniform vec2 transitionTextureCoords;\n          ".concat(y.ol,"\n          void main() {\n          ")),e.uniforms={...e.uniforms,...u},e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>","\n          #include <map_fragment>\n          vec3 fromColor = texture2D(map, vMapUv + textureCoordsFrom).rgb;\n          vec3 toColor = texture2D(map, vMapUv + textureCoordsTo).rgb;\n          float transitionTop = length(texture2D(map, vMapUv + transitionTextureCoords).rgb) / 1.732;\n          transitionTop = valueRemap(transitionTop, transitionMin, transitionMax, transitionDistance, 1.0);\n          transitionTop = clamp(transitionTop, 0.0, 1.0);\n          float transitionBottom = transitionTop - transitionDistance;\n          float transitonFactor = valueRemap(colorTransition, transitionBottom, transitionTop, 0.0, 1.0);\n          transitonFactor = clamp(transitonFactor, 0.0, 1.0);\n          diffuseColor.rgb = mix(fromColor, toColor, transitonFactor);\n          ")},[u]);return(0,n.jsx)("meshStandardMaterial",{onBeforeCompile:m,ref:o,toneMapped:!1,map:s,"map-channel":1,"map-flipY":!1,"map-colorSpace":"srgb",normalMap:l,normalScale:new f.Vector2(.25,.25),"normalMap-flipY":!1,"normalMap-colorSpace":f.NoColorSpace,"normalMap-channel":0,"normalMap-wrapS":f.RepeatWrapping,"normalMap-wrapT":f.RepeatWrapping,aoMap:a,aoMapIntensity:1,"aoMap-flipY":!1,"aoMap-colorSpace":f.NoColorSpace,"aoMap-channel":2,roughness:.7,metalness:0,...r})});var S=e=>(0,i.useMemo)(()=>e.clone(),[e]);let C={1:{x:0,y:0},2:{x:.3333,y:0},3:{x:.6666,y:0},4:{x:0,y:.5},5:{x:.3333,y:.5},6:{x:.6666,y:.5}},w=(0,i.memo)(e=>{let{texture:t,...r}=e,o=(0,i.useRef)(null),{aoMap:a,map:s,normalMap:l}=(0,x.m)({aoMap:"/textures/bag-ao.jpg",map:"/textures/bag-color.webp",normalMap:"/textures/bag-fabric.jpg"}),u=S(s),c=(0,i.useCallback)((e,t)=>{let{x:r,y:n}=u.offset;g.p8.fromTo(u.offset,{x:r,y:n},{x:e,y:t,duration:g.th/6})},[u.offset]);return(0,h.Z)(()=>{if(!u||!t||!C[t])return;let e=C[t];c(e.x,e.y)},[c,u,t]),(0,n.jsx)("meshStandardMaterial",{ref:o,toneMapped:!1,map:u,"map-channel":1,"map-flipY":!1,"map-colorSpace":"srgb-linear","map-wrapS":f.RepeatWrapping,"map-wrapT":f.RepeatWrapping,normalMap:l,normalScale:new f.Vector2(1,1),"normalMap-flipY":!1,"normalMap-colorSpace":f.NoColorSpace,"normalMap-channel":1,"normalMap-wrapS":f.RepeatWrapping,"normalMap-wrapT":f.RepeatWrapping,aoMap:a,"aoMap-channel":2,"aoMap-colorSpace":f.NoColorSpace,"aoMap-flipY":!1,...r})});var R=r(1182);let P={1:"#0167e7",2:"#ff7e02",3:"#90b05b",4:"#fe3991",5:"#c179c3",6:"#feb101"},T=(0,i.memo)(e=>{let{texture:t,...r}=e,o=(0,i.useRef)(null),{alphaMap:a,map:s,normalMap:l}=(0,x.m)({alphaMap:"/textures/bag-seam-alpha.png",map:"/textures/bag-seam.png",normalMap:"/textures/bag-seam-normal.png"}),u=S(s),c=(0,i.useCallback)(e=>{if(!o.current)return;let{r:t,g:r,b:n}=o.current.color;g.p8.fromTo(o.current.color,{r:t,g:r,b:n},{r:e.r,g:e.g,b:e.b,duration:g.th/6})},[]);return(0,h.Z)(()=>{u&&t&&P[t]&&c(new f.Color(P[t]))},[c,u,t]),(0,n.jsx)("meshStandardMaterial",{ref:o,toneMapped:!1,normalMap:l,normalScale:new f.Vector2(1,1),"normalMap-flipY":!1,"normalMap-colorSpace":f.NoColorSpace,"normalMap-channel":0,"normalMap-wrapS":f.RepeatWrapping,"normalMap-wrapT":f.RepeatWrapping,alphaMap:a,"alphaMap-flipY":!1,"alphaMap-magFilter":f.NearestFilter,"alphaMap-colorSpace":f.NoColorSpace,"alphaMap-wrapS":f.RepeatWrapping,"alphaMap-wrapT":f.RepeatWrapping,transparent:!0,...r})}),k={scale:new f.Vector3(1,1,1)},F=(0,i.forwardRef)((e,t)=>{let{texture:r,size:o,animationOpen:a,activeLandScape:s,...l}=e,u=(0,i.useRef)(null),c=(0,i.useRef)(null),{animations:p,nodes:x}=(0,m.L)("/models/bag.glb"),{actions:M}=(0,d.v)(p,u);return(0,h.Z)(()=>{p.forEach(e=>{let t=M[e.name];t&&(t.reset(),t.clampWhenFinished=!0,t.timeScale=2,t.setLoop(f.LoopOnce,1))})},[M,p]),(0,h.Z)(()=>{let e=M.Open,t=M.Close;e&&t&&(a?(e.isRunning()||e.reset(),e.crossFadeFrom(t,.55,!0),e.play()):(t.isRunning()||t.reset(),t.crossFadeFrom(e,.55,!0),t.play()))},[M,a]),(0,h.Z)(()=>{if(!c.current)return;let e=g.p8.timeline({defaults:{},paused:!0});return s?e.fromTo(c.current.rotation,{z:-Math.PI/2},{z:0,duration:g.th}):e.fromTo(c.current.rotation,{z:0},{z:-Math.PI/2,duration:g.th}),e.play(),()=>{e.kill()}},[s]),(0,n.jsx)("group",{scale:l.scale||k.scale,...l,ref:(0,v.l)([t,c]),children:(0,n.jsxs)("group",{dispose:null,ref:u,children:[(0,n.jsx)("skinnedMesh",{name:"Bag-S",castShadow:!0,geometry:x["Bag-S"].geometry,skeleton:x["Bag-S"].skeleton,children:(0,n.jsx)(b,{texture:r,size:o})}),(0,n.jsx)("skinnedMesh",{name:"Inside-M",geometry:x["Inside-M"].geometry,skeleton:x["Inside-M"].skeleton,children:(0,n.jsx)(w,{texture:r,size:o})}),(0,n.jsx)("skinnedMesh",{name:"Metal-S",castShadow:!0,geometry:x["Metal-S"].geometry,skeleton:x["Metal-S"].skeleton,children:(0,n.jsx)(R.a,{})}),0===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("skinnedMesh",{name:"Ring01",geometry:x.Ring01.geometry,skeleton:x.Ring01.skeleton,children:(0,n.jsx)(R.a,{})}),(0,n.jsx)("skinnedMesh",{name:"Ring02",geometry:x.Ring02.geometry,skeleton:x.Ring02.skeleton,children:(0,n.jsx)(b,{texture:r,size:o})}),(0,n.jsx)("skinnedMesh",{name:"Seam-S",geometry:x["Seam-S"].geometry,skeleton:x["Seam-S"].skeleton,morphTargetDictionary:x["Seam-S"].morphTargetDictionary,morphTargetInfluences:x["Seam-S"].morphTargetInfluences,children:(0,n.jsx)(T,{texture:r})}),(0,n.jsx)("skinnedMesh",{name:"Seam-S02",geometry:x["Seam-S02"].geometry,skeleton:x["Seam-S02"].skeleton,children:(0,n.jsx)(T,{texture:r})})]}),1===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("skinnedMesh",{name:"Metal-M",castShadow:!0,geometry:x["Metal-M"].geometry,skeleton:x["Metal-M"].skeleton,children:(0,n.jsx)(R.a,{})}),(0,n.jsx)("skinnedMesh",{name:"Ring03",geometry:x.Ring03.geometry,skeleton:x.Ring03.skeleton,morphTargetDictionary:x.Ring03.morphTargetDictionary,morphTargetInfluences:x.Ring03.morphTargetInfluences,children:(0,n.jsx)(b,{texture:r,size:o})}),(0,n.jsx)("skinnedMesh",{name:"Seam-M",geometry:x["Seam-M"].geometry,skeleton:x["Seam-M"].skeleton,morphTargetDictionary:x["Seam-M"].morphTargetDictionary,morphTargetInfluences:x["Seam-M"].morphTargetInfluences,children:(0,n.jsx)(T,{texture:r})})]}),(0,n.jsx)("primitive",{object:x.Base}),(0,n.jsx)("primitive",{object:x.neutral_bone})]})})});var U=r(6721),_=r(7854),E=e=>{let{active:t,hover:r,size:o}=e,a=(0,u.R)(),s=(0,i.useMemo)(()=>0===o?p.N3.miniKissingBag:p.N3.kissingBag,[o]),l=(0,i.useMemo)(()=>!t&&r&&!a,[t,r,a]);return(0,n.jsx)(_.V,{wrapperClass:"product-wrapper",center:!0,style:{transition:"all 0.5s",opacity:l?1:0,visibility:l?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:s})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"by KIDSUPER"})})]})})},A=r(793),D=r(211),B=r(5518),O=r(6396);let I=e=>{let{active:t,cameraPosition:r,cameraTarget:n,zoomFactor:o,isDraggingRef:a,isMobile:s,props:l,ref:u,rotation:c}=e;if(B.tq)return;let p=(0,i.useMemo)(()=>new f.Vector3,[]),m=(0,O.Mm)(e=>e.setCamera);(0,A.C)(e=>{u.current&&c&&void 0!==s&&!s&&!a.current&&D.Ui.dampE(u.current.rotation,[t?c[0]+Math.sin(-e.pointer.y)/2:c[0],t?c[1]+Math.sin(-e.pointer.x)/2:c[1],u.current.rotation.z],g.zF/2)}),(0,h.Z)(()=>{if(!u.current)return;let e=g.p8.timeline({defaults:{duration:2*g.th},paused:!0});return l.position instanceof f.Vector3?p.copy(l.position):Array.isArray(l.position)&&p.set(...l.position),t?(m({position:[r[0],r[1],r[2]],target:[n[0],n[1],n[2]],targetUv:s?[.5,.3]:[.3,.5]}),g.p8.set("#kiss-me-button",{pointerEvents:"all",delay:2.5*g.th}),e.to(u.current.position,{x:r[0]+o/2.2||0,y:r[1]-.02||0,z:r[2]+o||0,ease:"power3.out",delay:1.5*g.th,duration:g.th})):(g.p8.set("#kiss-me-button",{pointerEvents:"none"}),e.to(u.current.position,{x:p.x,y:p.y,z:p.z,duration:1.5*g.th})),e.play(),()=>{e.kill()}},[t,s])};var z=r(2653);let V=e=>{let[t,r]=(0,i.useState)(!1),{setCursor:n,resetCursor:o}=(0,z.j)();return{hover:t,handlePointerOut:(0,i.useCallback)(e=>{e.stopPropagation(),r(!1),o()},[o]),handlePointerOver:(0,i.useCallback)(t=>{t.stopPropagation(),r(!0),e?n("grab"):n("pointer")},[e,n])}};var L=e=>{let{cameraPosition:t,cameraTarget:r,zoomFactor:o,rotation:m,size:d,texture:v,handle:f,...h}=e,g=(0,i.useRef)(null),x=(0,i.useRef)(null),M=(0,c.cB)(),{activeLandScape:y,animationOpen:j}=(0,s.q)(),b=(0,u.R)(),{activeTexture:S}=(0,l.J)(f),C=(0,i.useRef)(!1),w=(0,i.useMemo)(()=>!!b&&0!==b.products.length&&a()(b._productR3FGroupProps.title)===f,[b,f]),{hover:R,handlePointerOut:P,handlePointerOver:T}=V(w);return I({active:w,cameraPosition:t,cameraTarget:r,isDraggingRef:C,isMobile:M,props:h,ref:g,rotation:m,zoomFactor:o}),(0,n.jsxs)("group",{name:f,ref:g,rotation:m,...h,children:[!M&&(0,n.jsx)(E,{active:w,hover:R,size:null!=d?d:0}),(0,n.jsxs)(U.N,{enabled:w,global:!0,snap:!0,speed:3,onDragStateChange:e=>{C.current=e},children:[(0,n.jsx)(F,{activeLandScape:!!w&&y,animationOpen:!!w&&j,ref:x,size:d,rotation:[0,0,-Math.PI/2],texture:S||(null!=v?v:0)}),(0,n.jsxs)("mesh",{onPointerOut:e=>M?null:P(e),onPointerOver:e=>M?null:T(e),children:[(0,n.jsx)("boxGeometry",{args:[.4,.4,.4]}),(0,n.jsx)("meshBasicMaterial",{color:"#fff",visible:p.r8,wireframe:p.r8})]})]})]})}},604:function(e,t,r){r.d(t,{k:function(){return f},q:function(){return v}});var n=r(4529),o=r(5893),a=r(5918),i=r(3857),s=r(7294),l=r(9477),u=r(9995),c=r(4807),p=r(5876),m=r(2686);let d=(0,c.G)("la-casa"),v=(0,n.Ue)(()=>({active:null})),f=[{slug:"la-casa",title:"La Casa",canvasPosition:[-.395,.42,14.05],canvasRotation:[0,0,0],canvasSize:[1.44,1.21],CanvasScene:e=>{let{aspectRatio:t}=e,{scene:r}=(0,a.L)("/models/KS_CanvasCasa.glb"),{scene:n,animations:c}=(0,a.L)("/models/KS_CanvasBoy.glb"),{actions:v}=(0,i.v)(c,n),f=(0,s.useMemo)(()=>{let e=v.Running;return e?(e.setLoop(l.LoopRepeat,1/0),e.play(),e):null},[v]),{isPlaying:h}=(0,m.iw)();(0,m.BE)(e=>{let{elapsedTime:t}=e;n.position.z=((t+2.85)%5.7/5.7*2-1)*5}),(0,s.useEffect)(()=>{f&&(h?f.paused=!1:f.paused=!0)},[f,h]);let{setCamera:g}=d();return(0,p.Z)(()=>{g({position:[10,2.1,0],target:[0,2.1,0],rotationAngle:[37,17]},!0)},[g]),(0,o.jsxs)("group",{children:[(0,o.jsx)(u.h,{cameraApi:d,fov:22,aspect:t}),(0,o.jsx)("ambientLight",{intensity:2.5}),(0,o.jsx)("primitive",{object:r}),(0,o.jsx)("group",{position:[-.7,.05,0],children:(0,o.jsx)("primitive",{object:n})})]})},collectionModel:"/models/KS_ClothCasa.glb"}]},7833:function(e,t,r){r.d(t,{Z:function(){return U}});var n=r(5893),o=r(1804),a=r.n(o),i=r(7294),s=r(5518),l=r(2453),u=r(743),c=r(5323),p=r(4918),m=r(9012),d=r(5918),v=r(5769),f=r(9477),h=r(5876),g=r(6772),x=r(295);let M={1:{x:0,y:0},2:{x:.5,y:0}},y=(0,i.memo)(e=>{let{texture:t,...r}=e,o=(0,i.useRef)(null),{map:a,normalMap:s}=(0,v.m)({map:"/textures/puffer/base.webp",normalMap:"/textures/puffer/normal.webp"}),[l,u]=(0,g.U)({colorTransition:1,textureCoordsFrom:[0,0],textureCoordsTo:[0,0],transitionMin:.3,transitionMax:.9,transitionDistance:.3,transitionTextureCoords:[.5,0]}),c=(0,i.useCallback)((e,t)=>{m.p8.fromTo(l.colorTransition,{value:0},{value:1,duration:2*m.th,onStart:()=>{u({textureCoordsFrom:l.textureCoordsTo.value,textureCoordsTo:[e,t]})},onComplete:()=>{u({textureCoordsFrom:[e,t],colorTransition:0})}})},[l,u]);(0,h.Z)(()=>{if(!t||!M[t])return;let e=M[t];c(e.x,e.y)},[c,t]);let p=(0,i.useCallback)(e=>{e.fragmentShader=e.fragmentShader.replace("void main() {","\n          uniform float colorTransition;\n          uniform vec2 textureCoordsFrom;\n          uniform vec2 textureCoordsTo;\n          uniform float transitionMin;\n          uniform float transitionMax;\n          uniform float transitionDistance;\n          uniform vec2 transitionTextureCoords;\n          ".concat(x.ol,"\n          void main() {\n          ")),e.uniforms={...e.uniforms,...l},e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>","\n          #include <map_fragment>\n          vec3 fromColor = texture2D(map, vMapUv + textureCoordsFrom).rgb;\n          vec3 toColor = texture2D(map, vMapUv + textureCoordsTo).rgb;\n          float transitionTop = length(texture2D(map, vMapUv + transitionTextureCoords).rgb) / 1.732;\n          transitionTop = valueRemap(transitionTop, transitionMin, transitionMax, transitionDistance, 1.0);\n          transitionTop = clamp(transitionTop, 0.0, 1.0);\n          float transitionBottom = transitionTop - transitionDistance;\n          float transitonFactor = valueRemap(colorTransition, transitionBottom, transitionTop, 0.0, 1.0);\n          transitonFactor = clamp(transitonFactor, 0.0, 1.0);\n          diffuseColor.rgb = mix(fromColor, toColor, transitonFactor);\n          ")},[l]);return(0,n.jsx)("meshStandardMaterial",{onBeforeCompile:p,ref:o,toneMapped:!1,map:a,"map-flipY":!1,"map-colorSpace":"srgb",normalMap:s,normalScale:new f.Vector2(.25,.25),"normalMap-flipY":!1,"normalMap-colorSpace":f.NoColorSpace,"normalMap-channel":0,"normalMap-wrapS":f.RepeatWrapping,"normalMap-wrapT":f.RepeatWrapping,roughness:.9,metalness:0,...r})}),j=(0,i.forwardRef)((e,t)=>{let{texture:r,...o}=e,{nodes:a,materials:i}=(0,d.L)("/models/puffer.glb");return(0,n.jsxs)("group",{...o,dispose:null,rotation:[0,-Math.PI/2,0],ref:t,children:[(0,n.jsxs)("group",{position:[-.004,-.08,.103],scale:.897,children:[(0,n.jsx)("mesh",{geometry:a.SM_Jacket.geometry,material:i.M_Plastic}),(0,n.jsx)("mesh",{geometry:a.SM_Jacket_1.geometry,material:i.M_Chrome})]}),(0,n.jsx)("mesh",{geometry:a.PUF.geometry,position:[-.02,.048,.084],scale:.429,children:(0,n.jsx)(y,{texture:r})})]})});var b=r(6721),S=r(7854),C=e=>{let{active:t,hover:r}=e,o=(0,u.R)(),a=(0,i.useMemo)(()=>p.N3.kissingPuffer,[]),s=(0,i.useMemo)(()=>!t&&r&&!o,[t,r,o]);return(0,n.jsx)(S.V,{wrapperClass:"product-wrapper",center:!0,style:{transition:"all 0.5s",opacity:s?1:0,visibility:s?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:a})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"by KIDSUPER"})})]})})},w=r(793),R=r(211),P=r(6396);let T=e=>{let{active:t,cameraPosition:r,cameraTarget:n,zoomFactor:o,isDraggingRef:a,isMobile:l,props:u,ref:c,rotation:p}=e;if(s.tq)return;let d=(0,i.useMemo)(()=>new f.Vector3,[]),v=(0,P.Mm)(e=>e.setCamera);(0,w.C)(e=>{c.current&&p&&void 0!==l&&!l&&!a.current&&R.Ui.dampE(c.current.rotation,[t?p[0]+Math.sin(-e.pointer.y):p[0],t?p[1]+Math.sin(-e.pointer.x):p[1],c.current.rotation.z],m.zF/2)}),(0,h.Z)(()=>{if(!c.current)return;let e=m.p8.timeline({defaults:{duration:2*m.th},paused:!0});return u.position instanceof f.Vector3?d.copy(u.position):Array.isArray(u.position)&&d.set(...u.position),t?(v({position:[r[0],r[1],r[2]],target:[n[0],n[1],n[2]],targetUv:l?[.5,.3]:[.3,.5]}),e.to(c.current.position,{x:r[0]+o/2.2||0,y:r[1]-.08||0,z:r[2]+o||0,ease:"power3.out",delay:1.5*m.th,duration:m.th})):e.to(c.current.position,{x:d.x,y:d.y,z:d.z,duration:1.5*m.th}),e.play(),()=>{e.kill()}},[t,l])};var k=r(2653);let F=e=>{let[t,r]=(0,i.useState)(!1),{setCursor:n,resetCursor:o}=(0,k.j)();return{hover:t,handlePointerOut:(0,i.useCallback)(e=>{e.stopPropagation(),r(!1),o()},[o]),handlePointerOver:(0,i.useCallback)(t=>{t.stopPropagation(),r(!0),e?n("grab"):n("pointer")},[e,n])}};var U=e=>{let{cameraPosition:t,cameraTarget:r,zoomFactor:o,texture:d,rotation:v,handle:f,...h}=e,[g,x]=(0,i.useState)(v),M=(0,i.useRef)(null),y=(0,i.useRef)(null),S=(0,c.cB)(),w=(0,u.R)(),R=(0,i.useMemo)(()=>!!w&&0!==w.products.length&&a()(w._productR3FGroupProps.title)===f,[w,f]),P=(0,i.useRef)(!1),{activeTexture:k}=(0,l.g)(f),{hover:U,handlePointerOut:_,handlePointerOver:E}=F(R);return T({active:R,cameraPosition:t,cameraTarget:r,isDraggingRef:P,isMobile:S,props:h,ref:M,rotation:g,zoomFactor:o}),(0,i.useEffect)(()=>{if(s.tq||!M.current)return;let e=m.p8.timeline();return R?e.to(M.current.rotation,{y:-Math.PI/2,ease:"power3.out",delay:1.5*m.th,duration:m.th,onComplete:()=>{x([0,-Math.PI/2,0])}},"<"):e.to(M.current.rotation,{x:0,y:0,z:0,duration:m.th,onComplete:()=>{x([0,0,0])}},"<"),()=>{e.revert()}},[R]),(0,n.jsxs)("group",{name:f,ref:M,rotation:v,...h,children:[!S&&(0,n.jsx)(C,{active:R,hover:U}),(0,n.jsx)("group",{rotation:[0,-(.45*Math.PI),0],children:(0,n.jsxs)(b.N,{enabled:R,global:!0,snap:!0,speed:3,rotation:[0,.45*Math.PI,0],onDragStateChange:e=>{P.current=e},children:[(0,n.jsx)(j,{ref:y,texture:k||(null!=d?d:0)}),(0,n.jsxs)("mesh",{onPointerOut:e=>S?null:_(e),onPointerOver:e=>S?null:E(e),children:[(0,n.jsx)("boxGeometry",{args:[.8,1,.7]}),(0,n.jsx)("meshBasicMaterial",{color:"#fff",visible:p.r8,wireframe:p.r8})]})]})})]})}},6721:function(e,t,r){r.d(t,{N:function(){return u}});var n=r(5893),o=r(5449),a=r(793),i=r(4751),s=r(7294),l=r(9477);function u(e){let{enabled:t=!0,snap:r,global:u,children:c,speed:p=1,rotation:m=[0,0,0],config:d={mass:1,tension:120,friction:35},onDragStateChange:v}=e,f=(0,a.A)(e=>e.events),h=(0,a.A)(e=>e.gl),g=f.connected||h.domElement,{size:x}=(0,a.A)(),M=s.useMemo(()=>[0,0],[]),y=s.useMemo(()=>[-1/0,1/0],[]),j=s.useMemo(()=>[l.MathUtils.clamp(m[0],...M),l.MathUtils.clamp(m[1],...y),m[2]],[y,M,m]),[b,S]=(0,o.useSpring)(()=>({rotation:j,config:d}));s.useEffect(()=>void S.start({rotation:j,config:d}),[S,d,j]);let C=(0,i.useGesture)({onDrag:e=>{let{down:n,delta:[o,a],memo:[i,s]=b.rotation.animation.to||j}=e;if(!t)return[a,o];null==v||v(n),o=l.MathUtils.clamp(s+o/x.width*Math.PI*p,...y),a=l.MathUtils.clamp(i+a/x.height*Math.PI*p,...M);let u=r&&!n&&"boolean"!=typeof r?r:d;return S.start({rotation:r&&!n?j:[a,o,0],config:u}),[a,o]}},{target:u?g:void 0});return(0,n.jsx)(o.a.group,{...null==C?void 0:C(),...b,children:c})}},2201:function(e,t,r){r.d(t,{Z:function(){return _}});var n=r(5893),o=r(1804),a=r.n(o),i=r(7294),s=r(743),l=r(3608),u=r(5323),c=r(4918),p=r(5918),m=r(1182),d=r(5769),v=r(5876),f=r(6772),h=r(9012),g=r(295);let x={1:{x:0,y:0},2:{x:.5,y:0},3:{x:0,y:.5},4:{x:.5,y:.5}},M=(0,i.memo)(e=>{let{texture:t,...r}=e,o=(0,i.useRef)(null),{map:a}=(0,d.m)({map:"/textures/boots/base.webp"}),[s,l]=(0,f.U)({colorTransition:1,textureCoordsFrom:[0,0],textureCoordsTo:[0,0],transitionMin:.3,transitionMax:.9,transitionDistance:.3,transitionTextureCoords:[.5,0]}),u=(0,i.useCallback)((e,t)=>{h.p8.fromTo(s.colorTransition,{value:0},{value:1,duration:2*h.th,onStart:()=>{l({textureCoordsFrom:s.textureCoordsTo.value,textureCoordsTo:[e,t]})},onComplete:()=>{l({textureCoordsFrom:[e,t],colorTransition:0})}})},[s,l]);(0,v.Z)(()=>{if(!t||!x[t])return;let e=x[t];u(e.x,e.y)},[u,t]);let c=(0,i.useCallback)(e=>{e.fragmentShader=e.fragmentShader.replace("void main() {","\n          uniform float colorTransition;\n          uniform vec2 textureCoordsFrom;\n          uniform vec2 textureCoordsTo;\n          uniform float transitionMin;\n          uniform float transitionMax;\n          uniform float transitionDistance;\n          uniform vec2 transitionTextureCoords;\n          ".concat(g.ol,"\n          void main() {\n          ")),e.uniforms={...e.uniforms,...s},e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>","\n          #include <map_fragment>\n          vec3 fromColor = texture2D(map, vMapUv + textureCoordsFrom).rgb;\n          vec3 toColor = texture2D(map, vMapUv + textureCoordsTo).rgb;\n          float transitionTop = length(texture2D(map, vMapUv + transitionTextureCoords).rgb) / 1.732;\n          transitionTop = valueRemap(transitionTop, transitionMin, transitionMax, transitionDistance, 1.0);\n          transitionTop = clamp(transitionTop, 0.0, 1.0);\n          float transitionBottom = transitionTop - transitionDistance;\n          float transitonFactor = valueRemap(colorTransition, transitionBottom, transitionTop, 0.0, 1.0);\n          transitonFactor = clamp(transitonFactor, 0.0, 1.0);\n          diffuseColor.rgb = mix(fromColor, toColor, transitonFactor);\n          ")},[s]);return(0,n.jsx)("meshStandardMaterial",{onBeforeCompile:c,ref:o,toneMapped:!1,map:a,"map-flipY":!1,"map-colorSpace":"srgb",roughness:1,metalness:0,...r})}),y=(0,i.forwardRef)((e,t)=>{let{texture:r,...o}=e,{nodes:a}=(0,p.L)("/models/boot.glb");return(0,n.jsxs)("group",{...o,dispose:null,ref:t,children:[(0,n.jsx)("mesh",{geometry:a.METAL.geometry,children:(0,n.jsx)(m.a,{})}),(0,n.jsx)("mesh",{geometry:a.CORD.geometry,children:(0,n.jsx)(M,{texture:r})}),(0,n.jsx)("mesh",{geometry:a.SHOES.geometry,children:(0,n.jsx)(M,{texture:r})}),(0,n.jsx)("mesh",{geometry:a.BASE.geometry,material:a.BASE.material,children:(0,n.jsx)(M,{texture:r})})]})});var j=r(6721),b=r(7854),S=e=>{let{active:t,hover:r}=e,o=(0,i.useMemo)(()=>c.N3.lowBootsWithSwirls,[]);return(0,n.jsx)(b.V,{wrapperClass:"product-wrapper",center:!0,style:{transition:"all 0.5s",opacity:!t&&r?1:0,visibility:!t&&r?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:o})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"by KIDSUPER"})})]})})},C=r(793),w=r(211),R=r(5518),P=r(9477),T=r(6396);let k=e=>{let{active:t,cameraPosition:r,cameraTarget:n,zoomFactor:o,isDraggingRef:a,isMobile:s,props:l,ref:u,rotation:c}=e;if(R.tq)return;let p=(0,i.useMemo)(()=>new P.Vector3,[]),m=(0,T.Mm)(e=>e.setCamera);(0,C.C)(e=>{u.current&&c&&void 0!==s&&!s&&!a.current&&w.Ui.dampE(u.current.rotation,[t?0+Math.sin(-e.pointer.y):c[0],t?Math.PI+Math.sin(-e.pointer.x):c[1],u.current.rotation.z],h.zF/2)}),(0,v.Z)(()=>{if(!u.current)return;let e=h.p8.timeline({defaults:{duration:2*h.th},paused:!0});return l.position instanceof P.Vector3?p.copy(l.position):Array.isArray(l.position)&&p.set(...l.position),t?(m({position:[r[0],r[1],r[2]],target:[n[0],n[1],n[2]],targetUv:s?[.5,.3]:[.3,.6]}),e.to(u.current.position,{x:r[0]+o/2.2||0,y:r[1]-.05||0,z:r[2]+o||0,ease:"power3.out",delay:1.5*h.th,duration:h.th})):e.to(u.current.position,{x:p.x,y:p.y,z:p.z,duration:1.5*h.th}),e.play(),()=>{e.kill()}},[t,s])};var F=r(2653);let U=e=>{let[t,r]=(0,i.useState)(!1),{setCursor:n,resetCursor:o}=(0,F.j)();return{hover:t,handlePointerOut:(0,i.useCallback)(e=>{e.stopPropagation(),r(!1),o()},[o]),handlePointerOver:(0,i.useCallback)(t=>{t.stopPropagation(),r(!0),e?n("grab"):n("pointer")},[e,n])}};var _=e=>{let{cameraPosition:t,cameraTarget:r,rotation:o,zoomFactor:p,texture:m,handle:d,...v}=e,f=(0,i.useRef)(null),h=(0,i.useRef)(null),g=(0,u.cB)(),x=(0,s.R)(),M=(0,i.useMemo)(()=>!!x&&0!==x.products.length&&a()(x._productR3FGroupProps.title)===d,[x,d]),b=(0,i.useRef)(!1),{activeTexture:C}=(0,l.$)(d),{hover:w,handlePointerOut:R,handlePointerOver:P}=U(M);return k({active:M,cameraPosition:t,cameraTarget:r,isDraggingRef:b,isMobile:g,props:v,ref:f,rotation:o,zoomFactor:p}),(0,n.jsxs)("group",{name:d,ref:f,rotation:o,...v,children:[!g&&(0,n.jsx)(S,{active:M,hover:w}),(0,n.jsx)("group",{rotation:[0,0,0],children:(0,n.jsxs)(j.N,{enabled:M,global:!0,snap:!0,speed:3,rotation:[0,0,0],onDragStateChange:e=>{b.current=e},children:[(0,n.jsx)(y,{ref:h,texture:C||(null!=m?m:4)}),(0,n.jsxs)("mesh",{onPointerOut:e=>g?null:R(e),onPointerOver:e=>g?null:P(e),children:[(0,n.jsx)("boxGeometry",{args:[.5,.5,.5]}),(0,n.jsx)("meshBasicMaterial",{color:"#fff",visible:c.r8,wireframe:c.r8})]})]})})]})}},2686:function(e,t,r){r.d(t,{BE:function(){return p},TI:function(){return m},iw:function(){return c},mM:function(){return u}});var n=r(5893),o=r(793),a=r(7294),i=r(9477),s=r(9354),l=r(5876);let u=(0,a.createContext)({isInsideRenderTexture:!1,isPlaying:!0}),c=()=>(0,a.useContext)(u),p=(e,t)=>{let{isPlaying:r}=c(),n=(0,a.useRef)(0);(0,o.C)((t,o,a)=>{r&&(n.current+=o,e({elapsedTime:n.current,state:t,delta:o,frame:a}))},t)},m=e=>{let{isPlaying:t=!0,width:r=1e3,height:c=1e3,attach:p,fbo:m,onMapTexture:v,onDepthTexture:f,containerScene:h,children:g,useGlobalPointer:x}=e,M=(0,s.f)(e=>e.isLoaded),y=(0,a.useMemo)(()=>m||new i.WebGLRenderTarget(r,c,{samples:8,stencilBuffer:!0,depthTexture:new i.DepthTexture(r,c,i.UnsignedInt248Type),format:i.RGBAFormat}),[m]);(0,l.Z)(()=>{v&&v(y.texture)},[y.texture]),(0,l.Z)(()=>{f&&f(y.depthTexture)},[y.depthTexture]);let j=(0,a.useMemo)(()=>h||new i.Scene,[h]),b=(0,a.useRef)(t),[S,C]=(0,a.useState)(t),w=(0,o.A)(e=>e.size),R=(0,a.useRef)(w);R.current=w,(0,a.useEffect)(()=>{y.setSize(r,c);let e=new AbortController,n=e.signal;if(C(!0),b.current=!0,!t)return setTimeout(()=>{n.aborted||(C(!1),b.current=!1)},100),()=>{e.abort()}},[M,y,t,r,c,C]);let P=(0,a.useCallback)((e,t)=>{if(!b.current||!R.current)return;let{width:r,height:n,left:o,top:a}=R.current,i=e.clientX-o,s=e.clientY-a;t.pointer.set(i/r*2-1,-(s/n*2)+1),t.raycaster.setFromCamera(t.pointer,t.camera)},[R,b]),T=(0,a.useCallback)((e,t,r)=>{var n,o,a,s;if(!b.current)return;let l=null===(n=y.texture)||void 0===n?void 0:n.__r3f.parent;for(;l&&!(l instanceof i.Object3D);)l=l.__r3f.parent;if(!l)return!1;r.raycaster.camera||null===(a=(s=r.events).compute)||void 0===a||a.call(s,e,r,null===(o=r.previousRoot)||void 0===o?void 0:o.getState());let[u]=r.raycaster.intersectObject(l);if(!u)return!1;let c=u.uv;if(!c)return!1;t.raycaster.setFromCamera(t.pointer.set(2*c.x-1,2*c.y-1),t.camera)},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Provider,{value:{isInsideRenderTexture:!0,isPlaying:S},children:(0,o.g)((0,n.jsxs)(d,{fbo:y,children:[g,(0,n.jsx)("group",{onPointerOver:()=>null})]}),j,{events:{compute:x?P:T,priority:0}})}),(0,n.jsx)("primitive",{object:y.texture,attach:p})]})},d=e=>{let{fbo:t,children:r}=e;return(0,o.C)(e=>{e.gl.setRenderTarget(t),e.gl.render(e.scene,e.camera),e.gl.setRenderTarget(null)},2),(0,n.jsx)(n.Fragment,{children:r})}},1182:function(e,t,r){r.d(t,{a:function(){return a}});var n=r(5893),o=r(5769);let a=(0,r(7294).memo)(e=>{let{...t}=e,r=(0,o.m)("/textures/matcap.webp");return r.flipY=!1,(0,n.jsx)("meshMatcapMaterial",{matcap:r,toneMapped:!1,...t})})},1402:function(e,t,r){r.d(t,{jR:function(){return v},kb:function(){return M},nv:function(){return f}});var n=r(5893),o=r(5769),a=r(7854),i=r(793),s=r(990),l=r(1163),u=r(7294),c=r(9477),p=r(2653),m=r(6396),d=r(6772);let v=.5,f=new c.Vector3(3.45,-.78,6.45),h=new c.Vector3(0,-Math.PI/2,0),g=new c.Vector3(0,0,1),x=new c.Euler(h.x,h.y,h.z,"XYZ"),M=g.clone().applyEuler(x);t.ZP=()=>{let e=(0,l.useRouter)(),t="/"===e.route,r=(0,i.A)(e=>e.size),g=r.width/r.height,x=v*g,[M,y]=(0,u.useState)(!1),{setCursor:j,resetCursor:b}=(0,p.j)(),S=(0,m.Fj)(e=>e.activeScene),C=(0,o.m)("/images/intro-preview-wide.webp"),w=(0,m.Fj)(e=>e.scenes.intro.portalRenderTexture),[R,P]=(0,d.U)({uStaticMap:C,uStaticTextureAspectRatio:1,uPortalMap:w,uRevealFactor:0,canvasAspect:g});(0,u.useEffect)(()=>{P({uPortalMap:w})},[P,w]),(0,u.useEffect)(()=>{let e="shop"===S;s.ZP.to(R.uRevealFactor,{value:e?1:0,duration:1.5,delay:.5,ease:"power2.out"})},[S,R]),(0,u.useEffect)(()=>{let e=C.image;P({uStaticTextureAspectRatio:e.width/e.height})},[C,P]),(0,u.useEffect)(()=>{P({canvasAspect:g})},[g,P]);let T=(0,u.useMemo)(()=>new c.ShaderMaterial({uniforms:R,vertexShader:"\n        varying vec2 vUv;\n\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        }\n      ",fragmentShader:"\n        uniform sampler2D uStaticMap;\n        uniform float uStaticTextureAspectRatio;\n        uniform sampler2D uPortalMap;\n        uniform float uRevealFactor;\n        uniform float canvasAspect;\n\n        varying vec2 vUv;\n\n        vec3 clamp3(vec3 color, float min, float max) {\n          return clamp(color, vec3(min), vec3(max));\n        }\n\n        vec3 contrast(vec3 color, float contrast) {\n          return mix(vec3(0.5), mix(vec3(dot(vec3(0.2125, 0.7154, 0.0721), color)), color, contrast), contrast);\n        }\n\n        vec3 brightness(vec3 color, float brightness) {\n          return color + vec3(brightness);\n        }\n\n        vec3 saturation(vec3 color, float saturation) {\n          vec3 grey = vec3(dot(vec3(0.2125, 0.7154, 0.0721), color));\n          return mix(grey, color, saturation);\n        }\n        \n\n        void main() {\n\n          vec2 portalUv = vUv;\n          portalUv.x = (portalUv.x - 0.5) * (canvasAspect / uStaticTextureAspectRatio) + 0.5;\n\n          vec4 staticColor = texture2D(uStaticMap, portalUv);\n          staticColor.rgb *= 0.7;\n          staticColor.rgb = contrast(staticColor.rgb, 1.1);\n          staticColor.rgb = saturation(staticColor.rgb, 1.2);\n          staticColor.rgb = clamp3(staticColor.rgb, 0.0, 1.0);\n          vec4 portalColor = texture2D(uPortalMap, vUv);\n\n          gl_FragColor = mix(staticColor, portalColor, uRevealFactor);\n        }\n      "}),[R]);return(0,n.jsxs)("group",{position:f.toArray(),rotation:h.toArray(),scale:.9,children:[(0,n.jsxs)("mesh",{onPointerOver:()=>{y(!0),j("pointer")},onPointerOut:()=>{y(!1),b()},onClick:()=>{t||e.push("/")},children:[(0,n.jsx)("planeGeometry",{attach:"geometry",args:[x,v]}),(0,n.jsx)("primitive",{attach:"material",object:T})]}),(0,n.jsx)(a.V,{center:!0,wrapperClass:"product-wrapper",style:{transition:"all 0.5s",opacity:M&&!t?1:0,visibility:M&&!t?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"product exterior",children:[(0,n.jsx)("header",{children:(0,n.jsx)("p",{children:"Exterior"})}),(0,n.jsx)("footer",{children:(0,n.jsx)("p",{children:"Go outside"})})]})})]})}},295:function(e,t,r){r.d(t,{TR:function(){return a},jO:function(){return o},ol:function(){return n}});let n="\nfloat valueRemap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n  return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvec2 valueRemap(vec2 value, float oldMin, float oldMax, float newMin, float newMax) {\n  return vec2(\n    valueRemap(value.x, oldMin, oldMax, newMin, newMax),\n    valueRemap(value.y, oldMin, oldMax, newMin, newMax)\n  );\n}\n\nvec3 valueRemap(vec3 value, float oldMin, float oldMax, float newMin, float newMax) {\n  return vec3(\n    valueRemap(value.x, oldMin, oldMax, newMin, newMax),\n    valueRemap(value.y, oldMin, oldMax, newMin, newMax),\n    valueRemap(value.z, oldMin, oldMax, newMin, newMax)\n  );\n}\n",o="\nvec2 rotateUv(float degrees, vec2 center, vec2 uv) {\n  float angle = radians(degrees);\n  mat2 rotationMatrix = mat2(\n      cos(angle), -sin(angle),\n      sin(angle), cos(angle)\n  );\n  vec2 translatedUv = uv - center;\n  vec2 rotatedUv = rotationMatrix * translatedUv;\n  return rotatedUv + center;\n}\n",a="\nvec3 clamp3(vec3 value, float min, float max) {\n  return vec3(\n    clamp(value.x, min, max),\n    clamp(value.y, min, max),\n    clamp(value.z, min, max)\n  );\n}\n\nvec3 clamp3(vec3 value) {\n  return clamp3(value, 0.0, 1.0);\n}\n"}}]);